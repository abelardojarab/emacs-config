<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
  <title>perlce</title>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta http-equiv="Content-Language" content="en-gb">
  <link rel="search" type="application/opensearchdescription+xml" title="Search perldoc.perl.org" href="/static/search.xml"/>
  <link href="static/css-20100830.css" rel="stylesheet" rev="stylesheet" type="text/css" media="screen">
  <link href="static/exploreperl.css" rel="stylesheet" rev="stylesheet" type="text/css">
</head>

<body onLoad="perldoc.startup();" onPageShow="if (event.persisted) perldoc.startup();">
    <div id="page">
      
      <div id="header">
	<div id="homepage_link">
	  <a href="index.html"></a>
	</div>
	<div id="strapline">
	  Perl Programming Documentation
	</div>
	<div id="download_link" class="download">
	  <a href="http://www.perl.org/get.html">Download Perl</a>
	</div>
	<div id="explore_link" class="download">
	  <a id="explore_anchor" href="#">Explore</a>
	</div>
      </div>
      
      <div id="body">
        <div id="left_column">
          <div class="side_group">
            
	    <div class="side_panel doc_panel">
              <p>Manual</p>
              <ul>
                <li><a href="index-overview.html">Overview</a>
                <li><a href="index-tutorials.html">Tutorials</a>
                <li><a href="index-faq.html">FAQs</a>
                <li><a href="index-history.html">History / Changes</a>
                <li><a href="index-licence.html">License</a>
              </ul>
            </div>
            <div class="side_panel doc_panel">
              <p>Reference</p>
              <ul>
                <li><a href="index-language.html">Language</a>
                <li><a href="index-functions.html">Functions</a>
                <li><a href="perlop.html">Operators</a>
                <li><a href="perlvar.html">Special Variables</a>
                <li><a href="index-pragmas.html">Pragmas</a>
                <li><a href="index-utilities.html">Utilities</a>
                <li><a href="index-internals.html">Internals</a>
                <li><a href="index-platforms.html">Platform Specific</a>
              </ul>
            </div>
            <div class="side_panel doc_panel">
              <p>Modules</p>
              <ul>
		<li>
		
                
                  
		    
		  
		
                  
		    
		  
		
                  
		    
		  
		
                  
		    
		  
		
                  
		    
		  
		
                  
		    
		  
		
                  
		    
		  
		
                  
		    
		  
		
                  
		    
		  
		
                  
		
                  
		
                  
		    
		  
		
                  
		    
		  
		
                  
		    
		  
		
                  
		    
		  
		
                  
		    
		  
		
                  
		
                  
		
                  
		    
		  
		
                  
		    
		  
		
                  
		    
		  
		
                  
		
                  
		
                  
		    
		  
		
                  
		
                  
		
		
                    <a href="index-modules-A.html">A</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="index-modules-B.html">B</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="index-modules-C.html">C</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="index-modules-D.html">D</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="index-modules-E.html">E</a>
                    
                      
                        <li>
                      
                    
                
                    <a href="index-modules-F.html">F</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="index-modules-G.html">G</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="index-modules-H.html">H</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="index-modules-I.html">I</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="index-modules-L.html">L</a>
                    
                      
                        <li>
                      
                    
                
                    <a href="index-modules-M.html">M</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="index-modules-N.html">N</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="index-modules-O.html">O</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="index-modules-P.html">P</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="index-modules-S.html">S</a>
                    
                      
                        <li>
                      
                    
                
                    <a href="index-modules-T.html">T</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="index-modules-U.html">U</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="index-modules-X.html">X</a>
                    
                
              </ul>
            </div>
            
	      <div class="side_panel doc_panel">
		<p>Tools</p>
		<ul>
		  <li><a href="preferences.html">Preferences</a>
		</ul>
	      </div>
            
          </div>
        </div>
        <div id="centre_column">
          <div id="content_header">
            <div id="title_bar">
              <div id="page_name">
                <h1>perlce</h1>
              </div>
              <div id="perl_version">
                Perl 5 version 22.0 documentation
              </div>
              <div class="page_links" id="page_links_top">
                <a href="#" onClick="toolbar.goToTop();return false;">Go to top</a>
		
              </div>
	      <div class="page_links" id="page_links_bottom">
		
                  <a href="#" id="page_index_toggle">Show page index</a> &bull;
		
                <a href="#" id="recent_pages_toggle">Show recent pages</a>		
	      </div>
	      <div id="search_form">
		<form action="search.html" method="GET" id="search">
		  <input type="text" name="q" id="search_box" alt="Search">
		</form>
	      </div>
            </div>
            <div id="breadcrumbs">
                
    <a href="index.html">Home</a> &gt;
    
      
        <a href="index-platforms.html">Platform specific</a> &gt;
      
    
    perlce
  

            </div>
          </div>
          <div id="content_body">
	    <!--[if lt IE 7]>
 <div class="noscript">
   <p>
     <strong>It looks like you're using Internet Explorer 6. This is a very old
     browser which does not offer full support for modern websites.</strong>
   </p>
   <p>
     Unfortunately this means that this website will not work on
     your computer.
   </p>
   <p>
     Don't miss out though! To view the site (and get a better experience from
     many other websites), simply upgrade to
     <a href="http://www.microsoft.com/windows/Internet-explorer/default.aspx">Internet
Explorer 8</a>
     or download an alternative browser such as
     <a href="http://www.mozilla.com/en-US/firefox/firefox.html">Firefox</a>,
     <a href="http://www.apple.com/safari/download/">Safari</a>, or
     <a href="http://www.google.co.uk/chrome">Google Chrome</a>.
   </p>
   <p>
     All of these browsers are free. If you're using a PC at work, you may
     need to contact your IT administrator.
   </p>
 </div>
<![endif]-->
	    <noscript>
	      <div class="noscript">
	      <p>
                <strong>Please note: Many features of this site require JavaScript. You appear to have JavaScript disabled,
	        or are running a non-JavaScript capable web browser.</strong>
	      </p>
	      <p>
		To get the best experience, please enable JavaScript or download a modern web browser such as <a href="http://www.microsoft.com/windows/Internet-explorer/default.aspx">Internet Explorer 8</a>, <a href="http://www.mozilla.com/en-US/firefox/firefox.html">Firefox</a>, <a href="http://www.apple.com/safari/download/">Safari</a>, or <a href="http://www.google.co.uk/chrome">Google Chrome</a>.
              </p>
	      </div>
	    </noscript>

	    <div id="recent_pages" class="hud_container">
	      <div id="recent_pages_header" class="hud_header">
		<div id="recent_pages_close" class="hud_close"><a href="#" onClick="recentPages.hide();return false;"></a></div>
		<div id="recent_pages_title" class="hud_title"><span class="hud_span_top">Recently read</span></div>
		<div id="recent_pages_topright" class="hud_topright"></div>
	      </div>
	      <div id="recent_pages_content" class="hud_content">
	      </div>
	      <div id="recent_pages_footer" class="hud_footer">
		<div id="recent_pages_bottomleft" class="hud_bottomleft"></div>
		<div id="recent_pages_bottom" class="hud_bottom"><span class="hud_span_bottom"></span></div>
		<div id="recent_pages_resize" class="hud_resize"></div>
	      </div>
	    </div>
  
	    <div id="from_search"></div>
            <h1>perlce</h1>


  <!--    -->
<ul><li><a href="#NAME">NAME</a><li><a href="#Building-Perl-for-WinCE">Building Perl for WinCE</a><ul><li><a href="#WARNING">WARNING</a><li><a href="#DESCRIPTION">DESCRIPTION</a><li><a href="#General-explanations-on-cross-compiling-WinCE">General explanations on cross-compiling WinCE</a><li><a href="#CURRENT-BUILD-INSTRUCTIONS">CURRENT BUILD INSTRUCTIONS</a><li><a href="#OLD-BUILD-INSTRUCTIONS">OLD BUILD INSTRUCTIONS</a></ul><li><a href="#Using-Perl-on-WinCE">Using Perl on WinCE</a><ul><li><a href="#DESCRIPTION">DESCRIPTION</a><li><a href="#LIMITATIONS">LIMITATIONS</a><li><a href="#ENVIRONMENT">ENVIRONMENT</a><li><a href="#REGISTRY">REGISTRY</a><li><a href="#XS">XS</a><li><a href="#BUGS">BUGS</a><li><a href="#INSTALLATION">INSTALLATION</a></ul><li><a href="#ACKNOWLEDGEMENTS">ACKNOWLEDGEMENTS</a><li><a href="#History-of-WinCE-port">History of WinCE port</a><li><a href="#AUTHORS">AUTHORS</a></ul><a name="NAME"></a><h1>NAME</h1>
<p>perlce - Perl for WinCE</p>
<a name="Building-Perl-for-WinCE"></a><h1>Building Perl for WinCE</h1>
<a name="WARNING"></a><h2>WARNING</h2>
<p><b>Much of this document has become very out of date and needs updating,
rewriting or deleting. The build process was overhauled during the 5.19
development track and the current instructions as of that time are given
in <a href="#CURRENT-BUILD-INSTRUCTIONS">CURRENT BUILD INSTRUCTIONS</a>; the previous build instructions, which
are largely superseded but may still contain some useful information, are
left in <a href="#OLD-BUILD-INSTRUCTIONS">OLD BUILD INSTRUCTIONS</a> but really need removing after anything
of use has been extracted from them.</b></p>
<a name="DESCRIPTION"></a><h2>DESCRIPTION</h2>
<p>This file gives the instructions for building Perl5.8 and above for
WinCE.  Please read and understand the terms under which this
software is distributed.</p>
<a name="General-explanations-on-cross-compiling-WinCE"></a><h2>General explanations on cross-compiling WinCE</h2>
<ul>
<li>
<p><i>miniperl</i> is built. This is a single executable (without DLL), intended
to run on Win32, and it will facilitate remaining build process; all binaries
built after it are foreign and should not run locally.</p>
<p><i>miniperl</i> is built using <i>./win32/Makefile</i>; this is part of normal
build process invoked as dependency from wince/Makefile.ce</p>
</li>
<li>
<p>After <i>miniperl</i> is built, <i>configpm</i> is invoked to create right <i>Config.pm</i>
in right place and its corresponding Cross.pm.</p>
<p>Unlike Win32 build, miniperl will not have <i>Config.pm</i> of host within reach;
it rather will use <i>Config.pm</i> from within cross-compilation directories.</p>
<p>File <i>Cross.pm</i> is dead simple: for given cross-architecture places in @INC
a path where perl modules are, and right <i>Config.pm</i> in that place.</p>
<p>That said, <code class="inline"><span class="w">miniperl</span> -<span class="w">Ilib</span> -<span class="w">MConfig</span> -<span class="w">we</span> <span class="n">1</span></code>
 should report an error, because
it can not find <i>Config.pm</i>. If it does not give an error -- wrong <i>Config.pm</i>
is substituted, and resulting binaries will be a mess.</p>
<p><code class="inline"><span class="w">miniperl</span> -<span class="w">MCross</span> -<span class="w">MConfig</span> -<span class="w">we</span> <span class="n">1</span></code>
 should run okay, and it will provide right
<i>Config.pm</i> for further compilations.</p>
</li>
<li>
<p>During extensions build phase, a script <i>./win32/buldext.pl</i> is invoked,
which in turn steps in <i>./ext</i> subdirectories and performs a build of
each extension in turn.</p>
<p>All invokes of <i>Makefile.PL</i> are provided with <code class="inline">-<span class="w">MCross</span></code>
 so to enable cross-
compile.</p>
</li>
</ul>
<a name="CURRENT-BUILD-INSTRUCTIONS"></a><h2>CURRENT BUILD INSTRUCTIONS</h2>
<p>(These instructions assume the host is 32-bit Windows. If you're on 64-bit
Windows then change "C:\Program Files" to "C:\Program Files (x86)" throughout.)</p>
<p>1. Install EVC4 from</p>
<pre class="verbatim"><ol><li>    <span class="j">http:</span><span class="q">//</span><span class="w">download</span>.<span class="w">microsoft</span>.<span class="w">com</span>/<span class="w">download</span>/<span class="w">c</span>/<span class="n">3</span>/<span class="w">f</span>/<span class="w">c3f8b58b</span>-<span class="n">9753</span>-<span class="n">4</span><span class="w">c2e</span>-<span class="n">8</span><span class="w">b96</span>-<span class="n">2</span><span class="w">dfe3476a2f7</span>/<span class="w">eVC4</span>.<span class="w">exe</span></li></ol></pre><p>Use the key mentioned at</p>
<pre class="verbatim"><ol><li>    <span class="j">http:</span><span class="q">//</span><span class="w">download</span>.<span class="w">cnet</span>.<span class="w">com</span>/<span class="w">Microsoft</span>-<span class="w">eMbedded</span>-<span class="w">Visual</span>-C<span class="q">/3000-2212_4-10108490.html?tag=bc</span></li></ol></pre><p>The installer is ancient and has a few bugs on the paths it uses. You 
will have to fix them later. Basically, some things go into "C:/Program 
Files/Windows CE Tools", others go into "C:/Windows CE Tools" regardless 
of the path you gave to the installer (the default will be "C:/Windows 
CE Tools"). Reboots will be required for the installer to proceed. Also 
.c and .h associations with Visual Studio might get overridden when 
installing EVC4. You have been warned.</p>
<p>2. Download celib from GitHub (using "Download ZIP") at</p>
<pre class="verbatim"><ol><li>    <span class="j">https:</span><span class="q">//github</span>.<span class="w">com</span><span class="q">/bulk88/celib</span></li></ol></pre><p>Extract it to a spaceless path but not into the perl build source.
I call this directory "celib-palm-3.0" but in the GitHub 
snapshot it will be called "celib-master". Make a copy of the 
"wince-arm-pocket-wce300-release" folder and rename the copy to 
"wince-arm-pocket-wce400". This is a hack so we can build a CE 4.0 
binary by linking in CE 3.0 ARM asm; the linker doesn't care. Windows 
Mobile/WinCE are backwards compatible with machine code like Desktop Windows.</p>
<p>3. Download console-1.3-src.tar.gz from</p>
<pre class="verbatim"><ol><li>    <span class="j">http:</span><span class="q">//sourceforge</span>.<span class="w">net</span>/<span class="w">projects</span>/<span class="w">perlce</span>/<span class="w">files</span>/<span class="w">PerlCE</span><span class="i">%20support</span>%<span class="n">20</span><span class="w">files</span><span class="q">/console/</span></li></ol></pre><p>Extract it to a spaceless path but not into the perl build source. 
Don't extract it into the same directory as celib. Make a copy of the 
"wince-arm-pocket-wce300" folder and rename the copy to 
"wince-arm-pocket-wce400". This is a hack so we can build a CE 4.0 
binary by linking in CE 3.0 ARM asm; the linker doesn't care. Windows 
Mobile/WinCE are backwards compatible with machine code like Desktop Windows.</p>
<p>4. Open a command prompt, run your regular batch file to set the environment
for desktop Visual C building, goto the perl source directory, cd into win32/,
fill out Makefile, and do a "nmake all" to build a Desktop Perl.</p>
<p>5. Open win32/Makefile.ce in a text editor and do something similar to the 
following patch.</p>
<pre class="verbatim"><ol><li>    -<span class="w">CELIBDLLDIR</span>  = <span class="w">h</span><span class="co">:</span>\<span class="w">src</span>\<span class="w">wince</span>\<span class="w">celib</span>-<span class="w">palm</span>-<span class="n">3.0</span></li><li>    -<span class="w">CECONSOLEDIR</span> = <span class="w">h</span><span class="co">:</span>\<span class="w">src</span>\<span class="w">wince</span>\<span class="w">w32console</span></li><li>    +<span class="w">CELIBDLLDIR</span>  = <span class="w">C</span><span class="co">:</span>\<span class="w">sources</span>\<span class="w">celib</span>-<span class="w">palm</span>-<span class="n">3.0</span></li><li>    +<span class="w">CECONSOLEDIR</span> = <span class="w">C</span><span class="co">:</span>\<span class="w">sources</span>\<span class="w">w32console</span></li></ol></pre><p>Also change</p>
<pre class="verbatim"><ol><li>    !<a class="l_k" href="functions/if.html">if</a> <span class="q">&quot;$(MACHINE)&quot;</span> == <span class="q">&quot;&quot;</span></li><li>    <span class="w">MACHINE</span>=<span class="w">wince</span>-<span class="w">arm</span>-<span class="w">hpc</span>-<span class="w">wce300</span></li><li>    <span class="c">#MACHINE=wince-arm-hpc-wce211</span></li><li>    <span class="c">#MACHINE=wince-sh3-hpc-wce211</span></li><li>    <span class="c">#MACHINE=wince-mips-hpc-wce211</span></li><li>    <span class="c">#MACHINE=wince-sh3-hpc-wce200</span></li><li>    <span class="c">#MACHINE=wince-mips-hpc-wce200</span></li><li>    <span class="c">#MACHINE=wince-arm-pocket-wce300</span></li><li>    <span class="c">#MACHINE=wince-mips-pocket-wce300</span></li><li>    <span class="c">#MACHINE=wince-sh3-pocket-wce300</span></li><li>    <span class="c">#MACHINE=wince-x86em-pocket-wce300</span></li><li>    <span class="c">#MACHINE=wince-mips-palm-wce211</span></li><li>    <span class="c">#MACHINE=wince-sh3-palm-wce211</span></li><li>    <span class="c">#MACHINE=wince-x86em-palm-wce211</span></li><li>    <span class="c">#MACHINE=wince-x86-hpc-wce300</span></li><li>    <span class="c">#MACHINE=wince-arm-pocket-wce400</span></li><li>    !<span class="w">endif</span></li></ol></pre><p>to</p>
<pre class="verbatim"><ol><li>    !<a class="l_k" href="functions/if.html">if</a> <span class="q">&quot;$(MACHINE)&quot;</span> == <span class="q">&quot;&quot;</span></li><li>    <span class="c">#MACHINE=wince-arm-hpc-wce300</span></li><li>    <span class="c">#MACHINE=wince-arm-hpc-wce211</span></li><li>    <span class="c">#MACHINE=wince-sh3-hpc-wce211</span></li><li>    <span class="c">#MACHINE=wince-mips-hpc-wce211</span></li><li>    <span class="c">#MACHINE=wince-sh3-hpc-wce200</span></li><li>    <span class="c">#MACHINE=wince-mips-hpc-wce200</span></li><li>    <span class="c">#MACHINE=wince-arm-pocket-wce300</span></li><li>    <span class="c">#MACHINE=wince-mips-pocket-wce300</span></li><li>    <span class="c">#MACHINE=wince-sh3-pocket-wce300</span></li><li>    <span class="c">#MACHINE=wince-x86em-pocket-wce300</span></li><li>    <span class="c">#MACHINE=wince-mips-palm-wce211</span></li><li>    <span class="c">#MACHINE=wince-sh3-palm-wce211</span></li><li>    <span class="c">#MACHINE=wince-x86em-palm-wce211</span></li><li>    <span class="c">#MACHINE=wince-x86-hpc-wce300</span></li><li>    <span class="w">MACHINE</span>=<span class="w">wince</span>-<span class="w">arm</span>-<span class="w">pocket</span>-<span class="w">wce400</span></li><li>    !<span class="w">endif</span></li></ol></pre><p>so wince-arm-pocket-wce400 is the MACHINE type.</p>
<p>6. Use a text editor to open "C:\Program Files\Microsoft eMbedded C++ 
4.0\EVC\WCE400\BIN\WCEARMV4.BAT". Look for</p>
<pre class="verbatim"><ol><li>    <a class="l_k" href="functions/if.html">if</a> <span class="q">&quot;%SDKROOT%&quot;</span>==<span class="q">&quot;&quot;</span> <span class="w">set</span> <span class="w">SDKROOT</span>=...</li></ol></pre><p>On a new install it is "C:\Windows CE Tools". Goto 
"C:\Windows CE Tools" in a file manager and see if "C:\Windows CE 
Tools\wce400\STANDARDSDK\Include\Armv4" exists on your disk. If not
the SDKROOT need to be changed to "C:\Program Files\Windows CE Tools".</p>
<p>Goto celib-palm-3.0\inc\cewin32.h, search for</p>
<pre class="verbatim"><ol><li>    <span class="w">typedef</span> <span class="w">struct</span> <span class="i">_ABC</span> <span class="s">{</span></li></ol></pre><p>and uncomment the struct.</p>
<p>7. Open another command prompt, ensure PLATFORM is not set to anything
already unless you know what you're doing (so that the correct default
value is set by the next command), and run "C:\Program Files\Microsoft
eMbedded C++ 4.0\EVC\WCE400\BIN\WCEARMV4.BAT"</p>
<p>8. In the WinCE command prompt you made with WCEARMV4.BAT, goto the perl 
source directory, cd into win32/ and run "nmake -f Makefile.ce".</p>
<p>9. The ARM perl interpreter (perl519.dll and perl.exe) will be in something
like "C:\perl519\src\win32\wince-arm-pocket-wce400", with the XS DLLs in
"C:\perl519\src\xlib\wince-arm-hpc-wce400\auto".</p>
<p>To prove success on the host machine, run
"dumpbin /headers wince-arm-pocket-wce400\perl.exe" from the win32/ folder
and look for "machine (ARM)" in the FILE HEADER VALUES and
"subsystem (Windows CE GUI)" in the OPTIONAL HEADER VALUES.</p>
<a name="OLD-BUILD-INSTRUCTIONS"></a><h2>OLD BUILD INSTRUCTIONS</h2>
<p>This section describes the steps to be performed to build PerlCE.
You may find additional information about building perl for WinCE
at <a href="http://perlce.sourceforge.net">http://perlce.sourceforge.net</a> and some pre-built binaries.</p>
<a name="Tools-%26-SDK"></a><h3>Tools &amp; SDK</h3>
<p>For compiling, you need following:</p>
<ul>
<li><a name="*-Microsoft-Embedded-Visual-Tools"></a><b>Microsoft Embedded Visual Tools</b>
</li>
<li><a name="*-Microsoft-Visual-C%2b%2b"></a><b>Microsoft Visual C++</b>
</li>
<li><a name="*-Rainer-Keuchel's-celib-sources"></a><b>Rainer Keuchel's celib-sources</b>
</li>
<li><a name="*-Rainer-Keuchel's-console-sources"></a><b>Rainer Keuchel's console-sources</b>
</li>
</ul>
<p>Needed source files can be downloaded at
<a href="http://perlce.sourceforge.net">http://perlce.sourceforge.net</a></p>
<a name="Make"></a><h3>Make</h3>
<p>Normally you only need to edit <i>./win32/ce-helpers/compile.bat</i>
to reflect your system and run it.</p>
<p>File <i>./win32/ce-helpers/compile.bat</i> is actually a wrapper to call
<code class="inline"><span class="w">nmake</span> -f <span class="w">makefile</span>.<span class="w">ce</span></code>
 with appropriate parameters and it accepts extra
parameters and forwards them to <code class="inline"><span class="w">nmake</span></code>
 command as additional
arguments. You should pass target this way.</p>
<p>To prepare distribution you need to do following:</p>
<ul>
<li><a name="*-go-to-_.%2fwin32_-subdirectory"></a><b>go to <i>./win32</i> subdirectory</b>
</li>
<li><a name="*-edit-file-_.%2fwin32%2fce-helpers%2fcompile.bat_"></a><b>edit file <i>./win32/ce-helpers/compile.bat</i></b>
</li>
<li><a name="*-run----compile.bat"></a><b>run 
  compile.bat</b>
</li>
<li><a name="*-run----compile.bat-dist"></a><b>run 
  compile.bat dist</b>
</li>
</ul>
<p><i>Makefile.ce</i> has <code class="inline"><span class="w">CROSS_NAME</span></code>
 macro, and it is used further to refer to
your cross-compilation scheme. You could assign a name to it, but this
is not necessary, because by default it is assigned after your machine
configuration name, such as "wince-sh3-hpc-wce211", and this is enough
to distinguish different builds at the same time. This option could be
handy for several different builds on same platform to perform, say,
threaded build. In a following example we assume that all required
environment variables are set properly for C cross-compiler (a special
*.bat file could fit perfectly to this purpose) and your <i>compile.bat</i>
has proper "MACHINE" parameter set, to, say, <code class="inline"><span class="w">wince</span>-<span class="w">mips</span>-<span class="w">pocket</span>-<span class="w">wce300</span></code>
.</p>
<pre class="verbatim"><ol><li>  <span class="w">compile</span>.<span class="w">bat</span></li><li>  <span class="w">compile</span>.<span class="w">bat</span> <span class="w">dist</span></li><li>  <span class="w">compile</span>.<span class="w">bat</span> <span class="w">CROSS_NAME</span>=<span class="w">mips</span>-<span class="w">wce300</span>-<span class="w">thr</span> <span class="q">&quot;USE_ITHREADS=define&quot;</span> ^</li><li>    <span class="q">&quot;USE_IMP_SYS=define&quot;</span> <span class="q">&quot;USE_MULTI=define&quot;</span></li><li>  <span class="w">compile</span>.<span class="w">bat</span> <span class="w">CROSS_NAME</span>=<span class="w">mips</span>-<span class="w">wce300</span>-<span class="w">thr</span> <span class="q">&quot;USE_ITHREADS=define&quot;</span> ^</li><li>    <span class="q">&quot;USE_IMP_SYS=define&quot;</span> <span class="q">&quot;USE_MULTI=define&quot;</span> <span class="w">dist</span></li></ol></pre><p>If all goes okay and no errors during a build, you'll get two independent
distributions: <code class="inline"><span class="w">wince</span>-<span class="w">mips</span>-<span class="w">pocket</span>-<span class="w">wce300</span></code>
 and <code class="inline"><span class="w">mips</span>-<span class="w">wce300</span>-<span class="w">thr</span></code>
.</p>
<p>Target <code class="inline"><span class="w">dist</span></code>
 prepares distribution file set. Target <code class="inline"><span class="w">zipdist</span></code>
 performs
same as <code class="inline"><span class="w">dist</span></code>
 but additionally compresses distribution files into zip
archive.</p>
<p>NOTE: during a build there could be created a number (or one) of <i>Config.pm</i>
for cross-compilation ("foreign" <i>Config.pm</i>) and those are hidden inside
<i>../xlib/$(CROSS_NAME)</i> with other auxiliary files, but, and this is important to
note, there should be <b>no</b> <i>Config.pm</i> for host miniperl.
If you'll get an error that perl could not find Config.pm somewhere in building
process this means something went wrong. Most probably you forgot to
specify a cross-compilation when invoking miniperl.exe to Makefile.PL
When building an extension for cross-compilation your command line should
look like</p>
<pre class="verbatim"><ol><li>  ..\<span class="w">miniperl</span>.<span class="w">exe</span> -<span class="w">I</span>..\<span class="w">lib</span> -<span class="w">MCross</span>=<span class="w">mips</span>-<span class="w">wce300</span>-<span class="w">thr</span> <span class="w">Makefile</span>.<span class="w">PL</span></li></ol></pre><p>or just</p>
<pre class="verbatim"><ol><li>  ..\<span class="w">miniperl</span>.<span class="w">exe</span> -<span class="w">I</span>..\<span class="w">lib</span> -<span class="w">MCross</span> <span class="w">Makefile</span>.<span class="w">PL</span></li></ol></pre><p>to refer a cross-compilation that was created last time.</p>
<p>All questions related to building for WinCE devices could be asked in
<i>perlce-user@lists.sourceforge.net</i> mailing list.</p>
<a name="Using-Perl-on-WinCE"></a><h1>Using Perl on WinCE</h1>
<a name="DESCRIPTION"></a><h2>DESCRIPTION</h2>
<p>PerlCE is currently linked with a simple console window, so it also
works on non-hpc devices.</p>
<p>The simple stdio implementation creates the files <i>stdin.txt</i>,
<i>stdout.txt</i> and <i>stderr.txt</i>, so you might examine them if your
console has only a limited number of cols.</p>
<p>When exitcode is non-zero, a message box appears, otherwise the
console closes, so you might have to catch an exit with
status 0 in your program to see any output.</p>
<p>stdout/stderr now go into the files <i>/perl-stdout.txt</i> and
<i>/perl-stderr.txt.</i></p>
<p>PerlIDE is handy to deal with perlce.</p>
<a name="LIMITATIONS"></a><h2>LIMITATIONS</h2>
<p>No fork(), pipe(), popen() etc.</p>
<a name="ENVIRONMENT"></a><h2>ENVIRONMENT</h2>
<p>All environment vars must be stored in HKLM\Environment as
strings. They are read at process startup.</p>
<ul>
<li><a name="PERL5LIB"></a><b>PERL5LIB</b>
<p>Usual perl lib path (semi-list).</p>
</li>
<li><a name="PATH"></a><b>PATH</b>
<p>Semi-list for executables.</p>
</li>
<li><a name="TMP"></a><b>TMP</b>
<p>- Tempdir.</p>
</li>
<li><a name="UNIXROOTPATH"></a><b>UNIXROOTPATH</b>
<p>- Root for accessing some special files, i.e. <i>/dev/null</i>, <i>/etc/services</i>.</p>
</li>
<li><a name="ROWS%2fCOLS"></a><b>ROWS/COLS</b>
<p>- Rows/cols for console.</p>
</li>
<li><a name="HOME"></a><b>HOME</b>
<p>- Home directory.</p>
</li>
<li><a name="CONSOLEFONTSIZE"></a><b>CONSOLEFONTSIZE</b>
<p>- Size for console font.</p>
</li>
</ul>
<p>You can set these with cereg.exe, a (remote) registry editor
or via the PerlIDE.</p>
<a name="REGISTRY"></a><h2>REGISTRY</h2>
<p>To start perl by clicking on a perl source file, you have
to make the according entries in HKCR (see <i>ce-helpers/wince-reg.bat</i>).
cereg.exe (which must be executed on a desktop pc with
ActiveSync) is reported not to work on some devices.
You have to create the registry entries by hand using a 
registry editor.</p>
<a name="XS"></a><h2>XS</h2>
<p>The following Win32-Methods are built-in:</p>
<pre class="verbatim"><ol><li>	<span class="i">newXS</span><span class="s">(</span><span class="q">&quot;Win32::GetCwd&quot;</span><span class="cm">,</span> <span class="w">w32_GetCwd</span><span class="cm">,</span> <span class="w">file</span><span class="s">)</span><span class="sc">;</span></li><li>	<span class="i">newXS</span><span class="s">(</span><span class="q">&quot;Win32::SetCwd&quot;</span><span class="cm">,</span> <span class="w">w32_SetCwd</span><span class="cm">,</span> <span class="w">file</span><span class="s">)</span><span class="sc">;</span></li><li>	<span class="i">newXS</span><span class="s">(</span><span class="q">&quot;Win32::GetTickCount&quot;</span><span class="cm">,</span> <span class="w">w32_GetTickCount</span><span class="cm">,</span> <span class="w">file</span><span class="s">)</span><span class="sc">;</span></li><li>	<span class="i">newXS</span><span class="s">(</span><span class="q">&quot;Win32::GetOSVersion&quot;</span><span class="cm">,</span> <span class="w">w32_GetOSVersion</span><span class="cm">,</span> <span class="w">file</span><span class="s">)</span><span class="sc">;</span></li><li>	<span class="i">newXS</span><span class="s">(</span><span class="q">&quot;Win32::IsWinNT&quot;</span><span class="cm">,</span> <span class="w">w32_IsWinNT</span><span class="cm">,</span> <span class="w">file</span><span class="s">)</span><span class="sc">;</span></li><li>	<span class="i">newXS</span><span class="s">(</span><span class="q">&quot;Win32::IsWin95&quot;</span><span class="cm">,</span> <span class="w">w32_IsWin95</span><span class="cm">,</span> <span class="w">file</span><span class="s">)</span><span class="sc">;</span></li><li>	<span class="i">newXS</span><span class="s">(</span><span class="q">&quot;Win32::IsWinCE&quot;</span><span class="cm">,</span> <span class="w">w32_IsWinCE</span><span class="cm">,</span> <span class="w">file</span><span class="s">)</span><span class="sc">;</span></li><li>	<span class="i">newXS</span><span class="s">(</span><span class="q">&quot;Win32::CopyFile&quot;</span><span class="cm">,</span> <span class="w">w32_CopyFile</span><span class="cm">,</span> <span class="w">file</span><span class="s">)</span><span class="sc">;</span></li><li>	<span class="i">newXS</span><span class="s">(</span><span class="q">&quot;Win32::Sleep&quot;</span><span class="cm">,</span> <span class="w">w32_Sleep</span><span class="cm">,</span> <span class="w">file</span><span class="s">)</span><span class="sc">;</span></li><li>	<span class="i">newXS</span><span class="s">(</span><span class="q">&quot;Win32::MessageBox&quot;</span><span class="cm">,</span> <span class="w">w32_MessageBox</span><span class="cm">,</span> <span class="w">file</span><span class="s">)</span><span class="sc">;</span></li><li>	<span class="i">newXS</span><span class="s">(</span><span class="q">&quot;Win32::GetPowerStatus&quot;</span><span class="cm">,</span> <span class="w">w32_GetPowerStatus</span><span class="cm">,</span> <span class="w">file</span><span class="s">)</span><span class="sc">;</span></li><li>	<span class="i">newXS</span><span class="s">(</span><span class="q">&quot;Win32::GetOemInfo&quot;</span><span class="cm">,</span> <span class="w">w32_GetOemInfo</span><span class="cm">,</span> <span class="w">file</span><span class="s">)</span><span class="sc">;</span></li><li>	<span class="i">newXS</span><span class="s">(</span><span class="q">&quot;Win32::ShellEx&quot;</span><span class="cm">,</span> <span class="w">w32_ShellEx</span><span class="cm">,</span> <span class="w">file</span><span class="s">)</span><span class="sc">;</span></li></ol></pre><a name="BUGS"></a><h2>BUGS</h2>
<p>Opening files for read-write is currently not supported if
they use stdio (normal perl file handles).</p>
<p>If you find bugs or if it does not work at all on your
device, send mail to the address below. Please report
the details of your device (processor, ceversion, 
devicetype (hpc/palm/pocket)) and the date of the downloaded
files.</p>
<a name="INSTALLATION"></a><h2>INSTALLATION</h2>
<p>Currently installation instructions are at <a href="http://perlce.sourceforge.net/">http://perlce.sourceforge.net/</a>.</p>
<p>After installation &amp; testing processes will stabilize, information will
be more precise.</p>
<a name="ACKNOWLEDGEMENTS"></a><h1>ACKNOWLEDGEMENTS</h1>
<p>The port for Win32 was used as a reference.</p>
<a name="History-of-WinCE-port"></a><h1>History of WinCE port</h1>
<dl>
<dt>5.</dt><dd><a name="5.6.0"></a><b>6.0</b>
<p>Initial port of perl to WinCE. It was performed in separate directory
named <i>wince</i>. This port was based on contents of <i>./win32</i> directory.
<i>miniperl</i> was not built, user must have HOST perl and properly edit
<i>makefile.ce</i> to reflect this.</p>
</dd>
<dt>5.</dt><dd><a name="5.8.0"></a><b>8.0</b>
<p>wince port was kept in the same <i>./wince</i> directory, and <i>wince/Makefile.ce</i>
was used to invoke native compiler to create HOST miniperl, which then
facilitates cross-compiling process.
Extension building support was added.</p>
</dd>
<dt>5.</dt><dd><a name="5.9.4"></a><b>9.4</b>
<p>Two directories <i>./win32</i> and <i>./wince</i> were merged, so perlce build
process comes in <i>./win32</i> directory.</p>
</dd>
</dl>
<a name="AUTHORS"></a><h1>AUTHORS</h1>
<ul>
<li><a name="Rainer-Keuchel-%3ccoyxc%40rainer-keuchel.de%3e"></a><b>Rainer Keuchel &lt;coyxc@rainer-keuchel.de&gt;</b>
<p>provided initial port of Perl, which appears to be most essential work, as
it was a breakthrough on having Perl ported at all.
Many thanks and obligations to Rainer!</p>
</li>
<li><a name="Vadim-Konovalov"></a><b>Vadim Konovalov</b>
<p>made further support of WinCE port.</p>
</li>
<li><a name="Daniel-Dragan"></a><b>Daniel Dragan</b>
<p>updated the build process during the 5.19 development track.</p>
</li>
</ul>




  <div id="page_index" class="hud_container">
    <div id="page_index_header" class="hud_header">
      <div id="page_index_close" class="hud_close"><a href="#" onClick="pageIndex.hide();return false;"></a></div>
      <div id="page_index_title" class="hud_title"><span class="hud_span_top">Page index</span></div>
      <div id="page_index_topright" class="hud_topright"></div>
    </div>
    <div id="page_index_content" class="hud_content">
      <ul><li><a href="#NAME">NAME</a><li><a href="#Building-Perl-for-WinCE">Building Perl for WinCE</a><ul><li><a href="#WARNING">WARNING</a><li><a href="#DESCRIPTION">DESCRIPTION</a><li><a href="#General-explanations-on-cross-compiling-WinCE">General explanations on cross-compiling WinCE</a><li><a href="#CURRENT-BUILD-INSTRUCTIONS">CURRENT BUILD INSTRUCTIONS</a><li><a href="#OLD-BUILD-INSTRUCTIONS">OLD BUILD INSTRUCTIONS</a></ul><li><a href="#Using-Perl-on-WinCE">Using Perl on WinCE</a><ul><li><a href="#DESCRIPTION">DESCRIPTION</a><li><a href="#LIMITATIONS">LIMITATIONS</a><li><a href="#ENVIRONMENT">ENVIRONMENT</a><li><a href="#REGISTRY">REGISTRY</a><li><a href="#XS">XS</a><li><a href="#BUGS">BUGS</a><li><a href="#INSTALLATION">INSTALLATION</a></ul><li><a href="#ACKNOWLEDGEMENTS">ACKNOWLEDGEMENTS</a><li><a href="#History-of-WinCE-port">History of WinCE port</a><li><a href="#AUTHORS">AUTHORS</a></ul>
    </div>
    <div id="page_index_footer" class="hud_footer">
      <div id="page_index_bottomleft" class="hud_bottomleft"></div>
      <div id="page_index_bottom" class="hud_bottom"><span class="hud_span_bottom"></span></div>
      <div id="page_index_resize" class="hud_resize"></div>
    </div>
  </div>


	    &nbsp;
          </div>
          <div id="content_footer">
          </div>
        </div>
        <div class="clear"></div>
      </div>
      
    <div id="footer">
      <div id="footer_content">
        <div id="footer_strapline">
          perldoc.perl.org - Official documentation for the Perl programming language
        </div>
        <div id="footer_links">
          <div id="address">
            <p class="name">Contact details</p>
            <p class="address">
	      Site maintained by <a href="mailto:jj@jonallen.info">Jon Allen (JJ)</a><br>
	    </p>
            <p class="contact">
              Documentation maintained by the <a href="http://lists.cpan.org/showlist.cgi?name=perl5-porters">Perl 5 Porters</a>
            </p>
          </div>
          <ul class="f1">
            <li>Manual
              <ul class="f2">
                <li><a href="index-overview.html">Overview</a>
                <li><a href="index-tutorials.html">Tutorials</a>
                <li><a href="index-faq.html">FAQs</a>
                <li><a href="index-history.html">Changes</a>
              </ul>
            <li>Reference
              <ul class="f2">
                <li><a href="index-language.html">Language</a>
                <li><a href="index-functions.html">Functions</a>
                <li><a href="perlop.html">Operators</a>
                <li><a href="perlvar.html">Variables</a>
              </ul>
            <li>Modules
              <ul class="f2">
                <li><a href="index-modules-A.html">Modules</a>
                <li><a href="index-pragmas.html">Pragmas</a>
                <li><a href="index-utilities.html">Utilities</a>
              </ul>
            <li>Misc
              <ul class="f2">
                <li><a href="index-licence.html">License</a>
                <li><a href="index-internals.html">Internals</a>
                <li><a href="index-platforms.html">Platforms</a>
              </ul>          </ul>
          <div class="clear"></div>
        </div>
      </div>
      <div id="footer_end">
      </div>
    </div>
      
    </div>
      <script language="JavaScript" type="text/javascript" src="static/exploreperl.js"></script>
      <script language="JavaScript" src="static/combined-20100403.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
  perldoc.setPath(0);
  perldoc.pageName    = 'perlce';
  perldoc.pageAddress = 'perlce.html';
  perldoc.contentPage = 1;
  explorePerl.render();
  explorePerl.addEvents('explore_anchor');
</script>
    
  </body>
</html>
