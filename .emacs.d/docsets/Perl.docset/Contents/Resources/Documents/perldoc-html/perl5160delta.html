<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
  <title>perl5160delta</title>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta http-equiv="Content-Language" content="en-gb">
  <link rel="search" type="application/opensearchdescription+xml" title="Search perldoc.perl.org" href="/static/search.xml"/>
  <link href="static/css-20100830.css" rel="stylesheet" rev="stylesheet" type="text/css" media="screen">
  <link href="static/exploreperl.css" rel="stylesheet" rev="stylesheet" type="text/css">
</head>

<body onLoad="perldoc.startup();" onPageShow="if (event.persisted) perldoc.startup();">
    <div id="page">
      
      <div id="header">
	<div id="homepage_link">
	  <a href="index.html"></a>
	</div>
	<div id="strapline">
	  Perl Programming Documentation
	</div>
	<div id="download_link" class="download">
	  <a href="http://www.perl.org/get.html">Download Perl</a>
	</div>
	<div id="explore_link" class="download">
	  <a id="explore_anchor" href="#">Explore</a>
	</div>
      </div>
      
      <div id="body">
        <div id="left_column">
          <div class="side_group">
            
	    <div class="side_panel doc_panel">
              <p>Manual</p>
              <ul>
                <li><a href="index-overview.html">Overview</a>
                <li><a href="index-tutorials.html">Tutorials</a>
                <li><a href="index-faq.html">FAQs</a>
                <li><a href="index-history.html">History / Changes</a>
                <li><a href="index-licence.html">License</a>
              </ul>
            </div>
            <div class="side_panel doc_panel">
              <p>Reference</p>
              <ul>
                <li><a href="index-language.html">Language</a>
                <li><a href="index-functions.html">Functions</a>
                <li><a href="perlop.html">Operators</a>
                <li><a href="perlvar.html">Special Variables</a>
                <li><a href="index-pragmas.html">Pragmas</a>
                <li><a href="index-utilities.html">Utilities</a>
                <li><a href="index-internals.html">Internals</a>
                <li><a href="index-platforms.html">Platform Specific</a>
              </ul>
            </div>
            <div class="side_panel doc_panel">
              <p>Modules</p>
              <ul>
		<li>
		
                
                  
		    
		  
		
                  
		    
		  
		
                  
		    
		  
		
                  
		    
		  
		
                  
		    
		  
		
                  
		    
		  
		
                  
		    
		  
		
                  
		    
		  
		
                  
		    
		  
		
                  
		
                  
		
                  
		    
		  
		
                  
		    
		  
		
                  
		    
		  
		
                  
		    
		  
		
                  
		    
		  
		
                  
		
                  
		
                  
		    
		  
		
                  
		    
		  
		
                  
		    
		  
		
                  
		
                  
		
                  
		    
		  
		
                  
		
                  
		
		
                    <a href="index-modules-A.html">A</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="index-modules-B.html">B</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="index-modules-C.html">C</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="index-modules-D.html">D</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="index-modules-E.html">E</a>
                    
                      
                        <li>
                      
                    
                
                    <a href="index-modules-F.html">F</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="index-modules-G.html">G</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="index-modules-H.html">H</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="index-modules-I.html">I</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="index-modules-L.html">L</a>
                    
                      
                        <li>
                      
                    
                
                    <a href="index-modules-M.html">M</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="index-modules-N.html">N</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="index-modules-O.html">O</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="index-modules-P.html">P</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="index-modules-S.html">S</a>
                    
                      
                        <li>
                      
                    
                
                    <a href="index-modules-T.html">T</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="index-modules-U.html">U</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="index-modules-X.html">X</a>
                    
                
              </ul>
            </div>
            
	      <div class="side_panel doc_panel">
		<p>Tools</p>
		<ul>
		  <li><a href="preferences.html">Preferences</a>
		</ul>
	      </div>
            
          </div>
        </div>
        <div id="centre_column">
          <div id="content_header">
            <div id="title_bar">
              <div id="page_name">
                <h1>perl5160delta</h1>
              </div>
              <div id="perl_version">
                Perl 5 version 22.0 documentation
              </div>
              <div class="page_links" id="page_links_top">
                <a href="#" onClick="toolbar.goToTop();return false;">Go to top</a>
		
              </div>
	      <div class="page_links" id="page_links_bottom">
		
                  <a href="#" id="page_index_toggle">Show page index</a> &bull;
		
                <a href="#" id="recent_pages_toggle">Show recent pages</a>		
	      </div>
	      <div id="search_form">
		<form action="search.html" method="GET" id="search">
		  <input type="text" name="q" id="search_box" alt="Search">
		</form>
	      </div>
            </div>
            <div id="breadcrumbs">
                
    <a href="index.html">Home</a> &gt;
    
      
        <a href="index-history.html">History / Changes</a> &gt;
      
    
    perl5160delta
  

            </div>
          </div>
          <div id="content_body">
	    <!--[if lt IE 7]>
 <div class="noscript">
   <p>
     <strong>It looks like you're using Internet Explorer 6. This is a very old
     browser which does not offer full support for modern websites.</strong>
   </p>
   <p>
     Unfortunately this means that this website will not work on
     your computer.
   </p>
   <p>
     Don't miss out though! To view the site (and get a better experience from
     many other websites), simply upgrade to
     <a href="http://www.microsoft.com/windows/Internet-explorer/default.aspx">Internet
Explorer 8</a>
     or download an alternative browser such as
     <a href="http://www.mozilla.com/en-US/firefox/firefox.html">Firefox</a>,
     <a href="http://www.apple.com/safari/download/">Safari</a>, or
     <a href="http://www.google.co.uk/chrome">Google Chrome</a>.
   </p>
   <p>
     All of these browsers are free. If you're using a PC at work, you may
     need to contact your IT administrator.
   </p>
 </div>
<![endif]-->
	    <noscript>
	      <div class="noscript">
	      <p>
                <strong>Please note: Many features of this site require JavaScript. You appear to have JavaScript disabled,
	        or are running a non-JavaScript capable web browser.</strong>
	      </p>
	      <p>
		To get the best experience, please enable JavaScript or download a modern web browser such as <a href="http://www.microsoft.com/windows/Internet-explorer/default.aspx">Internet Explorer 8</a>, <a href="http://www.mozilla.com/en-US/firefox/firefox.html">Firefox</a>, <a href="http://www.apple.com/safari/download/">Safari</a>, or <a href="http://www.google.co.uk/chrome">Google Chrome</a>.
              </p>
	      </div>
	    </noscript>

	    <div id="recent_pages" class="hud_container">
	      <div id="recent_pages_header" class="hud_header">
		<div id="recent_pages_close" class="hud_close"><a href="#" onClick="recentPages.hide();return false;"></a></div>
		<div id="recent_pages_title" class="hud_title"><span class="hud_span_top">Recently read</span></div>
		<div id="recent_pages_topright" class="hud_topright"></div>
	      </div>
	      <div id="recent_pages_content" class="hud_content">
	      </div>
	      <div id="recent_pages_footer" class="hud_footer">
		<div id="recent_pages_bottomleft" class="hud_bottomleft"></div>
		<div id="recent_pages_bottom" class="hud_bottom"><span class="hud_span_bottom"></span></div>
		<div id="recent_pages_resize" class="hud_resize"></div>
	      </div>
	    </div>
  
	    <div id="from_search"></div>
            <h1>perl5160delta</h1>


  <!--    -->
<ul><li><a href="#NAME">NAME</a><li><a href="#DESCRIPTION">DESCRIPTION</a><li><a href="#Notice">Notice</a><li><a href="#Core-Enhancements">Core Enhancements</a><ul><li><a href="#use-_VERSION_">use _VERSION_</a><li><a href="#__SUB__">__SUB__</a><li><a href="#New-and-Improved-Built-ins">New and Improved Built-ins</a><li><a href="#Unicode-Support">Unicode Support</a><li><a href="#XS-Changes">XS Changes</a><li><a href="#Changes-to-Special-Variables">Changes to Special Variables</a><li><a href="#Debugger-Changes">Debugger Changes</a><li><a href="#The-CORE-Namespace">The CORE Namespace</a><li><a href="#Other-Changes">Other Changes</a></ul><li><a href="#Security">Security</a><ul><li><a href="#Use-is_utf8_char_buf()-and-not-is_utf8_char()">Use is_utf8_char_buf() and not is_utf8_char()</a><li><a href="#Malformed-UTF-8-input-could-cause-attempts-to-read-beyond-the-end-of-the-buffer">Malformed UTF-8 input could cause attempts to read beyond the end of the buffer</a><li><a href="#File%3a%3aGlob%3a%3absd_glob()-memory-error-with-GLOB_ALTDIRFUNC-(CVE-2011-2728).">File::Glob::bsd_glob() memory error with GLOB_ALTDIRFUNC (CVE-2011-2728).</a><li><a href="#Privileges-are-now-set-correctly-when-assigning-to-%24(">Privileges are now set correctly when assigning to $(</a></ul><li><a href="#Deprecations">Deprecations</a><ul><li><a href="#Don't-read-the-Unicode-data-base-files-in-_lib%2funicore_">Don't read the Unicode data base files in _lib/unicore_</a><li><a href="#XS-functions-is_utf8_char()%2c-utf8_to_uvchr()-and-utf8_to_uvuni()">XS functions is_utf8_char(), utf8_to_uvchr() and
utf8_to_uvuni()</a></ul><li><a href="#Future-Deprecations">Future Deprecations</a><ul><li><a href="#Core-Modules">Core Modules</a><li><a href="#Platforms-with-no-supporting-programmers">Platforms with no supporting programmers</a><li><a href="#Other-Future-Deprecations">Other Future Deprecations</a></ul><li><a href="#Incompatible-Changes">Incompatible Changes</a><ul><li><a href="#Special-blocks-called-in-void-context">Special blocks called in void context</a><li><a href="#The-overloading-pragma-and-regexp-objects">The overloading pragma and regexp objects</a><li><a href="#Two-XS-typemap-Entries-removed">Two XS typemap Entries removed</a><li><a href="#Unicode-6.1-has-incompatibilities-with-Unicode-6.0">Unicode 6.1 has incompatibilities with Unicode 6.0</a><li><a href="#Borland-compiler">Borland compiler</a><li><a href="#Certain-deprecated-Unicode-properties-are-no-longer-supported-by-default">Certain deprecated Unicode properties are no longer supported by default</a><li><a href="#Dereferencing-IO-thingies-as-typeglobs">Dereferencing IO thingies as typeglobs</a><li><a href="#User-defined-case-changing-operations">User-defined case-changing operations</a><li><a href="#XSUBs-are-now-'static'">XSUBs are now 'static'</a><li><a href="#Weakening-read-only-references">Weakening read-only references</a><li><a href="#Tying-scalars-that-hold-typeglobs">Tying scalars that hold typeglobs</a><li><a href="#IPC%3a%3aOpen3-no-longer-provides-xfork()%2c-xclose_on_exec()-and-xpipe_anon()">IPC::Open3 no longer provides xfork(), xclose_on_exec()
and xpipe_anon()</a><li><a href="#%24%24-no-longer-caches-PID">$$ no longer caches PID</a><li><a href="#%24%24-and-getppid()-no-longer-emulate-POSIX-semantics-under-LinuxThreads">$$ and getppid() no longer emulate POSIX semantics under LinuxThreads</a><li><a href="#%24%3c%2c-%24%3e%2c-%24(-and-%24)-are-no-longer-cached">$<, $>, $( and $) are no longer cached</a><li><a href="#Which-Non-ASCII-characters-get-quoted-by-quotemeta-and-%5cQ-has-changed">Which Non-ASCII characters get quoted by quotemeta and \Q has changed</a></ul><li><a href="#Performance-Enhancements">Performance Enhancements</a><li><a href="#Modules-and-Pragmata">Modules and Pragmata</a><ul><li><a href="#Deprecated-Modules">Deprecated Modules</a><li><a href="#New-Modules-and-Pragmata">New Modules and Pragmata</a><li><a href="#Updated-Modules-and-Pragmata">Updated Modules and Pragmata</a><li><a href="#Removed-Modules-and-Pragmata">Removed Modules and Pragmata</a></ul><li><a href="#Documentation">Documentation</a><ul><li><a href="#New-Documentation">New Documentation</a><li><a href="#Changes-to-Existing-Documentation">Changes to Existing Documentation</a><li><a href="#Removed-Documentation">Removed Documentation</a></ul><li><a href="#Diagnostics">Diagnostics</a><ul><li><a href="#New-Diagnostics">New Diagnostics</a><li><a href="#Removed-Errors">Removed Errors</a><li><a href="#Changes-to-Existing-Diagnostics">Changes to Existing Diagnostics</a></ul><li><a href="#Utility-Changes">Utility Changes</a><li><a href="#Configuration-and-Compilation">Configuration and Compilation</a><li><a href="#Platform-Support">Platform Support</a><ul><li><a href="#Platform-Specific-Notes">Platform-Specific Notes</a></ul><li><a href="#Internal-Changes">Internal Changes</a><li><a href="#Selected-Bug-Fixes">Selected Bug Fixes</a><ul><li><a href="#Array-and-hash">Array and hash</a><li><a href="#C-API-fixes">C API fixes</a><li><a href="#Compile-time-hints">Compile-time hints</a><li><a href="#Copy-on-write-scalars">Copy-on-write scalars</a><li><a href="#The-debugger">The debugger</a><li><a href="#Dereferencing-operators">Dereferencing operators</a><li><a href="#Filehandle%2c-last-accessed">Filehandle, last-accessed</a><li><a href="#Filetests-and-stat">Filetests and stat</a><li><a href="#Formats">Formats</a><li><a href="#given-and-when">given and when</a><li><a href="#The-glob-operator">The glob operator</a><li><a href="#Lvalue-subroutines">Lvalue subroutines</a><li><a href="#Overloading">Overloading</a><li><a href="#Prototypes-of-built-in-keywords">Prototypes of built-in keywords</a><li><a href="#Regular-expressions">Regular expressions</a><li><a href="#Smartmatching">Smartmatching</a><li><a href="#The-sort-operator">The sort operator</a><li><a href="#The-substr-operator">The substr operator</a><li><a href="#Support-for-embedded-nulls">Support for embedded nulls</a><li><a href="#Threading-bugs">Threading bugs</a><li><a href="#Tied-variables">Tied variables</a><li><a href="#Version-objects-and-vstrings">Version objects and vstrings</a><li><a href="#Warnings%2c-redefinition">Warnings, redefinition</a><li><a href="#Warnings%2c-%22Uninitialized%22">Warnings, "Uninitialized"</a><li><a href="#Weak-references">Weak references</a><li><a href="#Other-notable-fixes">Other notable fixes</a></ul><li><a href="#Known-Problems">Known Problems</a><li><a href="#Acknowledgements">Acknowledgements</a><li><a href="#Reporting-Bugs">Reporting Bugs</a><li><a href="#SEE-ALSO">SEE ALSO</a></ul><a name="NAME"></a><h1>NAME</h1>
<p>perl5160delta - what is new for perl v5.16.0</p>
<a name="DESCRIPTION"></a><h1>DESCRIPTION</h1>
<p>This document describes differences between the 5.14.0 release and
the 5.16.0 release.</p>
<p>If you are upgrading from an earlier release such as 5.12.0, first read
<a href="perl5140delta.html">perl5140delta</a>, which describes differences between 5.12.0 and
5.14.0.</p>
<p>Some bug fixes in this release have been backported to later
releases of 5.14.x.  Those are indicated with the 5.14.x version in
parentheses.</p>
<a name="Notice"></a><h1>Notice</h1>
<p>With the release of Perl 5.16.0, the 5.12.x series of releases is now out of
its support period.  There may be future 5.12.x releases, but only in the
event of a critical security issue.  Users of Perl 5.12 or earlier should
consider upgrading to a more recent release of Perl.</p>
<p>This policy is described in greater detail in
<a href="perlpolicy.html#MAINTENANCE-AND-SUPPORT">perlpolicy</a>.</p>
<a name="Core-Enhancements"></a><h1>Core Enhancements</h1>
<a name="use-_VERSION_"></a><h2><code class="inline">use <i>VERSION</i></code></h2>
<p>As of this release, version declarations like <code class="inline"><a class="l_k" href="functions/use.html">use</a> <span class="v">v5.16</span></code>
 now disable
all features before enabling the new feature bundle.  This means that
the following holds true:</p>
<pre class="verbatim"><ol><li>    <a class="l_k" href="functions/use.html">use</a> <span class="n">5.016</span><span class="sc">;</span></li><li>    <span class="c"># only 5.16 features enabled here</span></li><li>    <a class="l_k" href="functions/use.html">use</a> <span class="n">5.014</span><span class="sc">;</span></li><li>    <span class="c"># only 5.14 features enabled here (not 5.16)</span></li></ol></pre><p><code class="inline"><a class="l_k" href="functions/use.html">use</a> <span class="v">v5.12</span></code>
 and higher continue to enable strict, but explicit <code class="inline"><a class="l_k" href="functions/use.html">use</a>
<span class="w">strict</span></code>
 and <code class="inline"><a class="l_k" href="functions/no.html">no</a> <span class="w">strict</span></code>
 now override the version declaration, even
when they come first:</p>
<pre class="verbatim"><ol><li>    <a class="l_k" href="functions/no.html">no</a> <span class="w">strict</span><span class="sc">;</span></li><li>    <a class="l_k" href="functions/use.html">use</a> <span class="n">5.012</span><span class="sc">;</span></li><li>    <span class="c"># no strict here</span></li></ol></pre><p>There is a new ":default" feature bundle that represents the set of
features enabled before any version declaration or <code class="inline"><a class="l_k" href="functions/use.html">use</a> <span class="w">feature</span></code>
 has
been seen.  Version declarations below 5.10 now enable the ":default"
feature set.  This does not actually change the behavior of <code class="inline"><a class="l_k" href="functions/use.html">use</a>
<span class="v">v5.8</span></code>
, because features added to the ":default" set are those that were
traditionally enabled by default, before they could be turned off.</p>
<p><code class="inline"><a class="l_k" href="functions/no.html">no</a> <span class="w">feature</span></code>
 now resets to the default feature set.  To disable all
features (which is likely to be a pretty special-purpose request, since
it presumably won't match any named set of semantics) you can now  
write <code class="inline"><a class="l_k" href="functions/no.html">no</a> <span class="w">feature</span> <span class="q">&#39;:all&#39;</span></code>
.</p>
<p><code class="inline"><span class="i">$[</span></code>
 is now disabled under <code class="inline"><a class="l_k" href="functions/use.html">use</a> <span class="v">v5.16</span></code>
.  It is part of the default
feature set and can be turned on or off explicitly with <code class="inline"><a class="l_k" href="functions/use.html">use</a> <span class="w">feature</span>
<span class="q">&#39;array_base&#39;</span></code>
.</p>
<a name="__SUB__"></a><h2><code class="inline"><a class="l_k" href="functions/__SUB__.html">__SUB__</a></code></h2>
<p>The new <code class="inline"><a class="l_k" href="functions/__SUB__.html">__SUB__</a></code> token, available under the <code class="inline"><span class="w">current_sub</span></code>
 feature
(see <a href="feature.html">feature</a>) or <code class="inline"><a class="l_k" href="functions/use.html">use</a> <span class="v">v5.16</span></code>
, returns a reference to the current
subroutine, making it easier to write recursive closures.</p>
<a name="New-and-Improved-Built-ins"></a><h2>New and Improved Built-ins</h2>
<a name="More-consistent-eval"></a><h3>More consistent <code class="inline"><a class="l_k" href="functions/eval.html">eval</a></code></h3>
<p>The <code class="inline"><a class="l_k" href="functions/eval.html">eval</a></code> operator sometimes treats a string argument as a sequence of
characters and sometimes as a sequence of bytes, depending on the
internal encoding.  The internal encoding is not supposed to make any
difference, but there is code that relies on this inconsistency.</p>
<p>The new <code class="inline"><span class="w">unicode_eval</span></code>
 and <code class="inline"><a class="l_k" href="functions/evalbytes.html">evalbytes</a></code> features (enabled under <code class="inline"><a class="l_k" href="functions/use.html">use</a>
<span class="v">5.16.0</span></code>
) resolve this.  The <code class="inline"><span class="w">unicode_eval</span></code>
 feature causes <code class="inline"><a class="l_k" href="functions/eval.html">eval</a>
<span class="i">$string</span></code>
 to treat the string always as Unicode.  The <code class="inline"><a class="l_k" href="functions/evalbytes.html">evalbytes</a></code>
features provides a function, itself called <code class="inline"><a class="l_k" href="functions/evalbytes.html">evalbytes</a></code>, which
evaluates its argument always as a string of bytes.</p>
<p>These features also fix oddities with source filters leaking to outer
dynamic scopes.</p>
<p>See <a href="feature.html">feature</a> for more detail.</p>
<a name="substr-lvalue-revamp"></a><h3><code class="inline"><a class="l_k" href="functions/substr.html">substr</a></code> lvalue revamp</h3>
<p>When <code class="inline"><a class="l_k" href="functions/substr.html">substr</a></code> is called in lvalue or potential lvalue context with two
or three arguments, a special lvalue scalar is returned that modifies
the original string (the first argument) when assigned to.</p>
<p>Previously, the offsets (the second and third arguments) passed to
<code class="inline"><a class="l_k" href="functions/substr.html">substr</a></code> would be converted immediately to match the string, negative
offsets being translated to positive and offsets beyond the end of the
string being truncated.</p>
<p>Now, the offsets are recorded without modification in the special
lvalue scalar that is returned, and the original string is not even
looked at by <code class="inline"><a class="l_k" href="functions/substr.html">substr</a></code> itself, but only when the returned lvalue is
read or modified.</p>
<p>These changes result in an incompatible change:</p>
<p>If the original string changes length after the call to <code class="inline"><a class="l_k" href="functions/substr.html">substr</a></code> but
before assignment to its return value, negative offsets will remember
their position from the end of the string, affecting code like this:</p>
<pre class="verbatim"><ol><li>    <a class="l_k" href="functions/my.html">my</a> <span class="i">$string</span> = <span class="q">&quot;string&quot;</span><span class="sc">;</span></li><li>    <a class="l_k" href="functions/my.html">my</a> <span class="i">$lvalue</span> = \<a class="l_k" href="functions/substr.html">substr</a> <span class="i">$string</span><span class="cm">,</span> <span class="n">-4</span><span class="cm">,</span> <span class="n">2</span><span class="sc">;</span></li><li>    <a class="l_k" href="functions/print.html">print</a> <span class="i">$$lvalue</span><span class="cm">,</span> <span class="q">&quot;\n&quot;</span><span class="sc">;</span> <span class="c"># prints &quot;ri&quot;</span></li><li>    <span class="i">$string</span> = <span class="q">&quot;bailing twine&quot;</span><span class="sc">;</span></li><li>    <a class="l_k" href="functions/print.html">print</a> <span class="i">$$lvalue</span><span class="cm">,</span> <span class="q">&quot;\n&quot;</span><span class="sc">;</span> <span class="c"># prints &quot;wi&quot;; used to print &quot;il&quot;</span></li></ol></pre><p>The same thing happens with an omitted third argument.  The returned
lvalue will always extend to the end of the string, even if the string
becomes longer.</p>
<p>Since this change also allowed many bugs to be fixed (see
<a href="#The-substr-operator">The substr operator</a>), and since the behavior
of negative offsets has never been specified, the
change was deemed acceptable.</p>
<a name="Return-value-of-tied"></a><h3>Return value of <code class="inline"><a class="l_k" href="functions/tied.html">tied</a></code></h3>
<p>The value returned by <code class="inline"><a class="l_k" href="functions/tied.html">tied</a></code> on a tied variable is now the actual
scalar that holds the object to which the variable is tied.  This
lets ties be weakened with <code class="inline"><span class="i">Scalar::Util::weaken</span><span class="s">(</span><a class="l_k" href="functions/tied.html">tied</a>
<span class="i">$tied_variable</span><span class="s">)</span></code>
.</p>
<a name="Unicode-Support"></a><h2>Unicode Support</h2>
<a name="Supports-(_almost_)-Unicode-6.1"></a><h3>Supports (<i>almost</i>) Unicode 6.1</h3>
<p>Besides the addition of whole new scripts, and new characters in
existing scripts, this new version of Unicode, as always, makes some
changes to existing characters.  One change that may trip up some
applications is that the General Category of two characters in the
Latin-1 range, PILCROW SIGN and SECTION SIGN, has been changed from
Other_Symbol to Other_Punctuation.  The same change has been made for
a character in each of Tibetan, Ethiopic, and Aegean.
The code points U+3248..U+324F (CIRCLED NUMBER TEN ON BLACK SQUARE
through CIRCLED NUMBER EIGHTY ON BLACK SQUARE) have had their General
Category changed from Other_Symbol to Other_Numeric.  The Line Break
property has changes for Hebrew and Japanese; and because of
other changes in 6.1, the Perl regular expression construct <code class="inline">\<span class="w">X</span></code>
 now
works differently for some characters in Thai and Lao.</p>
<p>New aliases (synonyms) have been defined for many property values;
these, along with the previously existing ones, are all cross-indexed in
<a href="perluniprops.html">perluniprops</a>.</p>
<p>The return value of <code class="inline"><span class="i">charnames::viacode</span><span class="s">(</span><span class="s">)</span></code>
 is affected by other
changes:</p>
<pre class="verbatim"><ol><li> <span class="w">Code</span> <span class="w">point</span>      <span class="w">Old</span> <span class="w">Name</span>             <span class="w">New</span> <span class="w">Name</span></li><li>   <span class="w">U</span>+<span class="n">000</span><span class="w">A</span>    <span class="w">LINE</span> <span class="w">FEED</span> <span class="s">(</span><span class="w">LF</span><span class="s">)</span>        <span class="w">LINE</span> <span class="w">FEED</span></li><li>   <span class="w">U</span>+<span class="n">000</span><span class="w">C</span>    <span class="w">FORM</span> <span class="w">FEED</span> <span class="s">(</span><span class="w">FF</span><span class="s">)</span>        <span class="w">FORM</span> <span class="w">FEED</span></li><li>   <span class="w">U</span>+<span class="n">000</span><span class="w">D</span>    <span class="w">CARRIAGE</span> <span class="w">RETURN</span> <span class="s">(</span><span class="w">CR</span><span class="s">)</span>  <span class="w">CARRIAGE</span> <span class="w">RETURN</span></li><li>   <span class="w">U</span>+<span class="n">0085</span>    <span class="w">NEXT</span> <span class="w">LINE</span> <span class="s">(</span><span class="w">NEL</span><span class="s">)</span>       <span class="w">NEXT</span> <span class="w">LINE</span></li><li>   <span class="w">U</span>+<span class="n">008</span><span class="w">E</span>    <span class="w">SINGLE</span>-<span class="w">SHIFT</span> <span class="n">2</span>        <span class="w">SINGLE</span>-<span class="w">SHIFT</span>-<span class="n">2</span></li><li>   <span class="w">U</span>+<span class="n">008</span><span class="w">F</span>    <span class="w">SINGLE</span>-<span class="w">SHIFT</span> <span class="n">3</span>        <span class="w">SINGLE</span>-<span class="w">SHIFT</span>-<span class="n">3</span></li><li>   <span class="w">U</span>+<span class="n">0091</span>    <span class="w">PRIVATE</span> <span class="w">USE</span> <span class="n">1</span>         <span class="w">PRIVATE</span> <span class="w">USE</span>-<span class="n">1</span></li><li>   <span class="w">U</span>+<span class="n">0092</span>    <span class="w">PRIVATE</span> <span class="w">USE</span> <span class="n">2</span>         <span class="w">PRIVATE</span> <span class="w">USE</span>-<span class="n">2</span></li><li>   <span class="w">U</span>+<span class="n">2118</span>    <span class="w">SCRIPT</span> <span class="w">CAPITAL</span> <span class="w">P</span>      <span class="w">WEIERSTRASS</span> <span class="w">ELLIPTIC</span> <span class="w">FUNCTION</span></li></ol></pre><p>Perl will accept any of these names as input, but
<code class="inline"><span class="i">charnames::viacode</span><span class="s">(</span><span class="s">)</span></code>
 now returns the new name of each pair.  The
change for U+2118 is considered by Unicode to be a correction, that is
the original name was a mistake (but again, it will remain forever valid
to use it to refer to U+2118).  But most of these changes are the
fallout of the mistake Unicode 6.0 made in naming a character used in
Japanese cell phones to be "BELL", which conflicts with the longstanding
industry use of (and Unicode's recommendation to use) that name
to mean the ASCII control character at U+0007.  Therefore, that name
has been deprecated in Perl since v5.14, and any use of it will raise a
warning message (unless turned off).  The name "ALERT" is now the
preferred name for this code point, with "BEL" an acceptable short
form.  The name for the new cell phone character, at code point U+1F514,
remains undefined in this version of Perl (hence we don't 
implement quite all of Unicode 6.1), but starting in v5.18, BELL will mean
this character, and not U+0007.</p>
<p>Unicode has taken steps to make sure that this sort of mistake does not
happen again.  The Standard now includes all generally accepted
names and abbreviations for control characters, whereas previously it
didn't (though there were recommended names for most of them, which Perl
used).  This means that most of those recommended names are now
officially in the Standard.  Unicode did not recommend names for the
four code points listed above between U+008E and U+008F, and in
standardizing them Unicode subtly changed the names that Perl had
previously given them, by replacing the final blank in each name by a
hyphen.  Unicode also officially accepts names that Perl had deprecated,
such as FILE SEPARATOR.  Now the only deprecated name is BELL.
Finally, Perl now uses the new official names instead of the old
(now considered obsolete) names for the first four code points in the
list above (the ones which have the parentheses in them).</p>
<p>Now that the names have been placed in the Unicode standard, these kinds
of changes should not happen again, though corrections, such as to
U+2118, are still possible.</p>
<p>Unicode also added some name abbreviations, which Perl now accepts:
SP for SPACE;
TAB for CHARACTER TABULATION;
NEW LINE, END OF LINE, NL, and EOL for LINE FEED;
LOCKING-SHIFT ONE for SHIFT OUT;
LOCKING-SHIFT ZERO for SHIFT IN;
and ZWNBSP for ZERO WIDTH NO-BREAK SPACE.</p>
<p>More details on this version of Unicode are provided in
<a href="http://www.unicode.org/versions/Unicode6.1.0/">http://www.unicode.org/versions/Unicode6.1.0/</a>.</p>
<a name="use-charnames-is-no-longer-needed-for-%5cN%7b_name_%7d"></a><h3><code class="inline"><a class="l_k" href="functions/use.html">use</a> <span class="w">charnames</span></code>
 is no longer needed for <code class="inline">\N{<i>name</i>}</code></h3>
<p>When <code class="inline">\N{<i>name</i>}</code> is encountered, the <code class="inline"><span class="w">charnames</span></code>
 module is now
automatically loaded when needed as if the <code class="inline"><span class="j">:</span><span class="w">full</span></code>
 and <code class="inline"><span class="j">:</span><span class="w">short</span></code>

options had been specified.  See <a href="charnames.html">charnames</a> for more information.</p>
<a name="%5cN%7b...%7d-can-now-have-Unicode-loose-name-matching"></a><h3><code class="inline">\<span class="i">N</span><span class="s">{</span>...<span class="s">}</span></code>
 can now have Unicode loose name matching</h3>
<p>This is described in the <code class="inline"><span class="w">charnames</span></code>
 item in
<a href="#Updated-Modules-and-Pragmata">Updated Modules and Pragmata</a> below.</p>
<a name="Unicode-Symbol-Names"></a><h3>Unicode Symbol Names</h3>
<p>Perl now has proper support for Unicode in symbol names.  It used to be
that <code class="inline"><span class="i">*</span>{<span class="i">$foo</span>}</code>
 would ignore the internal UTF8 flag and use the bytes of
the underlying representation to look up the symbol.  That meant that
<code class="inline"><span class="i">*</span>{<span class="q">&quot;\x{100}&quot;</span>}</code>
 and <code class="inline"><span class="i">*</span>{<span class="q">&quot;\xc4\x80&quot;</span>}</code>
 would return the same thing.  All
these parts of Perl have been fixed to account for Unicode:</p>
<ul>
<li>
<p>Method names (including those passed to <code class="inline"><a class="l_k" href="functions/use.html">use</a> <span class="w">overload</span></code>
)</p>
</li>
<li>
<p>Typeglob names (including names of variables, subroutines, and filehandles)</p>
</li>
<li>
<p>Package names</p>
</li>
<li>
<p><code class="inline"><a class="l_k" href="functions/goto.html">goto</a></code></p>
</li>
<li>
<p>Symbolic dereferencing</p>
</li>
<li>
<p>Second argument to <code class="inline"><a class="l_k" href="functions/bless.html">bless()</a></code> and <code class="inline"><a class="l_k" href="functions/tie.html">tie()</a></code></p>
</li>
<li>
<p>Return value of <code class="inline"><a class="l_k" href="functions/ref.html">ref()</a></code></p>
</li>
<li>
<p>Subroutine prototypes</p>
</li>
<li>
<p>Attributes</p>
</li>
<li>
<p>Various warnings and error messages that mention variable names or values,
methods, etc.</p>
</li>
</ul>
<p>In addition, a parsing bug has been fixed that prevented <code class="inline"><span class="i">*</span>{<span class="w">&eacute;</span>}</code>
 from
implicitly quoting the name, but instead interpreted it as <code class="inline"><span class="i">*</span>{+<span class="w">&eacute;</span>}</code>
, which
would cause a strict violation.</p>
<p><code class="inline"><span class="i">*</span>{<span class="q">&quot;*a::b&quot;</span>}</code>
 automatically strips off the * if it is followed by an ASCII
letter.  That has been extended to all Unicode identifier characters.</p>
<p>One-character non-ASCII non-punctuation variables (like <code class="inline"><span class="i">$&eacute;</span></code>
) are now
subject to "Used only once" warnings.  They used to be exempt, as they
were treated as punctuation variables.</p>
<p>Also, single-character Unicode punctuation variables (like <code class="inline"><span class="i">$&permil;</span></code>
) are now
supported [perl #69032].</p>
<a name="Improved-ability-to-mix-locales-and-Unicode%2c-including-UTF-8-locales"></a><h3>Improved ability to mix locales and Unicode, including UTF-8 locales</h3>
<p>An optional parameter has been added to <code class="inline"><a class="l_k" href="functions/use.html">use</a> <span class="w">locale</span></code>
</p>
<pre class="verbatim"><ol><li> <a class="l_k" href="functions/use.html">use</a> <span class="w">locale</span> <span class="q">&#39;:not_characters&#39;</span><span class="sc">;</span></li></ol></pre><p>which tells Perl to use all but the <code class="inline"><span class="w">LC_CTYPE</span></code>
 and <code class="inline"><span class="w">LC_COLLATE</span></code>

portions of the current locale.  Instead, the character set is assumed
to be Unicode.  This lets locales and Unicode be seamlessly mixed,
including the increasingly frequent UTF-8 locales.  When using this
hybrid form of locales, the <code class="inline"><span class="j">:</span><span class="w">locale</span></code>
 layer to the <a href="open.html">open</a> pragma can
be used to interface with the file system, and there are CPAN modules
available for ARGV and environment variable conversions.</p>
<p>Full details are in <a href="perllocale.html">perllocale</a>.</p>
<a name="New-function-fc-and-corresponding-escape-sequence-%5cF-for-Unicode-foldcase"></a><h3>New function <code class="inline"><a class="l_k" href="functions/fc.html">fc</a></code> and corresponding escape sequence <code class="inline">\<span class="w">F</span></code>
 for Unicode foldcase</h3>
<p>Unicode foldcase is an extension to lowercase that gives better results
when comparing two strings case-insensitively.  It has long been used
internally in regular expression <code class="inline">/i</code> matching.  Now it is available
explicitly through the new <code class="inline"><a class="l_k" href="functions/fc.html">fc</a></code> function call (enabled by
<code class="inline"><span class="q">&quot;use feature &#39;fc&#39;&quot;</span></code>
, or <code class="inline"><a class="l_k" href="functions/use.html">use</a> <span class="v">v5.16</span></code>
, or explicitly callable via
<code class="inline"><span class="w">CORE::fc</span></code>
) or through the new <code class="inline">\<span class="w">F</span></code>
 sequence in double-quotish
strings.</p>
<p>Full details are in <a href="functions/fc.html">fc</a>.</p>
<a name="The-Unicode-Script_Extensions-property-is-now-supported."></a><h3>The Unicode <code class="inline"><span class="w">Script_Extensions</span></code>
 property is now supported.</h3>
<p>New in Unicode 6.0, this is an improved <code class="inline"><span class="w">Script</span></code>
 property.  Details
are in <a href="perlunicode.html#Scripts">Scripts in perlunicode</a>.</p>
<a name="XS-Changes"></a><h2>XS Changes</h2>
<a name="Improved-typemaps-for-Some-Builtin-Types"></a><h3>Improved typemaps for Some Builtin Types</h3>
<p>Most XS authors will know there is a longstanding bug in the
OUTPUT typemap for T_AVREF (<code class="inline"><span class="w">AV</span>*</code>
), T_HVREF (<code class="inline"><span class="w">HV</span>*</code>
), T_CVREF (<code class="inline"><span class="w">CV</span>*</code>
),
and T_SVREF (<code class="inline"><span class="w">SVREF</span></code>
 or <code class="inline">\<span class="i">$foo</span></code>
) that requires manually decrementing
the reference count of the return value instead of the typemap taking
care of this.  For backwards-compatibility, this cannot be changed in the
default typemaps.  But we now provide additional typemaps
<code class="inline"><span class="w">T_AVREF_REFCOUNT_FIXED</span></code>
, etc. that do not exhibit this bug.  Using
them in your extension is as simple as having one line in your
<code class="inline"><span class="w">TYPEMAP</span></code>
 section:</p>
<pre class="verbatim"><ol><li>  <span class="w">HV</span>*	<span class="w">T_HVREF_REFCOUNT_FIXED</span></li></ol></pre><a name="is_utf8_char()"></a><h3><code class="inline"><span class="i">is_utf8_char</span><span class="s">(</span><span class="s">)</span></code>
</h3>
<p>The XS-callable function <code class="inline"><span class="i">is_utf8_char</span><span class="s">(</span><span class="s">)</span></code>
, when presented with
malformed UTF-8 input, can read up to 12 bytes beyond the end of the
string.  This cannot be fixed without changing its API, and so its
use is now deprecated.  Use <code class="inline"><span class="i">is_utf8_char_buf</span><span class="s">(</span><span class="s">)</span></code>
 (described just below)
instead.</p>
<a name="Added-is_utf8_char_buf()"></a><h3>Added <code class="inline"><span class="i">is_utf8_char_buf</span><span class="s">(</span><span class="s">)</span></code>
</h3>
<p>This function is designed to replace the deprecated <a href="#is_utf8_char()">is_utf8_char()</a>
function.  It includes an extra parameter to make sure it doesn't read
past the end of the input buffer.</p>
<a name="Other-is_utf8_foo()-functions%2c-as-well-as-utf8_to_foo()%2c-etc."></a><h3>Other <code class="inline"><span class="i">is_utf8_foo</span><span class="s">(</span><span class="s">)</span></code>
 functions, as well as <code class="inline"><span class="i">utf8_to_foo</span><span class="s">(</span><span class="s">)</span></code>
, etc.</h3>
<p>Most other XS-callable functions that take UTF-8 encoded input
implicitly assume that the UTF-8 is valid (not malformed) with respect to
buffer length.  Do not do things such as change a character's case or
see if it is alphanumeric without first being sure that it is valid
UTF-8.  This can be safely done for a whole string by using one of the
functions <code class="inline"><span class="i">is_utf8_string</span><span class="s">(</span><span class="s">)</span></code>
, <code class="inline"><span class="i">is_utf8_string_loc</span><span class="s">(</span><span class="s">)</span></code>
, and
<code class="inline"><span class="i">is_utf8_string_loclen</span><span class="s">(</span><span class="s">)</span></code>
.</p>
<a name="New-Pad-API"></a><h3>New Pad API</h3>
<p>Many new functions have been added to the API for manipulating lexical
pads.  See <a href="perlapi.html#Pad-Data-Structures">Pad Data Structures in perlapi</a> for more information.</p>
<a name="Changes-to-Special-Variables"></a><h2>Changes to Special Variables</h2>
<a name="%24%24-can-be-assigned-to"></a><h3><code class="inline"><span class="i">$$</span></code>
 can be assigned to</h3>
<p><code class="inline"><span class="i">$$</span></code>
 was made read-only in Perl 5.8.0.  But only sometimes: <code class="inline"><a class="l_k" href="functions/local.html">local</a> <span class="i">$$</span></code>

would make it writable again.  Some CPAN modules were using <code class="inline"><a class="l_k" href="functions/local.html">local</a> <span class="i">$$</span></code>
 or
XS code to bypass the read-only check, so there is no reason to keep <code class="inline"><span class="i">$$</span></code>

read-only.  (This change also allowed a bug to be fixed while maintaining
backward compatibility.)</p>
<a name="%24%5eX-converted-to-an-absolute-path-on-FreeBSD%2c-OS-X-and-Solaris"></a><h3><code class="inline"><span class="i">$^X</span></code>
 converted to an absolute path on FreeBSD, OS X and Solaris</h3>
<p><code class="inline"><span class="i">$^X</span></code>
 is now converted to an absolute path on OS X, FreeBSD (without
needing <i>/proc</i> mounted) and Solaris 10 and 11.  This augments the
previous approach of using <i>/proc</i> on Linux, FreeBSD, and NetBSD
(in all cases, where mounted).</p>
<p>This makes relocatable perl installations more useful on these platforms.
(See "Relocatable @INC" in <i>INSTALL</i>)</p>
<a name="Debugger-Changes"></a><h2>Debugger Changes</h2>
<a name="Features-inside-the-debugger"></a><h3>Features inside the debugger</h3>
<p>The current Perl's <a href="feature.html">feature</a> bundle is now enabled for commands entered
in the interactive debugger.</p>
<a name="New-option-for-the-debugger's-*t*-command"></a><h3>New option for the debugger's <b>t</b> command</h3>
<p>The <b>t</b> command in the debugger, which toggles tracing mode, now
accepts a numeric argument that determines how many levels of subroutine
calls to trace.</p>
<a name="enable-and-disable"></a><h3><code class="inline"><span class="w">enable</span></code>
 and <code class="inline"><span class="w">disable</span></code>
</h3>
<p>The debugger now has <code class="inline"><span class="w">disable</span></code>
 and <code class="inline"><span class="w">enable</span></code>
 commands for disabling
existing breakpoints and re-enabling them.  See <a href="perldebug.html">perldebug</a>.</p>
<a name="Breakpoints-with-file-names"></a><h3>Breakpoints with file names</h3>
<p>The debugger's "b" command for setting breakpoints now lets a line
number be prefixed with a file name.  See
<a href="perldebug.html#b-%5bfile%5d%3a%5bline%5d-%5bcondition%5d">b [file]:[line] [condition] in perldebug</a>.</p>
<a name="The-CORE-Namespace"></a><h2>The <code class="inline"><span class="w">CORE</span></code>
 Namespace</h2>
<a name="The-CORE%3a%3a-prefix"></a><h3>The <code class="inline"><span class="w">CORE::</span></code>
 prefix</h3>
<p>The <code class="inline"><span class="w">CORE::</span></code>
 prefix can now be used on keywords enabled by
<a href="feature.html">feature.pm</a>, even outside the scope of <code class="inline"><a class="l_k" href="functions/use.html">use</a> <span class="w">feature</span></code>
.</p>
<a name="Subroutines-in-the-CORE-namespace"></a><h3>Subroutines in the <code class="inline"><span class="w">CORE</span></code>
 namespace</h3>
<p>Many Perl keywords are now available as subroutines in the CORE namespace.
This lets them be aliased:</p>
<pre class="verbatim"><ol><li>    <a class="l_k" href="functions/BEGIN.html">BEGIN</a> <span class="s">{</span> <span class="i">*entangle</span> = \<span class="i">&amp;CORE::tie</span> <span class="s">}</span></li><li>    <span class="w">entangle</span> <span class="i">$variable</span><span class="cm">,</span> <span class="i">$package</span><span class="cm">,</span> <span class="i">@args</span><span class="sc">;</span></li></ol></pre><p>And for prototypes to be bypassed:</p>
<pre class="verbatim"><ol><li><a name="mytie"></a>    sub <span class="m">mytie(\[%$*@]$@)</span> <span class="s">{</span></li><li>	<a class="l_k" href="functions/my.html">my</a> <span class="s">(</span><span class="i">$ref</span><span class="cm">,</span> <span class="i">$pack</span><span class="cm">,</span> <span class="i">@args</span><span class="s">)</span> = <span class="i">@_</span><span class="sc">;</span></li><li>	... <a class="l_k" href="functions/do.html">do</a> <span class="w">something</span> ...</li><li>	<a class="l_k" href="functions/goto.html">goto</a> <span class="i">&amp;CORE::tie</span><span class="sc">;</span></li><li>    <span class="s">}</span></li></ol></pre><p>Some of these cannot be called through references or via <code class="inline"><span class="i">&amp;foo</span></code>
 syntax,
but must be called as barewords.</p>
<p>See <a href="CORE.html">CORE</a> for details.</p>
<a name="Other-Changes"></a><h2>Other Changes</h2>
<a name="Anonymous-handles"></a><h3>Anonymous handles</h3>
<p>Automatically generated file handles are now named __ANONIO__ when the
variable name cannot be determined, rather than $__ANONIO__.</p>
<a name="Autoloaded-sort-Subroutines"></a><h3>Autoloaded sort Subroutines</h3>
<p>Custom sort subroutines can now be autoloaded [perl #30661]:</p>
<pre class="verbatim"><ol><li><a name="AUTOLOAD"></a>    sub <span class="m">AUTOLOAD</span> <span class="s">{</span> ... <span class="s">}</span></li><li>    <span class="i">@sorted</span> = <a class="l_k" href="functions/sort.html">sort</a> <span class="i">foo</span> <span class="i">@list</span><span class="sc">;</span> <span class="c"># uses AUTOLOAD</span></li></ol></pre><a name="continue-no-longer-requires-the-%22switch%22-feature"></a><h3><code class="inline"><a class="l_k" href="functions/continue.html">continue</a></code> no longer requires the "switch" feature</h3>
<p>The <code class="inline"><a class="l_k" href="functions/continue.html">continue</a></code> keyword has two meanings.  It can introduce a <code class="inline"><a class="l_k" href="functions/continue.html">continue</a></code>
block after a loop, or it can exit the current <code class="inline">when</code>
 block.  Up to now,
the latter meaning was valid only with the "switch" feature enabled, and
was a syntax error otherwise.  Since the main purpose of feature.pm is to
avoid conflicts with user-defined subroutines, there is no reason for
<code class="inline"><a class="l_k" href="functions/continue.html">continue</a></code> to depend on it.</p>
<a name="DTrace-probes-for-interpreter-phase-change"></a><h3>DTrace probes for interpreter phase change</h3>
<p>The <code class="inline"><span class="w">phase</span>-<span class="w">change</span></code>
 probes will fire when the interpreter's phase
changes, which tracks the <code class="inline"><span class="i">$</span>{<span class="w">^GLOBAL_PHASE</span>}</code>
 variable.  <code class="inline"><span class="w">arg0</span></code>
 is
the new phase name; <code class="inline"><span class="w">arg1</span></code>
 is the old one.  This is useful 
for limiting your instrumentation to one or more of: compile time,
run time, or destruct time.</p>
<a name="__FILE__()-Syntax"></a><h3><code class="inline"><a class="l_k" href="functions/__FILE__.html">__FILE__()</a></code> Syntax</h3>
<p>The <code class="inline"><span class="w">__FILE__</span></code>
, <code class="inline"><span class="w">__LINE__</span></code>
 and <code class="inline"><span class="w">__PACKAGE__</span></code>
 tokens can now be written
with an empty pair of parentheses after them.  This makes them parse the
same way as <code class="inline"><a class="l_k" href="functions/time.html">time</a></code>, <code class="inline"><a class="l_k" href="functions/fork.html">fork</a></code> and other built-in functions.</p>
<a name="The-%5c%24-prototype-accepts-any-scalar-lvalue"></a><h3>The <code class="inline">\<span class="i">$</span></code>
 prototype accepts any scalar lvalue</h3>
<p>The <code class="inline">\<span class="i">$</span></code>
 and <code class="inline">\<span class="s">[</span><span class="i">$]</span></code>
 subroutine prototypes now accept any scalar lvalue
argument.  Previously they accepted only scalars beginning with <code class="inline"><span class="i">$</span></code>
 and
hash and array elements.  This change makes them consistent with the way
the built-in <code class="inline"><a class="l_k" href="functions/read.html">read</a></code> and <code class="inline"><a class="l_k" href="functions/recv.html">recv</a></code> functions (among others) parse their
arguments.  This means that one can override the built-in functions with
custom subroutines that parse their arguments the same way.</p>
<a name="_-in-subroutine-prototypes"></a><h3><code class="inline"><span class="w">_</span></code>
 in subroutine prototypes</h3>
<p>The <code class="inline"><span class="w">_</span></code>
 character in subroutine prototypes is now allowed before <code class="inline"><span class="i">@</span></code>
 or
<code class="inline"><span class="i">%</span></code>
.</p>
<a name="Security"></a><h1>Security</h1>
<a name="Use-is_utf8_char_buf()-and-not-is_utf8_char()"></a><h2>Use <code class="inline"><span class="i">is_utf8_char_buf</span><span class="s">(</span><span class="s">)</span></code>
 and not <code class="inline"><span class="i">is_utf8_char</span><span class="s">(</span><span class="s">)</span></code>
</h2>
<p>The latter function is now deprecated because its API is insufficient to
guarantee that it doesn't read (up to 12 bytes in the worst case) beyond
the end of its input string.  See
<a href="#Added-is_utf8_char_buf()">is_utf8_char_buf()</a>.</p>
<a name="Malformed-UTF-8-input-could-cause-attempts-to-read-beyond-the-end-of-the-buffer"></a><h2>Malformed UTF-8 input could cause attempts to read beyond the end of the buffer</h2>
<p>Two new XS-accessible functions, <code class="inline"><span class="i">utf8_to_uvchr_buf</span><span class="s">(</span><span class="s">)</span></code>
 and
<code class="inline"><span class="i">utf8_to_uvuni_buf</span><span class="s">(</span><span class="s">)</span></code>
 are now available to prevent this, and the Perl
core has been converted to use them.
See <a href="#Internal-Changes">Internal Changes</a>.</p>
<a name="File%3a%3aGlob%3a%3absd_glob()-memory-error-with-GLOB_ALTDIRFUNC-(CVE-2011-2728)."></a><h2><code class="inline"><span class="i">File::Glob::bsd_glob</span><span class="s">(</span><span class="s">)</span></code>
 memory error with GLOB_ALTDIRFUNC (CVE-2011-2728).</h2>
<p>Calling <code class="inline"><span class="w">File::Glob::bsd_glob</span></code>
 with the unsupported flag
GLOB_ALTDIRFUNC would cause an access violation / segfault.  A Perl
program that accepts a flags value from an external source could expose
itself to denial of service or arbitrary code execution attacks.  There
are no known exploits in the wild.  The problem has been corrected by
explicitly disabling all unsupported flags and setting unused function
pointers to null.  Bug reported by Cl&#xe9;ment Lecigne. (5.14.2)</p>
<a name="Privileges-are-now-set-correctly-when-assigning-to-%24("></a><h2>Privileges are now set correctly when assigning to <code class="inline"><span class="i">$(</span></code>
</h2>
<p>A hypothetical bug (probably unexploitable in practice) because the
incorrect setting of the effective group ID while setting <code class="inline"><span class="i">$(</span></code>
 has been
fixed.  The bug would have affected only systems that have <code class="inline"><span class="i">setresgid</span><span class="s">(</span><span class="s">)</span></code>

but not <code class="inline"><span class="i">setregid</span><span class="s">(</span><span class="s">)</span></code>
, but no such systems are known to exist.</p>
<a name="Deprecations"></a><h1>Deprecations</h1>
<a name="Don't-read-the-Unicode-data-base-files-in-_lib%2funicore_"></a><h2>Don't read the Unicode data base files in <i>lib/unicore</i></h2>
<p>It is now deprecated to directly read the Unicode data base files.
These are stored in the <i>lib/unicore</i> directory.  Instead, you should
use the new functions in <a href="Unicode/UCD.html">Unicode::UCD</a>.  These provide a stable API,
and give complete information.</p>
<p>Perl may at some point in the future change or remove these files.  The
file which applications were most likely to have used is
<i>lib/unicore/ToDigit.pl</i>.  <a href="Unicode/UCD.html#prop_invmap()">prop_invmap() in Unicode::UCD</a> can be used to
get at its data instead.</p>
<a name="XS-functions-is_utf8_char()%2c-utf8_to_uvchr()-and-utf8_to_uvuni()"></a><h2>XS functions <code class="inline"><span class="i">is_utf8_char</span><span class="s">(</span><span class="s">)</span></code>
, <code class="inline"><span class="i">utf8_to_uvchr</span><span class="s">(</span><span class="s">)</span></code>
 and
<code class="inline"><span class="i">utf8_to_uvuni</span><span class="s">(</span><span class="s">)</span></code>
</h2>
<p>This function is deprecated because it could read beyond the end of the
input string.  Use the new <a href="#Added-is_utf8_char_buf()">is_utf8_char_buf()</a>,
<code class="inline"><span class="i">utf8_to_uvchr_buf</span><span class="s">(</span><span class="s">)</span></code>
 and <code class="inline"><span class="i">utf8_to_uvuni_buf</span><span class="s">(</span><span class="s">)</span></code>
 instead.</p>
<a name="Future-Deprecations"></a><h1>Future Deprecations</h1>
<p>This section serves as a notice of features that are <i>likely</i> to be
removed or <a href="perlpolicy.html#deprecated">deprecated</a> in the next release of
perl (5.18.0).  If your code depends on these features, you should
contact the Perl 5 Porters via the <a href="http://search.cpan.org/perldoc/http:#%2flists.perl.org%2flist%2fperl5-porters.html">mailing list</a> or <a href="perlbug.html">perlbug</a> to
explain your use case and inform the deprecation process.</p>
<a name="Core-Modules"></a><h2>Core Modules</h2>
<p>These modules may be marked as deprecated <i>from the core</i>.  This only
means that they will no longer be installed by default with the core
distribution, but will remain available on the CPAN.</p>
<ul>
<li>
<p>CPANPLUS</p>
</li>
<li>
<p>Filter::Simple</p>
</li>
<li>
<p>PerlIO::mmap</p>
</li>
<li>
<p>Pod::LaTeX</p>
</li>
<li>
<p>Pod::Parser</p>
</li>
<li>
<p>SelfLoader</p>
</li>
<li>
<p>Text::Soundex</p>
</li>
<li>
<p>Thread.pm</p>
</li>
</ul>
<a name="Platforms-with-no-supporting-programmers"></a><h2>Platforms with no supporting programmers</h2>
<p>These platforms will probably have their
special build support removed during the
5.17.0 development series.</p>
<ul>
<li>
<p>BeOS</p>
</li>
<li>
<p>djgpp</p>
</li>
<li>
<p>dgux</p>
</li>
<li>
<p>EPOC</p>
</li>
<li>
<p>MPE/iX</p>
</li>
<li>
<p>Rhapsody</p>
</li>
<li>
<p>UTS</p>
</li>
<li>
<p>VM/ESA</p>
</li>
</ul>
<a name="Other-Future-Deprecations"></a><h2>Other Future Deprecations</h2>
<ul>
<li>
<p>Swapping of $&lt; and $&gt;</p>
<p>For more information about this future deprecation, see <a href="http://search.cpan.org/perldoc/https:#%2frt.perl.org%2frt3%2fTicket%2fDisplay.html%3fid%3d96212">the relevant RT ticket</a>.</p>
</li>
<li>
<p>sfio, stdio</p>
<p>Perl supports being built without PerlIO proper, using a stdio or sfio
wrapper instead.  A perl build like this will not support IO layers and
thus Unicode IO, making it rather handicapped.</p>
<p>PerlIO supports a <code class="inline"><span class="w">stdio</span></code>
 layer if stdio use is desired, and similarly a
sfio layer could be produced.</p>
</li>
<li>
<p>Unescaped literal <code class="inline"><span class="q">&quot;{&quot;</span></code>
 in regular expressions.</p>
<p>Starting with v5.20, it is planned to require a literal <code class="inline"><span class="q">&quot;{&quot;</span></code>
 to be
escaped, for example by preceding it with a backslash.  In v5.18, a
deprecated warning message will be emitted for all such uses.  
This affects only patterns that are to match a literal <code class="inline"><span class="q">&quot;{&quot;</span></code>
.  Other
uses of this character, such as part of a quantifier or sequence as in
those below, are completely unaffected:</p>
<pre class="verbatim"><ol><li>    <span class="q">/foo{3,5}/</span></li><li>    /\<span class="i">p</span><span class="s">{</span><span class="w">Alphabetic</span><span class="s">}</span><span class="q">/</span></li><li>    <span class="q">    /</span>\<span class="i">N</span><span class="s">{</span><span class="w">DIGIT</span> <span class="w">ZERO</span><span class="s">}</span></li></ol></pre><p>Removing this will permit extensions to Perl's pattern syntax and better
error checking for existing syntax.  See <a href="perlre.html#Quantifiers">Quantifiers in perlre</a> for an
example.</p>
</li>
<li>
<p>Revamping <code class="inline"><span class="q">&quot;\Q&quot;</span></code>
 semantics in double-quotish strings when combined with other escapes.</p>
<p>There are several bugs and inconsistencies involving combinations
of <code class="inline">\<span class="w">Q</span></code>
 and escapes like <code class="inline">\<span class="w">x</span></code>
, <code class="inline">\<span class="w">L</span></code>
, etc., within a <code class="inline">\<span class="w">Q</span>...\<span class="w">E</span></code>
 pair.
These need to be fixed, and doing so will necessarily change current
behavior.  The changes have not yet been settled.</p>
</li>
</ul>
<a name="Incompatible-Changes"></a><h1>Incompatible Changes</h1>
<a name="Special-blocks-called-in-void-context"></a><h2>Special blocks called in void context</h2>
<p>Special blocks (<code class="inline">BEGIN</code>
, <code class="inline">CHECK</code>
, <code class="inline">INIT</code>
, <code class="inline">UNITCHECK</code>
, <code class="inline">END</code>
) are now
called in void context.  This avoids wasteful copying of the result of the
last statement [perl #108794].</p>
<a name="The-overloading-pragma-and-regexp-objects"></a><h2>The <code class="inline"><span class="w">overloading</span></code>
 pragma and regexp objects</h2>
<p>With <code class="inline"><a class="l_k" href="functions/no.html">no</a> <span class="w">overloading</span></code>
, regular expression objects returned by <code class="inline"><a class="l_k" href="functions/qr.html">qr//</a></code> are
now stringified as "Regexp=REGEXP(0xbe600d)" instead of the regular
expression itself [perl #108780].</p>
<a name="Two-XS-typemap-Entries-removed"></a><h2>Two XS typemap Entries removed</h2>
<p>Two presumably unused XS typemap entries have been removed from the
core typemap: T_DATAUNIT and T_CALLBACK.  If you are, against all odds,
a user of these, please see the instructions on how to restore them
in <a href="perlxstypemap.html">perlxstypemap</a>.</p>
<a name="Unicode-6.1-has-incompatibilities-with-Unicode-6.0"></a><h2>Unicode 6.1 has incompatibilities with Unicode 6.0</h2>
<p>These are detailed in <a href="#Supports-(almost)-Unicode-6.1">Supports (almost) Unicode 6.1</a> above.
You can compile this version of Perl to use Unicode 6.0.  See
<a href="perlunicode.html#Hacking-Perl-to-work-on-earlier-Unicode-versions-(for-very-serious-hackers-only)">Hacking Perl to work on earlier Unicode versions (for very serious hackers only) in perlunicode</a>.</p>
<a name="Borland-compiler"></a><h2>Borland compiler</h2>
<p>All support for the Borland compiler has been dropped.  The code had not
worked for a long time anyway.</p>
<a name="Certain-deprecated-Unicode-properties-are-no-longer-supported-by-default"></a><h2>Certain deprecated Unicode properties are no longer supported by default</h2>
<p>Perl should never have exposed certain Unicode properties that are used
by Unicode internally and not meant to be publicly available.  Use of
these has generated deprecated warning messages since Perl 5.12.  The
removed properties are Other_Alphabetic,
Other_Default_Ignorable_Code_Point, Other_Grapheme_Extend,
Other_ID_Continue, Other_ID_Start, Other_Lowercase, Other_Math, and
Other_Uppercase.</p>
<p>Perl may be recompiled to include any or all of them; instructions are
given in
<a href="perluniprops.html#Unicode-character-properties-that-are-NOT-accepted-by-Perl">Unicode character properties that are NOT accepted by Perl in perluniprops</a>.</p>
<a name="Dereferencing-IO-thingies-as-typeglobs"></a><h2>Dereferencing IO thingies as typeglobs</h2>
<p>The <code class="inline"><span class="i">*</span>{...}</code>
 operator, when passed a reference to an IO thingy (as in
<code class="inline"><span class="i">*</span>{<span class="i">*STDIN</span>{<span class="w">IO</span>}}</code>
), creates a new typeglob containing just that IO object.
Previously, it would stringify as an empty string, but some operators would
treat it as undefined, producing an "uninitialized" warning.
Now it stringifies as __ANONIO__ [perl #96326].</p>
<a name="User-defined-case-changing-operations"></a><h2>User-defined case-changing operations</h2>
<p>This feature was deprecated in Perl 5.14, and has now been removed.
The CPAN module <a href="http://search.cpan.org/perldoc/Unicode::Casing">Unicode::Casing</a> provides better functionality without
the drawbacks that this feature had, as are detailed in the 5.14
documentation:
<a href="http://perldoc.perl.org/5.14.0/perlunicode.html#User-Defined-Case-Mappings-%28for-serious-hackers-only%29">http://perldoc.perl.org/5.14.0/perlunicode.html#User-Defined-Case-Mappings-%28for-serious-hackers-only%29</a></p>
<a name="XSUBs-are-now-'static'"></a><h2>XSUBs are now 'static'</h2>
<p>XSUB C functions are now 'static', that is, they are not visible from
outside the compilation unit.  Users can use the new <code class="inline"><span class="i">XS_EXTERNAL</span><span class="s">(</span><span class="w">name</span><span class="s">)</span></code>

and <code class="inline"><span class="i">XS_INTERNAL</span><span class="s">(</span><span class="w">name</span><span class="s">)</span></code>
 macros to pick the desired linking behavior.
The ordinary <code class="inline"><span class="i">XS</span><span class="s">(</span><span class="w">name</span><span class="s">)</span></code>
 declaration for XSUBs will continue to declare
non-'static' XSUBs for compatibility, but the XS compiler,
<a href="ExtUtils/ParseXS.html">ExtUtils::ParseXS</a> (<code class="inline"><span class="w">xsubpp</span></code>
) will emit 'static' XSUBs by default.
<a href="ExtUtils/ParseXS.html">ExtUtils::ParseXS</a>'s behavior can be reconfigured from XS using the
<code class="inline"><span class="w">EXPORT_XSUB_SYMBOLS</span></code>
 keyword.  See <a href="perlxs.html">perlxs</a> for details.</p>
<a name="Weakening-read-only-references"></a><h2>Weakening read-only references</h2>
<p>Weakening read-only references is no longer permitted.  It should never
have worked anyway, and could sometimes result in crashes.</p>
<a name="Tying-scalars-that-hold-typeglobs"></a><h2>Tying scalars that hold typeglobs</h2>
<p>Attempting to tie a scalar after a typeglob was assigned to it would
instead tie the handle in the typeglob's IO slot.  This meant that it was
impossible to tie the scalar itself.  Similar problems affected <code class="inline"><a class="l_k" href="functions/tied.html">tied</a></code> and
<code class="inline"><a class="l_k" href="functions/untie.html">untie</a></code>: <code class="inline"><a class="l_k" href="functions/tied.html">tied</a> <span class="i">$scalar</span></code>
 would return false on a tied scalar if the last
thing returned was a typeglob, and <code class="inline"><a class="l_k" href="functions/untie.html">untie</a> <span class="i">$scalar</span></code>
 on such a tied scalar
would do nothing.</p>
<p>We fixed this problem before Perl 5.14.0, but it caused problems with some
CPAN modules, so we put in a deprecation cycle instead.</p>
<p>Now the deprecation has been removed and this bug has been fixed.  So
<code class="inline"><a class="l_k" href="functions/tie.html">tie</a> <span class="i">$scalar</span></code>
 will always tie the scalar, not the handle it holds.  To tie
the handle, use <code class="inline"><a class="l_k" href="functions/tie.html">tie</a> <span class="i">*$scalar</span></code>
 (with an explicit asterisk).  The same
applies to <code class="inline"><a class="l_k" href="functions/tied.html">tied</a> <span class="i">*$scalar</span></code>
 and <code class="inline"><a class="l_k" href="functions/untie.html">untie</a> <span class="i">*$scalar</span></code>
.</p>
<a name="IPC%3a%3aOpen3-no-longer-provides-xfork()%2c-xclose_on_exec()-and-xpipe_anon()"></a><h2>IPC::Open3 no longer provides <code class="inline"><span class="i">xfork</span><span class="s">(</span><span class="s">)</span></code>
, <code class="inline"><span class="i">xclose_on_exec</span><span class="s">(</span><span class="s">)</span></code>

and <code class="inline"><span class="i">xpipe_anon</span><span class="s">(</span><span class="s">)</span></code>
</h2>
<p>All three functions were private, undocumented, and unexported.  They do
not appear to be used by any code on CPAN.  Two have been inlined and one
deleted entirely.</p>
<a name="%24%24-no-longer-caches-PID"></a><h2><code class="inline"><span class="i">$$</span></code>
 no longer caches PID</h2>
<p>Previously, if one called fork(3) from C, Perl's
notion of <code class="inline"><span class="i">$$</span></code>
 could go out of sync with what getpid() returns.  By always
fetching the value of <code class="inline"><span class="i">$$</span></code>
 via getpid(), this potential bug is eliminated.
Code that depends on the caching behavior will break.  As described in
<a href="#%24%24-can-be-assigned-to">Core Enhancements</a>,
<code class="inline"><span class="i">$$</span></code>
 is now writable, but it will be reset during a
fork.</p>
<a name="%24%24-and-getppid()-no-longer-emulate-POSIX-semantics-under-LinuxThreads"></a><h2><code class="inline"><span class="i">$$</span></code>
 and <code class="inline"><a class="l_k" href="functions/getppid.html">getppid()</a></code> no longer emulate POSIX semantics under LinuxThreads</h2>
<p>The POSIX emulation of <code class="inline"><span class="i">$$</span></code>
 and <code class="inline"><a class="l_k" href="functions/getppid.html">getppid()</a></code> under the obsolete
LinuxThreads implementation has been removed.
This only impacts users of Linux 2.4 and
users of Debian GNU/kFreeBSD up to and including 6.0, not the vast
majority of Linux installations that use NPTL threads.</p>
<p>This means that <code class="inline"><a class="l_k" href="functions/getppid.html">getppid()</a></code>, like <code class="inline"><span class="i">$$</span></code>
, is now always guaranteed to
return the OS's idea of the current state of the process, not perl's
cached version of it.</p>
<p>See the documentation for <a href="perlvar.html#%24%24">$$</a> for details.</p>
<a name="%24%3c%2c-%24%3e%2c-%24(-and-%24)-are-no-longer-cached"></a><h2><code class="inline"><span class="i">$&lt;</span></code>
, <code class="inline"><span class="i">$&gt;</span></code>
, <code class="inline"><span class="i">$(</span></code>
 and <code class="inline"><span class="i">$)</span></code>
 are no longer cached</h2>
<p>Similarly to the changes to <code class="inline"><span class="i">$$</span></code>
 and <code class="inline"><a class="l_k" href="functions/getppid.html">getppid()</a></code>, the internal
caching of <code class="inline"><span class="i">$&lt;</span></code>
, <code class="inline"><span class="i">$&gt;</span></code>
, <code class="inline"><span class="i">$(</span></code>
 and <code class="inline"><span class="i">$)</span></code>
 has been removed.</p>
<p>When we cached these values our idea of what they were would drift out
of sync with reality if someone (e.g., someone embedding perl) called
<code class="inline"><span class="w">sete</span>?<span class="s">[</span><span class="w">ug</span><span class="s">]</span><span class="i">id</span><span class="s">(</span><span class="s">)</span></code>
 without updating <code class="inline"><span class="w">PL_e</span>?<span class="s">[</span><span class="w">ug</span><span class="s">]</span><span class="w">id</span></code>
.  Having to deal with
this complexity wasn't worth it given how cheap the <code class="inline"><span class="w">gete</span>?<span class="s">[</span><span class="w">ug</span><span class="s">]</span><span class="i">id</span><span class="s">(</span><span class="s">)</span></code>

system call is.</p>
<p>This change will break a handful of CPAN modules that use the XS-level
<code class="inline"><span class="w">PL_uid</span></code>
, <code class="inline"><span class="w">PL_gid</span></code>
, <code class="inline"><span class="w">PL_euid</span></code>
 or <code class="inline"><span class="w">PL_egid</span></code>
 variables.</p>
<p>The fix for those breakages is to use <code class="inline"><span class="w">PerlProc_gete</span>?<span class="s">[</span><span class="w">ug</span><span class="s">]</span><span class="i">id</span><span class="s">(</span><span class="s">)</span></code>
 to
retrieve them (e.g., <code class="inline"><span class="i">PerlProc_getuid</span><span class="s">(</span><span class="s">)</span></code>
), and not to assign to
<code class="inline"><span class="w">PL_e</span>?<span class="s">[</span><span class="w">ug</span><span class="s">]</span><span class="w">id</span></code>
 if you change the UID/GID/EUID/EGID.  There is no longer
any need to do so since perl will always retrieve the up-to-date
version of those values from the OS.</p>
<a name="Which-Non-ASCII-characters-get-quoted-by-quotemeta-and-%5cQ-has-changed"></a><h2>Which Non-ASCII characters get quoted by <code class="inline"><a class="l_k" href="functions/quotemeta.html">quotemeta</a></code> and <code class="inline">\<span class="w">Q</span></code>
 has changed</h2>
<p>This is unlikely to result in a real problem, as Perl does not attach
special meaning to any non-ASCII character, so it is currently
irrelevant which are quoted or not.  This change fixes bug [perl #77654] and
brings Perl's behavior more into line with Unicode's recommendations.
See <a href="functions/quotemeta.html">quotemeta</a>.</p>
<a name="Performance-Enhancements"></a><h1>Performance Enhancements</h1>
<ul>
<li>
<p>Improved performance for Unicode properties in regular expressions</p>
<p>Matching a code point against a Unicode property is now done via a
binary search instead of linear.  This means for example that the worst
case for a 1000 item property is 10 probes instead of 1000.  This
inefficiency has been compensated for in the past by permanently storing
in a hash the results of a given probe plus the results for the adjacent
64 code points, under the theory that near-by code points are likely to
be searched for.  A separate hash was used for each mention of a Unicode
property in each regular expression.  Thus, <code class="inline"><a class="l_k" href="functions/qr.html">qr/\p{foo}abc\p{foo}/</a></code>
would generate two hashes.  Any probes in one instance would be unknown
to the other, and the hashes could expand separately to be quite large
if the regular expression were used on many different widely-separated
code points.
Now, however, there is just one hash shared by all instances of a given
property.  This means that if <code class="inline">\<span class="i">p</span><span class="s">{</span><span class="w">foo</span><span class="s">}</span></code>
 is matched against "A" in one
regular expression in a thread, the result will be known immediately to
all regular expressions, and the relentless march of using up memory is
slowed considerably.</p>
</li>
<li>
<p>Version declarations with the <code class="inline"><a class="l_k" href="functions/use.html">use</a></code> keyword (e.g., <code class="inline"><a class="l_k" href="functions/use.html">use</a> <span class="n">5.012</span></code>
) are now
faster, as they enable features without loading <i>feature.pm</i>.</p>
</li>
<li>
<p><code class="inline"><a class="l_k" href="functions/local.html">local</a> <span class="i">$_</span></code>
 is faster now, as it no longer iterates through magic that it
is not going to copy anyway.</p>
</li>
<li>
<p>Perl 5.12.0 sped up the destruction of objects whose classes define
empty <code class="inline">DESTROY</code>
 methods (to prevent autoloading), by simply not
calling such empty methods.  This release takes this optimization a
step further, by not calling any <code class="inline">DESTROY</code>
 method that begins with a
<code class="inline"><a class="l_k" href="functions/return.html">return</a></code> statement.  This can be useful for destructors that are only
used for debugging:</p>
<pre class="verbatim"><ol><li>    <a class="l_k" href="functions/use.html">use</a> <span class="w">constant</span> <span class="i">DEBUG</span> <span class="cm">=&gt;</span> <span class="n">1</span><span class="sc">;</span></li><li><a name="DESTROY"></a>    sub <span class="m">DESTROY</span> <span class="s">{</span> <a class="l_k" href="functions/return.html">return</a> <a class="l_k" href="functions/unless.html">unless</a> <span class="i">DEBUG</span><span class="sc">;</span> ... <span class="s">}</span></li></ol></pre><p>Constant-folding will reduce the first statement to <code class="inline"><a class="l_k" href="functions/return.html">return;</a></code> if DEBUG
is set to 0, triggering this optimization.</p>
</li>
<li>
<p>Assigning to a variable that holds a typeglob or copy-on-write scalar
is now much faster.  Previously the typeglob would be stringified or
the copy-on-write scalar would be copied before being clobbered.</p>
</li>
<li>
<p>Assignment to <code class="inline"><a class="l_k" href="functions/substr.html">substr</a></code> in void context is now more than twice its
previous speed.  Instead of creating and returning a special lvalue
scalar that is then assigned to, <code class="inline"><a class="l_k" href="functions/substr.html">substr</a></code> modifies the original string
itself.</p>
</li>
<li>
<p><code class="inline"><a class="l_k" href="functions/substr.html">substr</a></code> no longer calculates a value to return when called in void
context.</p>
</li>
<li>
<p>Due to changes in <a href="File/Glob.html">File::Glob</a>, Perl's <code class="inline"><a class="l_k" href="functions/glob.html">glob</a></code> function and its <code class="inline"><span class="q">&lt;...&gt;</span></code>
 equivalent are now much faster.  The splitting of the pattern
into words has been rewritten in C, resulting in speed-ups of 20% for
some cases.</p>
<p>This does not affect <code class="inline"><a class="l_k" href="functions/glob.html">glob</a></code> on VMS, as it does not use File::Glob.</p>
</li>
<li>
<p>The short-circuiting operators <code class="inline">&amp;&amp;</code>, <code class="inline">||</code>, and <code class="inline"><span class="q">//</span></code>
, when chained
(such as <code class="inline"><span class="i">$a</span> || <span class="i">$b</span> || <span class="i">$c</span></code>
), are now considerably faster to short-circuit,
due to reduced optree traversal.</p>
</li>
<li>
<p>The implementation of <code class="inline"><a class="l_k" href="functions/s.html">s///r</a></code> makes one fewer copy of the scalar's value.</p>
</li>
<li>
<p>Recursive calls to lvalue subroutines in lvalue scalar context use less
memory.</p>
</li>
</ul>
<a name="Modules-and-Pragmata"></a><h1>Modules and Pragmata</h1>
<a name="Deprecated-Modules"></a><h2>Deprecated Modules</h2>
<ul>
<li><a name="the-Version%3a%3aRequirements-manpage"></a><b><a href="http://search.cpan.org/perldoc/Version::Requirements">Version::Requirements</a></b>
<p>Version::Requirements is now DEPRECATED, use <a href="CPAN/Meta/Requirements.html">CPAN::Meta::Requirements</a>,
which is a drop-in replacement.  It will be deleted from perl.git blead
in v5.17.0.</p>
</li>
</ul>
<a name="New-Modules-and-Pragmata"></a><h2>New Modules and Pragmata</h2>
<ul>
<li>
<p><a href="arybase.html">arybase</a> -- this new module implements the <code class="inline"><span class="i">$[</span></code>
 variable.</p>
</li>
<li>
<p><a href="PerlIO/mmap.html">PerlIO::mmap</a> 0.010 has been added to the Perl core.</p>
<p>The <code class="inline"><span class="w">mmap</span></code>
 PerlIO layer is no longer implemented by perl itself, but has
been moved out into the new <a href="PerlIO/mmap.html">PerlIO::mmap</a> module.</p>
</li>
</ul>
<a name="Updated-Modules-and-Pragmata"></a><h2>Updated Modules and Pragmata</h2>
<p>This is only an overview of selected module updates.  For a complete list of
updates, run:</p>
<pre class="verbatim"><ol><li>    <span class="i">$ corelist</span> --<span class="w">diff</span> <span class="v">5.14.0</span> <span class="v">5.16.0</span></li></ol></pre><p>You can substitute your favorite version in place of 5.14.0, too.</p>
<ul>
<li>
<p><a href="http://search.cpan.org/perldoc/Archive::Extract">Archive::Extract</a> has been upgraded from version 0.48 to 0.58.</p>
<p>Includes a fix for FreeBSD to only use <code class="inline"><span class="w">unzip</span></code>
 if it is located in
<code class="inline"><span class="q">/usr/</span><a class="l_k" href="functions/local.html">local</a><span class="q">/bin</span></code>
, as FreeBSD 9.0 will ship with a limited <code class="inline"><span class="w">unzip</span></code>
 in
<code class="inline"><span class="q">/usr/</span><span class="w">bin</span></code>
.</p>
</li>
<li>
<p><a href="Archive/Tar.html">Archive::Tar</a> has been upgraded from version 1.76 to 1.82.</p>
<p>Adjustments to handle files &gt;8gb (&gt;0777777777777 octal) and a feature
to return the MD5SUM of files in the archive.</p>
</li>
<li>
<p><a href="base.html">base</a> has been upgraded from version 2.16 to 2.18.</p>
<p><code class="inline"><span class="w">base</span></code>
 no longer sets a module's <code class="inline"><span class="i">$VERSION</span></code>
 to "-1" when a module it
loads does not define a <code class="inline"><span class="i">$VERSION</span></code>
.  This change has been made because
"-1" is not a valid version number under the new "lax" criteria used
internally by <code class="inline"><span class="w">UNIVERSAL::VERSION</span></code>
.  (See <a href="version.html">version</a> for more on "lax"
version criteria.)</p>
<p><code class="inline"><span class="w">base</span></code>
 no longer internally skips loading modules it has already loaded
and instead relies on <code class="inline"><a class="l_k" href="functions/require.html">require</a></code> to inspect <code class="inline"><span class="i">%INC</span></code>
.  This fixes a bug
when <code class="inline"><span class="w">base</span></code>
 is used with code that clear <code class="inline"><span class="i">%INC</span></code>
 to force a module to
be reloaded.</p>
</li>
<li>
<p><a href="Carp.html">Carp</a> has been upgraded from version 1.20 to 1.26.</p>
<p>It now includes last read filehandle info and puts a dot after the file
and line number, just like errors from <code class="inline"><a class="l_k" href="functions/die.html">die</a></code> [perl #106538].</p>
</li>
<li>
<p><a href="charnames.html">charnames</a> has been updated from version 1.18 to 1.30.</p>
<p><code class="inline"><span class="w">charnames</span></code>
 can now be invoked with a new option, <code class="inline"><span class="j">:</span><span class="w">loose</span></code>
,
which is like the existing <code class="inline"><span class="j">:</span><span class="w">full</span></code>
 option, but enables Unicode loose
name matching.  Details are in <a href="charnames.html#LOOSE-MATCHES">LOOSE MATCHES in charnames</a>.</p>
</li>
<li>
<p><a href="B/Deparse.html">B::Deparse</a> has been upgraded from version 1.03 to 1.14.  This fixes
numerous deparsing bugs.</p>
</li>
<li>
<p><a href="http://search.cpan.org/perldoc/CGI">CGI</a> has been upgraded from version 3.52 to 3.59.</p>
<p>It uses the public and documented FCGI.pm API in CGI::Fast.  CGI::Fast was
using an FCGI API that was deprecated and removed from documentation
more than ten years ago.  Usage of this deprecated API with FCGI &gt;=
0.70 or FCGI &lt;= 0.73 introduces a security issue.
<a href="https://rt.cpan.org/Public/Bug/Display.html?id=68380">https://rt.cpan.org/Public/Bug/Display.html?id=68380</a>
<a href="http://web.nvd.nist.gov/view/vuln/detail?vulnId=CVE-2011-2766">http://web.nvd.nist.gov/view/vuln/detail?vulnId=CVE-2011-2766</a></p>
<p>Things that may break your code:</p>
<p><code class="inline"><span class="i">url</span><span class="s">(</span><span class="s">)</span></code>
 was fixed to return <code class="inline"><span class="w">PATH_INFO</span></code>
 when it is explicitly requested
with either the <code class="inline"><span class="w">path</span><span class="cm">=&gt;</span><span class="n">1</span></code>
 or <code class="inline"><span class="w">path_info</span><span class="cm">=&gt;</span><span class="n">1</span></code>
 flag.</p>
<p>If your code is running under mod_rewrite (or compatible) and you are
calling <code class="inline"><span class="i">self_url</span><span class="s">(</span><span class="s">)</span></code>
 or you are calling <code class="inline"><span class="i">url</span><span class="s">(</span><span class="s">)</span></code>
 and passing
<code class="inline"><span class="w">path_info</span><span class="cm">=&gt;</span><span class="n">1</span></code>
, these methods will actually be returning
<code class="inline"><span class="w">PATH_INFO</span></code>
 now, as you have explicitly requested or <code class="inline"><span class="i">self_url</span><span class="s">(</span><span class="s">)</span></code>

has requested on your behalf.</p>
<p>The <code class="inline"><span class="w">PATH_INFO</span></code>
 has been omitted in such URLs since the issue was
introduced in the 3.12 release in December, 2005.</p>
<p>This bug is so old your application may have come to depend on it or
workaround it. Check for application before upgrading to this release.</p>
<p>Examples of affected method calls:</p>
<pre class="verbatim"><ol><li>  <span class="i">$q</span><span class="i">-&gt;url</span><span class="s">(</span>-<span class="w">absolute</span> <span class="cm">=&gt;</span> <span class="n">1</span><span class="cm">,</span> -<span class="w">query</span> <span class="cm">=&gt;</span> <span class="n">1</span><span class="cm">,</span> -<span class="w">path_info</span> <span class="cm">=&gt;</span> <span class="n">1</span><span class="s">)</span><span class="sc">;</span></li><li>  <span class="i">$q</span><span class="i">-&gt;url</span><span class="s">(</span>-<span class="w">path</span><span class="cm">=&gt;</span><span class="n">1</span><span class="s">)</span><span class="sc">;</span></li><li>  <span class="i">$q</span><span class="i">-&gt;url</span><span class="s">(</span>-<span class="w">full</span><span class="cm">=&gt;</span><span class="n">1</span><span class="cm">,</span>-<span class="w">path</span><span class="cm">=&gt;</span><span class="n">1</span><span class="s">)</span><span class="sc">;</span></li><li>  <span class="i">$q</span><span class="i">-&gt;url</span><span class="s">(</span>-<span class="w">rewrite</span><span class="cm">=&gt;</span><span class="n">1</span><span class="cm">,</span>-<span class="w">path</span><span class="cm">=&gt;</span><span class="n">1</span><span class="s">)</span><span class="sc">;</span></li><li>  <span class="i">$q</span><span class="i">-&gt;self_url</span><span class="s">(</span><span class="s">)</span><span class="sc">;</span></li></ol></pre><p>We no longer read from STDIN when the Content-Length is not set,
preventing requests with no Content-Length from sometimes freezing.
This is consistent with the CGI RFC 3875, and is also consistent with
CGI::Simple.  However, the old behavior may have been expected by some
command-line uses of CGI.pm.</p>
<p>In addition, the DELETE HTTP verb is now supported.</p>
</li>
<li>
<p><a href="Compress/Zlib.html">Compress::Zlib</a> has been upgraded from version 2.035 to 2.048.</p>
<p>IO::Compress::Zip and IO::Uncompress::Unzip now have support for LZMA
(method 14).  There is a fix for a CRC issue in IO::Compress::Unzip and
it supports Streamed Stored context now.  And fixed a Zip64 issue in
IO::Compress::Zip when the content size was exactly 0xFFFFFFFF.</p>
</li>
<li>
<p><a href="Digest/SHA.html">Digest::SHA</a> has been upgraded from version 5.61 to 5.71.</p>
<p>Added BITS mode to the addfile method and shasum.  This makes
partial-byte inputs possible via files/STDIN and lets shasum check
all 8074 NIST Msg vectors, where previously special programming was
required to do this.</p>
</li>
<li>
<p><a href="Encode.html">Encode</a> has been upgraded from version 2.42 to 2.44.</p>
<p>Missing aliases added, a deep recursion error fixed and various
documentation updates.</p>
<p>Addressed 'decode_xs n-byte heap-overflow' security bug in Unicode.xs
(CVE-2011-2939). (5.14.2)</p>
</li>
<li>
<p><a href="ExtUtils/CBuilder.html">ExtUtils::CBuilder</a> updated from version 0.280203 to 0.280206.</p>
<p>The new version appends CFLAGS and LDFLAGS to their Config.pm
counterparts.</p>
</li>
<li>
<p><a href="ExtUtils/ParseXS.html">ExtUtils::ParseXS</a> has been upgraded from version 2.2210 to 3.16.</p>
<p>Much of <a href="ExtUtils/ParseXS.html">ExtUtils::ParseXS</a>, the module behind the XS compiler <code class="inline"><span class="w">xsubpp</span></code>
,
was rewritten and cleaned up.  It has been made somewhat more extensible
and now finally uses strictures.</p>
<p>The typemap logic has been moved into a separate module,
<a href="ExtUtils/Typemaps.html">ExtUtils::Typemaps</a>.  See <a href="#New-Modules-and-Pragmata">New Modules and Pragmata</a>, above.</p>
<p>For a complete set of changes, please see the ExtUtils::ParseXS
changelog, available on the CPAN.</p>
</li>
<li>
<p><a href="File/Glob.html">File::Glob</a> has been upgraded from version 1.12 to 1.17.</p>
<p>On Windows, tilde (~) expansion now checks the <code class="inline"><span class="w">USERPROFILE</span></code>
 environment
variable, after checking <code class="inline"><span class="w">HOME</span></code>
.</p>
<p>It has a new <code class="inline"><span class="j">:</span><span class="w">bsd_glob</span></code>
 export tag, intended to replace <code class="inline"><span class="j">:</span><a class="l_k" href="functions/glob.html">glob</a></code>
.  Like
<code class="inline"><span class="j">:</span><a class="l_k" href="functions/glob.html">glob</a></code>
 it overrides <code class="inline"><a class="l_k" href="functions/glob.html">glob</a></code> with a function that does not split the glob
pattern into words, but, unlike <code class="inline"><span class="j">:</span><a class="l_k" href="functions/glob.html">glob</a></code>
, it iterates properly in scalar
context, instead of returning the last file.</p>
<p>There are other changes affecting Perl's own <code class="inline"><a class="l_k" href="functions/glob.html">glob</a></code> operator (which uses
File::Glob internally, except on VMS).  See <a href="#Performance-Enhancements">Performance Enhancements</a>
and <a href="#Selected-Bug-Fixes">Selected Bug Fixes</a>.</p>
</li>
<li>
<p><a href="FindBin.html">FindBin</a> updated from version 1.50 to 1.51.</p>
<p>It no longer returns a wrong result if a script of the same name as the
current one exists in the path and is executable.</p>
</li>
<li>
<p><a href="HTTP/Tiny.html">HTTP::Tiny</a> has been upgraded from version 0.012 to 0.017.</p>
<p>Added support for using <code class="inline"><span class="i">$ENV</span>{<span class="w">http_proxy</span>}</code>
 to set the default proxy host.</p>
<p>Adds additional shorthand methods for all common HTTP verbs,
a <code class="inline"><span class="i">post_form</span><span class="s">(</span><span class="s">)</span></code>
 method for POST-ing x-www-form-urlencoded data and
a <code class="inline"><span class="i">www_form_urlencode</span><span class="s">(</span><span class="s">)</span></code>
 utility method.</p>
</li>
<li>
<p><a href="IO.html">IO</a> has been upgraded from version 1.25_04 to 1.25_06, and <a href="IO/Handle.html">IO::Handle</a>
from version 1.31 to 1.33.</p>
<p>Together, these upgrades fix a problem with IO::Handle's <code class="inline"><span class="w">getline</span></code>
 and
<code class="inline"><span class="w">getlines</span></code>
 methods.  When these methods are called on the special ARGV
handle, the next file is automatically opened, as happens with the built-in
<code class="inline">&lt;&gt;</code>
 and <code class="inline"><a class="l_k" href="functions/readline.html">readline</a></code> functions.  But, unlike the built-ins, these
methods were not respecting the caller's use of the <a href="open.html">open</a> pragma and
applying the appropriate I/O layers to the newly-opened file
[rt.cpan.org #66474].</p>
</li>
<li>
<p><a href="IPC/Cmd.html">IPC::Cmd</a> has been upgraded from version 0.70 to 0.76.</p>
<p>Capturing of command output (both <code class="inline"><span class="w">STDOUT</span></code>
 and <code class="inline"><span class="w">STDERR</span></code>
) is now supported
using <a href="IPC/Open3.html">IPC::Open3</a> on MSWin32 without requiring <a href="http://search.cpan.org/perldoc/IPC::Run">IPC::Run</a>.</p>
</li>
<li>
<p><a href="IPC/Open3.html">IPC::Open3</a> has been upgraded from version 1.09 to 1.12.</p>
<p>Fixes a bug which prevented use of <code class="inline"><span class="w">open3</span></code>
 on Windows when <code class="inline"><span class="i">*STDIN</span></code>
,
<code class="inline"><span class="i">*STDOUT</span></code>
 or <code class="inline"><span class="i">*STDERR</span></code>
 had been localized.</p>
<p>Fixes a bug which prevented duplicating numeric file descriptors on Windows.</p>
<p><code class="inline"><span class="w">open3</span></code>
 with "-" for the program name works once more.  This was broken in
version 1.06 (and hence in Perl 5.14.0) [perl #95748].</p>
</li>
<li>
<p><a href="Locale/Codes.html">Locale::Codes</a> has been upgraded from version 3.16 to 3.21.</p>
<p>Added Language Extension codes (langext) and Language Variation codes (langvar)
as defined in the IANA language registry.</p>
<p>Added language codes from ISO 639-5</p>
<p>Added language/script codes from the IANA language subtag registry</p>
<p>Fixed an uninitialized value warning [rt.cpan.org #67438].</p>
<p>Fixed the return value for the all_XXX_codes and all_XXX_names functions
[rt.cpan.org #69100].</p>
<p>Reorganized modules to move Locale::MODULE to Locale::Codes::MODULE to allow
for cleaner future additions.  The original four modules (Locale::Language,
Locale::Currency, Locale::Country, Locale::Script) will continue to work, but
all new sets of codes will be added in the Locale::Codes namespace.</p>
<p>The code2XXX, XXX2code, all_XXX_codes, and all_XXX_names functions now
support retired codes.  All codesets may be specified by a constant or
by their name now.  Previously, they were specified only by a constant.</p>
<p>The alias_code function exists for backward compatibility.  It has been
replaced by rename_country_code.  The alias_code function will be
removed some time after September, 2013.</p>
<p>All work is now done in the central module (Locale::Codes).  Previously,
some was still done in the wrapper modules (Locale::Codes::*).  Added
Language Family codes (langfam) as defined in ISO 639-5.</p>
</li>
<li>
<p><a href="Math/BigFloat.html">Math::BigFloat</a> has been upgraded from version 1.993 to 1.997.</p>
<p>The <code class="inline"><span class="w">numify</span></code>
 method has been corrected to return a normalized Perl number
(the result of <code class="inline"><span class="n">0</span> + <span class="i">$thing</span></code>
), instead of a string [rt.cpan.org #66732].</p>
</li>
<li>
<p><a href="Math/BigInt.html">Math::BigInt</a> has been upgraded from version 1.994 to 1.998.</p>
<p>It provides a new <code class="inline"><span class="w">bsgn</span></code>
 method that complements the <code class="inline"><span class="w">babs</span></code>
 method.</p>
<p>It fixes the internal <code class="inline"><span class="w">objectify</span></code>
 function's handling of "foreign objects"
so they are converted to the appropriate class (Math::BigInt or
Math::BigFloat).</p>
</li>
<li>
<p><a href="Math/BigRat.html">Math::BigRat</a> has been upgraded from version 0.2602 to 0.2603.</p>
<p><code class="inline"><a class="l_k" href="functions/int.html">int()</a></code> on a Math::BigRat object containing -1/2 now creates a
Math::BigInt containing 0, rather than -0.  <a href="Math/BigInt.html">Math::BigInt</a> does not even
support negative zero, so the resulting object was actually malformed
[perl #95530].</p>
</li>
<li>
<p><a href="Math/Complex.html">Math::Complex</a> has been upgraded from version 1.56 to 1.59
and <a href="Math/Trig.html">Math::Trig</a> from version 1.2 to 1.22.</p>
<p>Fixes include: correct copy constructor usage; fix polarwise formatting with
numeric format specifier; and more stable <code class="inline"><span class="w">great_circle_direction</span></code>
 algorithm.</p>
</li>
<li>
<p><a href="Module/CoreList.html">Module::CoreList</a> has been upgraded from version 2.51 to 2.66.</p>
<p>The <code class="inline"><span class="w">corelist</span></code>
 utility now understands the <code class="inline">-r</code>
 option for displaying
Perl release dates and the <code class="inline">--<span class="w">diff</span></code>
 option to print the set of modlib
changes between two perl distributions.</p>
</li>
<li>
<p><a href="Module/Metadata.html">Module::Metadata</a> has been upgraded from version 1.000004 to 1.000009.</p>
<p>Adds <code class="inline"><span class="w">provides</span></code>
 method to generate a CPAN META provides data structure
correctly; use of <code class="inline"><span class="w">package_versions_from_directory</span></code>
 is discouraged.</p>
</li>
<li>
<p><a href="http://search.cpan.org/perldoc/ODBM_File">ODBM_File</a> has been upgraded from version 1.10 to 1.12.</p>
<p>The XS code is now compiled with <code class="inline"><span class="w">PERL_NO_GET_CONTEXT</span></code>
, which will aid
performance under ithreads.</p>
</li>
<li>
<p><a href="open.html">open</a> has been upgraded from version 1.08 to 1.10.</p>
<p>It no longer turns off layers on standard handles when invoked without the
":std" directive.  Similarly, when invoked <i>with</i> the ":std" directive, it
now clears layers on STDERR before applying the new ones, and not just on
STDIN and STDOUT [perl #92728].</p>
</li>
<li>
<p><a href="overload.html">overload</a> has been upgraded from version 1.13 to 1.18.</p>
<p><code class="inline"><span class="w">overload::Overloaded</span></code>
 no longer calls <code class="inline"><span class="w">can</span></code>
 on the class, but uses
another means to determine whether the object has overloading.  It was
never correct for it to call <code class="inline"><span class="w">can</span></code>
, as overloading does not respect
AUTOLOAD.  So classes that autoload methods and implement <code class="inline"><span class="w">can</span></code>
 no longer
have to account for overloading [perl #40333].</p>
<p>A warning is now produced for invalid arguments.  See <a href="#New-Diagnostics">New Diagnostics</a>.</p>
</li>
<li>
<p><a href="PerlIO/scalar.html">PerlIO::scalar</a> has been upgraded from version 0.11 to 0.14.</p>
<p>(This is the module that implements <code class="inline"><a class="l_k" href="functions/open.html">open</a> <span class="i">$fh</span><span class="cm">,</span> <span class="q">&#39;&gt;&#39;</span><span class="cm">,</span> \<span class="i">$scalar</span></code>
.)</p>
<p>It fixes a problem with <code class="inline"><a class="l_k" href="functions/open.html">open</a> <a class="l_k" href="functions/my.html">my</a> <span class="i">$fh</span><span class="cm">,</span> <span class="q">&quot;&gt;&quot;</span><span class="cm">,</span> \<span class="i">$scalar</span></code>
 not working if
<code class="inline"><span class="i">$scalar</span></code>
 is a copy-on-write scalar. (5.14.2)</p>
<p>It also fixes a hang that occurs with <code class="inline"><a class="l_k" href="functions/readline.html">readline</a></code> or <code class="inline"><span class="q">&lt;$fh&gt;</span></code>
 if a
typeglob has been assigned to $scalar [perl #92258].</p>
<p>It no longer assumes during <code class="inline"><a class="l_k" href="functions/seek.html">seek</a></code> that $scalar is a string internally.
If it didn't crash, it was close to doing so [perl #92706].  Also, the
internal print routine no longer assumes that the position set by <code class="inline"><a class="l_k" href="functions/seek.html">seek</a></code>
is valid, but extends the string to that position, filling the intervening
bytes (between the old length and the seek position) with nulls
[perl #78980].</p>
<p>Printing to an in-memory handle now works if the $scalar holds a reference,
stringifying the reference before modifying it.  References used to be
treated as empty strings.</p>
<p>Printing to an in-memory handle no longer crashes if the $scalar happens to
hold a number internally, but no string buffer.</p>
<p>Printing to an in-memory handle no longer creates scalars that confuse
the regular expression engine [perl #108398].</p>
</li>
<li>
<p><a href="Pod/Functions.html">Pod::Functions</a> has been upgraded from version 1.04 to 1.05.</p>
<p><i>Functions.pm</i> is now generated at perl build time from annotations in
<i>perlfunc.pod</i>.  This will ensure that <a href="Pod/Functions.html">Pod::Functions</a> and <a href="perlfunc.html">perlfunc</a>
remain in synchronisation.</p>
</li>
<li>
<p><a href="Pod/Html.html">Pod::Html</a> has been upgraded from version 1.11 to 1.1502.</p>
<p>This is an extensive rewrite of Pod::Html to use <a href="Pod/Simple.html">Pod::Simple</a> under
the hood.  The output has changed significantly.</p>
</li>
<li>
<p><a href="Pod/Perldoc.html">Pod::Perldoc</a> has been upgraded from version 3.15_03 to 3.17.</p>
<p>It corrects the search paths on VMS [perl #90640]. (5.14.1)</p>
<p>The <b>-v</b> option now fetches the right section for <code class="inline"><span class="i">$0</span></code>
.</p>
<p>This upgrade has numerous significant fixes.  Consult its changelog on
the CPAN for more information.</p>
</li>
<li>
<p><a href="POSIX.html">POSIX</a> has been upgraded from version 1.24 to 1.30.</p>
<p><a href="POSIX.html">POSIX</a> no longer uses <a href="AutoLoader.html">AutoLoader</a>.  Any code which was relying on this
implementation detail was buggy, and may fail because of this change.
The module's Perl code has been considerably simplified, roughly halving
the number of lines, with no change in functionality.  The XS code has
been refactored to reduce the size of the shared object by about 12%,
with no change in functionality.  More POSIX functions now have tests.</p>
<p><code class="inline"><span class="w">sigsuspend</span></code>
 and <code class="inline"><span class="w">pause</span></code>
 now run signal handlers before returning, as the
whole point of these two functions is to wait until a signal has
arrived, and then return <i>after</i> it has been triggered.  Delayed, or
"safe", signals were preventing that from happening, possibly resulting in
race conditions [perl #107216].</p>
<p><code class="inline"><span class="w">POSIX::sleep</span></code>
 is now a direct call into the underlying OS <code class="inline"><a class="l_k" href="functions/sleep.html">sleep</a></code>
function, instead of being a Perl wrapper on <code class="inline"><span class="w">CORE::sleep</span></code>
.
<code class="inline"><span class="w">POSIX::dup2</span></code>
 now returns the correct value on Win32 (<i>i.e.</i>, the file
descriptor).  <code class="inline"><span class="w">POSIX::SigSet</span></code>
 <code class="inline"><span class="w">sigsuspend</span></code>
 and <code class="inline"><span class="w">sigpending</span></code>
 and
<code class="inline"><span class="w">POSIX::pause</span></code>
 now dispatch safe signals immediately before returning to
their caller.</p>
<p><code class="inline"><span class="w">POSIX::Termios::setattr</span></code>
 now defaults the third argument to <code class="inline"><span class="w">TCSANOW</span></code>
,
instead of 0. On most platforms <code class="inline"><span class="w">TCSANOW</span></code>
 is defined to be 0, but on some
0 is not a valid parameter, which caused a call with defaults to fail.</p>
</li>
<li>
<p><a href="Socket.html">Socket</a> has been upgraded from version 1.94 to 2.001.</p>
<p>It has new functions and constants for handling IPv6 sockets:</p>
<pre class="verbatim"><ol><li>    <span class="w">pack_ipv6_mreq</span></li><li>    <span class="w">unpack_ipv6_mreq</span></li><li>    <span class="w">IPV6_ADD_MEMBERSHIP</span></li><li>    <span class="w">IPV6_DROP_MEMBERSHIP</span></li><li>    <span class="w">IPV6_MTU</span></li><li>    <span class="w">IPV6_MTU_DISCOVER</span></li><li>    <span class="w">IPV6_MULTICAST_HOPS</span></li><li>    <span class="w">IPV6_MULTICAST_IF</span></li><li>    <span class="w">IPV6_MULTICAST_LOOP</span></li><li>    <span class="w">IPV6_UNICAST_HOPS</span></li><li>    <span class="w">IPV6_V6ONLY</span></li></ol></pre></li>
<li>
<p><a href="Storable.html">Storable</a> has been upgraded from version 2.27 to 2.34.</p>
<p>It no longer turns copy-on-write scalars into read-only scalars when
freezing and thawing.</p>
</li>
<li>
<p><a href="Sys/Syslog.html">Sys::Syslog</a> has been upgraded from version 0.27 to 0.29.</p>
<p>This upgrade closes many outstanding bugs.</p>
</li>
<li>
<p><a href="Term/ANSIColor.html">Term::ANSIColor</a> has been upgraded from version 3.00 to 3.01.</p>
<p>Only interpret an initial array reference as a list of colors, not any initial
reference, allowing the colored function to work properly on objects with
stringification defined.</p>
</li>
<li>
<p><a href="Term/ReadLine.html">Term::ReadLine</a> has been upgraded from version 1.07 to 1.09.</p>
<p>Term::ReadLine now supports any event loop, including unpublished ones and
simple <a href="IO/Select.html">IO::Select</a>, loops without the need to rewrite existing code for
any particular framework [perl #108470].</p>
</li>
<li>
<p><a href="threads/shared.html">threads::shared</a> has been upgraded from version 1.37 to 1.40.</p>
<p>Destructors on shared objects used to be ignored sometimes if the objects
were referenced only by shared data structures.  This has been mostly
fixed, but destructors may still be ignored if the objects still exist at
global destruction time [perl #98204].</p>
</li>
<li>
<p><a href="Unicode/Collate.html">Unicode::Collate</a> has been upgraded from version 0.73 to 0.89.</p>
<p>Updated to CLDR 1.9.1</p>
<p>Locales updated to CLDR 2.0: mk, mt, nb, nn, ro, ru, sk, sr, sv, uk,
zh__pinyin, zh__stroke</p>
<p>Newly supported locales: bn, fa, ml, mr, or, pa, sa, si, si__dictionary,
sr_Latn, sv__reformed, ta, te, th, ur, wae.</p>
<p>Tailored compatibility ideographs as well as unified ideographs for the
locales: ja, ko, zh__big5han, zh__gb2312han, zh__pinyin, zh__stroke.</p>
<p>Locale/*.pl files are now searched for in @INC.</p>
</li>
<li>
<p><a href="Unicode/Normalize.html">Unicode::Normalize</a> has been upgraded from version 1.10 to 1.14.</p>
<p>Fixes for the removal of <i>unicore/CompositionExclusions.txt</i> from core.</p>
</li>
<li>
<p><a href="Unicode/UCD.html">Unicode::UCD</a> has been upgraded from version 0.32 to 0.43.</p>
<p>This adds four new functions:  <code class="inline"><span class="i">prop_aliases</span><span class="s">(</span><span class="s">)</span></code>
 and
<code class="inline"><span class="i">prop_value_aliases</span><span class="s">(</span><span class="s">)</span></code>
, which are used to find all Unicode-approved
synonyms for property names, or to convert from one name to another;
<code class="inline"><span class="w">prop_invlist</span></code>
 which returns all code points matching a given
Unicode binary property; and <code class="inline"><span class="w">prop_invmap</span></code>
 which returns the complete
specification of a given Unicode property.</p>
</li>
<li>
<p><a href="http://search.cpan.org/perldoc/Win32API::File">Win32API::File</a> has been upgraded from version 0.1101 to 0.1200.</p>
<p>Added SetStdHandle and GetStdHandle functions</p>
</li>
</ul>
<a name="Removed-Modules-and-Pragmata"></a><h2>Removed Modules and Pragmata</h2>
<p>As promised in Perl 5.14.0's release notes, the following modules have
been removed from the core distribution, and if needed should be installed
from CPAN instead.</p>
<ul>
<li>
<p><a href="http://search.cpan.org/perldoc/Devel::DProf">Devel::DProf</a> has been removed from the Perl core.  Prior version was
20110228.00.</p>
</li>
<li>
<p><a href="http://search.cpan.org/perldoc/Shell">Shell</a> has been removed from the Perl core.  Prior version was 0.72_01.</p>
</li>
<li>
<p>Several old perl4-style libraries which have been deprecated with 5.14
are now removed:</p>
<pre class="verbatim"><ol><li>    <span class="w">abbrev</span>.<span class="w">pl</span> <span class="w">assert</span>.<span class="w">pl</span> <span class="w">bigfloat</span>.<span class="w">pl</span> <span class="w">bigint</span>.<span class="w">pl</span> <span class="w">bigrat</span>.<span class="w">pl</span> <span class="w">cacheout</span>.<span class="w">pl</span></li><li>    <span class="w">complete</span>.<span class="w">pl</span> <span class="w">ctime</span>.<span class="w">pl</span> <span class="w">dotsh</span>.<span class="w">pl</span> <span class="w">exceptions</span>.<span class="w">pl</span> <span class="w">fastcwd</span>.<span class="w">pl</span> <span class="w">flush</span>.<span class="w">pl</span></li><li>    <span class="w">getcwd</span>.<span class="w">pl</span> <span class="w">getopt</span>.<span class="w">pl</span> <span class="w">getopts</span>.<span class="w">pl</span> <span class="w">hostname</span>.<span class="w">pl</span> <span class="w">importenv</span>.<span class="w">pl</span></li><li>    <span class="w">lib</span>/<span class="i">find</span><span class="s">{</span><span class="cm">,</span><span class="w">depth</span><span class="s">}</span>.<span class="w">pl</span> <span class="w">look</span>.<span class="w">pl</span> <span class="w">newgetopt</span>.<span class="w">pl</span> <span class="w">open2</span>.<span class="w">pl</span> <span class="w">open3</span>.<span class="w">pl</span></li><li>    <span class="w">pwd</span>.<span class="w">pl</span> <span class="w">shellwords</span>.<span class="w">pl</span> <a class="l_k" href="functions/stat.html">stat</a>.<span class="w">pl</span> <span class="w">tainted</span>.<span class="w">pl</span> <span class="w">termcap</span>.<span class="w">pl</span> <span class="w">timelocal</span>.<span class="w">pl</span></li></ol></pre><p>They can be found on CPAN as <a href="http://search.cpan.org/perldoc/Perl4::CoreLibs">Perl4::CoreLibs</a>.</p>
</li>
</ul>
<a name="Documentation"></a><h1>Documentation</h1>
<a name="New-Documentation"></a><h2>New Documentation</h2>
<a name="the-perldtrace-manpage"></a><h3><a href="perldtrace.html">perldtrace</a></h3>
<p><a href="perldtrace.html">perldtrace</a> describes Perl's DTrace support, listing the provided probes
and gives examples of their use.</p>
<a name="the-perlexperiment-manpage"></a><h3><a href="perlexperiment.html">perlexperiment</a></h3>
<p>This document is intended to provide a list of experimental features in
Perl.  It is still a work in progress.</p>
<a name="the-perlootut-manpage"></a><h3><a href="perlootut.html">perlootut</a></h3>
<p>This a new OO tutorial.  It focuses on basic OO concepts, and then recommends
that readers choose an OO framework from CPAN.</p>
<a name="the-perlxstypemap-manpage"></a><h3><a href="perlxstypemap.html">perlxstypemap</a></h3>
<p>The new manual describes the XS typemapping mechanism in unprecedented
detail and combines new documentation with information extracted from
<a href="perlxs.html">perlxs</a> and the previously unofficial list of all core typemaps.</p>
<a name="Changes-to-Existing-Documentation"></a><h2>Changes to Existing Documentation</h2>
<a name="the-perlapi-manpage"></a><h3><a href="perlapi.html">perlapi</a></h3>
<ul>
<li>
<p>The HV API has long accepted negative lengths to show that the key is
in UTF8.  This is now documented.</p>
</li>
<li>
<p>The <code class="inline"><span class="i">boolSV</span><span class="s">(</span><span class="s">)</span></code>
 macro is now documented.</p>
</li>
</ul>
<a name="the-perlfunc-manpage"></a><h3><a href="perlfunc.html">perlfunc</a></h3>
<ul>
<li>
<p><code class="inline"><a class="l_k" href="functions/dbmopen.html">dbmopen</a></code> treats a 0 mode as a special case, that prevents a nonexistent
file from being created.  This has been the case since Perl 5.000, but was
never documented anywhere.  Now the perlfunc entry mentions it
[perl #90064].</p>
</li>
<li>
<p>As an accident of history, <code class="inline"><a class="l_k" href="functions/open.html">open</a> <span class="i">$fh</span><span class="cm">,</span> <span class="q">&#39;&lt;:&#39;</span><span class="cm">,</span> ...</code>
 applies the default
layers for the platform (<code class="inline"><span class="j">:</span><span class="w">raw</span></code>
 on Unix, <code class="inline"><span class="j">:</span><span class="w">crlf</span></code>
 on Windows), ignoring
whatever is declared by <a href="open.html">open.pm</a>.  This seems such a useful feature
it has been documented in <a href="functions/open.html">open</a> and <a href="open.html">open</a>.</p>
</li>
<li>
<p>The entry for <code class="inline"><a class="l_k" href="functions/split.html">split</a></code> has been rewritten.  It is now far clearer than
before.</p>
</li>
</ul>
<a name="the-perlguts-manpage"></a><h3><a href="perlguts.html">perlguts</a></h3>
<ul>
<li>
<p>A new section, <a href="perlguts.html#Autoloading-with-XSUBs">Autoloading with XSUBs</a>,
has been added, which explains the two APIs for accessing the name of the
autoloaded sub.</p>
</li>
<li>
<p>Some function descriptions in <a href="perlguts.html">perlguts</a> were confusing, as it was
not clear whether they referred to the function above or below the
description.  This has been clarified [perl #91790].</p>
</li>
</ul>
<a name="the-perlobj-manpage"></a><h3><a href="perlobj.html">perlobj</a></h3>
<ul>
<li>
<p>This document has been rewritten from scratch, and its coverage of various OO
concepts has been expanded.</p>
</li>
</ul>
<a name="the-perlop-manpage"></a><h3><a href="perlop.html">perlop</a></h3>
<ul>
<li>
<p>Documentation of the smartmatch operator has been reworked and moved from
perlsyn to perlop where it belongs.</p>
<p>It has also been corrected for the case of <code class="inline"><a class="l_k" href="functions/undef.html">undef</a></code> on the left-hand
side.  The list of different smart match behaviors had an item in the
wrong place.</p>
</li>
<li>
<p>Documentation of the ellipsis statement (<code class="inline">...</code>
) has been reworked and
moved from perlop to perlsyn.</p>
</li>
<li>
<p>The explanation of bitwise operators has been expanded to explain how they
work on Unicode strings (5.14.1).</p>
</li>
<li>
<p>More examples for <code class="inline"><a class="l_k" href="functions/m.html">m//g</a></code> have been added (5.14.1).</p>
</li>
<li>
<p>The <code class="inline"><span class="h">&lt;&lt;\FOO</span></code>
 here-doc syntax has been documented (5.14.1).</p>
</li>
</ul>
<a name="the-perlpragma-manpage"></a><h3><a href="perlpragma.html">perlpragma</a></h3>
<ul>
<li>
<p>There is now a standard convention for naming keys in the <code class="inline"><span class="i">%^H</span></code>
,
documented under <a href="perlpragma.html#Key-naming">Key naming</a>.</p>
</li>
</ul>
<a name="the-perlsec%2fLaundering-and-Detecting-Tainted-Data-manpage"></a><h3><a href="perlsec.html#Laundering-and-Detecting-Tainted-Data">Laundering and Detecting Tainted Data in perlsec</a></h3>
<ul>
<li>
<p>The example function for checking for taintedness contained a subtle
error.  <code class="inline"><span class="i">$@</span></code>
 needs to be localized to prevent its changing this
global's value outside the function.  The preferred method to check for
this remains <a href="Scalar/Util.html#tainted">tainted in Scalar::Util</a>.</p>
</li>
</ul>
<a name="the-perllol-manpage"></a><h3><a href="perllol.html">perllol</a></h3>
<ul>
<li>
<p><a href="perllol.html">perllol</a> has been expanded with examples using the new <code class="inline"><a class="l_k" href="functions/push.html">push</a> <span class="i">$scalar</span></code>

syntax introduced in Perl 5.14.0 (5.14.1).</p>
</li>
</ul>
<a name="the-perlmod-manpage"></a><h3><a href="perlmod.html">perlmod</a></h3>
<ul>
<li>
<p><a href="perlmod.html">perlmod</a> now states explicitly that some types of explicit symbol table
manipulation are not supported.  This codifies what was effectively already
the case [perl #78074].</p>
</li>
</ul>
<a name="the-perlpodstyle-manpage"></a><h3><a href="perlpodstyle.html">perlpodstyle</a></h3>
<ul>
<li>
<p>The tips on which formatting codes to use have been corrected and greatly
expanded.</p>
</li>
<li>
<p>There are now a couple of example one-liners for previewing POD files after
they have been edited.</p>
</li>
</ul>
<a name="the-perlre-manpage"></a><h3><a href="perlre.html">perlre</a></h3>
<ul>
<li>
<p>The <code class="inline"><span class="s">(</span><span class="i">*COMMIT</span><span class="s">)</span></code>
 directive is now listed in the right section
(<a href="perlre.html#Verbs-without-an-argument">Verbs without an argument</a>).</p>
</li>
</ul>
<a name="the-perlrun-manpage"></a><h3><a href="perlrun.html">perlrun</a></h3>
<ul>
<li>
<p><a href="perlrun.html">perlrun</a> has undergone a significant clean-up.  Most notably, the
<b>-0x...</b> form of the <b>-0</b> flag has been clarified, and the final section
on environment variables has been corrected and expanded (5.14.1).</p>
</li>
</ul>
<a name="the-perlsub-manpage"></a><h3><a href="perlsub.html">perlsub</a></h3>
<ul>
<li>
<p>The ($;) prototype syntax, which has existed for rather a long time, is now
documented in <a href="perlsub.html">perlsub</a>.  It lets a unary function have the same
precedence as a list operator.</p>
</li>
</ul>
<a name="the-perltie-manpage"></a><h3><a href="perltie.html">perltie</a></h3>
<ul>
<li>
<p>The required syntax for tying handles has been documented.</p>
</li>
</ul>
<a name="the-perlvar-manpage"></a><h3><a href="perlvar.html">perlvar</a></h3>
<ul>
<li>
<p>The documentation for <a href="perlvar.html#%24!">$!</a> has been corrected and clarified.
It used to state that $! could be <code class="inline"><a class="l_k" href="functions/undef.html">undef</a></code>, which is not the case.  It was
also unclear whether system calls set C's <code class="inline"><span class="w">errno</span></code>
 or Perl's <code class="inline"><span class="i">$!</span></code>

[perl #91614].</p>
</li>
<li>
<p>Documentation for <a href="perlvar.html#%24%24">$$</a> has been amended with additional
cautions regarding changing the process ID.</p>
</li>
</ul>
<a name="Other-Changes"></a><h3>Other Changes</h3>
<ul>
<li>
<p><a href="perlxs.html">perlxs</a> was extended with documentation on inline typemaps.</p>
</li>
<li>
<p><a href="perlref.html">perlref</a> has a new <a href="perlref.html#Circular-References">Circular References</a>
section explaining how circularities may not be freed and how to solve that
with weak references.</p>
</li>
<li>
<p>Parts of <a href="perlapi.html">perlapi</a> were clarified, and Perl equivalents of some C
functions have been added as an additional mode of exposition.</p>
</li>
<li>
<p>A few parts of <a href="perlre.html">perlre</a> and <a href="perlrecharclass.html">perlrecharclass</a> were clarified.</p>
</li>
</ul>
<a name="Removed-Documentation"></a><h2>Removed Documentation</h2>
<a name="Old-OO-Documentation"></a><h3>Old OO Documentation</h3>
<p>The old OO tutorials, perltoot, perltooc, and perlboot, have been
removed.  The perlbot (bag of object tricks) document has been removed
as well.</p>
<a name="Development-Deltas"></a><h3>Development Deltas</h3>
<p>The perldelta files for development releases are no longer packaged with
perl.  These can still be found in the perl source code repository.</p>
<a name="Diagnostics"></a><h1>Diagnostics</h1>
<p>The following additions or changes have been made to diagnostic output,
including warnings and fatal error messages.  For the complete list of
diagnostic messages, see <a href="perldiag.html">perldiag</a>.</p>
<a name="New-Diagnostics"></a><h2>New Diagnostics</h2>
<a name="New-Errors"></a><h3>New Errors</h3>
<ul>
<li>
<p><a href="perldiag.html#Cannot-set-tied-%40DB%3a%3aargs">Cannot set tied @DB::args</a></p>
<p>This error occurs when <code class="inline"><a class="l_k" href="functions/caller.html">caller</a></code> tries to set <code class="inline"><span class="i">@DB::args</span></code>
 but finds it
tied.  Before this error was added, it used to crash instead.</p>
</li>
<li>
<p><a href="perldiag.html#Cannot-tie-unreifiable-array">Cannot tie unreifiable array</a></p>
<p>This error is part of a safety check that the <code class="inline"><a class="l_k" href="functions/tie.html">tie</a></code> operator does before
tying a special array like <code class="inline"><span class="i">@_</span></code>
.  You should never see this message.</p>
</li>
<li>
<p><a href="perldiag.html#%26CORE%3a%3a%25s-cannot-be-called-directly">&amp;CORE::%s cannot be called directly</a></p>
<p>This occurs when a subroutine in the <code class="inline"><span class="w">CORE::</span></code>
 namespace is called
with <code class="inline"><span class="i">&amp;foo</span></code>
 syntax or through a reference.  Some subroutines
in this package cannot yet be called that way, but must be
called as barewords.  See <a href="#Subroutines-in-the-CORE-namespace">Subroutines in the CORE namespace</a>, above.</p>
</li>
<li>
<p><a href="perldiag.html#Source-filters-apply-only-to-byte-streams">Source filters apply only to byte streams</a></p>
<p>This new error occurs when you try to activate a source filter (usually by
loading a source filter module) within a string passed to <code class="inline"><a class="l_k" href="functions/eval.html">eval</a></code> under the
<code class="inline"><span class="w">unicode_eval</span></code>
 feature.</p>
</li>
</ul>
<a name="New-Warnings"></a><h3>New Warnings</h3>
<ul>
<li>
<p><a href="perldiag.html#defined(%40array)-is-deprecated">defined(@array) is deprecated</a></p>
<p>The long-deprecated <code class="inline"><a class="l_k" href="functions/defined.html">defined(@array)</a></code> now also warns for package variables.
Previously it issued a warning for lexical variables only.</p>
</li>
<li>
<p><a href="perldiag.html#length()-used-on-%25s">length() used on %s</a></p>
<p>This new warning occurs when <code class="inline"><a class="l_k" href="functions/length.html">length</a></code> is used on an array or hash, instead
of <code class="inline"><a class="l_k" href="functions/scalar.html">scalar(@array)</a></code> or <code class="inline"><a class="l_k" href="functions/scalar.html">scalar</a><span class="s">(</span><a class="l_k" href="functions/keys.html">keys</a> <span class="i">%hash</span><span class="s">)</span></code>
.</p>
</li>
<li>
<p><a href="perldiag.html#lvalue-attribute-%25s-already-defined-subroutine">lvalue attribute %s already-defined subroutine</a></p>
<p><a href="attributes.html">attributes.pm</a> now emits this warning when the :lvalue
attribute is applied to a Perl subroutine that has already been defined, as
doing so can have unexpected side-effects.</p>
</li>
<li>
<p><a href="perldiag.html#overload-arg-'%25s'-is-invalid">overload arg '%s' is invalid</a></p>
<p>This warning, in the "overload" category, is produced when the overload
pragma is given an argument it doesn't recognize, presumably a mistyped
operator.</p>
</li>
<li>
<p><a href="perldiag.html#%24%5b-used-in-%25s-(did-you-mean-%24%5d-%3f)">$[ used in %s (did you mean $] ?)</a></p>
<p>This new warning exists to catch the mistaken use of <code class="inline"><span class="i">$[</span></code>
 in version
checks.  <code class="inline"><span class="i">$]</span></code>
, not <code class="inline"><span class="i">$[</span></code>
, contains the version number.</p>
</li>
<li>
<p><a href="perldiag.html#Useless-assignment-to-a-temporary">Useless assignment to a temporary</a></p>
<p>Assigning to a temporary scalar returned
from an lvalue subroutine now produces this
warning [perl #31946].</p>
</li>
<li>
<p><a href="perldiag.html#Useless-use-of-%5cE">Useless use of \E</a></p>
<p><code class="inline">\<span class="w">E</span></code>
 does nothing unless preceded by <code class="inline">\<span class="w">Q</span></code>
, <code class="inline">\<span class="w">L</span></code>
 or <code class="inline">\<span class="w">U</span></code>
.</p>
</li>
</ul>
<a name="Removed-Errors"></a><h2>Removed Errors</h2>
<ul>
<li>
<p>"sort is now a reserved word"</p>
<p>This error used to occur when <code class="inline"><a class="l_k" href="functions/sort.html">sort</a></code> was called without arguments,
followed by <code class="inline"><span class="sc">;</span></code>
 or <code class="inline">)</code>.  (E.g., <code class="inline"><a class="l_k" href="functions/sort.html">sort;</a></code> would die, but <code class="inline"><span class="s">{</span><a class="l_k" href="functions/sort.html">sort</a><span class="s">}</span></code>
 was
OK.)  This error message was added in Perl 3 to catch code like
<code class="inline"><a class="l_k" href="functions/close.html">close(sort)</a></code> which would no longer work.  More than two decades later,
this message is no longer appropriate.  Now <code class="inline"><a class="l_k" href="functions/sort.html">sort</a></code> without arguments is
always allowed, and returns an empty list, as it did in those cases
where it was already allowed [perl #90030].</p>
</li>
</ul>
<a name="Changes-to-Existing-Diagnostics"></a><h2>Changes to Existing Diagnostics</h2>
<ul>
<li>
<p>The "Applying pattern match..." or similar warning produced when an
array or hash is on the left-hand side of the <code class="inline">=~</code>
 operator now
mentions the name of the variable.</p>
</li>
<li>
<p>The "Attempt to free non-existent shared string" has had the spelling
of "non-existent" corrected to "nonexistent".  It was already listed
with the correct spelling in <a href="perldiag.html">perldiag</a>.</p>
</li>
<li>
<p>The error messages for using <code class="inline"><span class="w">default</span></code>
 and <code class="inline">when</code>
 outside a
topicalizer have been standardized to match the messages for <code class="inline"><a class="l_k" href="functions/continue.html">continue</a></code>
and loop controls.  They now read 'Can't "default" outside a
topicalizer' and 'Can't "when" outside a topicalizer'.  They both used
to be 'Can't use when() outside a topicalizer' [perl #91514].</p>
</li>
<li>
<p>The message, "Code point 0x%X is not Unicode, no properties match it;
all inverse properties do" has been changed to "Code point 0x%X is not
Unicode, all \p{} matches fail; all \P{} matches succeed".</p>
</li>
<li>
<p>Redefinition warnings for constant subroutines used to be mandatory,
even occurring under <code class="inline"><a class="l_k" href="functions/no.html">no</a> <span class="w">warnings</span></code>
.  Now they respect the <a href="warnings.html">warnings</a>
pragma.</p>
</li>
<li>
<p>The "glob failed" warning message is now suppressible via <code class="inline"><a class="l_k" href="functions/no.html">no</a> <span class="w">warnings</span></code>

[perl #111656].</p>
</li>
<li>
<p>The <a href="perldiag.html#Invalid-version-format-(%25s)">Invalid version format</a>
error message now says "negative version number" within the parentheses,
rather than "non-numeric data", for negative numbers.</p>
</li>
<li>
<p>The two warnings
<a href="perldiag.html#Possible-attempt-to-put-comments-in-qw()-list">Possible attempt to put comments in qw() list</a>
and
<a href="perldiag.html#Possible-attempt-to-separate-words-with-commas">Possible attempt to separate words with commas</a>
are no longer mutually exclusive: the same <code class="inline"><a class="l_k" href="functions/qw.html">qw</a></code> construct may produce
both.</p>
</li>
<li>
<p>The uninitialized warning for <code class="inline"><a class="l_k" href="functions/y.html">y///r</a></code> when <code class="inline"><span class="i">$_</span></code>
 is implicit and
undefined now mentions the variable name, just like the non-/r variation
of the operator.</p>
</li>
<li>
<p>The 'Use of "foo" without parentheses is ambiguous' warning has been
extended to apply also to user-defined subroutines with a (;$)
prototype, and not just to built-in functions.</p>
</li>
<li>
<p>Warnings that mention the names of lexical (<code class="inline"><a class="l_k" href="functions/my.html">my</a></code>) variables with
Unicode characters in them now respect the presence or absence of the
<code class="inline"><span class="j">:</span><span class="w">utf8</span></code>
 layer on the output handle, instead of outputting UTF8
regardless.  Also, the correct names are included in the strings passed
to <code class="inline"><span class="i">$SIG</span>{<span class="w">__WARN__</span>}</code>
 handlers, rather than the raw UTF8 bytes.</p>
</li>
</ul>
<a name="Utility-Changes"></a><h1>Utility Changes</h1>
<a name="the-h2ph-manpage"></a><h3><a href="h2ph.html">h2ph</a></h3>
<ul>
<li>
<p><a href="h2ph.html">h2ph</a> used to generate code of the form</p>
<pre class="verbatim"><ol><li>  <a class="l_k" href="functions/unless.html">unless</a><span class="s">(</span><a class="l_k" href="functions/defined.html">defined</a><span class="s">(</span><span class="i">&amp;FOO</span><span class="s">)</span><span class="s">)</span> <span class="s">{</span></li><li><a name="FOO"></a>    sub <span class="m">FOO ()</span> <span class="s">{</span><span class="n">42</span><span class="sc">;</span><span class="s">}</span></li><li>  <span class="s">}</span></li></ol></pre><p>But the subroutine is a compile-time declaration, and is hence unaffected
by the condition.  It has now been corrected to emit a string <code class="inline"><a class="l_k" href="functions/eval.html">eval</a></code>
around the subroutine [perl #99368].</p>
</li>
</ul>
<a name="the-splain-manpage"></a><h3><a href="splain.html">splain</a></h3>
<ul>
<li>
<p><i>splain</i> no longer emits backtraces with the first line number repeated.</p>
<p>This:</p>
<pre class="verbatim"><ol><li>    <span class="w">Uncaught</span> <span class="w">exception</span> <span class="w">from</span> <span class="w">user</span> <span class="w">code</span><span class="co">:</span></li><li>            <span class="w">Cannot</span> <span class="w">fwiddle</span> <span class="w">the</span> <span class="w">fwuddle</span> <span class="w">at</span> -e <span class="w">line</span> <span class="n">1.</span></li><li>     <span class="w">at</span> -e <span class="w">line</span> <span class="n">1</span></li><li>            <span class="i">main::baz</span><span class="s">(</span><span class="s">)</span> <span class="w">called</span> <span class="w">at</span> -e <span class="w">line</span> <span class="n">1</span></li><li>            <span class="i">main::bar</span><span class="s">(</span><span class="s">)</span> <span class="w">called</span> <span class="w">at</span> -e <span class="w">line</span> <span class="n">1</span></li><li>            <span class="i">main::foo</span><span class="s">(</span><span class="s">)</span> <span class="w">called</span> <span class="w">at</span> -e <span class="w">line</span> <span class="n">1</span></li></ol></pre><p>has become this:</p>
<pre class="verbatim"><ol><li>    <span class="w">Uncaught</span> <span class="w">exception</span> <span class="w">from</span> <span class="w">user</span> <span class="w">code</span><span class="co">:</span></li><li>            <span class="w">Cannot</span> <span class="w">fwiddle</span> <span class="w">the</span> <span class="w">fwuddle</span> <span class="w">at</span> -e <span class="w">line</span> <span class="n">1.</span></li><li>            <span class="i">main::baz</span><span class="s">(</span><span class="s">)</span> <span class="w">called</span> <span class="w">at</span> -e <span class="w">line</span> <span class="n">1</span></li><li>            <span class="i">main::bar</span><span class="s">(</span><span class="s">)</span> <span class="w">called</span> <span class="w">at</span> -e <span class="w">line</span> <span class="n">1</span></li><li>            <span class="i">main::foo</span><span class="s">(</span><span class="s">)</span> <span class="w">called</span> <span class="w">at</span> -e <span class="w">line</span> <span class="n">1</span></li></ol></pre></li>
<li>
<p>Some error messages consist of multiple lines that are listed as separate
entries in <a href="perldiag.html">perldiag</a>.  splain has been taught to find the separate
entries in these cases, instead of simply failing to find the message.</p>
</li>
</ul>
<a name="the-zipdetails-manpage"></a><h3><a href="zipdetails.html">zipdetails</a></h3>
<ul>
<li>
<p>This is a new utility, included as part of an
<a href="IO/Compress/Base.html">IO::Compress::Base</a> upgrade.</p>
<p><a href="zipdetails.html">zipdetails</a> displays information about the internal record structure
of the zip file.  It is not concerned with displaying any details of
the compressed data stored in the zip file.</p>
</li>
</ul>
<a name="Configuration-and-Compilation"></a><h1>Configuration and Compilation</h1>
<ul>
<li>
<p><i>regexp.h</i> has been modified for compatibility with GCC's <b>-Werror</b>
option, as used by some projects that include perl's header files (5.14.1).</p>
</li>
<li>
<p><code class="inline"><span class="i">USE_LOCALE</span><span class="s">{</span><span class="cm">,</span><span class="w">_COLLATE</span><span class="cm">,</span><span class="w">_CTYPE</span><span class="cm">,</span><span class="w">_NUMERIC</span><span class="s">}</span></code>
 have been added the output of perl -V
as they have affect the behavior of the interpreter binary (albeit
in only a small area).</p>
</li>
<li>
<p>The code and tests for <a href="IPC/Open2.html">IPC::Open2</a> have been moved from <i>ext/IPC-Open2</i>
into <i>ext/IPC-Open3</i>, as <code class="inline"><span class="i">IPC::Open2::open2</span><span class="s">(</span><span class="s">)</span></code>
 is implemented as a thin
wrapper around <code class="inline"><span class="i">IPC::Open3::_open3</span><span class="s">(</span><span class="s">)</span></code>
, and hence is very tightly coupled to
it.</p>
</li>
<li>
<p>The magic types and magic vtables are now generated from data in a new script
<i>regen/mg_vtable.pl</i>, instead of being maintained by hand.  As different
EBCDIC variants can't agree on the code point for '~', the character to code
point conversion is done at build time by <i>generate_uudmap</i> to a new generated
header <i>mg_data.h</i>.  <code class="inline"><span class="w">PL_vtbl_bm</span></code>
 and <code class="inline"><span class="w">PL_vtbl_fm</span></code>
 are now defined by the
pre-processor as <code class="inline"><span class="w">PL_vtbl_regexp</span></code>
, instead of being distinct C variables.
<code class="inline"><span class="w">PL_vtbl_sig</span></code>
 has been removed.</p>
</li>
<li>
<p>Building with <code class="inline">-<span class="w">DPERL_GLOBAL_STRUCT</span></code>
 works again.  This configuration is not
generally used.</p>
</li>
<li>
<p>Perl configured with <i>MAD</i> now correctly frees <code class="inline"><span class="w">MADPROP</span></code>
 structures when
OPs are freed.  <code class="inline"><span class="w">MADPROP</span></code>
s are now allocated with <code class="inline"><span class="i">PerlMemShared_malloc</span><span class="s">(</span><span class="s">)</span></code>
</p>
</li>
<li>
<p><i>makedef.pl</i> has been refactored.  This should have no noticeable affect on
any of the platforms that use it as part of their build (AIX, VMS, Win32).</p>
</li>
<li>
<p><code class="inline"><span class="w">useperlio</span></code>
 can no longer be disabled.</p>
</li>
<li>
<p>The file <i>global.sym</i> is no longer needed, and has been removed.  It
contained a list of all exported functions, one of the files generated by
<i>regen/embed.pl</i> from data in <i>embed.fnc</i> and <i>regen/opcodes</i>.  The code
has been refactored so that the only user of <i>global.sym</i>, <i>makedef.pl</i>,
now reads <i>embed.fnc</i> and <i>regen/opcodes</i> directly, removing the need to
store the list of exported functions in an intermediate file.</p>
<p>As <i>global.sym</i> was never installed, this change should not be visible
outside the build process.</p>
</li>
<li>
<p><i>pod/buildtoc</i>, used by the build process to build <a href="http://search.cpan.org/perldoc/perltoc">perltoc</a>, has been
refactored and simplified.  It now contains only code to build <a href="http://search.cpan.org/perldoc/perltoc">perltoc</a>;
the code to regenerate Makefiles has been moved to <i>Porting/pod_rules.pl</i>.
It's a bug if this change has any material effect on the build process.</p>
</li>
<li>
<p><i>pod/roffitall</i> is now built by <i>pod/buildtoc</i>, instead of being
shipped with the distribution.  Its list of manpages is now generated
(and therefore current).  See also RT #103202 for an unresolved related
issue.</p>
</li>
<li>
<p>The man page for <code class="inline"><span class="w">XS::Typemap</span></code>
 is no longer installed.  <code class="inline"><span class="w">XS::Typemap</span></code>

is a test module which is not installed, hence installing its
documentation makes no sense.</p>
</li>
<li>
<p>The -Dusesitecustomize and -Duserelocatableinc options now work
together properly.</p>
</li>
</ul>
<a name="Platform-Support"></a><h1>Platform Support</h1>
<a name="Platform-Specific-Notes"></a><h2>Platform-Specific Notes</h2>
<a name="Cygwin"></a><h3>Cygwin</h3>
<ul>
<li>
<p>Since version 1.7, Cygwin supports native UTF-8 paths.  If Perl is built
under that environment, directory and filenames will be UTF-8 encoded.</p>
</li>
<li>
<p>Cygwin does not initialize all original Win32 environment variables.  See
<i>README.cygwin</i> for a discussion of the newly-added
<code class="inline"><span class="i">Cygwin::sync_winenv</span><span class="s">(</span><span class="s">)</span></code>
 function [perl #110190] and for
further links.</p>
</li>
</ul>
<a name="HP-UX"></a><h3>HP-UX</h3>
<ul>
<li>
<p>HP-UX PA-RISC/64 now supports gcc-4.x</p>
<p>A fix to correct the socketsize now makes the test suite pass on HP-UX
PA-RISC for 64bitall builds. (5.14.2)</p>
</li>
</ul>
<a name="VMS"></a><h3>VMS</h3>
<ul>
<li>
<p>Remove unnecessary includes, fix miscellaneous compiler warnings and
close some unclosed comments on <i>vms/vms.c</i>.</p>
</li>
<li>
<p>Remove sockadapt layer from the VMS build.</p>
</li>
<li>
<p>Explicit support for VMS versions before v7.0 and DEC C versions
before v6.0 has been removed.</p>
</li>
<li>
<p>Since Perl 5.10.1, the home-grown <code class="inline"><a class="l_k" href="functions/stat.html">stat</a></code> wrapper has been unable to
distinguish between a directory name containing an underscore and an
otherwise-identical filename containing a dot in the same position
(e.g., t/test_pl as a directory and t/test.pl as a file).  This problem
has been corrected.</p>
</li>
<li>
<p>The build on VMS now permits names of the resulting symbols in C code for
Perl longer than 31 characters.  Symbols like
<code class="inline"><span class="w">Perl__it_was_the_best_of_times_it_was_the_worst_of_times</span></code>
 can now be
created freely without causing the VMS linker to seize up.</p>
</li>
</ul>
<a name="GNU%2fHurd"></a><h3>GNU/Hurd</h3>
<ul>
<li>
<p>Numerous build and test failures on GNU/Hurd have been resolved with hints
for building DBM modules, detection of the library search path, and enabling
of large file support.</p>
</li>
</ul>
<a name="OpenVOS"></a><h3>OpenVOS</h3>
<ul>
<li>
<p>Perl is now built with dynamic linking on OpenVOS, the minimum supported
version of which is now Release 17.1.0.</p>
</li>
</ul>
<a name="SunOS"></a><h3>SunOS</h3>
<p>The CC workshop C++ compiler is now detected and used on systems that ship
without cc.</p>
<a name="Internal-Changes"></a><h1>Internal Changes</h1>
<ul>
<li>
<p>The compiled representation of formats is now stored via the <code class="inline"><span class="w">mg_ptr</span></code>
 of
their <code class="inline"><span class="w">PERL_MAGIC_fm</span></code>
.  Previously it was stored in the string buffer,
beyond <code class="inline"><span class="i">SvLEN</span><span class="s">(</span><span class="s">)</span></code>
, the regular end of the string.  <code class="inline"><span class="i">SvCOMPILED</span><span class="s">(</span><span class="s">)</span></code>
 and
<code class="inline"><span class="w">SvCOMPILED_</span><span class="s">{</span><span class="w">on</span><span class="cm">,</span><span class="w">off</span><span class="s">}</span><span class="s">(</span><span class="s">)</span></code>
 now exist solely for compatibility for XS code.
The first is always 0, the other two now no-ops. (5.14.1)</p>
</li>
<li>
<p>Some global variables have been marked <code class="inline"><span class="w">const</span></code>
, members in the interpreter
structure have been re-ordered, and the opcodes have been re-ordered.  The
op <code class="inline"><span class="w">OP_AELEMFAST</span></code>
 has been split into <code class="inline"><span class="w">OP_AELEMFAST</span></code>
 and <code class="inline"><span class="w">OP_AELEMFAST_LEX</span></code>
.</p>
</li>
<li>
<p>When empting a hash of its elements (e.g., via undef(%h), or %h=()), HvARRAY
field is no longer temporarily zeroed.  Any destructors called on the freed
elements see the remaining elements.  Thus, %h=() becomes more like
<code class="inline"><a class="l_k" href="functions/delete.html">delete</a> <span class="i">$h</span>{<span class="i">$_</span>} <a class="l_k" href="functions/for.html">for</a> <a class="l_k" href="functions/keys.html">keys</a> <span class="i">%h</span></code>
.</p>
</li>
<li>
<p>Boyer-Moore compiled scalars are now PVMGs, and the Boyer-Moore tables are now
stored via the mg_ptr of their <code class="inline"><span class="w">PERL_MAGIC_bm</span></code>
.
Previously they were PVGVs, with the tables stored in
the string buffer, beyond <code class="inline"><span class="i">SvLEN</span><span class="s">(</span><span class="s">)</span></code>
.  This eliminates
the last place where the core stores data beyond <code class="inline"><span class="i">SvLEN</span><span class="s">(</span><span class="s">)</span></code>
.</p>
</li>
<li>
<p>Simplified logic in <code class="inline"><span class="i">Perl_sv_magic</span><span class="s">(</span><span class="s">)</span></code>
 introduces a small change of
behavior for error cases involving unknown magic types.  Previously, if
<code class="inline"><span class="i">Perl_sv_magic</span><span class="s">(</span><span class="s">)</span></code>
 was passed a magic type unknown to it, it would</p>
<dl>
<dt>1.</dt><dd>
<p>Croak "Modification of a read-only value attempted" if read only</p>
</dd>
<dt>2.</dt><dd>
<p>Return without error if the SV happened to already have this magic</p>
</dd>
<dt>3.</dt><dd>
<p>otherwise croak "Don't know how to handle magic of type \\%o"</p>
</dd>
</dl>
<p>Now it will always croak "Don't know how to handle magic of type \\%o", even
on read-only values, or SVs which already have the unknown magic type.</p>
</li>
<li>
<p>The experimental <code class="inline"><span class="w">fetch_cop_label</span></code>
 function has been renamed to
<code class="inline"><span class="w">cop_fetch_label</span></code>
.</p>
</li>
<li>
<p>The <code class="inline"><span class="w">cop_store_label</span></code>
 function has been added to the API, but is
experimental.</p>
</li>
<li>
<p><i>embedvar.h</i> has been simplified, and one level of macro indirection for
PL_* variables has been removed for the default (non-multiplicity)
configuration.  PERLVAR*() macros now directly expand their arguments to
tokens such as <code class="inline"><span class="w">PL_defgv</span></code>
, instead of expanding to <code class="inline"><span class="w">PL_Idefgv</span></code>
, with
<i>embedvar.h</i> defining a macro to map <code class="inline"><span class="w">PL_Idefgv</span></code>
 to <code class="inline"><span class="w">PL_defgv</span></code>
.  XS code
which has unwarranted chumminess with the implementation may need updating.</p>
</li>
<li>
<p>An API has been added to explicitly choose whether to export XSUB
symbols.  More detail can be found in the comments for commit e64345f8.</p>
</li>
<li>
<p>The <code class="inline"><span class="w">is_gv_magical_sv</span></code>
 function has been eliminated and merged with
<code class="inline"><span class="w">gv_fetchpvn_flags</span></code>
.  It used to be called to determine whether a GV
should be autovivified in rvalue context.  Now it has been replaced with a
new <code class="inline"><span class="w">GV_ADDMG</span></code>
 flag (not part of the API).</p>
</li>
<li>
<p>The returned code point from the function <code class="inline"><span class="i">utf8n_to_uvuni</span><span class="s">(</span><span class="s">)</span></code>

when the input is malformed UTF-8, malformations are allowed, and
<code class="inline"><span class="w">utf8</span></code>
 warnings are off is now the Unicode REPLACEMENT CHARACTER
whenever the malformation is such that no well-defined code point can be
computed.  Previously the returned value was essentially garbage.  The
only malformations that have well-defined values are a zero-length
string (0 is the return), and overlong UTF-8 sequences.</p>
</li>
<li>
<p>Padlists are now marked <code class="inline"><span class="w">AvREAL</span></code>
; i.e., reference-counted.  They have
always been reference-counted, but were not marked real, because <i>pad.c</i>
did its own clean-up, instead of using the usual clean-up code in <i>sv.c</i>.
That caused problems in thread cloning, so now the <code class="inline"><span class="w">AvREAL</span></code>
 flag is on,
but is turned off in <i>pad.c</i> right before the padlist is freed (after
<i>pad.c</i> has done its custom freeing of the pads).</p>
</li>
<li>
<p>All C files that make up the Perl core have been converted to UTF-8.</p>
</li>
<li>
<p>These new functions have been added as part of the work on Unicode symbols:</p>
<pre class="verbatim"><ol><li>    <span class="w">HvNAMELEN</span></li><li>    <span class="w">HvNAMEUTF8</span></li><li>    <span class="w">HvENAMELEN</span></li><li>    <span class="w">HvENAMEUTF8</span></li><li>    <span class="w">gv_init_pv</span></li><li>    <span class="w">gv_init_pvn</span></li><li>    <span class="w">gv_init_pvsv</span></li><li>    <span class="w">gv_fetchmeth_pv</span></li><li>    <span class="w">gv_fetchmeth_pvn</span></li><li>    <span class="w">gv_fetchmeth_sv</span></li><li>    <span class="w">gv_fetchmeth_pv_autoload</span></li><li>    <span class="w">gv_fetchmeth_pvn_autoload</span></li><li>    <span class="w">gv_fetchmeth_sv_autoload</span></li><li>    <span class="w">gv_fetchmethod_pv_flags</span></li><li>    <span class="w">gv_fetchmethod_pvn_flags</span></li><li>    <span class="w">gv_fetchmethod_sv_flags</span></li><li>    <span class="w">gv_autoload_pv</span></li><li>    <span class="w">gv_autoload_pvn</span></li><li>    <span class="w">gv_autoload_sv</span></li><li>    <span class="w">newGVgen_flags</span></li><li>    <span class="w">sv_derived_from_pv</span></li><li>    <span class="w">sv_derived_from_pvn</span></li><li>    <span class="w">sv_derived_from_sv</span></li><li>    <span class="w">sv_does_pv</span></li><li>    <span class="w">sv_does_pvn</span></li><li>    <span class="w">sv_does_sv</span></li><li>    <span class="w">whichsig_pv</span></li><li>    <span class="w">whichsig_pvn</span></li><li>    <span class="w">whichsig_sv</span></li><li>    <span class="w">newCONSTSUB_flags</span></li></ol></pre><p>The gv_fetchmethod_*_flags functions, like gv_fetchmethod_flags, are
experimental and may change in a future release.</p>
</li>
<li>
<p>The following functions were added.  These are <i>not</i> part of the API:</p>
<pre class="verbatim"><ol><li>    <span class="w">GvNAMEUTF8</span></li><li>    <span class="w">GvENAMELEN</span></li><li>    <span class="w">GvENAME_HEK</span></li><li>    <span class="w">CopSTASH_flags</span></li><li>    <span class="w">CopSTASH_flags_set</span></li><li>    <span class="w">PmopSTASH_flags</span></li><li>    <span class="w">PmopSTASH_flags_set</span></li><li>    <span class="w">sv_sethek</span></li><li>    <span class="w">HEKfARG</span></li></ol></pre><p>There is also a <code class="inline"><span class="w">HEKf</span></code>
 macro corresponding to <code class="inline"><span class="w">SVf</span></code>
, for
interpolating HEKs in formatted strings.</p>
</li>
<li>
<p><code class="inline"><span class="w">sv_catpvn_flags</span></code>
 takes a couple of new internal-only flags,
<code class="inline"><span class="w">SV_CATBYTES</span></code>
 and <code class="inline"><span class="w">SV_CATUTF8</span></code>
, which tell it whether the char array to
be concatenated is UTF8.  This allows for more efficient concatenation than
creating temporary SVs to pass to <code class="inline"><span class="w">sv_catsv</span></code>
.</p>
</li>
<li>
<p>For XS AUTOLOAD subs, $AUTOLOAD is set once more, as it was in 5.6.0.  This
is in addition to setting <code class="inline"><span class="i">SvPVX</span><span class="s">(</span><span class="w">cv</span><span class="s">)</span></code>
, for compatibility with 5.8 to 5.14.
See <a href="perlguts.html#Autoloading-with-XSUBs">Autoloading with XSUBs in perlguts</a>.</p>
</li>
<li>
<p>Perl now checks whether the array (the linearized isa) returned by a MRO
plugin begins with the name of the class itself, for which the array was
created, instead of assuming that it does.  This prevents the first element
from being skipped during method lookup.  It also means that
<code class="inline"><span class="w">mro::get_linear_isa</span></code>
 may return an array with one more element than the
MRO plugin provided [perl #94306].</p>
</li>
<li>
<p><code class="inline"><span class="w">PL_curstash</span></code>
 is now reference-counted.</p>
</li>
<li>
<p>There are now feature bundle hints in <code class="inline"><span class="w">PL_hints</span></code>
 (<code class="inline"><span class="i">$^H</span></code>
) that version
declarations use, to avoid having to load <i>feature.pm</i>.  One setting of
the hint bits indicates a "custom" feature bundle, which means that the
entries in <code class="inline"><span class="i">%^H</span></code>
 still apply.  <i>feature.pm</i> uses that.</p>
<p>The <code class="inline"><span class="w">HINT_FEATURE_MASK</span></code>
 macro is defined in <i>perl.h</i> along with other
hints.  Other macros for setting and testing features and bundles are in
the new <i>feature.h</i>.  <code class="inline"><span class="w">FEATURE_IS_ENABLED</span></code>
 (which has moved to
<i>feature.h</i>) is no longer used throughout the codebase, but more specific
macros, e.g., <code class="inline"><span class="w">FEATURE_SAY_IS_ENABLED</span></code>
, that are defined in <i>feature.h</i>.</p>
</li>
<li>
<p><i>lib/feature.pm</i> is now a generated file, created by the new
<i>regen/feature.pl</i> script, which also generates <i>feature.h</i>.</p>
</li>
<li>
<p>Tied arrays are now always <code class="inline"><span class="w">AvREAL</span></code>
.  If <code class="inline"><span class="i">@_</span></code>
 or <code class="inline"><span class="w">DB::args</span></code>
 is tied, it
is reified first, to make sure this is always the case.</p>
</li>
<li>
<p>Two new functions <code class="inline"><span class="i">utf8_to_uvchr_buf</span><span class="s">(</span><span class="s">)</span></code>
 and <code class="inline"><span class="i">utf8_to_uvuni_buf</span><span class="s">(</span><span class="s">)</span></code>
 have
been added.  These are the same as <code class="inline"><span class="w">utf8_to_uvchr</span></code>
 and
<code class="inline"><span class="w">utf8_to_uvuni</span></code>
 (which are now deprecated), but take an extra parameter
that is used to guard against reading beyond the end of the input
string.
See <a href="perlapi.html#utf8_to_uvchr_buf">utf8_to_uvchr_buf in perlapi</a> and <a href="perlapi.html#utf8_to_uvuni_buf">utf8_to_uvuni_buf in perlapi</a>.</p>
</li>
<li>
<p>The regular expression engine now does TRIE case insensitive matches
under Unicode. This may change the output of <code class="inline"><a class="l_k" href="functions/use.html">use</a> <span class="w">re</span> <span class="q">&#39;debug&#39;</span><span class="sc">;</span></code>
,
and will speed up various things.</p>
</li>
<li>
<p>There is a new <code class="inline"><span class="i">wrap_op_checker</span><span class="s">(</span><span class="s">)</span></code>
 function, which provides a thread-safe
alternative to writing to <code class="inline"><span class="w">PL_check</span></code>
 directly.</p>
</li>
</ul>
<a name="Selected-Bug-Fixes"></a><h1>Selected Bug Fixes</h1>
<a name="Array-and-hash"></a><h2>Array and hash</h2>
<ul>
<li>
<p>A bug has been fixed that would cause a "Use of freed value in iteration"
error if the next two hash elements that would be iterated over are
deleted [perl #85026]. (5.14.1)</p>
</li>
<li>
<p>Deleting the current hash iterator (the hash element that would be returned
by the next call to <code class="inline"><a class="l_k" href="functions/each.html">each</a></code>) in void context used not to free it
[perl #85026].</p>
</li>
<li>
<p>Deletion of methods via <code class="inline"><a class="l_k" href="functions/delete.html">delete</a> <span class="i">$Class::</span>{<span class="w">method</span>}</code>
 syntax used to update
method caches if called in void context, but not scalar or list context.</p>
</li>
<li>
<p>When hash elements are deleted in void context, the internal hash entry is
now freed before the value is freed, to prevent destructors called by that
latter freeing from seeing the hash in an inconsistent state.  It was
possible to cause double-frees if the destructor freed the hash itself
[perl #100340].</p>
</li>
<li>
<p>A <code class="inline"><a class="l_k" href="functions/keys.html">keys</a></code> optimization in Perl 5.12.0 to make it faster on empty hashes
caused <code class="inline"><a class="l_k" href="functions/each.html">each</a></code> not to reset the iterator if called after the last element
was deleted.</p>
</li>
<li>
<p>Freeing deeply nested hashes no longer crashes [perl #44225].</p>
</li>
<li>
<p>It is possible from XS code to create hashes with elements that have no
values.  The hash element and slice operators used to crash
when handling these in lvalue context.  They now
produce a "Modification of non-creatable hash value attempted" error
message.</p>
</li>
<li>
<p>If list assignment to a hash or array triggered destructors that freed the
hash or array itself, a crash would ensue.  This is no longer the case
[perl #107440].</p>
</li>
<li>
<p>It used to be possible to free the typeglob of a localized array or hash
(e.g., <code class="inline"><a class="l_k" href="functions/local.html">local</a> <span class="i">@</span>{<span class="q">&quot;x&quot;</span>}<span class="sc">;</span> <a class="l_k" href="functions/delete.html">delete</a> <span class="i">$::</span>{<span class="w">x</span>}</code>
), resulting in a crash on scope exit.</p>
</li>
<li>
<p>Some core bugs affecting <a href="Hash/Util.html">Hash::Util</a> have been fixed: locking a hash
element that is a glob copy no longer causes the next assignment to it to
corrupt the glob (5.14.2), and unlocking a hash element that holds a
copy-on-write scalar no longer causes modifications to that scalar to
modify other scalars that were sharing the same string buffer.</p>
</li>
</ul>
<a name="C-API-fixes"></a><h2>C API fixes</h2>
<ul>
<li>
<p>The <code class="inline"><span class="w">newHVhv</span></code>
 XS function now works on tied hashes, instead of crashing or
returning an empty hash.</p>
</li>
<li>
<p>The <code class="inline"><span class="w">SvIsCOW</span></code>
 C macro now returns false for read-only copies of typeglobs,
such as those created by:</p>
<pre class="verbatim"><ol><li>  <span class="i">$hash</span>{<span class="w">elem</span>} = <span class="i">*foo</span><span class="sc">;</span></li><li>  <span class="w">Hash::Util::lock_value</span> <span class="i">%hash</span><span class="cm">,</span> <span class="q">&#39;elem&#39;</span><span class="sc">;</span></li></ol></pre><p>It used to return true.</p>
</li>
<li>
<p>The <code class="inline"><span class="w">SvPVutf8</span></code>
 C function no longer tries to modify its argument,
resulting in errors [perl #108994].</p>
</li>
<li>
<p><code class="inline"><span class="w">SvPVutf8</span></code>
 now works properly with magical variables.</p>
</li>
<li>
<p><code class="inline"><span class="w">SvPVbyte</span></code>
 now works properly non-PVs.</p>
</li>
<li>
<p>When presented with malformed UTF-8 input, the XS-callable functions
<code class="inline"><span class="i">is_utf8_string</span><span class="s">(</span><span class="s">)</span></code>
, <code class="inline"><span class="i">is_utf8_string_loc</span><span class="s">(</span><span class="s">)</span></code>
, and
<code class="inline"><span class="i">is_utf8_string_loclen</span><span class="s">(</span><span class="s">)</span></code>
 could read beyond the end of the input
string by up to 12 bytes.  This no longer happens.  [perl #32080].
However, currently, <code class="inline"><span class="i">is_utf8_char</span><span class="s">(</span><span class="s">)</span></code>
 still has this defect, see
<a href="#is_utf8_char()">is_utf8_char()</a> above.</p>
</li>
<li>
<p>The C-level <code class="inline"><span class="w">pregcomp</span></code>
 function could become confused about whether the
pattern was in UTF8 if the pattern was an overloaded, tied, or otherwise
magical scalar [perl #101940].</p>
</li>
</ul>
<a name="Compile-time-hints"></a><h2>Compile-time hints</h2>
<ul>
<li>
<p>Tying <code class="inline"><span class="i">%^H</span></code>
 no longer causes perl to crash or ignore the contents of
<code class="inline"><span class="i">%^H</span></code>
 when entering a compilation scope [perl #106282].</p>
</li>
<li>
<p><code class="inline"><a class="l_k" href="functions/eval.html">eval</a> <span class="i">$string</span></code>
 and <code class="inline"><a class="l_k" href="functions/require.html">require</a></code> used not to
localize <code class="inline"><span class="i">%^H</span></code>
 during compilation if it
was empty at the time the <code class="inline"><a class="l_k" href="functions/eval.html">eval</a></code> call itself was compiled.  This could
lead to scary side effects, like <code class="inline"><a class="l_k" href="functions/use.html">use</a> <span class="w">re</span> <span class="q">&quot;/m&quot;</span></code>
 enabling other flags that
the surrounding code was trying to enable for its caller [perl #68750].</p>
</li>
<li>
<p><code class="inline"><a class="l_k" href="functions/eval.html">eval</a> <span class="i">$string</span></code>
 and <code class="inline"><a class="l_k" href="functions/require.html">require</a></code> no longer localize hints (<code class="inline"><span class="i">$^H</span></code>
 and <code class="inline"><span class="i">%^H</span></code>
)
at run time, but only during compilation of the $string or required file.
This makes <code class="inline"><a class="l_k" href="functions/BEGIN.html">BEGIN</a> <span class="s">{</span> <span class="i">$^H</span>{<span class="w">foo</span>}=<span class="n">7</span> <span class="s">}</span></code>
 equivalent to
<code class="inline"><a class="l_k" href="functions/BEGIN.html">BEGIN</a> <span class="s">{</span> <a class="l_k" href="functions/eval.html">eval</a> <span class="q">&#39;$^H{foo}=7&#39;</span> <span class="s">}</span></code>
 [perl #70151].</p>
</li>
<li>
<p>Creating a BEGIN block from XS code (via <code class="inline"><span class="w">newXS</span></code>
 or <code class="inline"><span class="w">newATTRSUB</span></code>
) would,
on completion, make the hints of the current compiling code the current
hints.  This could cause warnings to occur in a non-warning scope.</p>
</li>
</ul>
<a name="Copy-on-write-scalars"></a><h2>Copy-on-write scalars</h2>
<p>Copy-on-write or shared hash key scalars
were introduced in 5.8.0, but most Perl code
did not encounter them (they were used mostly internally).  Perl
5.10.0 extended them, such that assigning <code class="inline"><span class="w">__PACKAGE__</span></code>
 or a
hash key to a scalar would make it copy-on-write.  Several parts
of Perl were not updated to account for them, but have now been fixed.</p>
<ul>
<li>
<p><code class="inline"><span class="w">utf8::decode</span></code>
 had a nasty bug that would modify copy-on-write scalars'
string buffers in place (i.e., skipping the copy).  This could result in
hashes having two elements with the same key [perl #91834]. (5.14.2)</p>
</li>
<li>
<p>Lvalue subroutines were not allowing COW scalars to be returned.  This was
fixed for lvalue scalar context in Perl 5.12.3 and 5.14.0, but list context
was not fixed until this release.</p>
</li>
<li>
<p>Elements of restricted hashes (see the <a href="fields.html">fields</a> pragma) containing
copy-on-write values couldn't be deleted, nor could such hashes be cleared
(<code class="inline"><span class="i">%hash</span> = <span class="s">(</span><span class="s">)</span></code>
). (5.14.2)</p>
</li>
<li>
<p>Localizing a tied variable used to make it read-only if it contained a
copy-on-write string. (5.14.2)</p>
</li>
<li>
<p>Assigning a copy-on-write string to a stash
element no longer causes a double free.  Regardless of this change, the
results of such assignments are still undefined.</p>
</li>
<li>
<p>Assigning a copy-on-write string to a tied variable no longer stops that
variable from being tied if it happens to be a PVMG or PVLV internally.</p>
</li>
<li>
<p>Doing a substitution on a tied variable returning a copy-on-write
scalar used to cause an assertion failure or an "Attempt to free
nonexistent shared string" warning.</p>
</li>
<li>
<p>This one is a regression from 5.12: In 5.14.0, the bitwise assignment
operators <code class="inline">|=</code>
, <code class="inline">^=</code>
 and <code class="inline">&amp;=</code>
 started leaving the left-hand side
undefined if it happened to be a copy-on-write string [perl #108480].</p>
</li>
<li>
<p><a href="Storable.html">Storable</a>, <a href="Devel/Peek.html">Devel::Peek</a> and <a href="PerlIO/scalar.html">PerlIO::scalar</a> had similar problems.
See <a href="#Updated-Modules-and-Pragmata">Updated Modules and Pragmata</a>, above.</p>
</li>
</ul>
<a name="The-debugger"></a><h2>The debugger</h2>
<ul>
<li>
<p><i>dumpvar.pl</i>, and therefore the <code class="inline"><span class="w">x</span></code>
 command in the debugger, have been
fixed to handle objects blessed into classes whose names contain "=".  The
contents of such objects used not to be dumped [perl #101814].</p>
</li>
<li>
<p>The "R" command for restarting a debugger session has been fixed to work on
Windows, or any other system lacking a <code class="inline"><span class="w">POSIX::_SC_OPEN_MAX</span></code>
 constant
[perl #87740].</p>
</li>
<li>
<p>The <code class="inline"><span class="c">#line 42 foo</span></code>
 directive used not to update the arrays of lines used
by the debugger if it occurred in a string eval.  This was partially fixed
in 5.14, but it worked only for a single <code class="inline"><span class="c">#line 42 foo</span></code>
 in each eval.  Now
it works for multiple.</p>
</li>
<li>
<p>When subroutine calls are intercepted by the debugger, the name of the
subroutine or a reference to it is stored in <code class="inline"><span class="i">$DB::sub</span></code>
, for the debugger
to access.  Sometimes (such as <code class="inline"><span class="i">$foo</span> = <span class="i">*bar</span><span class="sc">;</span> <a class="l_k" href="functions/undef.html">undef</a> <span class="i">*bar</span><span class="sc">;</span> <span class="i">&amp;$foo</span></code>
)
<code class="inline"><span class="i">$DB::sub</span></code>
 would be set to a name that could not be used to find the
subroutine, and so the debugger's attempt to call it would fail.  Now the
check to see whether a reference is needed is more robust, so those
problems should not happen anymore [rt.cpan.org #69862].</p>
</li>
<li>
<p>Every subroutine has a filename associated with it that the debugger uses.
The one associated with constant subroutines used to be misallocated when
cloned under threads.  Consequently, debugging threaded applications could
result in memory corruption [perl #96126].</p>
</li>
</ul>
<a name="Dereferencing-operators"></a><h2>Dereferencing operators</h2>
<ul>
<li>
<p><code class="inline"><a class="l_k" href="functions/defined.html">defined(${"..."})</a></code>, <code class="inline"><a class="l_k" href="functions/defined.html">defined(*{"..."})</a></code>, etc., used to
return true for most, but not all built-in variables, if
they had not been used yet.  This bug affected <code class="inline"><span class="i">$</span>{<span class="w">^GLOBAL_PHASE</span>}</code>
 and
<code class="inline"><span class="i">$</span>{<span class="w">^UTF8CACHE</span>}</code>
, among others.  It also used to return false if the
package name was given as well (<code class="inline"><span class="i">$</span>{<span class="q">&quot;::!&quot;</span>}</code>
) [perl #97978, #97492].</p>
</li>
<li>
<p>Perl 5.10.0 introduced a similar bug: <code class="inline"><a class="l_k" href="functions/defined.html">defined(*{"foo"})</a></code> where "foo"
represents the name of a built-in global variable used to return false if
the variable had never been used before, but only on the <i>first</i> call.
This, too, has been fixed.</p>
</li>
<li>
<p>Since 5.6.0, <code class="inline"><span class="i">*</span>{ ... }</code>
 has been inconsistent in how it treats undefined
values.  It would die in strict mode or lvalue context for most undefined
values, but would be treated as the empty string (with a warning) for the
specific scalar return by <code class="inline"><a class="l_k" href="functions/undef.html">undef()</a></code> (<code class="inline"><span class="i">&amp;PL_sv_undef</span></code>
 internally).  This
has been corrected.  <code class="inline"><a class="l_k" href="functions/undef.html">undef()</a></code> is now treated like other undefined
scalars, as in Perl 5.005.</p>
</li>
</ul>
<a name="Filehandle%2c-last-accessed"></a><h2>Filehandle, last-accessed</h2>
<p>Perl has an internal variable that stores the last filehandle to be
accessed.  It is used by <code class="inline"><span class="i">$.</span></code>
 and by <code class="inline"><a class="l_k" href="functions/tell.html">tell</a></code> and <code class="inline"><a class="l_k" href="functions/eof.html">eof</a></code> without
arguments.</p>
<ul>
<li>
<p>It used to be possible to set this internal variable to a glob copy and
then modify that glob copy to be something other than a glob, and still
have the last-accessed filehandle associated with the variable after
assigning a glob to it again:</p>
<pre class="verbatim"><ol><li>    <a class="l_k" href="functions/my.html">my</a> <span class="i">$foo</span> = <span class="i">*STDOUT</span><span class="sc">;</span>  <span class="c"># $foo is a glob copy</span></li><li>    <span class="q">&lt;$foo&gt;</span><span class="sc">;</span>             <span class="c"># $foo is now the last-accessed handle</span></li><li>    <span class="i">$foo</span> = <span class="n">3</span><span class="sc">;</span>           <span class="c"># no longer a glob</span></li><li>    <span class="i">$foo</span> = <span class="i">*STDERR</span><span class="sc">;</span>     <span class="c"># still the last-accessed handle</span></li></ol></pre><p>Now the <code class="inline"><span class="i">$foo</span> = <span class="n">3</span></code>
 assignment unsets that internal variable, so there
is no last-accessed filehandle, just as if <code class="inline"><span class="q">&lt;$foo&gt;</span></code>
 had never
happened.</p>
<p>This also prevents some unrelated handle from becoming the last-accessed
handle if $foo falls out of scope and the same internal SV gets used for
another handle [perl #97988].</p>
</li>
<li>
<p>A regression in 5.14 caused these statements not to set that internal
variable:</p>
<pre class="verbatim"><ol><li>    <a class="l_k" href="functions/my.html">my</a> <span class="i">$fh</span> = <span class="i">*STDOUT</span><span class="sc">;</span></li><li>    <a class="l_k" href="functions/tell.html">tell</a> <span class="i">$fh</span><span class="sc">;</span></li><li>    <a class="l_k" href="functions/eof.html">eof</a>  <span class="i">$fh</span><span class="sc">;</span></li><li>    <a class="l_k" href="functions/seek.html">seek</a> <span class="i">$fh</span><span class="cm">,</span> <span class="n">0</span><span class="cm">,</span><span class="n">0</span><span class="sc">;</span></li><li>    <a class="l_k" href="functions/tell.html">tell</a>     <span class="i">*$fh</span><span class="sc">;</span></li><li>    <a class="l_k" href="functions/eof.html">eof</a>      <span class="i">*$fh</span><span class="sc">;</span></li><li>    <a class="l_k" href="functions/seek.html">seek</a>     <span class="i">*$fh</span><span class="cm">,</span> <span class="n">0</span><span class="cm">,</span><span class="n">0</span><span class="sc">;</span></li><li>    <a class="l_k" href="functions/readline.html">readline</a> <span class="i">*$fh</span><span class="sc">;</span></li></ol></pre><p>This is now fixed, but <code class="inline"><a class="l_k" href="functions/tell.html">tell</a> <span class="i">*</span>{ <span class="i">*$fh</span> }</code>
 still has the problem, and it
is not clear how to fix it [perl #106536].</p>
</li>
</ul>
<a name="Filetests-and-stat"></a><h2>Filetests and <code class="inline"><a class="l_k" href="functions/stat.html">stat</a></code></h2>
<p>The term "filetests" refers to the operators that consist of a hyphen
followed by a single letter: <code class="inline">-r</code>
, <code class="inline">-x</code>
, <code class="inline">-M</code>
, etc.  The term "stacked"
when applied to filetests means followed by another filetest operator
sharing the same operand, as in <code class="inline">-r -x -w <span class="i">$fooo</span></code>
.</p>
<ul>
<li>
<p><code class="inline"><a class="l_k" href="functions/stat.html">stat</a></code> produces more consistent warnings.  It no longer warns for "_"
[perl #71002] and no longer skips the warning at times for other unopened
handles.  It no longer warns about an unopened handle when the operating
system's <code class="inline"><span class="w">fstat</span></code>
 function fails.</p>
</li>
<li>
<p><code class="inline"><a class="l_k" href="functions/stat.html">stat</a></code> would sometimes return negative numbers for large inode numbers,
because it was using the wrong internal C type. [perl #84590]</p>
</li>
<li>
<p><code class="inline"><a class="l_k" href="functions/lstat.html">lstat</a></code> is documented to fall back to <code class="inline"><a class="l_k" href="functions/stat.html">stat</a></code> (with a warning) when given
a filehandle.  When passed an IO reference, it was actually doing the
equivalent of <code class="inline"><a class="l_k" href="functions/stat.html">stat</a> <span class="w">_</span></code>
 and ignoring the handle.</p>
</li>
<li>
<p><code class="inline">-T <span class="i">_</span></code>
 with no preceding <code class="inline"><a class="l_k" href="functions/stat.html">stat</a></code> used to produce a
confusing "uninitialized" warning, even though there
is no visible uninitialized value to speak of.</p>
</li>
<li>
<p><code class="inline">-T</code>
, <code class="inline">-B</code>
, <code class="inline">-l</code>
 and <code class="inline">-t</code>
 now work
when stacked with other filetest operators
[perl #77388].</p>
</li>
<li>
<p>In 5.14.0, filetest ops (<code class="inline">-r</code>
, <code class="inline">-x</code>
, etc.) started calling FETCH on a
tied argument belonging to the previous argument to a list operator, if
called with a bareword argument or no argument at all.  This has been
fixed, so <code class="inline"><a class="l_k" href="functions/push.html">push</a> <span class="i">@foo</span><span class="cm">,</span> <span class="i">$tied</span><span class="cm">,</span> -r</code>
 no longer calls FETCH on <code class="inline"><span class="i">$tied</span></code>
.</p>
</li>
<li>
<p>In Perl 5.6, <code class="inline">-l</code>
 followed by anything other than a bareword would treat
its argument as a file name.  That was changed in 5.8 for glob references
(<code class="inline">\<span class="i">*foo</span></code>
), but not for globs themselves (<code class="inline"><span class="i">*foo</span></code>
).  <code class="inline">-l</code>
 started
returning <code class="inline"><a class="l_k" href="functions/undef.html">undef</a></code> for glob references without setting the last
stat buffer that the "_" handle uses, but only if warnings
were turned on.  With warnings off, it was the same as 5.6.
In other words, it was simply buggy and inconsistent.  Now the 5.6
behavior has been restored.</p>
</li>
<li>
<p><code class="inline">-l</code>
 followed by a bareword no longer "eats" the previous argument to
the list operator in whose argument list it resides.  Hence,
<code class="inline"><a class="l_k" href="functions/print.html">print</a> <span class="q">&quot;bar&quot;</span><span class="cm">,</span> -l <span class="w">foo</span></code>
 now actually prints "bar", because <code class="inline">-l</code>

on longer eats it.</p>
</li>
<li>
<p>Perl keeps several internal variables to keep track of the last stat
buffer, from which file(handle) it originated, what type it was, and
whether the last stat succeeded.</p>
<p>There were various cases where these could get out of synch, resulting in
inconsistent or erratic behavior in edge cases (every mention of <code class="inline">-T</code>

applies to <code class="inline">-B</code>
 as well):</p>
<ul>
<li>
<p><code class="inline">-T <i>HANDLE</i></code>, even though it does a <code class="inline"><a class="l_k" href="functions/stat.html">stat</a></code>, was not resetting the last
stat type, so an <code class="inline"><a class="l_k" href="functions/lstat.html">lstat</a> <span class="w">_</span></code>
 following it would merrily return the wrong
results.  Also, it was not setting the success status.</p>
</li>
<li>
<p>Freeing the handle last used by <code class="inline"><a class="l_k" href="functions/stat.html">stat</a></code> or a filetest could result in
<code class="inline">-T <span class="i">_</span></code>
 using an unrelated handle.</p>
</li>
<li>
<p><code class="inline"><a class="l_k" href="functions/stat.html">stat</a></code> with an IO reference would not reset the stat type or record the
filehandle for <code class="inline">-T <span class="i">_</span></code>
 to use.</p>
</li>
<li>
<p>Fatal warnings could cause the stat buffer not to be reset
for a filetest operator on an unopened filehandle or <code class="inline">-l</code>
 on any handle.
Fatal warnings also stopped <code class="inline">-T</code>
 from setting <code class="inline"><span class="i">$!</span></code>
.</p>
</li>
<li>
<p>When the last stat was on an unreadable file, <code class="inline">-T <span class="i">_</span></code>
 is supposed to
return <code class="inline"><a class="l_k" href="functions/undef.html">undef</a></code>, leaving the last stat buffer unchanged.  But it was
setting the stat type, causing <code class="inline"><a class="l_k" href="functions/lstat.html">lstat</a> <span class="w">_</span></code>
 to stop working.</p>
</li>
<li>
<p><code class="inline">-T <i>FILENAME</i></code> was not resetting the internal stat buffers for
unreadable files.</p>
</li>
</ul>
<p>These have all been fixed.</p>
</li>
</ul>
<a name="Formats"></a><h2>Formats</h2>
<ul>
<li>
<p>Several edge cases have been fixed with formats and <code class="inline"><a class="l_k" href="functions/formline.html">formline</a></code>;
in particular, where the format itself is potentially variable (such as
with ties and overloading), and where the format and data differ in their
encoding.  In both these cases, it used to possible for the output to be
corrupted [perl #91032].</p>
</li>
<li>
<p><code class="inline"><a class="l_k" href="functions/formline.html">formline</a></code> no longer converts its argument into a string in-place.  So
passing a reference to <code class="inline"><a class="l_k" href="functions/formline.html">formline</a></code> no longer destroys the reference
[perl #79532].</p>
</li>
<li>
<p>Assignment to <code class="inline"><span class="i">$^A</span></code>
 (the format output accumulator) now recalculates
the number of lines output.</p>
</li>
</ul>
<a name="given-and-when"></a><h2><code class="inline">given</code>
 and <code class="inline">when</code>
</h2>
<ul>
<li>
<p><code class="inline">given</code>
 was not scoping its implicit $_ properly, resulting in memory
leaks or "Variable is not available" warnings [perl #94682].</p>
</li>
<li>
<p><code class="inline">given</code>
 was not calling set-magic on the implicit lexical <code class="inline"><span class="i">$_</span></code>
 that it
uses.  This meant, for example, that <code class="inline"><a class="l_k" href="functions/pos.html">pos</a></code> would be remembered from one
execution of the same <code class="inline">given</code>
 block to the next, even if the input were a
different variable [perl #84526].</p>
</li>
<li>
<p><code class="inline">when</code>
 blocks are now capable of returning variables declared inside the
enclosing <code class="inline">given</code>
 block [perl #93548].</p>
</li>
</ul>
<a name="The-glob-operator"></a><h2>The <code class="inline"><a class="l_k" href="functions/glob.html">glob</a></code> operator</h2>
<ul>
<li>
<p>On OSes other than VMS, Perl's <code class="inline"><a class="l_k" href="functions/glob.html">glob</a></code> operator (and the <code class="inline"><span class="q">&lt;...&gt;</span></code>
 form)
use <a href="File/Glob.html">File::Glob</a> underneath.  <a href="File/Glob.html">File::Glob</a> splits the pattern into words,
before feeding each word to its <code class="inline"><span class="w">bsd_glob</span></code>
 function.</p>
<p>There were several inconsistencies in the way the split was done.  Now
quotation marks (' and ") are always treated as shell-style word delimiters
(that allow whitespace as part of a word) and backslashes are always
preserved, unless they exist to escape quotation marks.  Before, those
would only sometimes be the case, depending on whether the pattern
contained whitespace.  Also, escaped whitespace at the end of the pattern
is no longer stripped [perl #40470].</p>
</li>
<li>
<p><code class="inline"><span class="w">CORE::glob</span></code>
 now works as a way to call the default globbing function.  It
used to respect overrides, despite the <code class="inline"><span class="w">CORE::</span></code>
 prefix.</p>
</li>
<li>
<p>Under miniperl (used to configure modules when perl itself is built),
<code class="inline"><a class="l_k" href="functions/glob.html">glob</a></code> now clears %ENV before calling csh, since the latter croaks on some
systems if it does not like the contents of the LS_COLORS environment
variable [perl #98662].</p>
</li>
</ul>
<a name="Lvalue-subroutines"></a><h2>Lvalue subroutines</h2>
<ul>
<li>
<p>Explicit return now returns the actual argument passed to return, instead
of copying it [perl #72724, #72706].</p>
</li>
<li>
<p>Lvalue subroutines used to enforce lvalue syntax (i.e., whatever can go on
the left-hand side of <code class="inline">=</code>
) for the last statement and the arguments to
return.  Since lvalue subroutines are not always called in lvalue context,
this restriction has been lifted.</p>
</li>
<li>
<p>Lvalue subroutines are less restrictive about what values can be returned.
It used to croak on values returned by <code class="inline"><a class="l_k" href="functions/shift.html">shift</a></code> and <code class="inline"><a class="l_k" href="functions/delete.html">delete</a></code> and from
other subroutines, but no longer does so [perl #71172].</p>
</li>
<li>
<p>Empty lvalue subroutines (<code class="inline"><span class="j">sub :</span><span class="w">lvalue</span> <span class="s">{</span><span class="s">}</span></code>
) used to return <code class="inline"><span class="i">@_</span></code>
 in list
context.  All subroutines used to do this, but regular subs were fixed in
Perl 5.8.2.  Now lvalue subroutines have been likewise fixed.</p>
</li>
<li>
<p>Autovivification now works on values returned from lvalue subroutines
[perl #7946], as does returning <code class="inline"><a class="l_k" href="functions/keys.html">keys</a></code> in lvalue context.</p>
</li>
<li>
<p>Lvalue subroutines used to copy their return values in rvalue context.  Not
only was this a waste of CPU cycles, but it also caused bugs.  A <code class="inline"><span class="s">(</span><span class="i">$)</span></code>

prototype would cause an lvalue sub to copy its return value [perl #51408],
and <code class="inline"><a class="l_k" href="functions/while.html">while</a><span class="s">(</span><span class="i">lvalue_sub</span><span class="s">(</span><span class="s">)</span> =~ <span class="q">m/.../g</span><span class="s">)</span> <span class="s">{</span> ... <span class="s">}</span></code>
 would loop endlessly
[perl #78680].</p>
</li>
<li>
<p>When called in potential lvalue context
(e.g., subroutine arguments or a list
passed to <code class="inline">for</code>
), lvalue subroutines used to copy
any read-only value that was returned.  E.g., <code class="inline"> <span class="j">sub :</span><span class="i">lvalue</span> <span class="s">{</span> <span class="i">$]</span> <span class="s">}</span> </code>

would not return <code class="inline"><span class="i">$]</span></code>
, but a copy of it.</p>
</li>
<li>
<p>When called in potential lvalue context, an lvalue subroutine returning
arrays or hashes used to bind the arrays or hashes to scalar variables,
resulting in bugs.  This was fixed in 5.14.0 if an array were the first
thing returned from the subroutine (but not for <code class="inline"><span class="i">$scalar</span><span class="cm">,</span> <span class="i">@array</span></code>
 or
hashes being returned).  Now a more general fix has been applied
[perl #23790].</p>
</li>
<li>
<p>Method calls whose arguments were all surrounded with <code class="inline"><a class="l_k" href="functions/my.html">my()</a></code> or <code class="inline"><a class="l_k" href="functions/our.html">our()</a></code>
(as in <code class="inline"><span class="i">$object</span><span class="i">-&gt;method</span><span class="s">(</span><a class="l_k" href="functions/my.html">my</a><span class="s">(</span><span class="i">$a</span><span class="cm">,</span><span class="i">$b</span><span class="s">)</span><span class="s">)</span></code>
) used to force lvalue context on
the subroutine.  This would prevent lvalue methods from returning certain
values.</p>
</li>
<li>
<p>Lvalue sub calls that are not determined to be such at compile time
(<code class="inline"><span class="i">&amp;$name</span></code>
 or &amp;{"name"}) are no longer exempt from strict refs if they
occur in the last statement of an lvalue subroutine [perl #102486].</p>
</li>
<li>
<p>Sub calls whose subs are not visible at compile time, if
they occurred in the last statement of an lvalue subroutine,
would reject non-lvalue subroutines and die with "Can't modify non-lvalue
subroutine call" [perl #102486].</p>
<p>Non-lvalue sub calls whose subs <i>are</i> visible at compile time exhibited
the opposite bug.  If the call occurred in the last statement of an lvalue
subroutine, there would be no error when the lvalue sub was called in
lvalue context.  Perl would blindly assign to the temporary value returned
by the non-lvalue subroutine.</p>
</li>
<li>
<p><code class="inline">AUTOLOAD</code>
 routines used to take precedence over the actual sub being
called (i.e., when autoloading wasn't needed), for sub calls in lvalue or
potential lvalue context, if the subroutine was not visible at compile
time.</p>
</li>
<li>
<p>Applying the <code class="inline"><span class="j">:</span><span class="w">lvalue</span></code>
 attribute to an XSUB or to an aliased subroutine
stub with <code class="inline"><a name="foo"></a>sub <span class="m">foo</span> <span class="co">:</span><span class="w">lvalue</span><span class="sc">;</span></code>
 syntax stopped working in Perl 5.12.
This has been fixed.</p>
</li>
<li>
<p>Applying the :lvalue attribute to subroutine that is already defined does
not work properly, as the attribute changes the way the sub is compiled.
Hence, Perl 5.12 began warning when an attempt is made to apply the
attribute to an already defined sub.  In such cases, the attribute is
discarded.</p>
<p>But the change in 5.12 missed the case where custom attributes are also
present: that case still silently and ineffectively applied the attribute.
That omission has now been corrected.  <code class="inline"><a name="foo"></a>sub <span class="m">foo</span> <span class="co">:</span><span class="w">lvalue</span> <span class="co">:</span><span class="w">Whatever</span></code>
 (when
<code class="inline"><span class="w">foo</span></code>
 is already defined) now warns about the :lvalue attribute, and does
not apply it.</p>
</li>
<li>
<p>A bug affecting lvalue context propagation through nested lvalue subroutine
calls has been fixed.  Previously, returning a value in nested rvalue
context would be treated as lvalue context by the inner subroutine call,
resulting in some values (such as read-only values) being rejected.</p>
</li>
</ul>
<a name="Overloading"></a><h2>Overloading</h2>
<ul>
<li>
<p>Arithmetic assignment (<code class="inline"><span class="i">$left</span> += <span class="i">$right</span></code>
) involving overloaded objects
that rely on the 'nomethod' override no longer segfault when the left
operand is not overloaded.</p>
</li>
<li>
<p>Errors that occur when methods cannot be found during overloading now
mention the correct package name, as they did in 5.8.x, instead of
erroneously mentioning the "overload" package, as they have since 5.10.0.</p>
</li>
<li>
<p>Undefining <code class="inline"><span class="i">%overload::</span></code>
 no longer causes a crash.</p>
</li>
</ul>
<a name="Prototypes-of-built-in-keywords"></a><h2>Prototypes of built-in keywords</h2>
<ul>
<li>
<p>The <code class="inline"><a class="l_k" href="functions/prototype.html">prototype</a></code> function no longer dies for the <code class="inline"><span class="w">__FILE__</span></code>
, <code class="inline"><span class="w">__LINE__</span></code>

and <code class="inline"><span class="w">__PACKAGE__</span></code>
 directives.  It now returns an empty-string prototype
for them, because they are syntactically indistinguishable from nullary
functions like <code class="inline"><a class="l_k" href="functions/time.html">time</a></code>.</p>
</li>
<li>
<p><code class="inline"><a class="l_k" href="functions/prototype.html">prototype</a></code> now returns <code class="inline"><a class="l_k" href="functions/undef.html">undef</a></code> for all overridable infix operators,
such as <code class="inline">eq</code>
, which are not callable in any way resembling functions.
It used to return incorrect prototypes for some and die for others
[perl #94984].</p>
</li>
<li>
<p>The prototypes of several built-in functions--<code class="inline"><a class="l_k" href="functions/getprotobynumber.html">getprotobynumber</a></code>, <code class="inline"><a class="l_k" href="functions/lock.html">lock</a></code>,
<code class="inline">not</code>
 and <code class="inline"><a class="l_k" href="functions/select.html">select</a></code>--have been corrected, or at least are now closer to
reality than before.</p>
</li>
</ul>
<a name="Regular-expressions"></a><h2>Regular expressions</h2>
<ul>
<li>
<p><code class="inline"><span class="q">/[[:ascii:]]/</span></code>
 and <code class="inline"><span class="q">/[[:blank:]]/</span></code>
 now use locale rules under
<code class="inline"><a class="l_k" href="functions/use.html">use</a> <span class="w">locale</span></code>
 when the platform supports that.  Previously, they used
the platform's native character set.</p>
</li>
<li>
<p><code class="inline"><a class="l_k" href="functions/m.html">m/[[:ascii:]]/i</a></code> and <code class="inline"><span class="q">/\p{ASCII}/i</span></code>
 now match identically (when not
under a differing locale).  This fixes a regression introduced in 5.14
in which the first expression could match characters outside of ASCII,
such as the KELVIN SIGN.</p>
</li>
<li>
<p><code class="inline"><span class="q">/.*/g</span></code>
 would sometimes refuse to match at the end of a string that ends
with "\n".  This has been fixed [perl #109206].</p>
</li>
<li>
<p>Starting with 5.12.0, Perl used to get its internal bookkeeping muddled up
after assigning <code class="inline"><span class="i">$</span>{ <span class="q">qr//</span> }</code>
 to a hash element and locking it with
<a href="Hash/Util.html">Hash::Util</a>.  This could result in double frees, crashes, or erratic
behavior.</p>
</li>
<li>
<p>The new (in 5.14.0) regular expression modifier <code class="inline"><span class="q">/a</span></code>
 when repeated like
<code class="inline"><span class="q">/aa</span></code>
 forbids the characters outside the ASCII range that match
characters inside that range from matching under <code class="inline">/i</code>.  This did not
work under some circumstances, all involving alternation, such as:</p>
<pre class="verbatim"><ol><li> <span class="q">&quot;\N{KELVIN SIGN}&quot;</span> =~ <span class="q">/k|foo/iaa</span><span class="sc">;</span></li></ol></pre><p>succeeded inappropriately.  This is now fixed.</p>
</li>
<li>
<p>5.14.0 introduced some memory leaks in regular expression character
classes such as <code class="inline"><span class="s">[</span>\<span class="w">w</span>\<span class="q">s]</span></code>
, which have now been fixed. (5.14.1)</p>
</li>
<li>
<p>An edge case in regular expression matching could potentially loop.
This happened only under <code class="inline">/i</code> in bracketed character classes that have
characters with multi-character folds, and the target string to match
against includes the first portion of the fold, followed by another
character that has a multi-character fold that begins with the remaining
portion of the fold, plus some more.</p>
<pre class="verbatim"><ol><li> <span class="q">&quot;s\N{U+DF}&quot;</span> =~ <span class="q">/[\x{DF}foo]/i</span></li></ol></pre><p>is one such case.  <code class="inline">\<span class="w">xDF</span></code>
 folds to <code class="inline"><span class="q">&quot;ss&quot;</span></code>
. (5.14.1)</p>
</li>
<li>
<p>A few characters in regular expression pattern matches did not
match correctly in some circumstances, all involving <code class="inline">/i</code>.  The
affected characters are:
COMBINING GREEK YPOGEGRAMMENI,
GREEK CAPITAL LETTER IOTA,
GREEK CAPITAL LETTER UPSILON,
GREEK PROSGEGRAMMENI,
GREEK SMALL LETTER IOTA WITH DIALYTIKA AND OXIA,
GREEK SMALL LETTER IOTA WITH DIALYTIKA AND TONOS,
GREEK SMALL LETTER UPSILON WITH DIALYTIKA AND OXIA,
GREEK SMALL LETTER UPSILON WITH DIALYTIKA AND TONOS,
LATIN SMALL LETTER LONG S,
LATIN SMALL LIGATURE LONG S T,
and
LATIN SMALL LIGATURE ST.</p>
</li>
<li>
<p>A memory leak regression in regular expression compilation
under threading has been fixed.</p>
</li>
<li>
<p>A regression introduced in 5.14.0 has
been fixed.  This involved an inverted
bracketed character class in a regular expression that consisted solely
of a Unicode property.  That property wasn't getting inverted outside the
Latin1 range.</p>
</li>
<li>
<p>Three problematic Unicode characters now work better in regex pattern matching under <code class="inline">/i</code>.</p>
<p>In the past, three Unicode characters:
LATIN SMALL LETTER SHARP S,
GREEK SMALL LETTER IOTA WITH DIALYTIKA AND TONOS,
and
GREEK SMALL LETTER UPSILON WITH DIALYTIKA AND TONOS,
along with the sequences that they fold to
(including "ss" for LATIN SMALL LETTER SHARP S),
did not properly match under <code class="inline">/i</code>.  5.14.0 fixed some of these cases,
but introduced others, including a panic when one of the characters or
sequences was used in the <code class="inline"><span class="s">(</span><span class="q">?(DEFINE)</span></code>
 regular expression predicate.
The known bugs that were introduced in 5.14 have now been fixed; as well
as some other edge cases that have never worked until now.  These all
involve using the characters and sequences outside bracketed character
classes under <code class="inline">/i</code>.  This closes [perl #98546].</p>
<p>There remain known problems when using certain characters with
multi-character folds inside bracketed character classes, including such
constructs as <code class="inline"><span class="q">qr/[\N{LATIN SMALL LETTER SHARP}a-z]/i</span></code>
.  These
remaining bugs are addressed in [perl #89774].</p>
</li>
<li>
<p>RT #78266: The regex engine has been leaking memory when accessing
named captures that weren't matched as part of a regex ever since 5.10
when they were introduced; e.g., this would consume over a hundred MB of
memory:</p>
<pre class="verbatim"><ol><li>    <a class="l_k" href="functions/for.html">for</a> <span class="s">(</span><span class="n">1</span>..<span class="n">10_000_000</span><span class="s">)</span> <span class="s">{</span></li><li>        <a class="l_k" href="functions/if.html">if</a> <span class="s">(</span><span class="q">&quot;foo&quot;</span> =~ <span class="q">/(foo|(?&lt;capture&gt;bar))?/</span><span class="s">)</span> <span class="s">{</span></li><li>            <a class="l_k" href="functions/my.html">my</a> <span class="i">$capture</span> = <span class="i">$+</span>{<span class="w">capture</span>}</li><li>        <span class="s">}</span></li><li>    <span class="s">}</span></li><li>    <a class="l_k" href="functions/system.html">system</a> <span class="q">&quot;ps -o rss $$&quot;</span><span class="q">&#39;</span></li></ol></pre></li>
<li>
<p>In 5.14, <code class="inline"><span class="q">/[[:lower:]]/i</span></code>
 and <code class="inline"><span class="q">/[[:upper:]]/i</span></code>
 no longer matched the
opposite case.  This has been fixed [perl #101970].</p>
</li>
<li>
<p>A regular expression match with an overloaded object on the right-hand side
would sometimes stringify the object too many times.</p>
</li>
<li>
<p>A regression has been fixed that was introduced in 5.14, in <code class="inline">/i</code>
regular expression matching, in which a match improperly fails if the
pattern is in UTF-8, the target string is not, and a Latin-1 character
precedes a character in the string that should match the pattern.
[perl #101710]</p>
</li>
<li>
<p>In case-insensitive regular expression pattern matching, no longer on
UTF-8 encoded strings does the scan for the start of match look only at
the first possible position.  This caused matches such as
<code class="inline"><span class="q">&quot;f\x{FB00}&quot;</span> =~ <span class="q">/ff/i</span></code>
 to fail.</p>
</li>
<li>
<p>The regexp optimizer no longer crashes on debugging builds when merging
fixed-string nodes with inconvenient contents.</p>
</li>
<li>
<p>A panic involving the combination of the regular expression modifiers
<code class="inline"><span class="q">/aa</span></code>
 and the <code class="inline">\<span class="w">b</span></code>
 escape sequence introduced in 5.14.0 has been
fixed [perl #95964]. (5.14.2)</p>
</li>
<li>
<p>The combination of the regular expression modifiers <code class="inline"><span class="q">/aa</span></code>
 and the <code class="inline">\<span class="w">b</span></code>

and <code class="inline">\<span class="w">B</span></code>
 escape sequences did not work properly on UTF-8 encoded
strings.  All non-ASCII characters under <code class="inline"><span class="q">/aa</span></code>
 should be treated as
non-word characters, but what was happening was that Unicode rules were
used to determine wordness/non-wordness for non-ASCII characters.  This
is now fixed [perl #95968].</p>
</li>
<li>
<p><code class="inline"><span class="s">(</span><span class="q">?foo: ...)</span></code>
 no longer loses passed in character set.</p>
</li>
<li>
<p>The trie optimization used to have problems with alternations containing
an empty <code class="inline">(?:)</code>, causing <code class="inline"><span class="q">&quot;x&quot;</span> =~ <span class="q">/\A(?&gt;(?:(?:)A|B|C?x))\z/</span></code>
 not to
match, whereas it should [perl #111842].</p>
</li>
<li>
<p>Use of lexical (<code class="inline"><a class="l_k" href="functions/my.html">my</a></code>) variables in code blocks embedded in regular
expressions will no longer result in memory corruption or crashes.</p>
<p>Nevertheless, these code blocks are still experimental, as there are still
problems with the wrong variables being closed over (in loops for instance)
and with abnormal exiting (e.g., <code class="inline"><a class="l_k" href="functions/die.html">die</a></code>) causing memory corruption.</p>
</li>
<li>
<p>The <code class="inline">\<span class="w">h</span></code>
, <code class="inline">\<span class="w">H</span></code>
, <code class="inline">\<span class="w">v</span></code>
 and <code class="inline">\<span class="w">V</span></code>
 regular expression metacharacters used to
cause a panic error message when trying to match at the end of the
string [perl #96354].</p>
</li>
<li>
<p>The abbreviations for four C1 control characters <code class="inline"><span class="w">MW</span></code>
 <code class="inline"><span class="w">PM</span></code>
, <code class="inline"><span class="w">RI</span></code>
, and
<code class="inline"><span class="w">ST</span></code>
 were previously unrecognized by <code class="inline">\<span class="w">N</span><span class="s">{</span><span class="s">}</span></code>
, vianame(), and
string_vianame().</p>
</li>
<li>
<p>Mentioning a variable named "&amp;" other than <code class="inline"><span class="i">$&amp;</span></code>
 (i.e., <code class="inline"><span class="i">@&amp;</span></code>
 or <code class="inline"><span class="i">%&amp;</span></code>
) no
longer stops <code class="inline"><span class="i">$&amp;</span></code>
 from working.  The same applies to variables named "'"
and "`" [perl #24237].</p>
</li>
<li>
<p>Creating a <code class="inline"><span class="w">UNIVERSAL::AUTOLOAD</span></code>
 sub no longer stops <code class="inline"><span class="i">%+</span></code>
, <code class="inline"><span class="i">%-</span></code>
 and
<code class="inline"><span class="i">%!</span></code>
 from working some of the time [perl #105024].</p>
</li>
</ul>
<a name="Smartmatching"></a><h2>Smartmatching</h2>
<ul>
<li>
<p><code class="inline">~~</code>
 now correctly handles the precedence of Any~~Object, and is not tricked
by an overloaded object on the left-hand side.</p>
</li>
<li>
<p>In Perl 5.14.0, <code class="inline"><span class="i">$tainted</span> ~~ <span class="i">@array</span></code>
 stopped working properly.  Sometimes
it would erroneously fail (when <code class="inline"><span class="i">$tainted</span></code>
 contained a string that occurs
in the array <i>after</i> the first element) or erroneously succeed (when
<code class="inline"><a class="l_k" href="functions/undef.html">undef</a></code> occurred after the first element) [perl #93590].</p>
</li>
</ul>
<a name="The-sort-operator"></a><h2>The <code class="inline"><a class="l_k" href="functions/sort.html">sort</a></code> operator</h2>
<ul>
<li>
<p><code class="inline"><a class="l_k" href="functions/sort.html">sort</a></code> was not treating <code class="inline"><a class="l_k" href="functions/sub.html">sub</a> <span class="s">{</span><span class="s">}</span></code>
 and <code class="inline"><a class="l_k" href="functions/sub.html">sub</a> <span class="s">{</span><span class="s">(</span><span class="s">)</span><span class="s">}</span></code>
 as equivalent when
such a sub was provided as the comparison routine.  It used to croak on
<code class="inline"><a class="l_k" href="functions/sub.html">sub</a> <span class="s">{</span><span class="s">(</span><span class="s">)</span><span class="s">}</span></code>
.</p>
</li>
<li>
<p><code class="inline"><a class="l_k" href="functions/sort.html">sort</a></code> now works once more with custom sort routines that are XSUBs.  It
stopped working in 5.10.0.</p>
</li>
<li>
<p><code class="inline"><a class="l_k" href="functions/sort.html">sort</a></code> with a constant for a custom sort routine, although it produces
unsorted results, no longer crashes.  It started crashing in 5.10.0.</p>
</li>
<li>
<p>Warnings emitted by <code class="inline"><a class="l_k" href="functions/sort.html">sort</a></code> when a custom comparison routine returns a
non-numeric value now contain "in sort" and show the line number of the
<code class="inline"><a class="l_k" href="functions/sort.html">sort</a></code> operator, rather than the last line of the comparison routine.  The
warnings also now occur only if warnings are enabled in the scope where
<code class="inline"><a class="l_k" href="functions/sort.html">sort</a></code> occurs.  Previously the warnings would occur if enabled in the
comparison routine's scope.</p>
</li>
<li>
<p><code class="inline"><a class="l_k" href="functions/sort.html">sort</a> <span class="s">{</span> <span class="i">$a</span> &lt;=&gt; <span class="i">$b</span> <span class="s">}</span></code>
, which is optimized internally, now produces
"uninitialized" warnings for NaNs (not-a-number values), since <code class="inline">&lt;=&gt;</code>

returns <code class="inline"><a class="l_k" href="functions/undef.html">undef</a></code> for those.  This brings it in line with
<code class="inline"><a class="l_k" href="functions/sort.html">sort</a> <span class="s">{</span> <span class="n">1</span><span class="sc">;</span> <span class="i">$a</span> &lt;=&gt; <span class="i">$b</span> <span class="s">}</span></code>
 and other more complex cases, which are not
optimized [perl #94390].</p>
</li>
</ul>
<a name="The-substr-operator"></a><h2>The <code class="inline"><a class="l_k" href="functions/substr.html">substr</a></code> operator</h2>
<ul>
<li>
<p>Tied (and otherwise magical) variables are no longer exempt from the
"Attempt to use reference as lvalue in substr" warning.</p>
</li>
<li>
<p>That warning now occurs when the returned lvalue is assigned to, not
when <code class="inline"><a class="l_k" href="functions/substr.html">substr</a></code> itself is called.  This makes a difference only if the
return value of <code class="inline"><a class="l_k" href="functions/substr.html">substr</a></code> is referenced and later assigned to.</p>
</li>
<li>
<p>Passing a substring of a read-only value or a typeglob to a function
(potential lvalue context) no longer causes an immediate "Can't coerce"
or "Modification of a read-only value" error.  That error occurs only 
if the passed value is assigned to.</p>
<p>The same thing happens with the "substr outside of string" error.  If
the lvalue is only read from, not written to, it is now just a warning, as
with rvalue <code class="inline"><a class="l_k" href="functions/substr.html">substr</a></code>.</p>
</li>
<li>
<p><code class="inline"><a class="l_k" href="functions/substr.html">substr</a></code> assignments no longer call FETCH twice if the first argument
is a tied variable, just once.</p>
</li>
</ul>
<a name="Support-for-embedded-nulls"></a><h2>Support for embedded nulls</h2>
<p>Some parts of Perl did not work correctly with nulls (<code class="inline"><a class="l_k" href="functions/chr.html">chr</a> <span class="n">0</span></code>
) embedded in
strings.  That meant that, for instance, <code class="inline"><span class="i">$m</span> = <span class="q">&quot;a\0b&quot;</span><span class="sc">;</span> <span class="w">foo</span><span class="w">-&gt;$m</span></code>
 would
call the "a" method, instead of the actual method name contained in $m.
These parts of perl have been fixed to support nulls:</p>
<ul>
<li>
<p>Method names</p>
</li>
<li>
<p>Typeglob names (including filehandle and subroutine names)</p>
</li>
<li>
<p>Package names, including the return value of <code class="inline"><a class="l_k" href="functions/ref.html">ref()</a></code></p>
</li>
<li>
<p>Typeglob elements (<code class="inline"><span class="i">*foo</span>{<span class="q">&quot;THING\0stuff&quot;</span>}</code>
)</p>
</li>
<li>
<p>Signal names</p>
</li>
<li>
<p>Various warnings and error messages that mention variable names or values,
methods, etc.</p>
</li>
</ul>
<p>One side effect of these changes is that blessing into "\0" no longer
causes <code class="inline"><a class="l_k" href="functions/ref.html">ref()</a></code> to return false.</p>
<a name="Threading-bugs"></a><h2>Threading bugs</h2>
<ul>
<li>
<p>Typeglobs returned from threads are no longer cloned if the parent thread
already has a glob with the same name.  This means that returned
subroutines will now assign to the right package variables [perl #107366].</p>
</li>
<li>
<p>Some cases of threads crashing due to memory allocation during cloning have
been fixed [perl #90006].</p>
</li>
<li>
<p>Thread joining would sometimes emit "Attempt to free unreferenced scalar"
warnings if <code class="inline"><a class="l_k" href="functions/caller.html">caller</a></code> had been used from the <code class="inline"><span class="w">DB</span></code>
 package before thread
creation [perl #98092].</p>
</li>
<li>
<p>Locking a subroutine (via <code class="inline"><a class="l_k" href="functions/lock.html">lock</a> <span class="i">&amp;sub</span></code>
) is no longer a compile-time error
for regular subs.  For lvalue subroutines, it no longer tries to return the
sub as a scalar, resulting in strange side effects like <code class="inline"><a class="l_k" href="functions/ref.html">ref</a> \<span class="i">$_</span></code>

returning "CODE" in some instances.</p>
<p><code class="inline"><a class="l_k" href="functions/lock.html">lock</a> <span class="i">&amp;sub</span></code>
 is now a run-time error if <a href="threads/shared.html">threads::shared</a> is loaded (a
no-op otherwise), but that may be rectified in a future version.</p>
</li>
</ul>
<a name="Tied-variables"></a><h2>Tied variables</h2>
<ul>
<li>
<p>Various cases in which FETCH was being ignored or called too many times
have been fixed:</p>
<ul>
<li>
<p><code class="inline"><span class="w">PerlIO::get_layers</span></code>
 [perl #97956]</p>
</li>
<li>
<p><code class="inline"><span class="i">$tied</span> =~ <span class="q">y/a/b/</span></code>
, <code class="inline"><a class="l_k" href="functions/chop.html">chop</a> <span class="i">$tied</span></code>
 and <code class="inline"><a class="l_k" href="functions/chomp.html">chomp</a> <span class="i">$tied</span></code>
 when $tied holds a
reference.</p>
</li>
<li>
<p>When calling <code class="inline"><a class="l_k" href="functions/local.html">local</a> <span class="i">$_</span></code>
 [perl #105912]</p>
</li>
<li>
<p>Four-argument <code class="inline"><a class="l_k" href="functions/select.html">select</a></code></p>
</li>
<li>
<p>A tied buffer passed to <code class="inline"><a class="l_k" href="functions/sysread.html">sysread</a></code></p>
</li>
<li>
<p><code class="inline"><span class="i">$tied</span> .= &lt;&gt;</code>
</p>
</li>
<li>
<p>Three-argument <code class="inline"><a class="l_k" href="functions/open.html">open</a></code>, the third being a tied file handle
(as in <code class="inline"><a class="l_k" href="functions/open.html">open</a> <span class="i">$fh</span><span class="cm">,</span> <span class="q">&quot;&gt;&amp;&quot;</span><span class="cm">,</span> <span class="i">$tied</span></code>
)</p>
</li>
<li>
<p><code class="inline"><a class="l_k" href="functions/sort.html">sort</a></code> with a reference to a tied glob for the comparison routine.</p>
</li>
<li>
<p><code class="inline">..</code>
 and <code class="inline">...</code>
 in list context [perl #53554].</p>
</li>
<li>
<p><code class="inline"><span class="i">$</span>{<span class="i">$tied</span>}</code>
, <code class="inline"><span class="i">@</span>{<span class="i">$tied</span>}</code>
, <code class="inline"><span class="i">%</span>{<span class="i">$tied</span>}</code>
 and <code class="inline"><span class="i">*</span>{<span class="i">$tied</span>}</code>
 where the tied
variable returns a string (<code class="inline"><span class="i">&amp;</span>{}</code>
 was unaffected)</p>
</li>
<li>
<p><code class="inline"><a class="l_k" href="functions/defined.html">defined</a> <span class="i">$</span>{ <span class="i">$tied_variable</span> }</code>
</p>
</li>
<li>
<p>Various functions that take a filehandle argument in rvalue context
(<code class="inline"><a class="l_k" href="functions/close.html">close</a></code>, <code class="inline"><a class="l_k" href="functions/readline.html">readline</a></code>, etc.) [perl #97482]</p>
</li>
<li>
<p>Some cases of dereferencing a complex expression, such as
<code class="inline"><span class="i">$</span>{ <span class="s">(</span><span class="s">)</span><span class="cm">,</span> <span class="i">$tied</span> } = <span class="n">1</span></code>
, used to call <code class="inline"><span class="w">FETCH</span></code>
 multiple times, but now call
it once.</p>
</li>
<li>
<p><code class="inline"><span class="i">$tied</span><span class="i">-&gt;method</span></code>
 where $tied returns a package name--even resulting in
a failure to call the method, due to memory corruption</p>
</li>
<li>
<p>Assignments like <code class="inline"><span class="i">*$tied</span> = \<span class="i">&amp;</span>{<span class="q">&quot;...&quot;</span>}</code>
 and <code class="inline"><span class="i">*glob</span> = <span class="i">$tied</span></code>
</p>
</li>
<li>
<p><code class="inline"><a class="l_k" href="functions/chdir.html">chdir</a></code>, <code class="inline"><a class="l_k" href="functions/chmod.html">chmod</a></code>, <code class="inline"><a class="l_k" href="functions/chown.html">chown</a></code>, <code class="inline"><a class="l_k" href="functions/utime.html">utime</a></code>, <code class="inline"><a class="l_k" href="functions/truncate.html">truncate</a></code>, <code class="inline"><a class="l_k" href="functions/stat.html">stat</a></code>, <code class="inline"><a class="l_k" href="functions/lstat.html">lstat</a></code> and
the filetest ops (<code class="inline">-r</code>
, <code class="inline">-x</code>
, etc.)</p>
</li>
</ul>
</li>
<li>
<p><code class="inline"><a class="l_k" href="functions/caller.html">caller</a></code> sets <code class="inline"><span class="i">@DB::args</span></code>
 to the subroutine arguments when called from
the DB package.  It used to crash when doing so if <code class="inline"><span class="i">@DB::args</span></code>
 happened to
be tied.  Now it croaks instead.</p>
</li>
<li>
<p>Tying an element of %ENV or <code class="inline"><span class="i">%^H</span></code>
 and then deleting that element would
result in a call to the tie object's DELETE method, even though tying the
element itself is supposed to be equivalent to tying a scalar (the element
is, of course, a scalar) [perl #67490].</p>
</li>
<li>
<p>When Perl autovivifies an element of a tied array or hash (which entails
calling STORE with a new reference), it now calls FETCH immediately after
the STORE, instead of assuming that FETCH would have returned the same
reference.  This can make it easier to implement tied objects [perl #35865, #43011].</p>
</li>
<li>
<p>Four-argument <code class="inline"><a class="l_k" href="functions/select.html">select</a></code> no longer produces its "Non-string passed as
bitmask" warning on tied or tainted variables that are strings.</p>
</li>
<li>
<p>Localizing a tied scalar that returns a typeglob no longer stops it from
being tied till the end of the scope.</p>
</li>
<li>
<p>Attempting to <code class="inline"><a class="l_k" href="functions/goto.html">goto</a></code> out of a tied handle method used to cause memory
corruption or crashes.  Now it produces an error message instead
[perl #8611].</p>
</li>
<li>
<p>A bug has been fixed that occurs when a tied variable is used as a
subroutine reference:  if the last thing assigned to or returned from the
variable was a reference or typeglob, the <code class="inline">\<span class="i">&amp;$tied</span></code>
 could either crash or
return the wrong subroutine.  The reference case is a regression introduced
in Perl 5.10.0.  For typeglobs, it has probably never worked till now.</p>
</li>
</ul>
<a name="Version-objects-and-vstrings"></a><h2>Version objects and vstrings</h2>
<ul>
<li>
<p>The bitwise complement operator (and possibly other operators, too) when
passed a vstring would leave vstring magic attached to the return value,
even though the string had changed.  This meant that
<code class="inline"><span class="w">version</span><span class="w">-&gt;new</span><span class="s">(</span>~<span class="v">v1.2.3</span><span class="s">)</span></code>
 would create a version looking like "v1.2.3"
even though the string passed to <code class="inline"><span class="w">version</span><span class="w">-&gt;new</span></code>
 was actually
"\376\375\374".  This also caused <a href="B/Deparse.html">B::Deparse</a> to deparse <code class="inline">~<span class="v">v1.2.3</span></code>

incorrectly, without the <code class="inline">~</code>
 [perl #29070].</p>
</li>
<li>
<p>Assigning a vstring to a magic (e.g., tied, <code class="inline"><span class="i">$!</span></code>
) variable and then
assigning something else used to blow away all magic.  This meant that
tied variables would come undone, <code class="inline"><span class="i">$!</span></code>
 would stop getting updated on
failed system calls, <code class="inline"><span class="i">$|</span></code>
 would stop setting autoflush, and other
mischief would take place.  This has been fixed.</p>
</li>
<li>
<p><code class="inline"><span class="w">version</span><span class="w">-&gt;new</span><span class="s">(</span><span class="q">&quot;version&quot;</span><span class="s">)</span></code>
 and <code class="inline"><a class="l_k" href="functions/printf.html">printf</a> <span class="q">&quot;%vd&quot;</span><span class="cm">,</span> <span class="q">&quot;version&quot;</span></code>
 no longer
crash [perl #102586].</p>
</li>
<li>
<p>Version comparisons, such as those that happen implicitly with <code class="inline"><a class="l_k" href="functions/use.html">use</a>
<span class="v">v5.43</span></code>
, no longer cause locale settings to change [perl #105784].</p>
</li>
<li>
<p>Version objects no longer cause memory leaks in boolean context
[perl #109762].</p>
</li>
</ul>
<a name="Warnings%2c-redefinition"></a><h2>Warnings, redefinition</h2>
<ul>
<li>
<p>Subroutines from the <code class="inline"><span class="w">autouse</span></code>
 namespace are once more exempt from
redefinition warnings.  This used to work in 5.005, but was broken in
5.6 for most subroutines.  For subs created via XS that redefine
subroutines from the <code class="inline"><span class="w">autouse</span></code>
 package, this stopped working in 5.10.</p>
</li>
<li>
<p>New XSUBs now produce redefinition warnings if they overwrite existing
subs, as they did in 5.8.x.  (The <code class="inline"><span class="w">autouse</span></code>
 logic was reversed in
5.10-14.  Only subroutines from the <code class="inline"><span class="w">autouse</span></code>
 namespace would warn
when clobbered.)</p>
</li>
<li>
<p><code class="inline"><span class="w">newCONSTSUB</span></code>
 used to use compile-time warning hints, instead of
run-time hints.  The following code should never produce a redefinition
warning, but it used to, if <code class="inline"><span class="w">newCONSTSUB</span></code>
 redefined an existing
subroutine:</p>
<pre class="verbatim"><ol><li>    <a class="l_k" href="functions/use.html">use</a> <span class="w">warnings</span><span class="sc">;</span></li><li>    <a class="l_k" href="functions/BEGIN.html">BEGIN</a> <span class="s">{</span></li><li>        <a class="l_k" href="functions/no.html">no</a> <span class="w">warnings</span><span class="sc">;</span></li><li>        <span class="i">some_XS_function_that_calls_new_CONSTSUB</span><span class="s">(</span><span class="s">)</span><span class="sc">;</span></li><li>    <span class="s">}</span></li></ol></pre></li>
<li>
<p>Redefinition warnings for constant subroutines are on by default (what
are known as severe warnings in <a href="perldiag.html">perldiag</a>).  This occurred only
when it was a glob assignment or declaration of a Perl subroutine that
caused the warning.  If the creation of XSUBs triggered the warning, it
was not a default warning.  This has been corrected.</p>
</li>
<li>
<p>The internal check to see whether a redefinition warning should occur
used to emit "uninitialized" warnings in cases like this:</p>
<pre class="verbatim"><ol><li>    <a class="l_k" href="functions/use.html">use</a> <span class="w">warnings</span> <span class="q">&quot;uninitialized&quot;</span><span class="sc">;</span></li><li>    <a class="l_k" href="functions/use.html">use</a> <span class="w">constant</span> <span class="s">{</span><span class="w">u</span> <span class="cm">=&gt;</span> <a class="l_k" href="functions/undef.html">undef</a><span class="cm">,</span> <span class="w">v</span> <span class="cm">=&gt;</span> <a class="l_k" href="functions/undef.html">undef</a><span class="s">}</span><span class="sc">;</span></li><li><a name="foo"></a>    sub <span class="m">foo()</span><span class="s">{</span><span class="w">u</span><span class="s">}</span></li><li><a name="foo-1"></a>    sub <span class="m">foo()</span><span class="s">{</span><span class="w">v</span><span class="s">}</span></li></ol></pre></li>
</ul>
<a name="Warnings%2c-%22Uninitialized%22"></a><h2>Warnings, "Uninitialized"</h2>
<ul>
<li>
<p>Various functions that take a filehandle argument in rvalue context
(<code class="inline"><a class="l_k" href="functions/close.html">close</a></code>, <code class="inline"><a class="l_k" href="functions/readline.html">readline</a></code>, etc.) used to warn twice for an undefined handle
[perl #97482].</p>
</li>
<li>
<p><code class="inline"><a class="l_k" href="functions/dbmopen.html">dbmopen</a></code> now only warns once, rather than three times, if the mode
argument is <code class="inline"><a class="l_k" href="functions/undef.html">undef</a></code> [perl #90064].</p>
</li>
<li>
<p>The <code class="inline">+=</code>
 operator does not usually warn when the left-hand side is
<code class="inline"><a class="l_k" href="functions/undef.html">undef</a></code>, but it was doing so for tied variables.  This has been fixed
[perl #44895].</p>
</li>
<li>
<p>A bug fix in Perl 5.14 introduced a new bug, causing "uninitialized"
warnings to report the wrong variable if the operator in question had
two operands and one was <code class="inline"><span class="i">%</span>{...}</code>
 or <code class="inline"><span class="i">@</span>{...}</code>
.  This has been fixed
[perl #103766].</p>
</li>
<li>
<p><code class="inline">..</code>
 and <code class="inline">...</code>
 in list context now mention the name of the variable in
"uninitialized" warnings for string (as opposed to numeric) ranges.</p>
</li>
</ul>
<a name="Weak-references"></a><h2>Weak references</h2>
<ul>
<li>
<p>Weakening the first argument to an automatically-invoked <code class="inline">DESTROY</code>
 method
could result in erroneous "DESTROY created new reference" errors or
crashes.  Now it is an error to weaken a read-only reference.</p>
</li>
<li>
<p>Weak references to lexical hashes going out of scope were not going stale
(becoming undefined), but continued to point to the hash.</p>
</li>
<li>
<p>Weak references to lexical variables going out of scope are now broken
before any magical methods (e.g., DESTROY on a tie object) are called.
This prevents such methods from modifying the variable that will be seen
the next time the scope is entered.</p>
</li>
<li>
<p>Creating a weak reference to an @ISA array or accessing the array index
(<code class="inline"><span class="i">$#ISA</span></code>
) could result in confused internal bookkeeping for elements
later added to the @ISA array.  For instance, creating a weak
reference to the element itself could push that weak reference on to @ISA;
and elements added after use of <code class="inline"><span class="i">$#ISA</span></code>
 would be ignored by method lookup
[perl #85670].</p>
</li>
</ul>
<a name="Other-notable-fixes"></a><h2>Other notable fixes</h2>
<ul>
<li>
<p><code class="inline"><a class="l_k" href="functions/quotemeta.html">quotemeta</a></code> now quotes consistently the same non-ASCII characters under
<code class="inline"><a class="l_k" href="functions/use.html">use</a> <span class="w">feature</span> <span class="q">&#39;unicode_strings&#39;</span></code>
, regardless of whether the string is
encoded in UTF-8 or not, hence fixing the last vestiges (we hope) of the
notorious <a href="perlunicode.html#The-%22Unicode-Bug%22">The Unicode Bug in perlunicode</a>.  [perl #77654].</p>
<p>Which of these code points is quoted has changed, based on Unicode's
recommendations.  See <a href="functions/quotemeta.html">quotemeta</a> for details.</p>
</li>
<li>
<p><code class="inline"><a class="l_k" href="functions/study.html">study</a></code> is now a no-op, presumably fixing all outstanding bugs related to
study causing regex matches to behave incorrectly!</p>
</li>
<li>
<p>When one writes <code class="inline"><a class="l_k" href="functions/open.html">open</a> <span class="w">foo</span> || <a class="l_k" href="functions/die.html">die</a></code>
, which used to work in Perl 4, a
"Precedence problem" warning is produced.  This warning used erroneously to
apply to fully-qualified bareword handle names not followed by <code class="inline">||</code>.  This
has been corrected.</p>
</li>
<li>
<p>After package aliasing (<code class="inline"><span class="i">*foo::</span> = <span class="i">*bar::</span></code>
), <code class="inline"><a class="l_k" href="functions/select.html">select</a></code> with 0 or 1 argument
would sometimes return a name that could not be used to refer to the
filehandle, or sometimes it would return <code class="inline"><a class="l_k" href="functions/undef.html">undef</a></code> even when a filehandle
was selected.  Now it returns a typeglob reference in such cases.</p>
</li>
<li>
<p><code class="inline"><span class="w">PerlIO::get_layers</span></code>
 no longer ignores some arguments that it thinks are
numeric, while treating others as filehandle names.  It is now consistent
for flat scalars (i.e., not references).</p>
</li>
<li>
<p>Unrecognized switches on <code class="inline"><span class="c">#!</span></code>
 line</p>
<p>If a switch, such as <b>-x</b>, that cannot occur on the <code class="inline"><span class="c">#!</span></code>
 line is used
there, perl dies with "Can't emulate...".</p>
<p>It used to produce the same message for switches that perl did not
recognize at all, whether on the command line or the <code class="inline"><span class="c">#!</span></code>
 line.</p>
<p>Now it produces the "Unrecognized switch" error message [perl #104288].</p>
</li>
<li>
<p><code class="inline"><a class="l_k" href="functions/system.html">system</a></code> now temporarily blocks the SIGCHLD signal handler, to prevent the
signal handler from stealing the exit status [perl #105700].</p>
</li>
<li>
<p>The %n formatting code for <code class="inline"><a class="l_k" href="functions/printf.html">printf</a></code> and <code class="inline"><a class="l_k" href="functions/sprintf.html">sprintf</a></code>, which causes the number
of characters to be assigned to the next argument, now actually
assigns the number of characters, instead of the number of bytes.</p>
<p>It also works now with special lvalue functions like <code class="inline"><a class="l_k" href="functions/substr.html">substr</a></code> and with
nonexistent hash and array elements [perl #3471, #103492].</p>
</li>
<li>
<p>Perl skips copying values returned from a subroutine, for the sake of
speed, if doing so would make no observable difference.  Because of faulty
logic, this would happen with the
result of <code class="inline"><a class="l_k" href="functions/delete.html">delete</a></code>, <code class="inline"><a class="l_k" href="functions/shift.html">shift</a></code> or <code class="inline"><a class="l_k" href="functions/splice.html">splice</a></code>, even if the result was
referenced elsewhere.  It also did so with tied variables about to be freed
[perl #91844, #95548].</p>
</li>
<li>
<p><code class="inline"><span class="w">utf8::decode</span></code>
 now refuses to modify read-only scalars [perl #91850].</p>
</li>
<li>
<p>Freeing $_ inside a <code class="inline"><a class="l_k" href="functions/grep.html">grep</a></code> or <code class="inline"><a class="l_k" href="functions/map.html">map</a></code> block, a code block embedded in a
regular expression, or an @INC filter (a subroutine returned by a
subroutine in @INC) used to result in double frees or crashes
[perl #91880, #92254, #92256].</p>
</li>
<li>
<p><code class="inline"><a class="l_k" href="functions/eval.html">eval</a></code> returns <code class="inline"><a class="l_k" href="functions/undef.html">undef</a></code> in scalar context or an empty list in list
context when there is a run-time error.  When <code class="inline"><a class="l_k" href="functions/eval.html">eval</a></code> was passed a
string in list context and a syntax error occurred, it used to return a
list containing a single undefined element.  Now it returns an empty
list in list context for all errors [perl #80630].</p>
</li>
<li>
<p><code class="inline"><a class="l_k" href="functions/goto.html">goto</a> <span class="i">&amp;func</span></code>
 no longer crashes, but produces an error message, when
the unwinding of the current subroutine's scope fires a destructor that
undefines the subroutine being "goneto" [perl #99850].</p>
</li>
<li>
<p>Perl now holds an extra reference count on the package that code is
currently compiling in.  This means that the following code no longer
crashes [perl #101486]:</p>
<pre class="verbatim"><ol><li><a name="package-Foo"></a>    package <span class="i">Foo</span><span class="sc">;</span></li><li>    <a class="l_k" href="functions/BEGIN.html">BEGIN</a> <span class="s">{</span><span class="i">*Foo::</span> = <span class="i">*Bar::</span><span class="s">}</span></li><li>    sub <span class="m">foo</span><span class="sc">;</span></li></ol></pre></li>
<li>
<p>The <code class="inline"><span class="w">x</span></code>
 repetition operator no longer crashes on 64-bit builds with large
repeat counts [perl #94560].</p>
</li>
<li>
<p>Calling <code class="inline"><a class="l_k" href="functions/require.html">require</a></code> on an implicit <code class="inline"><span class="i">$_</span></code>
 when <code class="inline"><span class="i">*CORE::GLOBAL::require</span></code>
 has
been overridden does not segfault anymore, and <code class="inline"><span class="i">$_</span></code>
 is now passed to the
overriding subroutine [perl #78260].</p>
</li>
<li>
<p><code class="inline"><a class="l_k" href="functions/use.html">use</a></code> and <code class="inline"><a class="l_k" href="functions/require.html">require</a></code> are no longer affected by the I/O layers active in
the caller's scope (enabled by <a href="open.html">open.pm</a>) [perl #96008].</p>
</li>
<li>
<p><code class="inline"><a class="l_k" href="functions/our.html">our</a> <span class="i">$::</span><span class="w">&eacute;</span><span class="sc">;</span> <span class="i">$&eacute;</span></code>
 (which is invalid) no longer produces the "Compilation
error at lib/utf8_heavy.pl..." error message, which it started emitting in
5.10.0 [perl #99984].</p>
</li>
<li>
<p>On 64-bit systems, <code class="inline"><a class="l_k" href="functions/read.html">read()</a></code> now understands large string offsets beyond
the 32-bit range.</p>
</li>
<li>
<p>Errors that occur when processing subroutine attributes no longer cause the
subroutine's op tree to leak.</p>
</li>
<li>
<p>Passing the same constant subroutine to both <code class="inline"><a class="l_k" href="functions/index.html">index</a></code> and <code class="inline"><a class="l_k" href="functions/formline.html">formline</a></code> no
longer causes one or the other to fail [perl #89218]. (5.14.1)</p>
</li>
<li>
<p>List assignment to lexical variables declared with attributes in the same
statement (<code class="inline"><a class="l_k" href="functions/my.html">my</a> <span class="s">(</span><span class="i">$x</span><span class="cm">,</span><span class="i">@y</span><span class="s">)</span> <span class="co">:</span> <span class="w">blimp</span> = <span class="s">(</span><span class="n">72</span><span class="cm">,</span><span class="n">94</span><span class="s">)</span></code>
) stopped working in Perl 5.8.0.
It has now been fixed.</p>
</li>
<li>
<p>Perl 5.10.0 introduced some faulty logic that made "U*" in the middle of
a pack template equivalent to "U0" if the input string was empty.  This has
been fixed [perl #90160]. (5.14.2)</p>
</li>
<li>
<p>Destructors on objects were not called during global destruction on objects
that were not referenced by any scalars.  This could happen if an array
element were blessed (e.g., <code class="inline"><a class="l_k" href="functions/bless.html">bless</a> \<span class="i">$a</span>[<span class="n">0</span>]</code>
) or if a closure referenced a
blessed variable (<code class="inline"><a name="foo"></a><a class="l_k" href="functions/bless.html">bless</a> \<a class="l_k" href="functions/my.html">my</a> <span class="i">@a</span><span class="sc">;</span> sub <span class="m">foo</span> <span class="s">{</span> <span class="i">@a</span> <span class="s">}</span></code>
).</p>
<p>Now there is an extra pass during global destruction to fire destructors on
any objects that might be left after the usual passes that check for
objects referenced by scalars [perl #36347].</p>
</li>
<li>
<p>Fixed a case where it was possible that a freed buffer may have been read
from when parsing a here document [perl #90128]. (5.14.1)</p>
</li>
<li>
<p><code class="inline">each(<i>ARRAY</i>)</code> is now wrapped in <code class="inline"><a class="l_k" href="functions/defined.html">defined(...)</a></code>, like <code class="inline">each(<i>HASH</i>)</code>,
inside a <code class="inline">while</code>
 condition [perl #90888].</p>
</li>
<li>
<p>A problem with context propagation when a <code class="inline"><a class="l_k" href="functions/do.html">do</a></code> block is an argument to
<code class="inline"><a class="l_k" href="functions/return.html">return</a></code> has been fixed.  It used to cause <code class="inline"><a class="l_k" href="functions/undef.html">undef</a></code> to be returned in
certain cases of a <code class="inline"><a class="l_k" href="functions/return.html">return</a></code> inside an <code class="inline">if</code>
 block which itself is followed by
another <code class="inline"><a class="l_k" href="functions/return.html">return</a></code>.</p>
</li>
<li>
<p>Calling <code class="inline"><a class="l_k" href="functions/index.html">index</a></code> with a tainted constant no longer causes constants in
subsequently compiled code to become tainted [perl #64804].</p>
</li>
<li>
<p>Infinite loops like <code class="inline"><span class="n">1</span> <a class="l_k" href="functions/while.html">while</a> <span class="n">1</span></code>
 used to stop <code class="inline"><span class="w">strict</span> <span class="q">&#39;subs&#39;</span></code>
 mode from
working for the rest of the block.</p>
</li>
<li>
<p>For list assignments like <code class="inline"><span class="s">(</span><span class="i">$a</span><span class="cm">,</span><span class="i">$b</span><span class="s">)</span> = <span class="s">(</span><span class="i">$b</span><span class="cm">,</span><span class="i">$a</span><span class="s">)</span></code>
, Perl has to make a copy of
the items on the right-hand side before assignment them to the left.  For
efficiency's sake, it assigns the values on the right straight to the items
on the left if no one variable is mentioned on both sides, as in <code class="inline"><span class="s">(</span><span class="i">$a</span><span class="cm">,</span><span class="i">$b</span><span class="s">)</span> =
<span class="s">(</span><span class="i">$c</span><span class="cm">,</span><span class="i">$d</span><span class="s">)</span></code>
.  The logic for determining when it can cheat was faulty, in that
<code class="inline">&amp;&amp;</code> and <code class="inline">||</code> on the right-hand side could fool it.  So <code class="inline"><span class="s">(</span><span class="i">$a</span><span class="cm">,</span><span class="i">$b</span><span class="s">)</span> =
<span class="i">$some_true_value</span> &amp;&amp; <span class="s">(</span><span class="i">$b</span><span class="cm">,</span><span class="i">$a</span><span class="s">)</span></code>
 would end up assigning the value of <code class="inline"><span class="i">$b</span></code>
 to
both scalars.</p>
</li>
<li>
<p>Perl no longer tries to apply lvalue context to the string in
<code class="inline"><span class="s">(</span><span class="q">&quot;string&quot;</span><span class="cm">,</span> <span class="i">$variable</span><span class="s">)</span> ||= <span class="n">1</span></code>
 (which used to be an error).  Since the
left-hand side of <code class="inline">||=</code>
 is evaluated in scalar context, that's a scalar
comma operator, which gives all but the last item void context.  There is
no such thing as void lvalue context, so it was a mistake for Perl to try
to force it [perl #96942].</p>
</li>
<li>
<p><code class="inline"><a class="l_k" href="functions/caller.html">caller</a></code> no longer leaks memory when called from the DB package if
<code class="inline"><span class="i">@DB::args</span></code>
 was assigned to after the first call to <code class="inline"><a class="l_k" href="functions/caller.html">caller</a></code>.  <a href="Carp.html">Carp</a>
was triggering this bug [perl #97010]. (5.14.2)</p>
</li>
<li>
<p><code class="inline"><a class="l_k" href="functions/close.html">close</a></code> and similar filehandle functions, when called on built-in global
variables (like <code class="inline"><span class="i">$+</span></code>
), used to die if the variable happened to hold the
undefined value, instead of producing the usual "Use of uninitialized
value" warning.</p>
</li>
<li>
<p>When autovivified file handles were introduced in Perl 5.6.0, <code class="inline"><a class="l_k" href="functions/readline.html">readline</a></code>
was inadvertently made to autovivify when called as <code class="inline"><a class="l_k" href="functions/readline.html">readline($foo)</a></code> (but
not as <code class="inline"><span class="q">&lt;$foo&gt;</span></code>
).  It has now been fixed never to autovivify.</p>
</li>
<li>
<p>Calling an undefined anonymous subroutine (e.g., what $x holds after
<code class="inline"><a class="l_k" href="functions/undef.html">undef</a> <span class="i">&amp;</span>{<span class="i">$x</span> = <a class="l_k" href="functions/sub.html">sub</a><span class="s">{</span><span class="s">}</span>}</code>
) used to cause a "Not a CODE reference" error, which
has been corrected to "Undefined subroutine called" [perl #71154].</p>
</li>
<li>
<p>Causing <code class="inline"><span class="i">@DB::args</span></code>
 to be freed between uses of <code class="inline"><a class="l_k" href="functions/caller.html">caller</a></code> no longer
results in a crash [perl #93320].</p>
</li>
<li>
<p><code class="inline"><a class="l_k" href="functions/setpgrp.html">setpgrp($foo)</a></code> used to be equivalent to <code class="inline"><span class="s">(</span><span class="i">$foo</span><span class="cm">,</span> <a class="l_k" href="functions/setpgrp.html">setpgrp</a><span class="s">)</span></code>
, because
<code class="inline"><a class="l_k" href="functions/setpgrp.html">setpgrp</a></code> was ignoring its argument if there was just one.  Now it is
equivalent to <code class="inline"><a class="l_k" href="functions/setpgrp.html">setpgrp($foo,0)</a></code>.</p>
</li>
<li>
<p><code class="inline"><a class="l_k" href="functions/shmread.html">shmread</a></code> was not setting the scalar flags correctly when reading from
shared memory, causing the existing cached numeric representation in the
scalar to persist [perl #98480].</p>
</li>
<li>
<p><code class="inline">++</code>
 and <code class="inline">--</code>
 now work on copies of globs, instead of dying.</p>
</li>
<li>
<p><code class="inline"><a class="l_k" href="functions/splice.html">splice()</a></code> doesn't warn when truncating</p>
<p>You can now limit the size of an array using <code class="inline"><a class="l_k" href="functions/splice.html">splice(@a,MAX_LEN)</a></code> without
worrying about warnings.</p>
</li>
<li>
<p><code class="inline"><span class="i">$$</span></code>
 is no longer tainted.  Since this value comes directly from
<code class="inline"><span class="i">getpid</span><span class="s">(</span><span class="s">)</span></code>
, it is always safe.</p>
</li>
<li>
<p>The parser no longer leaks a filehandle if STDIN was closed before parsing
started [perl #37033].</p>
</li>
<li>
<p><code class="inline"><a class="l_k" href="functions/die.html">die;</a></code> with a non-reference, non-string, or magical (e.g., tainted)
value in $@ now properly propagates that value [perl #111654].</p>
</li>
</ul>
<a name="Known-Problems"></a><h1>Known Problems</h1>
<ul>
<li>
<p>On Solaris, we have two kinds of failure.</p>
<p>If <i>make</i> is Sun's <i>make</i>, we get an error about a badly formed macro
assignment in the <i>Makefile</i>.  That happens when <i>./Configure</i> tries to
make depends.  <i>Configure</i> then exits 0, but further <i>make</i>-ing fails.</p>
<p>If <i>make</i> is <i>gmake</i>, <i>Configure</i> completes, then we get errors related
to <i>/usr/include/stdbool.h</i></p>
</li>
<li>
<p>On Win32, a number of tests hang unless STDERR is redirected.  The cause of
this is still under investigation.</p>
</li>
<li>
<p>When building as root with a umask that prevents files from being
other-readable, <i>t/op/filetest.t</i> will fail.  This is a test bug, not a
bug in perl's behavior.</p>
</li>
<li>
<p>Configuring with a recent gcc and link-time-optimization, such as
<code class="inline"><span class="w">Configure</span> -<span class="w">Doptimize</span>=<span class="q">&#39;-O2 -flto&#39;</span></code>
 fails
because the optimizer optimizes away some of Configure's tests.  A
workaround is to omit the <code class="inline">-<span class="w">flto</span></code>
 flag when running Configure, but add
it back in while actually building, something like</p>
<pre class="verbatim"><ol><li>    <span class="w">sh</span> <span class="w">Configure</span> -<span class="w">Doptimize</span>=-<span class="w">O2</span>                                             </li><li>    <span class="w">make</span> <span class="w">OPTIMIZE</span>=<span class="q">&#39;-O2 -flto&#39;</span></li></ol></pre></li>
<li>
<p>The following CPAN modules have test failures with perl 5.16.  Patches have
been submitted for all of these, so hopefully there will be new releases
soon:</p>
<ul>
<li>
<p><a href="http://search.cpan.org/perldoc/Date::Pcalc">Date::Pcalc</a> version 6.1</p>
</li>
<li>
<p><a href="http://search.cpan.org/perldoc/Module::CPANTS::Analyse">Module::CPANTS::Analyse</a> version 0.85</p>
<p>This fails due to problems in <a href="http://search.cpan.org/perldoc/Module::Find">Module::Find</a> 0.10 and <a href="http://search.cpan.org/perldoc/File::MMagic">File::MMagic</a>
1.27.</p>
</li>
<li>
<p><a href="http://search.cpan.org/perldoc/PerlIO::Util">PerlIO::Util</a> version 0.72</p>
</li>
</ul>
</li>
</ul>
<a name="Acknowledgements"></a><h1>Acknowledgements</h1>
<p>Perl 5.16.0 represents approximately 12 months of development since Perl
5.14.0 and contains approximately 590,000 lines of changes across 2,500
files from 139 authors.</p>
<p>Perl continues to flourish into its third decade thanks to a vibrant
community of users and developers.  The following people are known to
have contributed the improvements that became Perl 5.16.0:</p>
<p>Aaron Crane, Abhijit Menon-Sen, Abigail, Alan Haggai Alavi, Alberto
Sim&#xf5;es, Alexandr Ciornii, Andreas K&#xf6;nig, Andy Dougherty, Aristotle
Pagaltzis, Bo Johansson, Bo Lindbergh, Breno G. de Oliveira, brian d
foy, Brian Fraser, Brian Greenfield, Carl Hayter, Chas. Owens,
Chia-liang Kao, Chip Salzenberg, Chris 'BinGOs' Williams, Christian
Hansen, Christopher J. Madsen, chromatic, Claes Jacobsson, Claudio
Ramirez, Craig A. Berry, Damian Conway, Daniel Kahn Gillmor, Darin
McBride, Dave Rolsky, David Cantrell, David Golden, David Leadbeater,
David Mitchell, Dee Newcum, Dennis Kaarsemaker, Dominic Hargreaves,
Douglas Christopher Wilson, Eric Brine, Father Chrysostomos, Florian
Ragwitz, Frederic Briere, George Greer, Gerard Goossen, Gisle Aas,
H.Merijn Brand, Hojung Youn, Ian Goodacre, James E Keenan, Jan Dubois,
Jerry D. Hedden, Jesse Luehrs, Jesse Vincent, Jilles Tjoelker, Jim
Cromie, Jim Meyering, Joel Berger, Johan Vromans, Johannes Plunien, John
Hawkinson, John P. Linderman, John Peacock, Joshua ben Jore, Juerd
Waalboer, Karl Williamson, Karthik Rajagopalan, Keith Thompson, Kevin J.
Woolley, Kevin Ryde, Laurent Dami, Leo Lapworth, Leon Brocard, Leon
Timmermans, Louis Strous, Lukas Mai, Marc Green, Marcel Gr&#xfc;nauer, Mark
A.  Stratman, Mark Dootson, Mark Jason Dominus, Martin Hasch, Matthew
Horsfall, Max Maischein, Michael G Schwern, Michael Witten, Mike
Sheldrake, Moritz Lenz, Nicholas Clark, Niko Tyni, Nuno Carvalho, Pau
Amma, Paul Evans, Paul Green, Paul Johnson, Perlover, Peter John Acklam,
Peter Martini, Peter Scott, Phil Monsen, Pino Toscano, Rafael
Garcia-Suarez, Rainer Tammer, Reini Urban, Ricardo Signes, Robin Barker,
Rodolfo Carvalho, Salvador Fandi&#xf1;o, Sam Kimbrel, Samuel Thibault, Shawn
M Moore, Shigeya Suzuki, Shirakata Kentaro, Shlomi Fish, Sisyphus,
Slaven Rezic, Spiros Denaxas, Steffen M&#xfc;ller, Steffen Schwigon, Stephen
Bennett, Stephen Oberholtzer, Stevan Little, Steve Hay, Steve Peters,
Thomas Sibley, Thorsten Glaser, Timothe Litt, Todd Rinaldo, Tom
Christiansen, Tom Hukins, Tony Cook, Vadim Konovalov, Vincent Pit,
Vladimir Timofeev, Walt Mankowski, Yves Orton, Zefram, Zsb&#xe1;n Ambrus,
&#xc6;var Arnfj&#xf6;r&#xf0; Bjarmason.</p>
<p>The list above is almost certainly incomplete as it is automatically
generated from version control history.  In particular, it does not
include the names of the (very much appreciated) contributors who
reported issues to the Perl bug tracker.</p>
<p>Many of the changes included in this version originated in the CPAN
modules included in Perl's core.  We're grateful to the entire CPAN
community for helping Perl to flourish.</p>
<p>For a more complete list of all of Perl's historical contributors,
please see the <i>AUTHORS</i> file in the Perl source distribution.</p>
<a name="Reporting-Bugs"></a><h1>Reporting Bugs</h1>
<p>If you find what you think is a bug, you might check the articles
recently posted to the comp.lang.perl.misc newsgroup and the perl
bug database at <a href="http://rt.perl.org/perlbug/">http://rt.perl.org/perlbug/</a>.  There may also be
information at <a href="http://www.perl.org/">http://www.perl.org/</a>, the Perl Home Page.</p>
<p>If you believe you have an unreported bug, please run the <a href="perlbug.html">perlbug</a>
program included with your release.  Be sure to trim your bug down
to a tiny but sufficient test case.  Your bug report, along with the
output of <code class="inline"><span class="w">perl</span> -<span class="w">V</span></code>
, will be sent off to perlbug@perl.org to be
analysed by the Perl porting team.</p>
<p>If the bug you are reporting has security implications, which make it
inappropriate to send to a publicly archived mailing list, then please
send it to perl5-security-report@perl.org.  This points to a closed
subscription unarchived mailing list, which includes all core
committers, who will be able to help assess the impact of issues, figure
out a resolution, and help co-ordinate the release of patches to
mitigate or fix the problem across all platforms on which Perl is
supported.  Please use this address only for security issues in the Perl
core, not for modules independently distributed on CPAN.</p>
<a name="SEE-ALSO"></a><h1>SEE ALSO</h1>
<p>The <i>Changes</i> file for an explanation of how to view exhaustive details
on what changed.</p>
<p>The <i>INSTALL</i> file for how to build Perl.</p>
<p>The <i>README</i> file for general stuff.</p>
<p>The <i>Artistic</i> and <i>Copying</i> files for copyright information.</p>




  <div id="page_index" class="hud_container">
    <div id="page_index_header" class="hud_header">
      <div id="page_index_close" class="hud_close"><a href="#" onClick="pageIndex.hide();return false;"></a></div>
      <div id="page_index_title" class="hud_title"><span class="hud_span_top">Page index</span></div>
      <div id="page_index_topright" class="hud_topright"></div>
    </div>
    <div id="page_index_content" class="hud_content">
      <ul><li><a href="#NAME">NAME</a><li><a href="#DESCRIPTION">DESCRIPTION</a><li><a href="#Notice">Notice</a><li><a href="#Core-Enhancements">Core Enhancements</a><ul><li><a href="#use-_VERSION_">use _VERSION_</a><li><a href="#__SUB__">__SUB__</a><li><a href="#New-and-Improved-Built-ins">New and Improved Built-ins</a><li><a href="#Unicode-Support">Unicode Support</a><li><a href="#XS-Changes">XS Changes</a><li><a href="#Changes-to-Special-Variables">Changes to Special Variables</a><li><a href="#Debugger-Changes">Debugger Changes</a><li><a href="#The-CORE-Namespace">The CORE Namespace</a><li><a href="#Other-Changes">Other Changes</a></ul><li><a href="#Security">Security</a><ul><li><a href="#Use-is_utf8_char_buf()-and-not-is_utf8_char()">Use is_utf8_char_buf() and not is_utf8_char()</a><li><a href="#Malformed-UTF-8-input-could-cause-attempts-to-read-beyond-the-end-of-the-buffer">Malformed UTF-8 input could cause attempts to read beyond the end of the buffer</a><li><a href="#File%3a%3aGlob%3a%3absd_glob()-memory-error-with-GLOB_ALTDIRFUNC-(CVE-2011-2728).">File::Glob::bsd_glob() memory error with GLOB_ALTDIRFUNC (CVE-2011-2728).</a><li><a href="#Privileges-are-now-set-correctly-when-assigning-to-%24(">Privileges are now set correctly when assigning to $(</a></ul><li><a href="#Deprecations">Deprecations</a><ul><li><a href="#Don't-read-the-Unicode-data-base-files-in-_lib%2funicore_">Don't read the Unicode data base files in _lib/unicore_</a><li><a href="#XS-functions-is_utf8_char()%2c-utf8_to_uvchr()-and-utf8_to_uvuni()">XS functions is_utf8_char(), utf8_to_uvchr() and
utf8_to_uvuni()</a></ul><li><a href="#Future-Deprecations">Future Deprecations</a><ul><li><a href="#Core-Modules">Core Modules</a><li><a href="#Platforms-with-no-supporting-programmers">Platforms with no supporting programmers</a><li><a href="#Other-Future-Deprecations">Other Future Deprecations</a></ul><li><a href="#Incompatible-Changes">Incompatible Changes</a><ul><li><a href="#Special-blocks-called-in-void-context">Special blocks called in void context</a><li><a href="#The-overloading-pragma-and-regexp-objects">The overloading pragma and regexp objects</a><li><a href="#Two-XS-typemap-Entries-removed">Two XS typemap Entries removed</a><li><a href="#Unicode-6.1-has-incompatibilities-with-Unicode-6.0">Unicode 6.1 has incompatibilities with Unicode 6.0</a><li><a href="#Borland-compiler">Borland compiler</a><li><a href="#Certain-deprecated-Unicode-properties-are-no-longer-supported-by-default">Certain deprecated Unicode properties are no longer supported by default</a><li><a href="#Dereferencing-IO-thingies-as-typeglobs">Dereferencing IO thingies as typeglobs</a><li><a href="#User-defined-case-changing-operations">User-defined case-changing operations</a><li><a href="#XSUBs-are-now-'static'">XSUBs are now 'static'</a><li><a href="#Weakening-read-only-references">Weakening read-only references</a><li><a href="#Tying-scalars-that-hold-typeglobs">Tying scalars that hold typeglobs</a><li><a href="#IPC%3a%3aOpen3-no-longer-provides-xfork()%2c-xclose_on_exec()-and-xpipe_anon()">IPC::Open3 no longer provides xfork(), xclose_on_exec()
and xpipe_anon()</a><li><a href="#%24%24-no-longer-caches-PID">$$ no longer caches PID</a><li><a href="#%24%24-and-getppid()-no-longer-emulate-POSIX-semantics-under-LinuxThreads">$$ and getppid() no longer emulate POSIX semantics under LinuxThreads</a><li><a href="#%24%3c%2c-%24%3e%2c-%24(-and-%24)-are-no-longer-cached">$<, $>, $( and $) are no longer cached</a><li><a href="#Which-Non-ASCII-characters-get-quoted-by-quotemeta-and-%5cQ-has-changed">Which Non-ASCII characters get quoted by quotemeta and \Q has changed</a></ul><li><a href="#Performance-Enhancements">Performance Enhancements</a><li><a href="#Modules-and-Pragmata">Modules and Pragmata</a><ul><li><a href="#Deprecated-Modules">Deprecated Modules</a><li><a href="#New-Modules-and-Pragmata">New Modules and Pragmata</a><li><a href="#Updated-Modules-and-Pragmata">Updated Modules and Pragmata</a><li><a href="#Removed-Modules-and-Pragmata">Removed Modules and Pragmata</a></ul><li><a href="#Documentation">Documentation</a><ul><li><a href="#New-Documentation">New Documentation</a><li><a href="#Changes-to-Existing-Documentation">Changes to Existing Documentation</a><li><a href="#Removed-Documentation">Removed Documentation</a></ul><li><a href="#Diagnostics">Diagnostics</a><ul><li><a href="#New-Diagnostics">New Diagnostics</a><li><a href="#Removed-Errors">Removed Errors</a><li><a href="#Changes-to-Existing-Diagnostics">Changes to Existing Diagnostics</a></ul><li><a href="#Utility-Changes">Utility Changes</a><li><a href="#Configuration-and-Compilation">Configuration and Compilation</a><li><a href="#Platform-Support">Platform Support</a><ul><li><a href="#Platform-Specific-Notes">Platform-Specific Notes</a></ul><li><a href="#Internal-Changes">Internal Changes</a><li><a href="#Selected-Bug-Fixes">Selected Bug Fixes</a><ul><li><a href="#Array-and-hash">Array and hash</a><li><a href="#C-API-fixes">C API fixes</a><li><a href="#Compile-time-hints">Compile-time hints</a><li><a href="#Copy-on-write-scalars">Copy-on-write scalars</a><li><a href="#The-debugger">The debugger</a><li><a href="#Dereferencing-operators">Dereferencing operators</a><li><a href="#Filehandle%2c-last-accessed">Filehandle, last-accessed</a><li><a href="#Filetests-and-stat">Filetests and stat</a><li><a href="#Formats">Formats</a><li><a href="#given-and-when">given and when</a><li><a href="#The-glob-operator">The glob operator</a><li><a href="#Lvalue-subroutines">Lvalue subroutines</a><li><a href="#Overloading">Overloading</a><li><a href="#Prototypes-of-built-in-keywords">Prototypes of built-in keywords</a><li><a href="#Regular-expressions">Regular expressions</a><li><a href="#Smartmatching">Smartmatching</a><li><a href="#The-sort-operator">The sort operator</a><li><a href="#The-substr-operator">The substr operator</a><li><a href="#Support-for-embedded-nulls">Support for embedded nulls</a><li><a href="#Threading-bugs">Threading bugs</a><li><a href="#Tied-variables">Tied variables</a><li><a href="#Version-objects-and-vstrings">Version objects and vstrings</a><li><a href="#Warnings%2c-redefinition">Warnings, redefinition</a><li><a href="#Warnings%2c-%22Uninitialized%22">Warnings, "Uninitialized"</a><li><a href="#Weak-references">Weak references</a><li><a href="#Other-notable-fixes">Other notable fixes</a></ul><li><a href="#Known-Problems">Known Problems</a><li><a href="#Acknowledgements">Acknowledgements</a><li><a href="#Reporting-Bugs">Reporting Bugs</a><li><a href="#SEE-ALSO">SEE ALSO</a></ul>
    </div>
    <div id="page_index_footer" class="hud_footer">
      <div id="page_index_bottomleft" class="hud_bottomleft"></div>
      <div id="page_index_bottom" class="hud_bottom"><span class="hud_span_bottom"></span></div>
      <div id="page_index_resize" class="hud_resize"></div>
    </div>
  </div>


	    &nbsp;
          </div>
          <div id="content_footer">
          </div>
        </div>
        <div class="clear"></div>
      </div>
      
    <div id="footer">
      <div id="footer_content">
        <div id="footer_strapline">
          perldoc.perl.org - Official documentation for the Perl programming language
        </div>
        <div id="footer_links">
          <div id="address">
            <p class="name">Contact details</p>
            <p class="address">
	      Site maintained by <a href="mailto:jj@jonallen.info">Jon Allen (JJ)</a><br>
	    </p>
            <p class="contact">
              Documentation maintained by the <a href="http://lists.cpan.org/showlist.cgi?name=perl5-porters">Perl 5 Porters</a>
            </p>
          </div>
          <ul class="f1">
            <li>Manual
              <ul class="f2">
                <li><a href="index-overview.html">Overview</a>
                <li><a href="index-tutorials.html">Tutorials</a>
                <li><a href="index-faq.html">FAQs</a>
                <li><a href="index-history.html">Changes</a>
              </ul>
            <li>Reference
              <ul class="f2">
                <li><a href="index-language.html">Language</a>
                <li><a href="index-functions.html">Functions</a>
                <li><a href="perlop.html">Operators</a>
                <li><a href="perlvar.html">Variables</a>
              </ul>
            <li>Modules
              <ul class="f2">
                <li><a href="index-modules-A.html">Modules</a>
                <li><a href="index-pragmas.html">Pragmas</a>
                <li><a href="index-utilities.html">Utilities</a>
              </ul>
            <li>Misc
              <ul class="f2">
                <li><a href="index-licence.html">License</a>
                <li><a href="index-internals.html">Internals</a>
                <li><a href="index-platforms.html">Platforms</a>
              </ul>          </ul>
          <div class="clear"></div>
        </div>
      </div>
      <div id="footer_end">
      </div>
    </div>
      
    </div>
      <script language="JavaScript" type="text/javascript" src="static/exploreperl.js"></script>
      <script language="JavaScript" src="static/combined-20100403.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
  perldoc.setPath(0);
  perldoc.pageName    = 'perl5160delta';
  perldoc.pageAddress = 'perl5160delta.html';
  perldoc.contentPage = 1;
  explorePerl.render();
  explorePerl.addEvents('explore_anchor');
</script>
    
  </body>
</html>
