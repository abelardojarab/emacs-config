<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
  <title>perl5200delta</title>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta http-equiv="Content-Language" content="en-gb">
  <link rel="search" type="application/opensearchdescription+xml" title="Search perldoc.perl.org" href="/static/search.xml"/>
  <link href="static/css-20100830.css" rel="stylesheet" rev="stylesheet" type="text/css" media="screen">
  <link href="static/exploreperl.css" rel="stylesheet" rev="stylesheet" type="text/css">
</head>

<body onLoad="perldoc.startup();" onPageShow="if (event.persisted) perldoc.startup();">
    <div id="page">
      
      <div id="header">
	<div id="homepage_link">
	  <a href="index.html"></a>
	</div>
	<div id="strapline">
	  Perl Programming Documentation
	</div>
	<div id="download_link" class="download">
	  <a href="http://www.perl.org/get.html">Download Perl</a>
	</div>
	<div id="explore_link" class="download">
	  <a id="explore_anchor" href="#">Explore</a>
	</div>
      </div>
      
      <div id="body">
        <div id="left_column">
          <div class="side_group">
            
	    <div class="side_panel doc_panel">
              <p>Manual</p>
              <ul>
                <li><a href="index-overview.html">Overview</a>
                <li><a href="index-tutorials.html">Tutorials</a>
                <li><a href="index-faq.html">FAQs</a>
                <li><a href="index-history.html">History / Changes</a>
                <li><a href="index-licence.html">License</a>
              </ul>
            </div>
            <div class="side_panel doc_panel">
              <p>Reference</p>
              <ul>
                <li><a href="index-language.html">Language</a>
                <li><a href="index-functions.html">Functions</a>
                <li><a href="perlop.html">Operators</a>
                <li><a href="perlvar.html">Special Variables</a>
                <li><a href="index-pragmas.html">Pragmas</a>
                <li><a href="index-utilities.html">Utilities</a>
                <li><a href="index-internals.html">Internals</a>
                <li><a href="index-platforms.html">Platform Specific</a>
              </ul>
            </div>
            <div class="side_panel doc_panel">
              <p>Modules</p>
              <ul>
		<li>
		
                
                  
		    
		  
		
                  
		    
		  
		
                  
		    
		  
		
                  
		    
		  
		
                  
		    
		  
		
                  
		    
		  
		
                  
		    
		  
		
                  
		    
		  
		
                  
		    
		  
		
                  
		
                  
		
                  
		    
		  
		
                  
		    
		  
		
                  
		    
		  
		
                  
		    
		  
		
                  
		    
		  
		
                  
		
                  
		
                  
		    
		  
		
                  
		    
		  
		
                  
		    
		  
		
                  
		
                  
		
                  
		    
		  
		
                  
		
                  
		
		
                    <a href="index-modules-A.html">A</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="index-modules-B.html">B</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="index-modules-C.html">C</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="index-modules-D.html">D</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="index-modules-E.html">E</a>
                    
                      
                        <li>
                      
                    
                
                    <a href="index-modules-F.html">F</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="index-modules-G.html">G</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="index-modules-H.html">H</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="index-modules-I.html">I</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="index-modules-L.html">L</a>
                    
                      
                        <li>
                      
                    
                
                    <a href="index-modules-M.html">M</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="index-modules-N.html">N</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="index-modules-O.html">O</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="index-modules-P.html">P</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="index-modules-S.html">S</a>
                    
                      
                        <li>
                      
                    
                
                    <a href="index-modules-T.html">T</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="index-modules-U.html">U</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="index-modules-X.html">X</a>
                    
                
              </ul>
            </div>
            
	      <div class="side_panel doc_panel">
		<p>Tools</p>
		<ul>
		  <li><a href="preferences.html">Preferences</a>
		</ul>
	      </div>
            
          </div>
        </div>
        <div id="centre_column">
          <div id="content_header">
            <div id="title_bar">
              <div id="page_name">
                <h1>perl5200delta</h1>
              </div>
              <div id="perl_version">
                Perl 5 version 22.0 documentation
              </div>
              <div class="page_links" id="page_links_top">
                <a href="#" onClick="toolbar.goToTop();return false;">Go to top</a>
		
              </div>
	      <div class="page_links" id="page_links_bottom">
		
                  <a href="#" id="page_index_toggle">Show page index</a> &bull;
		
                <a href="#" id="recent_pages_toggle">Show recent pages</a>		
	      </div>
	      <div id="search_form">
		<form action="search.html" method="GET" id="search">
		  <input type="text" name="q" id="search_box" alt="Search">
		</form>
	      </div>
            </div>
            <div id="breadcrumbs">
                
    <a href="index.html">Home</a> &gt;
    
      
        <a href="index-history.html">History / Changes</a> &gt;
      
    
    perl5200delta
  

            </div>
          </div>
          <div id="content_body">
	    <!--[if lt IE 7]>
 <div class="noscript">
   <p>
     <strong>It looks like you're using Internet Explorer 6. This is a very old
     browser which does not offer full support for modern websites.</strong>
   </p>
   <p>
     Unfortunately this means that this website will not work on
     your computer.
   </p>
   <p>
     Don't miss out though! To view the site (and get a better experience from
     many other websites), simply upgrade to
     <a href="http://www.microsoft.com/windows/Internet-explorer/default.aspx">Internet
Explorer 8</a>
     or download an alternative browser such as
     <a href="http://www.mozilla.com/en-US/firefox/firefox.html">Firefox</a>,
     <a href="http://www.apple.com/safari/download/">Safari</a>, or
     <a href="http://www.google.co.uk/chrome">Google Chrome</a>.
   </p>
   <p>
     All of these browsers are free. If you're using a PC at work, you may
     need to contact your IT administrator.
   </p>
 </div>
<![endif]-->
	    <noscript>
	      <div class="noscript">
	      <p>
                <strong>Please note: Many features of this site require JavaScript. You appear to have JavaScript disabled,
	        or are running a non-JavaScript capable web browser.</strong>
	      </p>
	      <p>
		To get the best experience, please enable JavaScript or download a modern web browser such as <a href="http://www.microsoft.com/windows/Internet-explorer/default.aspx">Internet Explorer 8</a>, <a href="http://www.mozilla.com/en-US/firefox/firefox.html">Firefox</a>, <a href="http://www.apple.com/safari/download/">Safari</a>, or <a href="http://www.google.co.uk/chrome">Google Chrome</a>.
              </p>
	      </div>
	    </noscript>

	    <div id="recent_pages" class="hud_container">
	      <div id="recent_pages_header" class="hud_header">
		<div id="recent_pages_close" class="hud_close"><a href="#" onClick="recentPages.hide();return false;"></a></div>
		<div id="recent_pages_title" class="hud_title"><span class="hud_span_top">Recently read</span></div>
		<div id="recent_pages_topright" class="hud_topright"></div>
	      </div>
	      <div id="recent_pages_content" class="hud_content">
	      </div>
	      <div id="recent_pages_footer" class="hud_footer">
		<div id="recent_pages_bottomleft" class="hud_bottomleft"></div>
		<div id="recent_pages_bottom" class="hud_bottom"><span class="hud_span_bottom"></span></div>
		<div id="recent_pages_resize" class="hud_resize"></div>
	      </div>
	    </div>
  
	    <div id="from_search"></div>
            <h1>perl5200delta</h1>


  <!--    -->
<ul><li><a href="#NAME">NAME</a><li><a href="#DESCRIPTION">DESCRIPTION</a><li><a href="#Core-Enhancements">Core Enhancements</a><ul><li><a href="#Experimental-Subroutine-signatures">Experimental Subroutine signatures</a><li><a href="#subs-now-take-a-prototype-attribute">subs now take a prototype attribute</a><li><a href="#More-consistent-prototype-parsing">More consistent prototype parsing</a><li><a href="#rand-now-uses-a-consistent-random-number-generator">rand now uses a consistent random number generator</a><li><a href="#New-slice-syntax">New slice syntax</a><li><a href="#Experimental-Postfix-Dereferencing">Experimental Postfix Dereferencing</a><li><a href="#Unicode-6.3-now-supported">Unicode 6.3 now supported</a><li><a href="#New-%5cp%7bUnicode%7d-regular-expression-pattern-property">New \p{Unicode} regular expression pattern property</a><li><a href="#Better-64-bit-support">Better 64-bit support</a><li><a href="#use-locale-now-works-on-UTF-8-locales">use locale now works on UTF-8 locales</a><li><a href="#use-locale-now-compiles-on-systems-without-locale-ability">use locale now compiles on systems without locale ability</a><li><a href="#More-locale-initialization-fallback-options">More locale initialization fallback options</a><li><a href="#-DL-runtime-option-now-added-for-tracing-locale-setting">-DL runtime option now added for tracing locale setting</a><li><a href="#*-F*-now-implies-*-a*-and-*-a*-implies-*-n*">*-F* now implies *-a* and *-a* implies *-n*</a><li><a href="#%24a-and-%24b-warnings-exemption">$a and $b warnings exemption</a></ul><li><a href="#Security">Security</a><ul><li><a href="#Avoid-possible-read-of-free()d-memory-during-parsing">Avoid possible read of free()d memory during parsing</a></ul><li><a href="#Incompatible-Changes">Incompatible Changes</a><ul><li><a href="#do-can-no-longer-be-used-to-call-subroutines">do can no longer be used to call subroutines</a><li><a href="#Quote-like-escape-changes">Quote-like escape changes</a><li><a href="#Tainting-happens-under-more-circumstances%3b-now-conforms-to-documentation">Tainting happens under more circumstances; now conforms to documentation</a><li><a href="#%5cp%7b%7d%2c-%5cP%7b%7d-matching-has-changed-for-non-Unicode-code-points.">\p{}, \P{} matching has changed for non-Unicode code
points.</a><li><a href="#%5cp%7bAll%7d-has-been-expanded-to-match-all-possible-code-points">\p{All} has been expanded to match all possible code points</a><li><a href="#Data%3a%3aDumper's-output-may-change">Data::Dumper's output may change</a><li><a href="#Locale-decimal-point-character-no-longer-leaks-outside-of-use-locale-scope">Locale decimal point character no longer leaks outside of use locale scope</a><li><a href="#Assignments-of-Windows-sockets-error-codes-to-%24!-now-prefer-_errno.h_-values-over-WSAGetLastError()-values">Assignments of Windows sockets error codes to $! now prefer _errno.h_ values over WSAGetLastError() values</a><li><a href="#Functions-PerlIO_vsprintf-and-PerlIO_sprintf-have-been-removed">Functions PerlIO_vsprintf and PerlIO_sprintf have been removed</a></ul><li><a href="#Deprecations">Deprecations</a><ul><li><a href="#The-%2f%5cC%2f-character-class">The /\C/ character class</a><li><a href="#Literal-control-characters-in-variable-names">Literal control characters in variable names</a><li><a href="#References-to-non-integers-and-non-positive-integers-in-%24%2f">References to non-integers and non-positive integers in $/</a><li><a href="#Character-matching-routines-in-POSIX">Character matching routines in POSIX</a><li><a href="#Interpreter-based-threads-are-now-_discouraged_">Interpreter-based threads are now _discouraged_</a><li><a href="#Module-removals">Module removals</a><li><a href="#Utility-removals">Utility removals</a></ul><li><a href="#Performance-Enhancements">Performance Enhancements</a><li><a href="#Modules-and-Pragmata">Modules and Pragmata</a><ul><li><a href="#New-Modules-and-Pragmata">New Modules and Pragmata</a><li><a href="#Updated-Modules-and-Pragmata">Updated Modules and Pragmata</a></ul><li><a href="#Documentation">Documentation</a><ul><li><a href="#New-Documentation">New Documentation</a><li><a href="#Changes-to-Existing-Documentation">Changes to Existing Documentation</a></ul><li><a href="#Diagnostics">Diagnostics</a><ul><li><a href="#New-Diagnostics">New Diagnostics</a><li><a href="#Changes-to-Existing-Diagnostics">Changes to Existing Diagnostics</a></ul><li><a href="#Utility-Changes">Utility Changes</a><li><a href="#Configuration-and-Compilation">Configuration and Compilation</a><li><a href="#Testing">Testing</a><li><a href="#Platform-Support">Platform Support</a><ul><li><a href="#New-Platforms">New Platforms</a><li><a href="#Discontinued-Platforms">Discontinued Platforms</a><li><a href="#Platform-Specific-Notes">Platform-Specific Notes</a></ul><li><a href="#Internal-Changes">Internal Changes</a><li><a href="#Selected-Bug-Fixes">Selected Bug Fixes</a><ul><li><a href="#Regular-Expressions">Regular Expressions</a><li><a href="#Perl-5-Debugger-and--d">Perl 5 Debugger and -d</a><li><a href="#Lexical-Subroutines">Lexical Subroutines</a><li><a href="#Everything-Else">Everything Else</a></ul><li><a href="#Known-Problems">Known Problems</a><li><a href="#Obituary">Obituary</a><li><a href="#Acknowledgements">Acknowledgements</a><li><a href="#Reporting-Bugs">Reporting Bugs</a><li><a href="#SEE-ALSO">SEE ALSO</a></ul><a name="NAME"></a><h1>NAME</h1>
<p>perl5200delta - what is new for perl v5.20.0</p>
<a name="DESCRIPTION"></a><h1>DESCRIPTION</h1>
<p>This document describes differences between the 5.18.0 release and the
5.20.0 release.</p>
<p>If you are upgrading from an earlier release such as 5.16.0, first read
<a href="perl5180delta.html">perl5180delta</a>, which describes differences between 5.16.0 and 5.18.0.</p>
<a name="Core-Enhancements"></a><h1>Core Enhancements</h1>
<a name="Experimental-Subroutine-signatures"></a><h2>Experimental Subroutine signatures</h2>
<p>Declarative syntax to unwrap argument list into lexical variables.
<code class="inline"><a name="foo"></a>sub <span class="m">foo ($a,$b)</span> <span class="s">{</span>...<span class="s">}</span></code>
 checks the number of arguments and puts the
arguments into lexical variables.  Signatures are not equivalent to
the existing idiom of <code class="inline"><a name="foo"></a>sub <span class="m">foo</span> <span class="s">{</span> <a class="l_k" href="functions/my.html">my</a><span class="s">(</span><span class="i">$a</span><span class="cm">,</span><span class="i">$b</span><span class="s">)</span> = <span class="i">@_</span><span class="sc">;</span> ... <span class="s">}</span></code>
.  Signatures
are only available by enabling a non-default feature, and generate
warnings about being experimental.  The syntactic clash with
prototypes is managed by disabling the short prototype syntax when
signatures are enabled.</p>
<p>See <a href="perlsub.html#Signatures">Signatures in perlsub</a> for details.</p>
<a name="subs-now-take-a-prototype-attribute"></a><h2><code class="inline"><a class="l_k" href="functions/sub.html">sub</a></code>s now take a <code class="inline"><a class="l_k" href="functions/prototype.html">prototype</a></code> attribute</h2>
<p>When declaring or defining a <code class="inline"><a class="l_k" href="functions/sub.html">sub</a></code>, the prototype can now be specified inside
of a <code class="inline"><a class="l_k" href="functions/prototype.html">prototype</a></code> attribute instead of in parens following the name.</p>
<p>For example, <code class="inline"><a name="foo"></a>sub <span class="m">foo($$)</span><span class="s">{</span><span class="s">}</span></code>
 could be rewritten as
<code class="inline"><a name="foo"></a>sub <span class="m">foo</span> <span class="co">:</span> <span class="q">prototype($$)</span><span class="s">{</span><span class="s">}</span></code>
.</p>
<a name="More-consistent-prototype-parsing"></a><h2>More consistent prototype parsing</h2>
<p>Multiple semicolons in subroutine prototypes have long been tolerated and
treated as a single semicolon.  There was one case where this did not
happen.  A subroutine whose prototype begins with "*" or ";*" can affect
whether a bareword is considered a method name or sub call.  This now
applies also to ";;;*".</p>
<p>Whitespace has long been allowed inside subroutine prototypes, so
<code class="inline"><span class="i">sub( $ $ )</span></code>
 is equivalent to <code class="inline"><a class="l_k" href="functions/sub.html">sub($$)</a></code>, but until now it was stripped
when the subroutine was parsed.  Hence, whitespace was <i>not</i> allowed in
prototypes set by <code class="inline"><span class="w">Scalar::Util::set_prototype</span></code>
.  Now it is permitted,
and the parser no longer strips whitespace.  This means
<code class="inline"><a class="l_k" href="functions/prototype.html">prototype</a> <span class="i">&amp;mysub</span></code>
 returns the original prototype, whitespace and all.</p>
<a name="rand-now-uses-a-consistent-random-number-generator"></a><h2><code class="inline"><a class="l_k" href="functions/rand.html">rand</a></code> now uses a consistent random number generator</h2>
<p>Previously perl would use a platform specific random number generator, varying
between the libc rand(), random() or drand48().</p>
<p>This meant that the quality of perl's random numbers would vary from platform
to platform, from the 15 bits of rand() on Windows to 48-bits on POSIX
platforms such as Linux with drand48().</p>
<p>Perl now uses its own internal drand48() implementation on all platforms.  This
does not make perl's <code class="inline"><a class="l_k" href="functions/rand.html">rand</a></code> cryptographically secure.  [perl #115928]</p>
<a name="New-slice-syntax"></a><h2>New slice syntax</h2>
<p>The new <code class="inline"><span class="i">%hash</span>{...}</code>
 and <code class="inline"><span class="i">%array</span>[...]</code>
 syntax returns a list of key/value (or
index/value) pairs.  See <a href="perldata.html#Key%2fValue-Hash-Slices">Key/Value Hash Slices in perldata</a>.</p>
<a name="Experimental-Postfix-Dereferencing"></a><h2>Experimental Postfix Dereferencing</h2>
<p>When the <code class="inline"><span class="w">postderef</span></code>
 feature is in effect, the following syntactical
equivalencies are set up:</p>
<pre class="verbatim"><ol><li>  <span class="i">$sref</span><span class="i">-&gt;$</span>*<span class="sc">;</span>  <span class="c"># same as ${ $sref }  # interpolates</span></li><li>  <span class="i">$aref</span>-&gt;<span class="i">@*</span><span class="sc">;</span>  <span class="c"># same as @{ $aref }  # interpolates</span></li><li>  <span class="i">$href</span>-&gt;%<span class="i">*;</span>  <span class="c"># same as %{ $href }</span></li><li>  <span class="i">$cref</span>-&gt;&amp;<span class="i">*;</span>  <span class="c"># same as &amp;{ $cref }</span></li><li>  <span class="i">$gref</span>-&gt;**<span class="sc">;</span>  <span class="c"># same as *{ $gref }</span></li><li></li><li>  <span class="i">$aref</span><span class="i">-&gt;$</span><span class="c">#*; # same as $#{ $aref }</span></li><li></li><li>  <span class="i">$gref</span>-&gt;*{ <span class="i">$slot</span> }<span class="sc">;</span> <span class="c"># same as *{ $gref }{ $slot }</span></li><li></li><li>  <span class="i">$aref</span>-&gt;<span class="i">@[</span> ... ]<span class="sc">;</span>  <span class="c"># same as @$aref[ ... ]  # interpolates</span></li><li>  <span class="i">$href</span>-&gt;<span class="i">@</span>{ ... }<span class="sc">;</span>  <span class="c"># same as @$href{ ... }  # interpolates</span></li><li>  <span class="i">$aref</span>-&gt;%[ ... ]<span class="sc">;</span>  <span class="c"># same as %$aref[ ... ]</span></li><li>  <span class="i">$href</span>-&gt;%{ ... }<span class="sc">;</span>  <span class="c"># same as %$href{ ... }</span></li></ol></pre><p>Those marked as interpolating only interpolate if the associated
<code class="inline"><span class="w">postderef_qq</span></code>
 feature is also enabled.  This feature is <b>experimental</b> and
will trigger <code class="inline"><span class="w">experimental::postderef</span></code>
-category warnings when used, unless
they are suppressed.</p>
<p>For more information, consult <a href="perlref.html#Postfix-Dereference-Syntax">the Postfix Dereference Syntax section of perlref</a>.</p>
<a name="Unicode-6.3-now-supported"></a><h2>Unicode 6.3 now supported</h2>
<p>Perl now supports and is shipped with Unicode 6.3 (though Perl may be
recompiled with any previous Unicode release as well).  A detailed list of
Unicode 6.3 changes is at <a href="http://www.unicode.org/versions/Unicode6.3.0/">http://www.unicode.org/versions/Unicode6.3.0/</a>.</p>
<a name="New-%5cp%7bUnicode%7d-regular-expression-pattern-property"></a><h2>New <code class="inline">\<span class="i">p</span><span class="s">{</span><span class="w">Unicode</span><span class="s">}</span></code>
 regular expression pattern property</h2>
<p>This is a synonym for <code class="inline">\<span class="i">p</span><span class="s">{</span><span class="w">Any</span><span class="s">}</span></code>
 and matches the set of Unicode-defined
code points 0 - 0x10FFFF.</p>
<a name="Better-64-bit-support"></a><h2>Better 64-bit support</h2>
<p>On 64-bit platforms, the internal array functions now use 64-bit offsets,
allowing Perl arrays to hold more than 2**31 elements, if you have the memory
available.</p>
<p>The regular expression engine now supports strings longer than 2**31
characters.  [perl #112790, #116907]</p>
<p>The functions PerlIO_get_bufsiz, PerlIO_get_cnt, PerlIO_set_cnt and
PerlIO_set_ptrcnt now have SSize_t, rather than int, return values and
parameters.</p>
<a name="use-locale-now-works-on-UTF-8-locales"></a><h2><code class="inline"><a class="l_k" href="functions/use.html">use</a> <span class="w">locale</span></code>
 now works on UTF-8 locales</h2>
<p>Until this release, only single-byte locales, such as the ISO 8859
series were supported.  Now, the increasingly common multi-byte UTF-8
locales are also supported.  A UTF-8 locale is one in which the
character set is Unicode and the encoding is UTF-8.  The POSIX
<code class="inline"><span class="w">LC_CTYPE</span></code>
 category operations (case changing (like <code class="inline"><a class="l_k" href="functions/lc.html">lc()</a></code>, <code class="inline"><span class="q">&quot;\U&quot;</span></code>
),
and character classification (<code class="inline">\<span class="w">w</span></code>
, <code class="inline">\<span class="w">D</span></code>
, <code class="inline"><a class="l_k" href="functions/qr.html">qr/[[:punct:]]/</a></code>)) under
such a locale work just as if not under locale, but instead as if under
<code class="inline"><a class="l_k" href="functions/use.html">use</a> <span class="w">feature</span> <span class="q">&#39;unicode_strings&#39;</span></code>
, except taint rules are followed.
Sorting remains by code point order in this release.  [perl #56820].</p>
<a name="use-locale-now-compiles-on-systems-without-locale-ability"></a><h2><code class="inline"><a class="l_k" href="functions/use.html">use</a> <span class="w">locale</span></code>
 now compiles on systems without locale ability</h2>
<p>Previously doing this caused the program to not compile.  Within its
scope the program behaves as if in the "C" locale.  Thus programs
written for platforms that support locales can run on locale-less
platforms without change.  Attempts to change the locale away from the
"C" locale will, of course, fail.</p>
<a name="More-locale-initialization-fallback-options"></a><h2>More locale initialization fallback options</h2>
<p>If there was an error with locales during Perl start-up, it immediately
gave up and tried to use the <code class="inline"><span class="q">&quot;C&quot;</span></code>
 locale.  Now it first tries using
other locales given by the environment variables, as detailed in
<a href="perllocale.html#ENVIRONMENT">ENVIRONMENT in perllocale</a>.  For example, if <code class="inline"><span class="w">LC_ALL</span></code>
 and <code class="inline"><span class="w">LANG</span></code>
 are
both set, and using the <code class="inline"><span class="w">LC_ALL</span></code>
 locale fails, Perl will now try the
<code class="inline"><span class="w">LANG</span></code>
 locale, and only if that fails, will it fall back to <code class="inline"><span class="q">&quot;C&quot;</span></code>
.  On
Windows machines, Perl will try, ahead of using <code class="inline"><span class="q">&quot;C&quot;</span></code>
, the system
default locale if all the locales given by environment variables fail.</p>
<a name="-DL-runtime-option-now-added-for-tracing-locale-setting"></a><h2><code class="inline">-<span class="w">DL</span></code>
 runtime option now added for tracing locale setting</h2>
<p>This is designed for Perl core developers to aid in field debugging bugs
regarding locales.</p>
<a name="*-F*-now-implies-*-a*-and-*-a*-implies-*-n*"></a><h2><b>-F</b> now implies <b>-a</b> and <b>-a</b> implies <b>-n</b></h2>
<p>Previously <b>-F</b> without <b>-a</b> was a no-op, and <b>-a</b> without <b>-n</b> or <b>-p</b>
was a no-op, with this change, if you supply <b>-F</b> then both <b>-a</b> and <b>-n</b>
are implied and if you supply <b>-a</b> then <b>-n</b> is implied.</p>
<p>You can still use <b>-p</b> for its extra behaviour. [perl #116190]</p>
<a name="%24a-and-%24b-warnings-exemption"></a><h2>$a and $b warnings exemption</h2>
<p>The special variables $a and $b, used in <code class="inline"><a class="l_k" href="functions/sort.html">sort</a></code>, are now exempt from "used
once" warnings, even where <code class="inline"><a class="l_k" href="functions/sort.html">sort</a></code> is not used.  This makes it easier for
CPAN modules to provide functions using $a and $b for similar purposes.
[perl #120462]</p>
<a name="Security"></a><h1>Security</h1>
<a name="Avoid-possible-read-of-free()d-memory-during-parsing"></a><h2>Avoid possible read of free()d memory during parsing</h2>
<p>It was possible that free()d memory could be read during parsing in the unusual
circumstance of the Perl program ending with a heredoc and the last line of the
file on disk having no terminating newline character.  This has now been fixed.</p>
<a name="Incompatible-Changes"></a><h1>Incompatible Changes</h1>
<a name="do-can-no-longer-be-used-to-call-subroutines"></a><h2><code class="inline"><a class="l_k" href="functions/do.html">do</a></code> can no longer be used to call subroutines</h2>
<p>The <code class="inline"><a class="l_k" href="functions/do.html">do</a> <span class="i">SUBROUTINE</span><span class="s">(</span><span class="w">LIST</span><span class="s">)</span></code>
 form has resulted in a deprecation warning
since Perl v5.0.0, and is now a syntax error.</p>
<a name="Quote-like-escape-changes"></a><h2>Quote-like escape changes</h2>
<p>The character after <code class="inline">\<span class="w">c</span></code>
 in a double-quoted string ("..." or qq(...))
or regular expression must now be a printable character and may not be
<code class="inline">{</code>.</p>
<p>A literal <code class="inline">{</code> after <code class="inline">\<span class="w">B</span></code>
 or <code class="inline">\<span class="w">b</span></code>
 is now fatal.</p>
<p>These were deprecated in perl v5.14.0.</p>
<a name="Tainting-happens-under-more-circumstances%3b-now-conforms-to-documentation"></a><h2>Tainting happens under more circumstances; now conforms to documentation</h2>
<p>This affects regular expression matching and changing the case of a
string (<code class="inline"><a class="l_k" href="functions/lc.html">lc</a></code>, <code class="inline"><span class="q">&quot;\U&quot;</span></code>
, <i>etc</i>.) within the scope of <code class="inline"><a class="l_k" href="functions/use.html">use</a> <span class="w">locale</span></code>
.
The result is now tainted based on the operation, no matter what the
contents of the string were, as the documentation (<a href="perlsec.html">perlsec</a>,
<a href="perllocale.html#SECURITY">SECURITY in perllocale</a>) indicates it should.  Previously, for the case
change operation, if the string contained no characters whose case
change could be affected by the locale, the result would not be tainted.
For example, the result of <code class="inline"><a class="l_k" href="functions/uc.html">uc()</a></code> on an empty string or one containing
only above-Latin1 code points is now tainted, and wasn't before.  This
leads to more consistent tainting results.  Regular expression patterns
taint their non-binary results (like <code class="inline"><span class="i">$&amp;</span></code>
, <code class="inline"><span class="i">$2</span></code>
) if and only if the
pattern contains elements whose matching depends on the current
(potentially tainted) locale.  Like the case changing functions, the
actual contents of the string being matched now do not matter, whereas
formerly it did.  For example, if the pattern contains a <code class="inline">\<span class="w">w</span></code>
, the
results will be tainted even if the match did not have to use that
portion of the pattern to succeed or fail, because what a <code class="inline">\<span class="w">w</span></code>
 matches
depends on locale.  However, for example, a <code class="inline">.</code> in a pattern will not
enable tainting, because the dot matches any single character, and what
the current locale is doesn't change in any way what matches and what
doesn't.</p>
<a name="%5cp%7b%7d%2c-%5cP%7b%7d-matching-has-changed-for-non-Unicode-code-points."></a><h2><code class="inline">\<span class="w">p</span><span class="s">{</span><span class="s">}</span></code>
, <code class="inline">\<span class="w">P</span><span class="s">{</span><span class="s">}</span></code>
 matching has changed for non-Unicode code
points.</h2>
<p><code class="inline">\<span class="w">p</span><span class="s">{</span><span class="s">}</span></code>
 and <code class="inline">\<span class="w">P</span><span class="s">{</span><span class="s">}</span></code>
 are defined by Unicode only on Unicode-defined code
points (<code class="inline"><span class="w">U</span>+<span class="n">0000</span></code>
 through <code class="inline"><span class="w">U</span>+<span class="n">10</span><span class="w">FFFF</span></code>
).  Their behavior on matching
these legal Unicode code points is unchanged, but there are changes for
code points <code class="inline"><span class="n">0x110000</span></code>
 and above.  Previously, Perl treated the result
of matching <code class="inline">\<span class="w">p</span><span class="s">{</span><span class="s">}</span></code>
 and <code class="inline">\<span class="w">P</span><span class="s">{</span><span class="s">}</span></code>
 against these as <code class="inline"><a class="l_k" href="functions/undef.html">undef</a></code>, which
translates into "false".  For <code class="inline">\<span class="w">P</span><span class="s">{</span><span class="s">}</span></code>
, this was then complemented into
"true".  A warning was supposed to be raised when this happened.
However, various optimizations could prevent the warning, and the
results were often counter-intuitive, with both a match and its seeming
complement being false.  Now all non-Unicode code points are treated as
typical unassigned Unicode code points.  This generally is more
Do-What-I-Mean.  A warning is raised only if the results are arguably
different from a strict Unicode approach, and from what Perl used to do.
Code that needs to be strictly Unicode compliant can make this warning
fatal, and then Perl always raises the warning.</p>
<p>Details are in <a href="perlunicode.html#Beyond-Unicode-code-points">Beyond Unicode code points in perlunicode</a>.</p>
<a name="%5cp%7bAll%7d-has-been-expanded-to-match-all-possible-code-points"></a><h2><code class="inline">\<span class="i">p</span><span class="s">{</span><span class="w">All</span><span class="s">}</span></code>
 has been expanded to match all possible code points</h2>
<p>The Perl-defined regular expression pattern element <code class="inline">\<span class="i">p</span><span class="s">{</span><span class="w">All</span><span class="s">}</span></code>
, unused
on CPAN, used to match just the Unicode code points; now it matches all
possible code points; that is, it is equivalent to <code class="inline"><a class="l_k" href="functions/qr.html">qr/./s</a></code>.  Thus
<code class="inline">\<span class="i">p</span><span class="s">{</span><span class="w">All</span><span class="s">}</span></code>
 is no longer synonymous with <code class="inline">\<span class="i">p</span><span class="s">{</span><span class="w">Any</span><span class="s">}</span></code>
, which continues to
match just the Unicode code points, as Unicode says it should.</p>
<a name="Data%3a%3aDumper's-output-may-change"></a><h2>Data::Dumper's output may change</h2>
<p>Depending on the data structures dumped and the settings set for
Data::Dumper, the dumped output may have changed from previous
versions.</p>
<p>If you have tests that depend on the exact output of Data::Dumper,
they may fail.</p>
<p>To avoid this problem in your code, test against the data structure
from evaluating the dumped structure, instead of the dump itself.</p>
<a name="Locale-decimal-point-character-no-longer-leaks-outside-of-use-locale-scope"></a><h2>Locale decimal point character no longer leaks outside of <code class="inline"><a class="l_k" href="functions/use.html">use</a> <span class="w">locale</span></code>
 scope</h2>
<p>This is actually a bug fix, but some code has come to rely on the bug
being present, so this change is listed here.  The current locale that
the program is running under is not supposed to be visible to Perl code
except within the scope of a <code class="inline"><a class="l_k" href="functions/use.html">use</a> <span class="w">locale</span></code>
.  However, until now under
certain circumstances, the character used for a decimal point (often a
comma) leaked outside the scope.  If your code is affected by this
change, simply add a <code class="inline"><a class="l_k" href="functions/use.html">use</a> <span class="w">locale</span></code>
.</p>
<a name="Assignments-of-Windows-sockets-error-codes-to-%24!-now-prefer-_errno.h_-values-over-WSAGetLastError()-values"></a><h2>Assignments of Windows sockets error codes to $! now prefer <i>errno.h</i> values over WSAGetLastError() values</h2>
<p>In previous versions of Perl, Windows sockets error codes as returned by
WSAGetLastError() were assigned to $!, and some constants such as ECONNABORTED,
not in <i>errno.h</i> in VC++ (or the various Windows ports of gcc) were defined to
corresponding WSAE* values to allow $! to be tested against the E* constants
exported by <a href="Errno.html">Errno</a> and <a href="POSIX.html">POSIX</a>.</p>
<p>This worked well until VC++ 2010 and later, which introduced new E* constants
with values &gt; 100 into <i>errno.h</i>, including some being (re)defined by perl
to WSAE* values.  That caused problems when linking XS code against other
libraries which used the original definitions of <i>errno.h</i> constants.</p>
<p>To avoid this incompatibility, perl now maps WSAE* error codes to E* values
where possible, and assigns those values to $!.  The E* constants exported by
<a href="Errno.html">Errno</a> and <a href="POSIX.html">POSIX</a> are updated to match so that testing $! against them,
wherever previously possible, will continue to work as expected, and all E*
constants found in <i>errno.h</i> are now exported from those modules with their
original <i>errno.h</i> values.</p>
<p>In order to avoid breakage in existing Perl code which assigns WSAE* values to
$!, perl now intercepts the assignment and performs the same mapping to E*
values as it uses internally when assigning to $! itself.</p>
<p>However, one backwards-incompatibility remains: existing Perl code which
compares $! against the numeric values of the WSAE* error codes that were
previously assigned to $! will now be broken in those cases where a
corresponding E* value has been assigned instead.  This is only an issue for
those E* values &lt; 100, which were always exported from <a href="Errno.html">Errno</a> and
<a href="POSIX.html">POSIX</a> with their original <i>errno.h</i> values, and therefore could not be used
for WSAE* error code tests (e.g. WSAEINVAL is 10022, but the corresponding
EINVAL is 22).  (E* values &gt; 100, if present, were redefined to WSAE*
values anyway, so compatibility can be achieved by using the E* constants,
which will work both before and after this change, albeit using different
numeric values under the hood.)</p>
<a name="Functions-PerlIO_vsprintf-and-PerlIO_sprintf-have-been-removed"></a><h2>Functions <code class="inline"><span class="w">PerlIO_vsprintf</span></code>
 and <code class="inline"><span class="w">PerlIO_sprintf</span></code>
 have been removed</h2>
<p>These two functions, undocumented, unused in CPAN, and problematic, have been
removed.</p>
<a name="Deprecations"></a><h1>Deprecations</h1>
<a name="The-%2f%5cC%2f-character-class"></a><h2>The <code class="inline"><span class="q">/\C/</span></code>
 character class</h2>
<p>The <code class="inline"><span class="q">/\C/</span></code>
 regular expression character class is deprecated. From perl
5.22 onwards it will generate a warning, and from perl 5.24 onwards it
will be a regular expression compiler error. If you need to examine the
individual bytes that make up a UTF8-encoded character, then use
<code class="inline"><span class="i">utf8::encode</span><span class="s">(</span><span class="s">)</span></code>
 on the string (or a copy) first.</p>
<a name="Literal-control-characters-in-variable-names"></a><h2>Literal control characters in variable names</h2>
<p>This deprecation affects things like $\cT, where \cT is a literal control (such
as a <code class="inline"><span class="w">NAK</span></code>
 or <code class="inline"><span class="w">NEGATIVE</span> <span class="w">ACKNOWLEDGE</span></code>
 character) in
the source code.  Surprisingly, it appears that originally this was intended as
the canonical way of accessing variables like $^T, with the caret form only
being added as an alternative.</p>
<p>The literal control form is being deprecated for two main reasons.  It has what
are likely unfixable bugs, such as $\cI not working as an alias for $^I, and
their usage not being portable to non-ASCII platforms: While $^T will work
everywhere, \cT is whitespace in EBCDIC.  [perl #119123]</p>
<a name="References-to-non-integers-and-non-positive-integers-in-%24%2f"></a><h2>References to non-integers and non-positive integers in <code class="inline"><span class="i">$/</span></code>
</h2>
<p>Setting <code class="inline"><span class="i">$/</span></code>
 to a reference to zero or a reference to a negative integer is
now deprecated, and will behave <b>exactly</b> as though it was set to <code class="inline"><a class="l_k" href="functions/undef.html">undef</a></code>.
If you want slurp behavior set <code class="inline"><span class="i">$/</span></code>
 to <code class="inline"><a class="l_k" href="functions/undef.html">undef</a></code> explicitly.</p>
<p>Setting <code class="inline"><span class="i">$/</span></code>
 to a reference to a non integer is now forbidden and will
throw an error. Perl has never documented what would happen in this
context and while it used to behave the same as setting <code class="inline"><span class="i">$/</span></code>
 to
the address of the references in future it may behave differently, so we
have forbidden this usage.</p>
<a name="Character-matching-routines-in-POSIX"></a><h2>Character matching routines in POSIX</h2>
<p>Use of any of these functions in the <code class="inline"><span class="w">POSIX</span></code>
 module is now deprecated:
<code class="inline"><span class="w">isalnum</span></code>
, <code class="inline"><span class="w">isalpha</span></code>
, <code class="inline"><span class="w">iscntrl</span></code>
, <code class="inline"><span class="w">isdigit</span></code>
, <code class="inline"><span class="w">isgraph</span></code>
, <code class="inline"><span class="w">islower</span></code>
,
<code class="inline"><span class="w">isprint</span></code>
, <code class="inline"><span class="w">ispunct</span></code>
, <code class="inline"><span class="w">isspace</span></code>
, <code class="inline"><span class="w">isupper</span></code>
, and <code class="inline"><span class="w">isxdigit</span></code>
.  The
functions are buggy and don't work on UTF-8 encoded strings.  See their
entries in <a href="POSIX.html">POSIX</a> for more information.</p>
<p>A warning is raised on the first call to any of them from each place in
the code that they are called.  (Hence a repeated statement in a loop
will raise just the one warning.)</p>
<a name="Interpreter-based-threads-are-now-_discouraged_"></a><h2>Interpreter-based threads are now <i>discouraged</i></h2>
<p>The "interpreter-based threads" provided by Perl are not the fast, lightweight
system for multitasking that one might expect or hope for.  Threads are
implemented in a way that make them easy to misuse.  Few people know how to
use them correctly or will be able to provide help.</p>
<p>The use of interpreter-based threads in perl is officially
<a href="perlpolicy.html#discouraged">discouraged</a>.</p>
<a name="Module-removals"></a><h2>Module removals</h2>
<p>The following modules will be removed from the core distribution in a
future release, and will at that time need to be installed from CPAN.
Distributions on CPAN which require these modules will need to list them as
prerequisites.</p>
<p>The core versions of these modules will now issue <code class="inline"><span class="q">&quot;deprecated&quot;</span></code>
-category
warnings to alert you to this fact.  To silence these deprecation warnings,
install the modules in question from CPAN.</p>
<p>Note that the planned removal of these modules from core does not reflect a
judgement about the quality of the code and should not be taken as a suggestion
that their use be halted.  Their disinclusion from core primarily hinges on
their necessity to bootstrapping a fully functional, CPAN-capable Perl
installation, not on concerns over their design.</p>
<ul>
<li><a name="the-CGI-manpage-and-its-associated-CGI%3a%3a-packages"></a><b><a href="http://search.cpan.org/perldoc/CGI">CGI</a> and its associated CGI:: packages</b>
</li>
<li><a name="the-inc%3a%3alatest-manpage"></a><b><a href="http://search.cpan.org/perldoc/inc::latest">inc::latest</a></b>
</li>
<li><a name="the-Package%3a%3aConstants-manpage"></a><b><a href="http://search.cpan.org/perldoc/Package::Constants">Package::Constants</a></b>
</li>
<li><a name="the-Module%3a%3aBuild-manpage-and-its-associated-Module%3a%3aBuild%3a%3a-packages"></a><b><a href="http://search.cpan.org/perldoc/Module::Build">Module::Build</a> and its associated Module::Build:: packages</b>
</li>
</ul>
<a name="Utility-removals"></a><h2>Utility removals</h2>
<p>The following utilities will be removed from the core distribution in a
future release, and will at that time need to be installed from CPAN.</p>
<ul>
<li><a name="the-find2perl-manpage"></a><b><a href="http://search.cpan.org/perldoc/find2perl">find2perl</a></b>
</li>
<li><a name="the-s2p-manpage"></a><b><a href="http://search.cpan.org/perldoc/s2p">s2p</a></b>
</li>
<li><a name="the-a2p-manpage"></a><b><a href="http://search.cpan.org/perldoc/a2p">a2p</a></b>
</li>
</ul>
<a name="Performance-Enhancements"></a><h1>Performance Enhancements</h1>
<ul>
<li>
<p>Perl has a new copy-on-write mechanism that avoids the need to copy the
internal string buffer when assigning from one scalar to another. This
makes copying large strings appear much faster.  Modifying one of the two
(or more) strings after an assignment will force a copy internally. This
makes it unnecessary to pass strings by reference for efficiency.</p>
<p>This feature was already available in 5.18.0, but wasn't enabled by
default. It is the default now, and so you no longer need build perl with
the <i>Configure</i> argument:</p>
<pre class="verbatim"><ol><li>    -<span class="w">Accflags</span>=-<span class="w">DPERL_NEW_COPY_ON_WRITE</span></li></ol></pre><p>It can be disabled (for now) in a perl build with:</p>
<pre class="verbatim"><ol><li>    -<span class="w">Accflags</span>=-<span class="w">DPERL_NO_COW</span></li></ol></pre><p>On some operating systems Perl can be compiled in such a way that any
attempt to modify string buffers shared by multiple SVs will crash.  This
way XS authors can test that their modules handle copy-on-write scalars
correctly.  See <a href="perlguts.html#Copy-on-Write">Copy on Write in perlguts</a> for detail.</p>
</li>
<li>
<p>Perl has an optimizer for regular expression patterns.  It analyzes the pattern
to find things such as the minimum length a string has to be to match, etc.  It
now better handles code points that are above the Latin1 range.</p>
</li>
<li>
<p>Executing a regex that contains the <code class="inline">^</code> anchor (or its variant under the
<code class="inline">/m</code> flag) has been made much faster in several situations.</p>
</li>
<li>
<p>Precomputed hash values are now used in more places during method lookup.</p>
</li>
<li>
<p>Constant hash key lookups (<code class="inline"><span class="i">$hash</span>{<span class="w">key</span>}</code>
 as opposed to <code class="inline"><span class="i">$hash</span>{<span class="i">$key</span>}</code>
) have
long had the internal hash value computed at compile time, to speed up
lookup.  This optimisation has only now been applied to hash slices as
well.</p>
</li>
<li>
<p>Combined <code class="inline">and</code>
 and <code class="inline">or</code>
 operators in void context, like those
generated for <code class="inline"><a class="l_k" href="functions/unless.html">unless</a> <span class="s">(</span><span class="i">$a</span> &amp;&amp; <span class="i">$b</span><span class="s">)</span></code>
 and <code class="inline"><a class="l_k" href="functions/if.html">if</a> <span class="s">(</span><span class="i">$a</span> || <span class="w">b</span><span class="s">)</span></code>
 now
short circuit directly to the end of the statement. [perl #120128]</p>
</li>
<li>
<p>In certain situations, when <code class="inline"><a class="l_k" href="functions/return.html">return</a></code> is the last statement in a subroutine's
main scope, it will be optimized out. This means code like:</p>
<pre class="verbatim"><ol><li><a name="baz"></a>  sub <span class="m">baz</span> <span class="s">{</span> <a class="l_k" href="functions/return.html">return</a> <span class="i">$cat</span><span class="sc">;</span> <span class="s">}</span></li></ol></pre><p>will now behave like:</p>
<pre class="verbatim"><ol><li><a name="baz"></a>  sub <span class="m">baz</span> <span class="s">{</span> <span class="i">$cat</span><span class="sc">;</span> <span class="s">}</span></li></ol></pre><p>which is notably faster.</p>
<p>[perl #120765]</p>
</li>
<li>
<p>Code like:</p>
<pre class="verbatim"><ol><li>  <a class="l_k" href="functions/my.html">my</a> <span class="i">$x</span><span class="sc">;</span> <span class="c"># or @x, %x</span></li><li>  <a class="l_k" href="functions/my.html">my</a> <span class="i">$y</span><span class="sc">;</span></li></ol></pre><p>is now optimized to:</p>
<pre class="verbatim"><ol><li>  <a class="l_k" href="functions/my.html">my</a> <span class="s">(</span><span class="i">$x</span><span class="cm">,</span> <span class="i">$y</span><span class="s">)</span><span class="sc">;</span></li></ol></pre><p>In combination with the <a href="perl5180delta.html#Internal-Changes">padrange optimization introduced in v5.18.0</a>, this means longer uninitialized my
variable statements are also optimized, so:</p>
<pre class="verbatim"><ol><li>  <a class="l_k" href="functions/my.html">my</a> <span class="i">$x</span><span class="sc">;</span> <a class="l_k" href="functions/my.html">my</a> <span class="i">@y</span><span class="sc">;</span> <a class="l_k" href="functions/my.html">my</a> <span class="i">%z</span><span class="sc">;</span></li></ol></pre><p>becomes:</p>
<pre class="verbatim"><ol><li>  <a class="l_k" href="functions/my.html">my</a> <span class="s">(</span><span class="i">$x</span><span class="cm">,</span> <span class="i">@y</span><span class="cm">,</span> <span class="i">%z</span><span class="s">)</span><span class="sc">;</span></li></ol></pre><p>[perl #121077]</p>
</li>
<li>
<p>The creation of certain sorts of lists, including array and hash slices, is now
faster.</p>
</li>
<li>
<p>The optimisation for arrays indexed with a small constant integer is now
applied for integers in the range -128..127, rather than 0..255. This should
speed up Perl code using expressions like <code class="inline"><span class="i">$x</span>[<span class="n">-1</span>]</code>
, at the expense of
(presumably much rarer) code using expressions like <code class="inline"><span class="i">$x</span>[<span class="n">200</span>]</code>
.</p>
</li>
<li>
<p>The first iteration over a large hash (using <code class="inline"><a class="l_k" href="functions/keys.html">keys</a></code> or <code class="inline"><a class="l_k" href="functions/each.html">each</a></code>) is now
faster. This is achieved by preallocating the hash's internal iterator
state, rather than lazily creating it when the hash is first iterated. (For
small hashes, the iterator is still created only when first needed. The
assumption is that small hashes are more likely to be used as objects, and
therefore never allocated. For large hashes, that's less likely to be true,
and the cost of allocating the iterator is swamped by the cost of allocating
space for the hash itself.)</p>
</li>
<li>
<p>When doing a global regex match on a string that came from the <code class="inline"><a class="l_k" href="functions/readline.html">readline</a></code>
or <code class="inline">&lt;&gt;</code>
 operator, the data is no longer copied unnecessarily.
[perl #121259]</p>
</li>
<li>
<p>Dereferencing (as in <code class="inline"><span class="i">$obj</span>-&gt;[<span class="n">0</span>]</code>
 or <code class="inline"><span class="i">$obj</span>-&gt;{<span class="w">k</span>}</code>
) is now faster
when <code class="inline"><span class="i">$obj</span></code>
 is an instance of a class that has overloaded methods, but
doesn't overload any of the dereferencing methods <code class="inline"><span class="i">@</span>{}</code>
, <code class="inline"><span class="i">%</span>{}</code>
, and so on.</p>
</li>
<li>
<p>Perl's optimiser no longer skips optimising code that follows certain
<code class="inline"><a class="l_k" href="functions/eval.html">eval</a> <span class="s">{</span><span class="s">}</span></code>
 expressions (including those with an apparent infinite loop).</p>
</li>
<li>
<p>The implementation now does a better job of avoiding meaningless work at
runtime. Internal effect-free "null" operations (created as a side-effect of
parsing Perl programs) are normally deleted during compilation. That
deletion is now applied in some situations that weren't previously handled.</p>
</li>
<li>
<p>Perl now does less disk I/O when dealing with Unicode properties that cover
up to three ranges of consecutive code points.</p>
</li>
</ul>
<a name="Modules-and-Pragmata"></a><h1>Modules and Pragmata</h1>
<a name="New-Modules-and-Pragmata"></a><h2>New Modules and Pragmata</h2>
<ul>
<li>
<p><a href="experimental.html">experimental</a> 0.007 has been added to the Perl core.</p>
</li>
<li>
<p><a href="IO/Socket/IP.html">IO::Socket::IP</a> 0.29 has been added to the Perl core.</p>
</li>
</ul>
<a name="Updated-Modules-and-Pragmata"></a><h2>Updated Modules and Pragmata</h2>
<ul>
<li>
<p><a href="Archive/Tar.html">Archive::Tar</a> has been upgraded from version 1.90 to 1.96.</p>
</li>
<li>
<p><a href="arybase.html">arybase</a> has been upgraded from version 0.06 to 0.07.</p>
</li>
<li>
<p><a href="Attribute/Handlers.html">Attribute::Handlers</a> has been upgraded from version 0.94 to 0.96.</p>
</li>
<li>
<p><a href="attributes.html">attributes</a> has been upgraded from version 0.21 to 0.22.</p>
</li>
<li>
<p><a href="autodie.html">autodie</a> has been upgraded from version 2.13 to 2.23.</p>
</li>
<li>
<p><a href="AutoLoader.html">AutoLoader</a> has been upgraded from version 5.73 to 5.74.</p>
</li>
<li>
<p><a href="autouse.html">autouse</a> has been upgraded from version 1.07 to 1.08.</p>
</li>
<li>
<p><a href="B.html">B</a> has been upgraded from version 1.42 to 1.48.</p>
</li>
<li>
<p><a href="B/Concise.html">B::Concise</a> has been upgraded from version 0.95 to 0.992.</p>
</li>
<li>
<p><a href="B/Debug.html">B::Debug</a> has been upgraded from version 1.18 to 1.19.</p>
</li>
<li>
<p><a href="B/Deparse.html">B::Deparse</a> has been upgraded from version 1.20 to 1.26.</p>
</li>
<li>
<p><a href="base.html">base</a> has been upgraded from version 2.18 to 2.22.</p>
</li>
<li>
<p><a href="Benchmark.html">Benchmark</a> has been upgraded from version 1.15 to 1.18.</p>
</li>
<li>
<p><a href="bignum.html">bignum</a> has been upgraded from version 0.33 to 0.37.</p>
</li>
<li>
<p><a href="Carp.html">Carp</a> has been upgraded from version 1.29 to 1.3301.</p>
</li>
<li>
<p><a href="http://search.cpan.org/perldoc/CGI">CGI</a> has been upgraded from version 3.63 to 3.65.
NOTE: <a href="http://search.cpan.org/perldoc/CGI">CGI</a> is deprecated and may be removed from a future version of Perl.</p>
</li>
<li>
<p><a href="charnames.html">charnames</a> has been upgraded from version 1.36 to 1.40.</p>
</li>
<li>
<p><a href="Class/Struct.html">Class::Struct</a> has been upgraded from version 0.64 to 0.65.</p>
</li>
<li>
<p><a href="Compress/Raw/Bzip2.html">Compress::Raw::Bzip2</a> has been upgraded from version 2.060 to 2.064.</p>
</li>
<li>
<p><a href="Compress/Raw/Zlib.html">Compress::Raw::Zlib</a> has been upgraded from version 2.060 to 2.065.</p>
</li>
<li>
<p><a href="Config/Perl/V.html">Config::Perl::V</a> has been upgraded from version 0.17 to 0.20.</p>
</li>
<li>
<p><a href="constant.html">constant</a> has been upgraded from version 1.27 to 1.31.</p>
</li>
<li>
<p><a href="CPAN.html">CPAN</a> has been upgraded from version 2.00 to 2.05.</p>
</li>
<li>
<p><a href="CPAN/Meta.html">CPAN::Meta</a> has been upgraded from version 2.120921 to 2.140640.</p>
</li>
<li>
<p><a href="CPAN/Meta/Requirements.html">CPAN::Meta::Requirements</a> has been upgraded from version 2.122 to 2.125.</p>
</li>
<li>
<p><a href="CPAN/Meta/YAML.html">CPAN::Meta::YAML</a> has been upgraded from version 0.008 to 0.012.</p>
</li>
<li>
<p><a href="Data/Dumper.html">Data::Dumper</a> has been upgraded from version 2.145 to 2.151.</p>
</li>
<li>
<p><a href="DB.html">DB</a> has been upgraded from version 1.04 to 1.07.</p>
</li>
<li>
<p><a href="DB_File.html">DB_File</a> has been upgraded from version 1.827 to 1.831.</p>
</li>
<li>
<p><a href="DBM_Filter.html">DBM_Filter</a> has been upgraded from version 0.05 to 0.06.</p>
</li>
<li>
<p><a href="deprecate.html">deprecate</a> has been upgraded from version 0.02 to 0.03.</p>
</li>
<li>
<p><a href="Devel/Peek.html">Devel::Peek</a> has been upgraded from version 1.11 to 1.16.</p>
</li>
<li>
<p><a href="Devel/PPPort.html">Devel::PPPort</a> has been upgraded from version 3.20 to 3.21.</p>
</li>
<li>
<p><a href="diagnostics.html">diagnostics</a> has been upgraded from version 1.31 to 1.34.</p>
</li>
<li>
<p><a href="Digest/MD5.html">Digest::MD5</a> has been upgraded from version 2.52 to 2.53.</p>
</li>
<li>
<p><a href="Digest/SHA.html">Digest::SHA</a> has been upgraded from version 5.84 to 5.88.</p>
</li>
<li>
<p><a href="DynaLoader.html">DynaLoader</a> has been upgraded from version 1.18 to 1.25.</p>
</li>
<li>
<p><a href="Encode.html">Encode</a> has been upgraded from version 2.49 to 2.60.</p>
</li>
<li>
<p><a href="encoding.html">encoding</a> has been upgraded from version 2.6_01 to 2.12.</p>
</li>
<li>
<p><a href="English.html">English</a> has been upgraded from version 1.06 to 1.09.</p>
</li>
<li>
<p><a href="Errno.html">Errno</a> has been upgraded from version 1.18 to 1.20_03.</p>
</li>
<li>
<p><a href="Exporter.html">Exporter</a> has been upgraded from version 5.68 to 5.70.</p>
</li>
<li>
<p><a href="ExtUtils/CBuilder.html">ExtUtils::CBuilder</a> has been upgraded from version 0.280210 to 0.280216.</p>
</li>
<li>
<p><a href="ExtUtils/Command.html">ExtUtils::Command</a> has been upgraded from version 1.17 to 1.18.</p>
</li>
<li>
<p><a href="ExtUtils/Embed.html">ExtUtils::Embed</a> has been upgraded from version 1.30 to 1.32.</p>
</li>
<li>
<p><a href="ExtUtils/Install.html">ExtUtils::Install</a> has been upgraded from version 1.59 to 1.67.</p>
</li>
<li>
<p><a href="ExtUtils/MakeMaker.html">ExtUtils::MakeMaker</a> has been upgraded from version 6.66 to 6.98.</p>
</li>
<li>
<p><a href="ExtUtils/Miniperl.html">ExtUtils::Miniperl</a> has been upgraded from version  to 1.01.</p>
</li>
<li>
<p><a href="ExtUtils/ParseXS.html">ExtUtils::ParseXS</a> has been upgraded from version 3.18 to 3.24.</p>
</li>
<li>
<p><a href="ExtUtils/Typemaps.html">ExtUtils::Typemaps</a> has been upgraded from version 3.19 to 3.24.</p>
</li>
<li>
<p><a href="http://search.cpan.org/perldoc/ExtUtils::XSSymSet">ExtUtils::XSSymSet</a> has been upgraded from version 1.2 to 1.3.</p>
</li>
<li>
<p><a href="feature.html">feature</a> has been upgraded from version 1.32 to 1.36.</p>
</li>
<li>
<p><a href="fields.html">fields</a> has been upgraded from version 2.16 to 2.17.</p>
</li>
<li>
<p><a href="File/Basename.html">File::Basename</a> has been upgraded from version 2.84 to 2.85.</p>
</li>
<li>
<p><a href="File/Copy.html">File::Copy</a> has been upgraded from version 2.26 to 2.29.</p>
</li>
<li>
<p><a href="File/DosGlob.html">File::DosGlob</a> has been upgraded from version 1.10 to 1.12.</p>
</li>
<li>
<p><a href="File/Fetch.html">File::Fetch</a> has been upgraded from version 0.38 to 0.48.</p>
</li>
<li>
<p><a href="File/Find.html">File::Find</a> has been upgraded from version 1.23 to 1.27.</p>
</li>
<li>
<p><a href="File/Glob.html">File::Glob</a> has been upgraded from version 1.20 to 1.23.</p>
</li>
<li>
<p><a href="File/Spec.html">File::Spec</a> has been upgraded from version 3.40 to 3.47.</p>
</li>
<li>
<p><a href="File/Temp.html">File::Temp</a> has been upgraded from version 0.23 to 0.2304.</p>
</li>
<li>
<p><a href="FileCache.html">FileCache</a> has been upgraded from version 1.08 to 1.09.</p>
</li>
<li>
<p><a href="Filter/Simple.html">Filter::Simple</a> has been upgraded from version 0.89 to 0.91.</p>
</li>
<li>
<p><a href="Filter/Util/Call.html">Filter::Util::Call</a> has been upgraded from version 1.45 to 1.49.</p>
</li>
<li>
<p><a href="Getopt/Long.html">Getopt::Long</a> has been upgraded from version 2.39 to 2.42.</p>
</li>
<li>
<p><a href="Getopt/Std.html">Getopt::Std</a> has been upgraded from version 1.07 to 1.10.</p>
</li>
<li>
<p><a href="Hash/Util/FieldHash.html">Hash::Util::FieldHash</a> has been upgraded from version 1.10 to 1.15.</p>
</li>
<li>
<p><a href="HTTP/Tiny.html">HTTP::Tiny</a> has been upgraded from version 0.025 to 0.043.</p>
</li>
<li>
<p><a href="I18N/Langinfo.html">I18N::Langinfo</a> has been upgraded from version 0.10 to 0.11.</p>
</li>
<li>
<p><a href="I18N/LangTags.html">I18N::LangTags</a> has been upgraded from version 0.39 to 0.40.</p>
</li>
<li>
<p><a href="if.html">if</a> has been upgraded from version 0.0602 to 0.0603.</p>
</li>
<li>
<p><a href="http://search.cpan.org/perldoc/inc::latest">inc::latest</a> has been upgraded from version 0.4003 to 0.4205.
NOTE: <a href="http://search.cpan.org/perldoc/inc::latest">inc::latest</a> is deprecated and may be removed from a future version of Perl.</p>
</li>
<li>
<p><a href="integer.html">integer</a> has been upgraded from version 1.00 to 1.01.</p>
</li>
<li>
<p><a href="IO.html">IO</a> has been upgraded from version 1.28 to 1.31.</p>
</li>
<li>
<p><a href="IO/Compress/Gzip.html">IO::Compress::Gzip</a> and friends have been upgraded from version 2.060 to
2.064.</p>
</li>
<li>
<p><a href="IPC/Cmd.html">IPC::Cmd</a> has been upgraded from version 0.80 to 0.92.</p>
</li>
<li>
<p><a href="IPC/Open3.html">IPC::Open3</a> has been upgraded from version 1.13 to 1.16.</p>
</li>
<li>
<p><a href="IPC/SysV.html">IPC::SysV</a> has been upgraded from version 2.03 to 2.04.</p>
</li>
<li>
<p><a href="JSON/PP.html">JSON::PP</a> has been upgraded from version 2.27202 to 2.27203.</p>
</li>
<li>
<p><a href="List/Util.html">List::Util</a> has been upgraded from version 1.27 to 1.38.</p>
</li>
<li>
<p><a href="locale.html">locale</a> has been upgraded from version 1.02 to 1.03.</p>
</li>
<li>
<p><a href="Locale/Codes.html">Locale::Codes</a> has been upgraded from version 3.25 to 3.30.</p>
</li>
<li>
<p><a href="Locale/Maketext.html">Locale::Maketext</a> has been upgraded from version 1.23 to 1.25.</p>
</li>
<li>
<p><a href="Math/BigInt.html">Math::BigInt</a> has been upgraded from version 1.9991 to 1.9993.</p>
</li>
<li>
<p><a href="Math/BigInt/FastCalc.html">Math::BigInt::FastCalc</a> has been upgraded from version 0.30 to 0.31.</p>
</li>
<li>
<p><a href="Math/BigRat.html">Math::BigRat</a> has been upgraded from version 0.2604 to 0.2606.</p>
</li>
<li>
<p><a href="MIME/Base64.html">MIME::Base64</a> has been upgraded from version 3.13 to 3.14.</p>
</li>
<li>
<p><a href="http://search.cpan.org/perldoc/Module::Build">Module::Build</a> has been upgraded from version 0.4003 to 0.4205.
NOTE: <a href="http://search.cpan.org/perldoc/Module::Build">Module::Build</a> is deprecated and may be removed from a future version of Perl.</p>
</li>
<li>
<p><a href="Module/CoreList.html">Module::CoreList</a> has been upgraded from version 2.89 to 3.10.</p>
</li>
<li>
<p><a href="Module/Load.html">Module::Load</a> has been upgraded from version 0.24 to 0.32.</p>
</li>
<li>
<p><a href="Module/Load/Conditional.html">Module::Load::Conditional</a> has been upgraded from version 0.54 to 0.62.</p>
</li>
<li>
<p><a href="Module/Metadata.html">Module::Metadata</a> has been upgraded from version 1.000011 to 1.000019.</p>
</li>
<li>
<p><a href="mro.html">mro</a> has been upgraded from version 1.11 to 1.16.</p>
</li>
<li>
<p><a href="Net/Ping.html">Net::Ping</a> has been upgraded from version 2.41 to 2.43.</p>
</li>
<li>
<p><a href="Opcode.html">Opcode</a> has been upgraded from version 1.25 to 1.27.</p>
</li>
<li>
<p><a href="http://search.cpan.org/perldoc/Package::Constants">Package::Constants</a> has been upgraded from version 0.02 to 0.04.
NOTE: <a href="http://search.cpan.org/perldoc/Package::Constants">Package::Constants</a> is deprecated and may be removed from a future version of Perl.</p>
</li>
<li>
<p><a href="Params/Check.html">Params::Check</a> has been upgraded from version 0.36 to 0.38.</p>
</li>
<li>
<p><a href="parent.html">parent</a> has been upgraded from version 0.225 to 0.228.</p>
</li>
<li>
<p><a href="Parse/CPAN/Meta.html">Parse::CPAN::Meta</a> has been upgraded from version 1.4404 to 1.4414.</p>
</li>
<li>
<p><a href="Perl/OSType.html">Perl::OSType</a> has been upgraded from version 1.003 to 1.007.</p>
</li>
<li>
<p><a href="perlfaq.html">perlfaq</a> has been upgraded from version 5.0150042 to 5.0150044.</p>
</li>
<li>
<p><a href="PerlIO.html">PerlIO</a> has been upgraded from version 1.07 to 1.09.</p>
</li>
<li>
<p><a href="PerlIO/encoding.html">PerlIO::encoding</a> has been upgraded from version 0.16 to 0.18.</p>
</li>
<li>
<p><a href="PerlIO/scalar.html">PerlIO::scalar</a> has been upgraded from version 0.16 to 0.18.</p>
</li>
<li>
<p><a href="PerlIO/via.html">PerlIO::via</a> has been upgraded from version 0.12 to 0.14.</p>
</li>
<li>
<p><a href="Pod/Escapes.html">Pod::Escapes</a> has been upgraded from version 1.04 to 1.06.</p>
</li>
<li>
<p><a href="Pod/Functions.html">Pod::Functions</a> has been upgraded from version 1.06 to 1.08.</p>
</li>
<li>
<p><a href="Pod/Html.html">Pod::Html</a> has been upgraded from version 1.18 to 1.21.</p>
</li>
<li>
<p><a href="Pod/Parser.html">Pod::Parser</a> has been upgraded from version 1.60 to 1.62.</p>
</li>
<li>
<p><a href="Pod/Perldoc.html">Pod::Perldoc</a> has been upgraded from version 3.19 to 3.23.</p>
</li>
<li>
<p><a href="Pod/Usage.html">Pod::Usage</a> has been upgraded from version 1.61 to 1.63.</p>
</li>
<li>
<p><a href="POSIX.html">POSIX</a> has been upgraded from version 1.32 to 1.38_03.</p>
</li>
<li>
<p><a href="re.html">re</a> has been upgraded from version 0.23 to 0.26.</p>
</li>
<li>
<p><a href="Safe.html">Safe</a> has been upgraded from version 2.35 to 2.37.</p>
</li>
<li>
<p><a href="Scalar/Util.html">Scalar::Util</a> has been upgraded from version 1.27 to 1.38.</p>
</li>
<li>
<p><a href="SDBM_File.html">SDBM_File</a> has been upgraded from version 1.09 to 1.11.</p>
</li>
<li>
<p><a href="Socket.html">Socket</a> has been upgraded from version 2.009 to 2.013.</p>
</li>
<li>
<p><a href="Storable.html">Storable</a> has been upgraded from version 2.41 to 2.49.</p>
</li>
<li>
<p><a href="strict.html">strict</a> has been upgraded from version 1.07 to 1.08.</p>
</li>
<li>
<p><a href="subs.html">subs</a> has been upgraded from version 1.01 to 1.02.</p>
</li>
<li>
<p><a href="Sys/Hostname.html">Sys::Hostname</a> has been upgraded from version 1.17 to 1.18.</p>
</li>
<li>
<p><a href="Sys/Syslog.html">Sys::Syslog</a> has been upgraded from version 0.32 to 0.33.</p>
</li>
<li>
<p><a href="Term/Cap.html">Term::Cap</a> has been upgraded from version 1.13 to 1.15.</p>
</li>
<li>
<p><a href="Term/ReadLine.html">Term::ReadLine</a> has been upgraded from version 1.12 to 1.14.</p>
</li>
<li>
<p><a href="Test/Harness.html">Test::Harness</a> has been upgraded from version 3.26 to 3.30.</p>
</li>
<li>
<p><a href="Test/Simple.html">Test::Simple</a> has been upgraded from version 0.98 to 1.001002.</p>
</li>
<li>
<p><a href="Text/ParseWords.html">Text::ParseWords</a> has been upgraded from version 3.28 to 3.29.</p>
</li>
<li>
<p><a href="Text/Tabs.html">Text::Tabs</a> has been upgraded from version 2012.0818 to 2013.0523.</p>
</li>
<li>
<p><a href="Text/Wrap.html">Text::Wrap</a> has been upgraded from version 2012.0818 to 2013.0523.</p>
</li>
<li>
<p><a href="Thread.html">Thread</a> has been upgraded from version 3.02 to 3.04.</p>
</li>
<li>
<p><a href="Thread/Queue.html">Thread::Queue</a> has been upgraded from version 3.02 to 3.05.</p>
</li>
<li>
<p><a href="threads.html">threads</a> has been upgraded from version 1.86 to 1.93.</p>
</li>
<li>
<p><a href="threads/shared.html">threads::shared</a> has been upgraded from version 1.43 to 1.46.</p>
</li>
<li>
<p><a href="Tie/Array.html">Tie::Array</a> has been upgraded from version 1.05 to 1.06.</p>
</li>
<li>
<p><a href="Tie/File.html">Tie::File</a> has been upgraded from version 0.99 to 1.00.</p>
</li>
<li>
<p><a href="Tie/Hash.html">Tie::Hash</a> has been upgraded from version 1.04 to 1.05.</p>
</li>
<li>
<p><a href="Tie/Scalar.html">Tie::Scalar</a> has been upgraded from version 1.02 to 1.03.</p>
</li>
<li>
<p><a href="Tie/StdHandle.html">Tie::StdHandle</a> has been upgraded from version 4.3 to 4.4.</p>
</li>
<li>
<p><a href="Time/HiRes.html">Time::HiRes</a> has been upgraded from version 1.9725 to 1.9726.</p>
</li>
<li>
<p><a href="Time/Piece.html">Time::Piece</a> has been upgraded from version 1.20_01 to 1.27.</p>
</li>
<li>
<p><a href="Unicode/Collate.html">Unicode::Collate</a> has been upgraded from version 0.97 to 1.04.</p>
</li>
<li>
<p><a href="Unicode/Normalize.html">Unicode::Normalize</a> has been upgraded from version 1.16 to 1.17.</p>
</li>
<li>
<p><a href="Unicode/UCD.html">Unicode::UCD</a> has been upgraded from version 0.51 to 0.57.</p>
</li>
<li>
<p><a href="utf8.html">utf8</a> has been upgraded from version 1.10 to 1.13.</p>
</li>
<li>
<p><a href="version.html">version</a> has been upgraded from version 0.9902 to 0.9908.</p>
</li>
<li>
<p><a href="vmsish.html">vmsish</a> has been upgraded from version 1.03 to 1.04.</p>
</li>
<li>
<p><a href="warnings.html">warnings</a> has been upgraded from version 1.18 to 1.23.</p>
</li>
<li>
<p><a href="http://search.cpan.org/perldoc/Win32">Win32</a> has been upgraded from version 0.47 to 0.49.</p>
</li>
<li>
<p><a href="http://search.cpan.org/perldoc/XS::Typemap">XS::Typemap</a> has been upgraded from version 0.10 to 0.13.</p>
</li>
<li>
<p><a href="XSLoader.html">XSLoader</a> has been upgraded from version 0.16 to 0.17.</p>
</li>
</ul>
<a name="Documentation"></a><h1>Documentation</h1>
<a name="New-Documentation"></a><h2>New Documentation</h2>
<a name="the-perlrepository-manpage"></a><h3><a href="perlrepository.html">perlrepository</a></h3>
<p>This document was removed (actually, renamed <a href="perlgit.html">perlgit</a> and given a major
overhaul) in Perl v5.14, causing Perl documentation websites to show the now
out of date version in Perl v5.12 as the latest version.  It has now been
restored in stub form, directing readers to current information.</p>
<a name="Changes-to-Existing-Documentation"></a><h2>Changes to Existing Documentation</h2>
<a name="the-perldata-manpage"></a><h3><a href="perldata.html">perldata</a></h3>
<ul>
<li>
<p>New sections have been added to document the new index/value array slice and
key/value hash slice syntax.</p>
</li>
</ul>
<a name="the-perldebguts-manpage"></a><h3><a href="perldebguts.html">perldebguts</a></h3>
<ul>
<li>
<p>The <code class="inline"><span class="w">DB::goto</span></code>
 and <code class="inline"><span class="w">DB::lsub</span></code>
 debugger subroutines are now documented.  [perl
#77680]</p>
</li>
</ul>
<a name="the-perlexperiment-manpage"></a><h3><a href="perlexperiment.html">perlexperiment</a></h3>
<ul>
<li>
<p><code class="inline">\s</code> matching <code class="inline">\<span class="w">cK</span></code>
 is marked experimental.</p>
</li>
<li>
<p>ithreads were accepted in v5.8.0 (but are discouraged as of v5.20.0).</p>
</li>
<li>
<p>Long doubles are not considered experimental.</p>
</li>
<li>
<p>Code in regular expressions, regular expression backtracking verbs,
and lvalue subroutines are no longer listed as experimental.  (This
also affects <a href="perlre.html">perlre</a> and <a href="perlsub.html">perlsub</a>.)</p>
</li>
</ul>
<a name="the-perlfunc-manpage"></a><h3><a href="perlfunc.html">perlfunc</a></h3>
<ul>
<li>
<p><code class="inline"><a class="l_k" href="functions/chop.html">chop</a></code> and <code class="inline"><a class="l_k" href="functions/chomp.html">chomp</a></code> now note that they can reset the hash iterator.</p>
</li>
<li>
<p><code class="inline"><a class="l_k" href="functions/exec.html">exec</a></code>'s handling of arguments is now more clearly documented.</p>
</li>
<li>
<p><code class="inline"><a class="l_k" href="functions/eval.html">eval</a> <span class="w">EXPR</span></code>
 now has caveats about expanding floating point numbers in some
locales.</p>
</li>
<li>
<p><code class="inline"><a class="l_k" href="functions/goto.html">goto</a> <span class="j">EXPR</span></code>
 is now documented to handle an expression that evalutes to a
code reference as if it was <code class="inline"><a class="l_k" href="functions/goto.html">goto</a> <span class="i">&amp;$coderef</span></code>
.  This behavior is at least ten
years old.</p>
</li>
<li>
<p>Since Perl v5.10, it has been possible for subroutines in <code class="inline"><span class="i">@INC</span></code>
 to return
a reference to a scalar holding initial source code to prepend to the file.
This is now documented.</p>
</li>
<li>
<p>The documentation of <code class="inline"><a class="l_k" href="functions/ref.html">ref</a></code> has been updated to recommend the use of
<code class="inline"><span class="w">blessed</span></code>
, <code class="inline"><span class="w">isa</span></code>
 and <code class="inline"><span class="w">reftype</span></code>
 when dealing with references to blessed
objects.</p>
</li>
</ul>
<a name="the-perlguts-manpage"></a><h3><a href="perlguts.html">perlguts</a></h3>
<ul>
<li>
<p>Numerous minor changes have been made to reflect changes made to the perl
internals in this release.</p>
</li>
<li>
<p>New sections on <a href="perlguts.html#Read-Only-Values">Read-Only Values</a> and
<a href="perlguts.html#Copy-on-Write">Copy on Write</a> have been added.</p>
</li>
</ul>
<a name="the-perlhack-manpage"></a><h3><a href="perlhack.html">perlhack</a></h3>
<ul>
<li>
<p>The <a href="perlhack.html#SUPER-QUICK-PATCH-GUIDE">Super Quick Patch Guide</a> section has
been updated.</p>
</li>
</ul>
<a name="the-perlhacktips-manpage"></a><h3><a href="perlhacktips.html">perlhacktips</a></h3>
<ul>
<li>
<p>The documentation has been updated to include some more examples of <code class="inline"><span class="w">gdb</span></code>

usage.</p>
</li>
</ul>
<a name="the-perllexwarn-manpage"></a><h3><a href="perllexwarn.html">perllexwarn</a></h3>
<ul>
<li>
<p>The <a href="perllexwarn.html">perllexwarn</a> documentation used to describe the hierarchy of warning
categories understood by the <a href="warnings.html">warnings</a> pragma. That description has now
been moved to the <a href="warnings.html">warnings</a> documentation itself, leaving <a href="perllexwarn.html">perllexwarn</a>
as a stub that points to it. This change consolidates all documentation for
lexical warnings in a single place.</p>
</li>
</ul>
<a name="the-perllocale-manpage"></a><h3><a href="perllocale.html">perllocale</a></h3>
<ul>
<li>
<p>The documentation now mentions <i>fc()</i> and <code class="inline">\<span class="w">F</span></code>
, and includes many
clarifications and corrections in general.</p>
</li>
</ul>
<a name="the-perlop-manpage"></a><h3><a href="perlop.html">perlop</a></h3>
<ul>
<li>
<p>The language design of Perl has always called for monomorphic operators.
This is now mentioned explicitly.</p>
</li>
</ul>
<a name="the-perlopentut-manpage"></a><h3><a href="perlopentut.html">perlopentut</a></h3>
<ul>
<li>
<p>The <code class="inline"><a class="l_k" href="functions/open.html">open</a></code> tutorial has been completely rewritten by Tom Christiansen, and now
focuses on covering only the basics, rather than providing a comprehensive
reference to all things openable.  This rewrite came as the result of a
vigorous discussion on perl5-porters kicked off by a set of improvements
written by Alexander Hartmaier to the existing <a href="perlopentut.html">perlopentut</a>.  A "more than
you ever wanted to know about <code class="inline"><a class="l_k" href="functions/open.html">open</a></code>" document may follow in subsequent
versions of perl.</p>
</li>
</ul>
<a name="the-perlre-manpage"></a><h3><a href="perlre.html">perlre</a></h3>
<ul>
<li>
<p>The fact that the regexp engine makes no effort to call (?{}) and (??{})
constructs any specified number of times (although it will basically DWIM
in case of a successful match) has been documented.</p>
</li>
<li>
<p>The <code class="inline"><span class="q">/r</span></code>
 modifier (for non-destructive substitution) is now documented. [perl
#119151]</p>
</li>
<li>
<p>The documentation for <code class="inline">/x</code> and <code class="inline"><span class="s">(</span><span class="q">?# comment)</span></code>
 has been expanded and clarified.</p>
</li>
</ul>
<a name="the-perlreguts-manpage"></a><h3><a href="perlreguts.html">perlreguts</a></h3>
<ul>
<li>
<p>The documentation has been updated in the light of recent changes to
<i>regcomp.c</i>.</p>
</li>
</ul>
<a name="the-perlsub-manpage"></a><h3><a href="perlsub.html">perlsub</a></h3>
<ul>
<li>
<p>The need to predeclare recursive functions with prototypes in order for the
prototype to be honoured in the recursive call is now documented. [perl #2726]</p>
</li>
<li>
<p>A list of subroutine names used by the perl implementation is now included.
[perl #77680]</p>
</li>
</ul>
<a name="the-perltrap-manpage"></a><h3><a href="perltrap.html">perltrap</a></h3>
<ul>
<li>
<p>There is now a <a href="perltrap.html#JavaScript-Traps">JavaScript</a> section.</p>
</li>
</ul>
<a name="the-perlunicode-manpage"></a><h3><a href="perlunicode.html">perlunicode</a></h3>
<ul>
<li>
<p>The documentation has been updated to reflect <code class="inline"><span class="w">Bidi_Class</span></code>
 changes in
Unicode 6.3.</p>
</li>
</ul>
<a name="the-perlvar-manpage"></a><h3><a href="perlvar.html">perlvar</a></h3>
<ul>
<li>
<p>A new section explaining the performance issues of $`, $&amp; and $', including
workarounds and changes in different versions of Perl, has been added.</p>
</li>
<li>
<p>Three <a href="English.html">English</a> variable names which have long been documented but do not
actually exist have been removed from the documentation.  These were
<code class="inline"><span class="i">$OLD_PERL_VERSION</span></code>
, <code class="inline"><span class="i">$OFMT</span></code>
, and <code class="inline"><span class="i">$ARRAY_BASE</span></code>
.</p>
</li>
</ul>
<a name="the-perlxs-manpage"></a><h3><a href="perlxs.html">perlxs</a></h3>
<ul>
<li>
<p>Several problems in the <code class="inline"><span class="w">MY_CXT</span></code>
 example have been fixed.</p>
</li>
</ul>
<a name="Diagnostics"></a><h1>Diagnostics</h1>
<p>The following additions or changes have been made to diagnostic output,
including warnings and fatal error messages.  For the complete list of
diagnostic messages, see <a href="perldiag.html">perldiag</a>.</p>
<a name="New-Diagnostics"></a><h2>New Diagnostics</h2>
<a name="New-Errors"></a><h3>New Errors</h3>
<ul>
<li>
<p><a href="perldiag.html#delete-argument-is-index%2fvalue-array-slice%2c-use-array-slice">delete argument is index/value array slice, use array slice</a></p>
<p>(F) You used index/value array slice syntax (<code class="inline"><span class="i">%array</span>[...]</code>
) as the argument to
<code class="inline"><a class="l_k" href="functions/delete.html">delete</a></code>.  You probably meant <code class="inline"><span class="i">@array</span>[...]</code>
 with an @ symbol instead.</p>
</li>
<li>
<p><a href="perldiag.html#delete-argument-is-key%2fvalue-hash-slice%2c-use-hash-slice">delete argument is key/value hash slice, use hash slice</a></p>
<p>(F) You used key/value hash slice syntax (<code class="inline"><span class="i">%hash</span>{...}</code>
) as the argument to
<code class="inline"><a class="l_k" href="functions/delete.html">delete</a></code>.  You probably meant <code class="inline"><span class="i">@hash</span>{...}</code>
 with an @ symbol instead.</p>
</li>
<li>
<p><a href="perldiag.html#Magical-list-constants-are-not-supported">Magical list constants are not supported</a></p>
<p>(F) You assigned a magical array to a stash element, and then tried to use the
subroutine from the same slot.  You are asking Perl to do something it cannot
do, details subject to change between Perl versions.</p>
</li>
<li>
<p>Added <a href="perldiag.html#Setting-%24%2f-to-%25s-reference-is-forbidden">Setting $/ to a %s reference is forbidden</a></p>
</li>
</ul>
<a name="New-Warnings"></a><h3>New Warnings</h3>
<ul>
<li>
<p><a href="perldiag.html#push-on-reference-is-experimental">%s on reference is experimental</a>:</p>
<p>The "auto-deref" feature is experimental.</p>
<p>Starting in v5.14.0, it was possible to use push, pop, keys, and other
built-in functions not only on aggregate types, but on references to
them.  The feature was not deployed to its original intended
specification, and now may become redundant to postfix dereferencing.
It has always been categorized as an experimental feature, and in
v5.20.0 is carries a warning as such.</p>
<p>Warnings will now be issued at compile time when these operations are
detected.</p>
<pre class="verbatim"><ol><li>  <a class="l_k" href="functions/no.html">no</a> <a class="l_k" href="functions/if.html">if</a> <span class="i">$]</span> &gt;= <span class="n">5.01908</span><span class="cm">,</span> <span class="w">warnings</span> <span class="cm">=&gt;</span> <span class="q">&quot;experimental::autoderef&quot;</span><span class="sc">;</span></li></ol></pre><p>Consider, though, replacing the use of these features, as they may
change behavior again before becoming stable.</p>
</li>
<li>
<p><a href="perldiag.html#A-sequence-of-multiple-spaces-in-a-charnames-alias-definition-is-deprecated">A sequence of multiple spaces in a charnames alias definition is deprecated</a></p>
<p><a href="perldiag.html#Trailing-white-space-in-a-charnames-alias-definition-is-deprecated">Trailing white-space in a charnames alias definition is deprecated</a></p>
<p>These two deprecation warnings involving <code class="inline">\<span class="i">N</span><span class="s">{</span>...<span class="s">}</span></code>
 were incorrectly
implemented.  They did not warn by default (now they do) and could not be
made fatal via <code class="inline"><a class="l_k" href="functions/use.html">use</a> <span class="w">warnings</span> <span class="w">FATAL</span> <span class="cm">=&gt;</span> <span class="q">&#39;deprecated&#39;</span></code>
 (now they can).</p>
</li>
<li>
<p><a href="perldiag.html#Attribute-prototype(%25s)-discards-earlier-prototype-attribute-in-same-sub">Attribute prototype(%s) discards earlier prototype attribute in same sub</a></p>
<p>(W misc) A sub was declared as <code class="inline"><a name="foo"></a>sub <span class="m">foo</span> <span class="co">:</span> <span class="q">prototype(A)</span> <span class="co">:</span> <span class="q">prototype(B)</span> <span class="s">{</span><span class="s">}</span></code>
, for
example.  Since each sub can only have one prototype, the earlier
declaration(s) are discarded while the last one is applied.</p>
</li>
<li>
<p><a href="perldiag.html#Invalid-%5c0-character-in-%25s-for-%25s%3a-%25s%5c0%25s">Invalid \0 character in %s for %s: %s\0%s</a></p>
<p>(W syscalls) Embedded \0 characters in pathnames or other system call arguments
produce a warning as of 5.20.  The parts after the \0 were formerly ignored by
system calls.</p>
</li>
<li>
<p><a href="perldiag.html#Matched-non-Unicode-code-point-0x%25X-against-Unicode-property%3b-may-not-be-portable">Matched non-Unicode code point 0x%X against Unicode property; may not be portable</a>.</p>
<p>This replaces the message "Code point 0x%X is not Unicode, all \p{} matches
fail; all \P{} matches succeed".</p>
</li>
<li>
<p><a href="perldiag.html#Missing-'%5d'-in-prototype-for-%25s-%3a-%25s">Missing ']' in prototype for %s : %s</a></p>
<p>(W illegalproto) A grouping was started with <code class="inline">[</code> but never closed with <code class="inline">]</code>.</p>
</li>
<li>
<p><a href="perldiag.html#Possible-precedence-issue-with-control-flow-operator">Possible precedence issue with control flow operator</a></p>
<p>(W syntax) There is a possible problem with the mixing of a control flow
operator (e.g. <code class="inline"><a class="l_k" href="functions/return.html">return</a></code>) and a low-precedence operator like <code class="inline">or</code>
.  Consider:</p>
<pre class="verbatim"><ol><li>    <a class="l_k" href="functions/sub.html">sub</a> <span class="s">{</span> <a class="l_k" href="functions/return.html">return</a> <span class="i">$a</span> <a class="l_k" href="functions/or.html">or</a> <span class="i">$b</span><span class="sc">;</span> <span class="s">}</span></li></ol></pre><p>This is parsed as:</p>
<pre class="verbatim"><ol><li>    <a class="l_k" href="functions/sub.html">sub</a> <span class="s">{</span> <span class="s">(</span><a class="l_k" href="functions/return.html">return</a> <span class="i">$a</span><span class="s">)</span> <a class="l_k" href="functions/or.html">or</a> <span class="i">$b</span><span class="sc">;</span> <span class="s">}</span></li></ol></pre><p>Which is effectively just:</p>
<pre class="verbatim"><ol><li>    <a class="l_k" href="functions/sub.html">sub</a> <span class="s">{</span> <a class="l_k" href="functions/return.html">return</a> <span class="i">$a</span><span class="sc">;</span> <span class="s">}</span></li></ol></pre><p>Either use parentheses or the high-precedence variant of the operator.</p>
<p>Note this may be also triggered for constructs like:</p>
<pre class="verbatim"><ol><li>    <a class="l_k" href="functions/sub.html">sub</a> <span class="s">{</span> <span class="n">1</span> <a class="l_k" href="functions/if.html">if</a> <a class="l_k" href="functions/die.html">die</a><span class="sc">;</span> <span class="s">}</span></li></ol></pre></li>
<li>
<p><a href="perldiag.html#Postfix-dereference-is-experimental">Postfix dereference is experimental</a></p>
<p>(S experimental::postderef) This warning is emitted if you use the experimental
postfix dereference syntax.  Simply suppress the warning if you want to use the
feature, but know that in doing so you are taking the risk of using an
experimental feature which may change or be removed in a future Perl version:</p>
<pre class="verbatim"><ol><li>    <a class="l_k" href="functions/no.html">no</a> <span class="w">warnings</span> <span class="q">&quot;experimental::postderef&quot;</span><span class="sc">;</span></li><li>    <a class="l_k" href="functions/use.html">use</a> <span class="w">feature</span> <span class="q">&quot;postderef&quot;</span><span class="cm">,</span> <span class="q">&quot;postderef_qq&quot;</span><span class="sc">;</span></li><li>    <span class="i">$ref</span><span class="i">-&gt;$</span>*<span class="sc">;</span></li><li>    <span class="i">$aref</span>-&gt;<span class="i">@*</span><span class="sc">;</span></li><li>    <span class="i">$aref</span>-&gt;<span class="i">@[</span><span class="i">@indices</span>]<span class="sc">;</span></li><li>    ... <span class="w">etc</span> ...</li></ol></pre></li>
<li>
<p><a href="perldiag.html#Prototype-'%25s'-overridden-by-attribute-'prototype(%25s)'-in-%25s">Prototype '%s' overridden by attribute 'prototype(%s)' in %s</a></p>
<p>(W prototype) A prototype was declared in both the parentheses after the sub
name and via the prototype attribute.  The prototype in parentheses is useless,
since it will be replaced by the prototype from the attribute before it's ever
used.</p>
</li>
<li>
<p><a href="perldiag.html#Scalar-value-%40%25s%5b%25s%5d-better-written-as-%24%25s%5b%25s%5d">Scalar value @%s[%s] better written as $%s[%s]</a></p>
<p>(W syntax) In scalar context, you've used an array index/value slice (indicated
by %) to select a single element of an array.  Generally it's better to ask for
a scalar value (indicated by $).  The difference is that <code class="inline"><span class="i">$foo</span>[<span class="i">&amp;bar</span>]</code>
 always
behaves like a scalar, both in the value it returns and when evaluating its
argument, while <code class="inline"><span class="i">%foo</span>[<span class="i">&amp;bar</span>]</code>
 provides a list context to its subscript, which
can do weird things if you're expecting only one subscript.  When called in
list context, it also returns the index (what <code class="inline"><span class="i">&amp;bar</span></code>
 returns) in addition to
the value.</p>
</li>
<li>
<p><a href="perldiag.html#Scalar-value-%40%25s%7b%25s%7d-better-written-as-%24%25s%7b%25s%7d">Scalar value @%s{%s} better written as $%s{%s}</a></p>
<p>(W syntax) In scalar context, you've used a hash key/value slice (indicated by
%) to select a single element of a hash.  Generally it's better to ask for a
scalar value (indicated by $).  The difference is that <code class="inline"><span class="i">$foo</span>{<span class="i">&amp;bar</span>}</code>
 always
behaves like a scalar, both in the value it returns and when evaluating its
argument, while <code class="inline"><span class="i">@foo</span>{<span class="i">&amp;bar</span>}</code>
 and provides a list context to its subscript,
which can do weird things if you're expecting only one subscript.  When called
in list context, it also returns the key in addition to the value.</p>
</li>
<li>
<p><a href="perldiag.html#Setting-%24%2f-to-a-reference-to-%25s-as-a-form-of-slurp-is-deprecated%2c-treating-as-undef">Setting $/ to a reference to %s as a form of slurp is deprecated, treating as undef</a></p>
</li>
<li>
<p><a href="perldiag.html#Unexpected-exit-%25u">Unexpected exit %u</a></p>
<p>(S) exit() was called or the script otherwise finished gracefully when
<code class="inline"><span class="w">PERL_EXIT_WARN</span></code>
 was set in <code class="inline"><span class="w">PL_exit_flags</span></code>
.</p>
</li>
<li>
<p><a href="perldiag.html#Unexpected-exit-failure-%25d">Unexpected exit failure %d</a></p>
<p>(S) An uncaught die() was called when <code class="inline"><span class="w">PERL_EXIT_WARN</span></code>
 was set in
<code class="inline"><span class="w">PL_exit_flags</span></code>
.</p>
</li>
<li>
<p><a href="perldiag.html#Use-of-literal-control-characters-in-variable-names-is-deprecated">Use of literal control characters in variable names is deprecated</a></p>
<p>(D deprecated) Using literal control characters in the source to refer to the
^FOO variables, like $^X and ${^GLOBAL_PHASE} is now deprecated.  This only
affects code like $\cT, where \cT is a control (like a <code class="inline"><span class="w">SOH</span></code>
) in the
source code: ${"\cT"} and $^T remain valid.</p>
</li>
<li>
<p><a href="perldiag.html#Useless-use-of-greediness-modifier-'%25c'-in-regex%3b-marked-by-%3c---HERE-in-m%2f%25s%2f">Useless use of greediness modifier</a></p>
<p>This fixes [Perl #42957].</p>
</li>
</ul>
<a name="Changes-to-Existing-Diagnostics"></a><h2>Changes to Existing Diagnostics</h2>
<ul>
<li>
<p>Warnings and errors from the regexp engine are now UTF-8 clean.</p>
</li>
<li>
<p>The "Unknown switch condition" error message has some slight changes.  This
error triggers when there is an unknown condition in a <code class="inline"><span class="s">(</span><span class="q">?(foo))</span></code>
 conditional.
The error message used to read:</p>
<pre class="verbatim"><ol><li>    <span class="w">Unknown</span> switch <span class="w">condition</span> <span class="s">(</span><span class="q">?(%s in regex;</span></li></ol></pre><p>But what %s could be was mostly up to luck.  For <code class="inline"><span class="s">(</span><span class="q">?(foobar))</span></code>
, you might have
seen "fo" or "f".  For Unicode characters, you would generally get a corrupted
string.  The message has been changed to read:</p>
<pre class="verbatim"><ol><li>    <span class="w">Unknown</span> switch <span class="w">condition</span> <span class="s">(</span><span class="q">?(...)) in regex;</span></li></ol></pre><p>Additionally, the <code class="inline"><span class="q">&#39;&lt;-- HERE&#39;</span></code>
 marker in the error will now point to the
correct spot in the regex.</p>
</li>
<li>
<p>The "%s "\x%X" does not map to Unicode" warning is now correctly listed as a
severe warning rather than as a fatal error.</p>
</li>
<li>
<p>Under rare circumstances, one could get a "Can't coerce readonly REF to
string" instead of the customary "Modification of a read-only value".  This
alternate error message has been removed.</p>
</li>
<li>
<p>"Ambiguous use of * resolved as operator *": This and similar warnings
about "%" and "&amp;" used to occur in some circumstances where there was no
operator of the type cited, so the warning was completely wrong.  This has
been fixed [perl #117535, #76910].</p>
</li>
<li>
<p>Warnings about malformed subroutine prototypes are now more consistent in
how the prototypes are rendered.  Some of these warnings would truncate
prototypes containing nulls.  In other cases one warning would suppress
another.  The warning about illegal characters in prototypes no longer says
"after '_'" if the bad character came before the underscore.</p>
</li>
<li>
<p><a href="perldiag.html#Perl-folding-rules-are-not-up-to-date-for-0x%25X%3b-please-use-the-perlbug-utility-to-report%3b-in-regex%3b-marked-by-%3c---HERE-in-m%2f%25s%2f">Perl folding rules are not up-to-date for 0x%X; please use the perlbug utility to report; in regex; marked by &lt;-- HERE in m/%s/</a></p>
<p>This message is now only in the regexp category, and not in the deprecated
category.  It is still a default (i.e., severe) warning [perl #89648].</p>
</li>
<li>
<p><a href="perldiag.html#%25%25s%5b%25s%5d-in-scalar-context-better-written-as-%24%25s%5b%25s%5d">%%s[%s] in scalar context better written as $%s[%s]</a></p>
<p>This warning now occurs for any <code class="inline"><span class="i">%array</span>[<span class="i">$index</span>]</code>
 or <code class="inline"><span class="i">%hash</span>{<span class="w">key</span>}</code>
 known to
be in scalar context at compile time.  Previously it was worded "Scalar
value %%s[%s] better written as $%s[%s]".</p>
</li>
<li>
<p><a href="perldiag.html#Switch-condition-not-recognized-in-regex%3b-marked-by-%3c---HERE-in-m%2f%25s%2f">Switch condition not recognized in regex; marked by &lt;-- HERE in m/%s/</a>:</p>
<p>The description for this diagnostic has been extended to cover all cases where the warning may occur.
Issues with the positioning of the arrow indicator have also been resolved.</p>
</li>
<li>
<p>The error messages for <code class="inline"><a class="l_k" href="functions/my.html">my($a?$b$c)</a></code> and <code class="inline"><a class="l_k" href="functions/my.html">my(do{})</a></code> now mention "conditional
expression" and "do block", respectively, instead of reading 'Can't declare
null operation in "my"'.</p>
</li>
<li>
<p>When <code class="inline"><a class="l_k" href="functions/use.html">use</a> <span class="w">re</span> <span class="q">&quot;debug&quot;</span></code>
 executes a regex containing a backreference, the
debugging output now shows what string is being matched.</p>
</li>
<li>
<p>The now fatal error message <code class="inline"><span class="w">Character</span> <span class="w">following</span> <span class="q">&quot;\c&quot;</span> <span class="w">must</span> <span class="w">be</span> <span class="w">ASCII</span></code>
 has been
reworded as <code class="inline"><span class="w">Character</span> <span class="w">following</span> <span class="q">&quot;\c&quot;</span> <span class="w">must</span> <span class="w">be</span> <span class="w">printable</span> <span class="w">ASCII</span></code>
 to emphasize
that in <code class="inline">\c<i>X</i></code>, <i>X</i> must be a <i>printable (non-control)</i> ASCII character.</p>
</li>
</ul>
<a name="Utility-Changes"></a><h1>Utility Changes</h1>
<a name="the-a2p-manpage"></a><h3><a href="http://search.cpan.org/perldoc/a2p">a2p</a></h3>
<ul>
<li>
<p>A possible crash from an off-by-one error when trying to access before the
beginning of a buffer has been fixed.  [perl #120244]</p>
</li>
</ul>
<a name="_bisect.pl_"></a><h3><i>bisect.pl</i></h3>
<p>The git bisection tool <i>Porting/bisect.pl</i> has had many enhancements.</p>
<p>It is provided as part of the source distribution but not installed because
it is not self-contained as it relies on being run from within a git
checkout. Note also that it makes no attempt to fix tests, correct runtime
bugs or make something useful to install - its purpose is to make minimal
changes to get any historical revision of interest to build and run as close
as possible to "as-was", and thereby make <code class="inline"><span class="w">git</span> <span class="w">bisect</span></code>
 easy to use.</p>
<ul>
<li>
<p>Can optionally run the test case with a timeout.</p>
</li>
<li>
<p>Can now run in-place in a clean git checkout.</p>
</li>
<li>
<p>Can run the test case under <code class="inline"><span class="w">valgrind</span></code>
.</p>
</li>
<li>
<p>Can apply user supplied patches and fixes to the source checkout before
building.</p>
</li>
<li>
<p>Now has fixups to enable building several more historical ranges of bleadperl,
which can be useful for pinpointing the origins of bugs or behaviour changes.</p>
</li>
</ul>
<a name="the-find2perl-manpage"></a><h3><a href="http://search.cpan.org/perldoc/find2perl">find2perl</a></h3>
<ul>
<li>
<p><a href="http://search.cpan.org/perldoc/find2perl">find2perl</a> now handles <code class="inline">?</code> wildcards correctly.  [perl #113054]</p>
</li>
</ul>
<a name="the-perlbug-manpage"></a><h3><a href="perlbug.html">perlbug</a></h3>
<ul>
<li>
<p><i>perlbug</i> now has a <code class="inline">-p</code>
 option for attaching patches with a bug report.</p>
</li>
<li>
<p><a href="perlbug.html">perlbug</a> has been modified to supply the report template with CRLF line
endings on Windows.
[<a href="http://search.cpan.org/perldoc/https:#%2frt.perl.org%2fPublic%2fBug%2fDisplay.html%3fid%3d121277">perl #121277</a>]</p>
</li>
<li>
<p><a href="perlbug.html">perlbug</a> now makes as few assumptions as possible about the encoding of the
report.  This will likely change in the future to assume UTF-8 by default but
allow a user override.</p>
</li>
</ul>
<a name="Configuration-and-Compilation"></a><h1>Configuration and Compilation</h1>
<ul>
<li>
<p>The <i>Makefile.PL</i> for <a href="SDBM_File.html">SDBM_File</a> now generates a better <i>Makefile</i>, which
avoids a race condition during parallel makes, which could cause the build to
fail.  This is the last known parallel make problem (on *nix platforms), and
therefore we believe that a parallel make should now always be error free.</p>
</li>
<li>
<p><i>installperl</i> and <i>installman</i>'s option handling has been refactored to use
<a href="Getopt/Long.html">Getopt::Long</a>. Both are used by the <i>Makefile</i> <code class="inline"><span class="w">install</span></code>
 targets, and
are not installed, so these changes are only likely to affect custom
installation scripts.</p>
<ul>
<li>
<p>Single letter options now also have long names.</p>
</li>
<li>
<p>Invalid options are now rejected.</p>
</li>
<li>
<p>Command line arguments that are not options are now rejected.</p>
</li>
<li>
<p>Each now has a <code class="inline">--<span class="w">help</span></code>
 option to display the usage message.</p>
</li>
</ul>
<p>The behaviour for all valid documented invocations is unchanged.</p>
</li>
<li>
<p>Where possible, the build now avoids recursive invocations of <i>make</i> when
building pure-Perl extensions, without removing any parallelism from the
build. Currently around 80 extensions can be processed directly by the
<i>make_ext.pl</i> tool, meaning that 80 invocations of <i>make</i> and 160
invocations of <i>miniperl</i> are no longer made.</p>
</li>
<li>
<p>The build system now works correctly when compiling under GCC or Clang with
link-time optimization enabled (the <code class="inline">-<span class="w">flto</span></code>
 option). [perl #113022]</p>
</li>
<li>
<p>Distinct library basenames with <code class="inline"><span class="w">d_libname_unique</span></code>
.</p>
<p>When compiling perl with this option, the library files for XS modules are
named something "unique" -- for example, Hash/Util/Util.so becomes
Hash/Util/PL_Hash__Util.so.  This behavior is similar to what currently
happens on VMS, and serves as groundwork for the Android port.</p>
</li>
<li>
<p><code class="inline"><span class="w">sysroot</span></code>
 option to indicate the logical root directory under gcc and clang.</p>
<p>When building with this option set, both Configure and the compilers search
for all headers and libraries under this new sysroot, instead of /.</p>
<p>This is a huge time saver if cross-compiling, but can also help
on native builds if your toolchain's files have non-standard locations.</p>
</li>
<li>
<p>The cross-compilation model has been renovated.
There's several new options, and some backwards-incompatible changes:</p>
<p>We now build binaries for miniperl and generate_uudmap to be used on the host,
rather than running every miniperl call on the target; this means that, short
of 'make test', we no longer need access to the target system once Configure is
done.  You can provide already-built binaries through the <code class="inline"><span class="w">hostperl</span></code>
 and
<code class="inline"><span class="w">hostgenerate</span></code>
 options to Configure.</p>
<p>Additionally, if targeting an EBCDIC platform from an ASCII host,
or viceversa, you'll need to run Configure with <code class="inline">-<span class="w">Uhostgenerate</span></code>
, to
indicate that generate_uudmap should be run on the target.</p>
<p>Finally, there's also a way of having Configure end early, right after
building the host binaries, by cross-compiling without specifying a
<code class="inline"><span class="w">targethost</span></code>
.</p>
<p>The incompatible changes include no longer using xconfig.h, xlib, or
Cross.pm, so canned config files and Makefiles will have to be updated.</p>
</li>
<li>
<p>Related to the above, there is now a way of specifying the location of sh
(or equivalent) on the target system: <code class="inline"><span class="w">targetsh</span></code>
.</p>
<p>For example, Android has its sh in /system/bin/sh, so if cross-compiling
from a more normal Unixy system with sh in /bin/sh, "targetsh" would end
up as /system/bin/sh, and "sh" as /bin/sh.</p>
</li>
<li>
<p>By default, <b>gcc</b> 4.9 does some optimizations that break perl.  The <b>-fwrapv</b>
option disables those optimizations (and probably others), so for <b>gcc</b> 4.3
and later (since the there might be similar problems lurking on older versions
too, but <b>-fwrapv</b> was broken before 4.3, and the optimizations probably won't
go away), <i>Configure</i> now adds <b>-fwrapv</b> unless the user requests
<b>-fno-wrapv</b>, which disables <b>-fwrapv</b>, or <b>-fsanitize=undefined</b>, which
turns the overflows <b>-fwrapv</b> ignores into runtime errors.
[<a href="http://search.cpan.org/perldoc/https:#%2frt.perl.org%2fPublic%2fBug%2fDisplay.html%3fid%3d121505">perl #121505</a>]</p>
</li>
</ul>
<a name="Testing"></a><h1>Testing</h1>
<ul>
<li>
<p>The <code class="inline"><span class="w">test</span>.<span class="w">valgrind</span></code>
 make target now allows tests to be run in parallel.
This target allows Perl's test suite to be run under Valgrind, which detects
certain sorts of C programming errors, though at significant cost in running
time. On suitable hardware, allowing parallel execution claws back a lot of
that additional cost. [perl #121431]</p>
</li>
<li>
<p>Various tests in <i>t/porting/</i> are no longer skipped when the perl
<i>.git</i> directory is outside the perl tree and pointed to by
<code class="inline"><span class="i">$GIT_DIR</span></code>
. [perl #120505]</p>
</li>
<li>
<p>The test suite no longer fails when the user's interactive shell maintains a
<code class="inline"><span class="i">$PWD</span></code>
 environment variable, but the <i>/bin/sh</i> used for running tests
doesn't.</p>
</li>
</ul>
<a name="Platform-Support"></a><h1>Platform Support</h1>
<a name="New-Platforms"></a><h2>New Platforms</h2>
<ul>
<li><a name="Android"></a><b>Android</b>
<p>Perl can now be built for Android, either natively or through
cross-compilation, for all three currently available architectures (ARM,
MIPS, and x86), on a wide range of versions.</p>
</li>
<li><a name="Bitrig"></a><b>Bitrig</b>
<p>Compile support has been added for Bitrig, a fork of OpenBSD.</p>
</li>
<li><a name="FreeMiNT"></a><b>FreeMiNT</b>
<p>Support has been added for FreeMiNT, a free open-source OS for the Atari ST
system and its successors, based on the original MiNT that was officially
adopted by Atari.</p>
</li>
<li><a name="Synology"></a><b>Synology</b>
<p>Synology ships its NAS boxes with a lean Linux distribution (DSM) on relative
cheap CPU's (like the Marvell Kirkwood mv6282 - ARMv5tel or Freescale QorIQ
P1022 ppc - e500v2) not meant for workstations or development. These boxes
should build now. The basic problems are the non-standard location for tools.</p>
</li>
</ul>
<a name="Discontinued-Platforms"></a><h2>Discontinued Platforms</h2>
<ul>
<li><a name="sfio"></a><b><code class="inline"><span class="w">sfio</span></code>
</b>
<p>Code related to supporting the <code class="inline"><span class="w">sfio</span></code>
 I/O system has been removed.</p>
<p>Perl 5.004 added support to use the native API of <code class="inline"><span class="w">sfio</span></code>
, AT&amp;T's Safe/Fast
I/O library. This code still built with v5.8.0, albeit with many regression
tests failing, but was inadvertently broken before the v5.8.1 release,
meaning that it has not worked on any version of Perl released since then.
In over a decade we have received no bug reports about this, hence it is clear
that no-one is using this functionality on any version of Perl that is still
supported to any degree.</p>
</li>
<li><a name="AT%26T-3b1"></a><b>AT&amp;T 3b1</b>
<p>Configure support for the 3b1, also known as the AT&amp;T Unix PC (and the similar
AT&amp;T 7300), has been removed.</p>
</li>
<li><a name="DG%2fUX"></a><b>DG/UX</b>
<p>DG/UX was a Unix sold by Data General. The last release was in April 2001.
It only runs on Data General's own hardware.</p>
</li>
<li><a name="EBCDIC"></a><b>EBCDIC</b>
<p>In the absence of a regular source of smoke reports, code intended to support
native EBCDIC platforms will be removed from perl before 5.22.0.</p>
</li>
</ul>
<a name="Platform-Specific-Notes"></a><h2>Platform-Specific Notes</h2>
<ul>
<li><a name="Cygwin"></a><b>Cygwin</b>
<ul>
<li>
<p>recv() on a connected handle would populate the returned sender
address with whatever happened to be in the working buffer.  recv()
now uses a workaround similar to the Win32 recv() wrapper and returns
an empty string when recvfrom(2) doesn't modify the supplied address
length. [perl #118843]</p>
</li>
<li>
<p>Fixed a build error in cygwin.c on Cygwin 1.7.28.</p>
<p>Tests now handle the errors that occur when <code class="inline"><span class="w">cygserver</span></code>
 isn't
running.</p>
</li>
</ul>
</li>
<li><a name="GNU%2fHurd"></a><b>GNU/Hurd</b>
<p>The BSD compatibility library <code class="inline"><span class="w">libbsd</span></code>
 is no longer required for builds.</p>
</li>
<li><a name="Linux"></a><b>Linux</b>
<p>The hints file now looks for <code class="inline"><span class="w">libgdbm_compat</span></code>
 only if <code class="inline"><span class="w">libgdbm</span></code>
 itself is
also wanted. The former is never useful without the latter, and in some
circumstances, including it could actually prevent building.</p>
</li>
<li><a name="Mac-OS"></a><b>Mac OS</b>
<p>The build system now honors an <code class="inline"><span class="w">ld</span></code>
 setting supplied by the user running
<i>Configure</i>.</p>
</li>
<li><a name="MidnightBSD"></a><b>MidnightBSD</b>
<p><code class="inline"><span class="w">objformat</span></code>
 was removed from version 0.4-RELEASE of MidnightBSD and had been
deprecated on earlier versions.  This caused the build environment to be
erroneously configured for <code class="inline"><span class="w">a</span>.<span class="w">out</span></code>
 rather than <code class="inline"><span class="w">elf</span></code>
.  This has been now
been corrected.</p>
</li>
<li><a name="Mixed-endian-platforms"></a><b>Mixed-endian platforms</b>
<p>The code supporting <code class="inline"><a class="l_k" href="functions/pack.html">pack</a></code> and <code class="inline"><a class="l_k" href="functions/unpack.html">unpack</a></code> operations on mixed endian
platforms has been removed. We believe that Perl has long been unable to
build on mixed endian architectures (such as PDP-11s), so we don't think
that this change will affect any platforms which were able to build v5.18.0.</p>
</li>
<li><a name="VMS"></a><b>VMS</b>
<ul>
<li>
<p>The <code class="inline"><span class="w">PERL_ENV_TABLES</span></code>
 feature to control the population of %ENV at perl
start-up was broken in Perl 5.16.0 but has now been fixed.</p>
</li>
<li>
<p>Skip access checks on remotes in opendir().  [perl #121002]</p>
</li>
<li>
<p>A check for glob metacharacters in a path returned by the
<a href="functions/glob.html">glob</a> operator has been replaced with a check for VMS
wildcard characters.  This saves a significant number of unnecessary
<a href="functions/lstat.html">lstat</a> calls such that some simple glob operations become
60-80% faster.</p>
</li>
</ul>
</li>
<li><a name="Win32"></a><b>Win32</b>
<ul>
<li>
<p><code class="inline"><a class="l_k" href="functions/rename.html">rename</a></code> and <code class="inline"><a class="l_k" href="functions/link.html">link</a></code> on Win32 now set $! to ENOSPC and EDQUOT when
appropriate.  [perl #119857]</p>
</li>
<li>
<p>The BUILD_STATIC and ALL_STATIC makefile options for linking some or (nearly)
all extensions statically (into perl520.dll, and into a separate
perl-static.exe too) were broken for MinGW builds. This has now been fixed.</p>
<p>The ALL_STATIC option has also been improved to include the Encode and Win32
extensions (for both VC++ and MinGW builds).</p>
</li>
<li>
<p>Support for building with Visual C++ 2013 has been added.  There are currently
two possible test failures (see <a href="perlwin32.html#Testing-Perl-on-Windows">Testing Perl on Windows in perlwin32</a>) which
will hopefully be resolved soon.</p>
</li>
<li>
<p>Experimental support for building with Intel C++ Compiler has been added.  The
nmake makefile (win32/Makefile) and the dmake makefile (win32/makefile.mk) can
be used.  A "nmake test" will not pass at this time due to <i>cpan/CGI/t/url.t</i>.</p>
</li>
<li>
<p>Killing a process tree with <a href="functions/kill.html">kill</a> and a negative signal, was broken
starting in 5.18.0. In this bug, <code class="inline"><a class="l_k" href="functions/kill.html">kill</a></code> always returned 0 for a negative
signal even for valid PIDs, and no processes were terminated. This has been
fixed [perl #121230].</p>
</li>
<li>
<p>The time taken to build perl on Windows has been reduced quite significantly
(time savings in the region of 30-40% are typically seen) by reducing the
number of, usually failing, I/O calls for each <a href="functions/require.html">require</a>
(for <b>miniperl.exe</b> only).
[<a href="http://search.cpan.org/perldoc/https:#%2frt.perl.org%2fPublic%2fBug%2fDisplay.html%3fid%3d121119">perl #121119</a>]</p>
</li>
<li>
<p>About 15 minutes of idle sleeping was removed from running <code class="inline"><span class="w">make</span> <span class="w">test</span></code>
 due to
a bug in which the timeout monitor used for tests could not be cancelled once
the test completes, and the full timeout period elapsed before running the next
test file.
[<a href="http://search.cpan.org/perldoc/https:#%2frt.perl.org%2fPublic%2fBug%2fDisplay.html%3fid%3d121395">perl #121395</a>]</p>
</li>
<li>
<p>On a perl built without pseudo-fork (pseudo-fork builds were not affected by
this bug), killing a process tree with <a href="functions/kill.html">kill</a> and a negative
signal resulted in <code class="inline"><a class="l_k" href="functions/kill.html">kill()</a></code> inverting the returned value.  For example, if
<code class="inline"><a class="l_k" href="functions/kill.html">kill()</a></code> killed 1 process tree PID then it returned 0 instead of 1, and if
<code class="inline"><a class="l_k" href="functions/kill.html">kill()</a></code> was passed 2 invalid PIDs then it returned 2 instead of 0.  This has
probably been the case since the process tree kill feature was implemented on
Win32.  It has now been corrected to follow the documented behaviour.
[<a href="http://search.cpan.org/perldoc/https:#%2frt.perl.org%2fPublic%2fBug%2fDisplay.html%3fid%3d121230">perl #121230</a>]</p>
</li>
<li>
<p>When building a 64-bit perl, an uninitialized memory read in <b>miniperl.exe</b>,
used during the build process, could lead to a 4GB <b>wperl.exe</b> being created.
This has now been fixed.  (Note that <b>perl.exe</b> itself was unaffected, but
obviously <b>wperl.exe</b> would have been completely broken.)
[<a href="http://search.cpan.org/perldoc/https:#%2frt.perl.org%2fPublic%2fBug%2fDisplay.html%3fid%3d121471">perl #121471</a>]</p>
</li>
<li>
<p>Perl can now be built with <b>gcc</b> version 4.8.1 from <a href="http://www.mingw.org">http://www.mingw.org</a>.
This was previously broken due to an incorrect definition of DllMain() in one
of perl's source files.  Earlier <b>gcc</b> versions were also affected when using
version 4 of the w32api package.  Versions of <b>gcc</b> available from
<a href="http://mingw-w64.sourceforge.net/">http://mingw-w64.sourceforge.net/</a> were not affected.
[<a href="http://search.cpan.org/perldoc/https:#%2frt.perl.org%2fPublic%2fBug%2fDisplay.html%3fid%3d121643">perl #121643</a>]</p>
</li>
<li>
<p>The test harness now has no failures when perl is built on a FAT drive with the
Windows OS on an NTFS drive.
[<a href="http://search.cpan.org/perldoc/https:#%2frt.perl.org%2fPublic%2fBug%2fDisplay.html%3fid%3d21442">perl #21442</a>]</p>
</li>
<li>
<p>When cloning the context stack in fork() emulation, Perl_cx_dup()
would crash accessing parameter information for context stack entries
that included no parameters, as with <code class="inline"><span class="i">&amp;foo</span><span class="sc">;</span></code>
.
[<a href="http://search.cpan.org/perldoc/https:#%2frt.perl.org%2fPublic%2fBug%2fDisplay.html%3fid%3d121721">perl #121721</a>]</p>
</li>
<li>
<p>Introduced by
<a href="http://search.cpan.org/perldoc/https:#%2frt.perl.org%2fPublic%2fBug%2fDisplay.html%3fid%3d113536">perl #113536</a>, a memory
leak on every call to <code class="inline"><a class="l_k" href="functions/system.html">system</a></code> and backticks (<code class="inline"> <span class="q">``</span> </code>
), on most Win32 Perls
starting from 5.18.0 has been fixed.  The memory leak only occurred if you
enabled psuedo-fork in your build of Win32 Perl, and were running that build on
Server 2003 R2 or newer OS.  The leak does not appear on WinXP SP3.
[<a href="http://search.cpan.org/perldoc/https:#%2frt.perl.org%2fPublic%2fBug%2fDisplay.html%3fid%3d121676">perl #121676</a>]</p>
</li>
</ul>
</li>
<li><a name="WinCE"></a><b>WinCE</b>
<ul>
<li>
<p>The building of XS modules has largely been restored.  Several still cannot
(yet) be built but it is now possible to build Perl on WinCE with only a couple
of further patches (to <a href="Socket.html">Socket</a> and <a href="ExtUtils/MakeMaker.html">ExtUtils::MakeMaker</a>), hopefully to be
incorporated soon.</p>
</li>
<li>
<p>Perl can now be built in one shot with no user intervention on WinCE by running
<code class="inline"><span class="w">nmake</span> -f <span class="w">Makefile</span>.<span class="w">ce</span> <span class="w">all</span></code>
.</p>
<p>Support for building with EVC (Embedded Visual C++) 4 has been restored.  Perl
can also be built using Smart Devices for Visual C++ 2005 or 2008.</p>
</li>
</ul>
</li>
</ul>
<a name="Internal-Changes"></a><h1>Internal Changes</h1>
<ul>
<li>
<p>The internal representation has changed for the match variables $1, $2 etc.,
$`, $&amp;, $', ${^PREMATCH}, ${^MATCH} and ${^POSTMATCH}.  It uses slightly less
memory, avoids string comparisons and numeric conversions during lookup, and
uses 23 fewer lines of C.  This change should not affect any external code.</p>
</li>
<li>
<p>Arrays now use NULL internally to represent unused slots, instead of
&amp;PL_sv_undef.  &amp;PL_sv_undef is no longer treated as a special value, so
av_store(av, 0, &amp;PL_sv_undef) will cause element 0 of that array to hold a
read-only undefined scalar.  <code class="inline"><span class="i">$array</span>[<span class="n">0</span>] = <span class="w">anything</span></code>
 will croak and
<code class="inline">\<span class="i">$array</span>[<span class="n">0</span>]</code>
 will compare equal to <code class="inline">\<a class="l_k" href="functions/undef.html">undef</a></code>
.</p>
</li>
<li>
<p>The SV returned by HeSVKEY_force() now correctly reflects the UTF8ness of the
underlying hash key when that key is not stored as a SV.  [perl #79074]</p>
</li>
<li>
<p>Certain rarely used functions and macros available to XS code are now
deprecated.  These are:
<code class="inline"><span class="w">utf8_to_uvuni_buf</span></code>
 (use <code class="inline"><span class="w">utf8_to_uvchr_buf</span></code>
 instead),
<code class="inline"><span class="w">valid_utf8_to_uvuni</span></code>
 (use <code class="inline"><span class="w">utf8_to_uvchr_buf</span></code>
 instead),
<code class="inline"><span class="w">NATIVE_TO_NEED</span></code>
 (this did not work properly anyway),
and <code class="inline"><span class="w">ASCII_TO_NEED</span></code>
 (this did not work properly anyway).</p>
<p>Starting in this release, almost never does application code need to
distinguish between the platform's character set and Latin1, on which the
lowest 256 characters of Unicode are based.  New code should not use
<code class="inline"><span class="w">utf8n_to_uvuni</span></code>
 (use <code class="inline"><span class="w">utf8_to_uvchr_buf</span></code>
 instead),
nor
<code class="inline"><span class="w">uvuni_to_utf8</span></code>
 (use <code class="inline"><span class="w">uvchr_to_utf8</span></code>
 instead),</p>
</li>
<li>
<p>The Makefile shortcut targets for many rarely (or never) used testing and
profiling targets have been removed, or merged into the only other Makefile
target that uses them.  Specifically, these targets are gone, along with
documentation that referenced them or explained how to use them:</p>
<pre class="verbatim"><ol><li>    <span class="w">check</span>.<span class="w">third</span> <span class="w">check</span>.<span class="w">utf16</span> <span class="w">check</span>.<span class="w">utf8</span> <span class="w">coretest</span> <span class="w">minitest</span>.<span class="w">prep</span></li><li>    <span class="w">minitest</span>.<span class="w">utf16</span> <span class="w">perl</span>.<span class="w">config</span>.<span class="w">dashg</span> <span class="w">perl</span>.<span class="w">config</span>.<span class="w">dashpg</span></li><li>    <span class="w">perl</span>.<span class="w">config</span>.<span class="w">gcov</span> <span class="w">perl</span>.<span class="w">gcov</span> <span class="w">perl</span>.<span class="w">gprof</span> <span class="w">perl</span>.<span class="w">gprof</span>.<span class="w">config</span></li><li>    <span class="w">perl</span>.<span class="w">pixie</span> <span class="w">perl</span>.<span class="w">pixie</span>.<span class="w">atom</span> <span class="w">perl</span>.<span class="w">pixie</span>.<span class="w">config</span> <span class="w">perl</span>.<span class="w">pixie</span>.<span class="w">irix</span></li><li>    <span class="w">perl</span>.<span class="w">third</span> <span class="w">perl</span>.<span class="w">third</span>.<span class="w">config</span> <span class="w">perl</span>.<span class="w">valgrind</span>.<span class="w">config</span> <span class="w">purecovperl</span></li><li>    <span class="w">pureperl</span> <span class="w">quantperl</span> <span class="w">test</span>.<span class="w">deparse</span> <span class="w">test</span>.<span class="w">taintwarn</span> <span class="w">test</span>.<span class="w">third</span></li><li>    <span class="w">test</span>.<span class="w">torture</span> <span class="w">test</span>.<span class="w">utf16</span> <span class="w">test</span>.<span class="w">utf8</span> <span class="w">test_notty</span>.<span class="w">deparse</span></li><li>    <span class="w">test_notty</span>.<span class="w">third</span> <span class="w">test_notty</span>.<span class="w">valgrind</span> <span class="w">test_prep</span>.<span class="w">third</span></li><li>    <span class="w">test_prep</span>.<span class="w">valgrind</span> <span class="w">torturetest</span> <span class="w">ucheck</span> <span class="w">ucheck</span>.<span class="w">third</span> <span class="w">ucheck</span>.<span class="w">utf16</span></li><li>    <span class="w">ucheck</span>.<span class="w">valgrind</span> <span class="w">utest</span> <span class="w">utest</span>.<span class="w">third</span> <span class="w">utest</span>.<span class="w">utf16</span> <span class="w">utest</span>.<span class="w">valgrind</span></li></ol></pre><p>It's still possible to run the relevant commands by "hand" - no underlying
functionality has been removed.</p>
</li>
<li>
<p>It is now possible to keep Perl from initializing locale handling.
For the most part, Perl doesn't pay attention to locale.  (See
<a href="perllocale.html">perllocale</a>.)  Nonetheless, until now, on startup, it has always
initialized locale handling to the system default, just in case the
program being executed ends up using locales.  (This is one of the first
things a locale-aware program should do, long before Perl knows if it
will actually be needed or not.)  This works well except when Perl is
embedded in another application which wants a locale that isn't the
system default.  Now, if the environment variable
<code class="inline"><span class="w">PERL_SKIP_LOCALE_INIT</span></code>
 is set at the time Perl is started, this
initialization step is skipped.  Prior to this, on Windows platforms,
the only workaround for this deficiency was to use a hacked-up copy of
internal Perl code.  Applications that need to use older Perls can
discover if the embedded Perl they are using needs the workaround by
testing that the C preprocessor symbol <code class="inline"><span class="w">HAS_SKIP_LOCALE_INIT</span></code>
 is not
defined.  [RT #38193]</p>
</li>
<li>
<p><code class="inline"><span class="w">BmRARE</span></code>
 and <code class="inline"><span class="w">BmPREVIOUS</span></code>
 have been removed.  They were not used anywhere
and are not part of the API.  For XS modules, they are now #defined as 0.</p>
</li>
<li>
<p><code class="inline"><span class="w">sv_force_normal</span></code>
, which usually croaks on read-only values, used to allow
read-only values to be modified at compile time.  This has been changed to
croak on read-only values regardless.  This change uncovered several core
bugs.</p>
</li>
<li>
<p>Perl's new copy-on-write mechanism  (which is now enabled by default),
allows any <code class="inline"><span class="w">SvPOK</span></code>
 scalar to be automatically upgraded to a copy-on-write
scalar when copied. A reference count on the string buffer is stored in
the string buffer itself.</p>
<p>For example:</p>
<pre class="verbatim"><ol><li>    <span class="i">$ perl</span> -<span class="w">MDevel::Peek</span> -e<span class="q">&#39;$a=&quot;abc&quot;; $b = $a; Dump $a; Dump $b&#39;</span></li><li>    <span class="w">SV</span> = <span class="i">PV</span><span class="s">(</span><span class="n">0x260cd80</span><span class="s">)</span> <span class="w">at</span> <span class="n">0x2620ad8</span></li><li>      <span class="w">REFCNT</span> = <span class="n">1</span></li><li>      <span class="w">FLAGS</span> = <span class="s">(</span><span class="w">POK</span><span class="cm">,</span><span class="w">IsCOW</span><span class="cm">,</span><span class="w">pPOK</span><span class="s">)</span></li><li>      <span class="w">PV</span> = <span class="n">0x2619bc0</span> <span class="q">&quot;abc&quot;</span>\<span class="n">0</span></li><li>      <span class="w">CUR</span> = <span class="n">3</span></li><li>      <span class="w">LEN</span> = <span class="n">16</span></li><li>      <span class="w">COW_REFCNT</span> = <span class="n">1</span></li><li>    <span class="w">SV</span> = <span class="i">PV</span><span class="s">(</span><span class="n">0x260ce30</span><span class="s">)</span> <span class="w">at</span> <span class="n">0x2620b20</span></li><li>      <span class="w">REFCNT</span> = <span class="n">1</span></li><li>      <span class="w">FLAGS</span> = <span class="s">(</span><span class="w">POK</span><span class="cm">,</span><span class="w">IsCOW</span><span class="cm">,</span><span class="w">pPOK</span><span class="s">)</span></li><li>      <span class="w">PV</span> = <span class="n">0x2619bc0</span> <span class="q">&quot;abc&quot;</span>\<span class="n">0</span></li><li>      <span class="w">CUR</span> = <span class="n">3</span></li><li>      <span class="w">LEN</span> = <span class="n">16</span></li><li>      <span class="w">COW_REFCNT</span> = <span class="n">1</span></li></ol></pre><p>Note that both scalars share the same PV buffer and have a COW_REFCNT
greater than zero.</p>
<p>This means that XS code which wishes to modify the <code class="inline"><span class="i">SvPVX</span><span class="s">(</span><span class="s">)</span></code>
 buffer of an
SV should call <code class="inline"><span class="i">SvPV_force</span><span class="s">(</span><span class="s">)</span></code>
 or similar first, to ensure a valid (and
unshared) buffer, and to call <code class="inline"><span class="i">SvSETMAGIC</span><span class="s">(</span><span class="s">)</span></code>
 afterwards. This in fact has
always been the case (for example hash keys were already copy-on-write);
this change just spreads the COW behaviour to a wider variety of SVs.</p>
<p>One important difference is that before 5.18.0, shared hash-key scalars
used to have the <code class="inline"><span class="w">SvREADONLY</span></code>
 flag set; this is no longer the case.</p>
<p>This new behaviour can still be disabled by running <i>Configure</i> with
<b>-Accflags=-DPERL_NO_COW</b>.  This option will probably be removed in Perl
5.22.</p>
</li>
<li>
<p><code class="inline"><span class="w">PL_sawampersand</span></code>
 is now a constant.  The switch this variable provided
(to enable/disable the pre-match copy depending on whether <code class="inline"><span class="i">$&amp;</span></code>
 had been
seen) has been removed and replaced with copy-on-write, eliminating a few
bugs.</p>
<p>The previous behaviour can still be enabled by running <i>Configure</i> with
<b>-Accflags=-DPERL_SAWAMPERSAND</b>.</p>
</li>
<li>
<p>The functions <code class="inline"><span class="w">my_swap</span></code>
, <code class="inline"><span class="w">my_htonl</span></code>
 and <code class="inline"><span class="w">my_ntohl</span></code>
 have been removed.
It is unclear why these functions were ever marked as <i>A</i>, part of the
API. XS code can't call them directly, as it can't rely on them being
compiled. Unsurprisingly, no code on CPAN references them.</p>
</li>
<li>
<p>The signature of the <code class="inline"><span class="i">Perl_re_intuit_start</span><span class="s">(</span><span class="s">)</span></code>
 regex function has changed;
the function pointer <code class="inline"><span class="w">intuit</span></code>
 in the regex engine plugin structure
has also changed accordingly. A new parameter, <code class="inline"><span class="w">strbeg</span></code>
 has been added;
this has the same meaning as the same-named parameter in
<code class="inline"><span class="w">Perl_regexec_flags</span></code>
. Previously intuit would try to guess the start of
the string from the passed SV (if any), and would sometimes get it wrong
(e.g. with an overloaded SV).</p>
</li>
<li>
<p>The signature of the <code class="inline"><span class="i">Perl_regexec_flags</span><span class="s">(</span><span class="s">)</span></code>
 regex function has
changed; the function pointer <code class="inline"><a class="l_k" href="functions/exec.html">exec</a></code> in the regex engine plugin
structure has also changed to match.  The <code class="inline"><span class="w">minend</span></code>
 parameter now has
type <code class="inline"><span class="w">SSize_t</span></code>
 to better support 64-bit systems.</p>
</li>
<li>
<p>XS code may use various macros to change the case of a character or code
point (for example <code class="inline"><span class="i">toLOWER_utf8</span><span class="s">(</span><span class="s">)</span></code>
).  Only a couple of these were
documented until now;
and now they should be used in preference to calling the underlying
functions.  See <a href="perlapi.html#Character-case-changing">Character case changing in perlapi</a>.</p>
</li>
<li>
<p>The code dealt rather inconsistently with uids and gids. Some
places assumed that they could be safely stored in UVs, others
in IVs, others in ints. Four new macros are introduced:
SvUID(), sv_setuid(), SvGID(), and sv_setgid()</p>
</li>
<li>
<p><code class="inline"><span class="w">sv_pos_b2u_flags</span></code>
 has been added to the API.  It is similar to <code class="inline"><span class="w">sv_pos_b2u</span></code>
,
but supports long strings on 64-bit platforms.</p>
</li>
<li>
<p><code class="inline"><span class="w">PL_exit_flags</span></code>
 can now be used by perl embedders or other XS code to have
perl <code class="inline"><a class="l_k" href="functions/warn.html">warn</a></code> or <code class="inline"><span class="w">abort</span></code>
 on an attempted exit. [perl #52000]</p>
</li>
<li>
<p>Compiling with <code class="inline">-<span class="w">Accflags</span>=-<span class="w">PERL_BOOL_AS_CHAR</span></code>
 now allows C99 and C++
compilers to emulate the aliasing of <code class="inline"><span class="w">bool</span></code>
 to <code class="inline"><span class="w">char</span></code>
 that perl does for
C89 compilers.  [perl #120314]</p>
</li>
<li>
<p>The <code class="inline"><span class="w">sv</span></code>
 argument in <a href="perlapi.html#sv_2pv_flags">sv_2pv_flags in perlapi</a>, <a href="perlapi.html#sv_2iv_flags">sv_2iv_flags in perlapi</a>,
<a href="perlapi.html#sv_2uv_flags">sv_2uv_flags in perlapi</a>, and <a href="perlapi.html#sv_2nv_flags">sv_2nv_flags in perlapi</a> and their older wrappers
sv_2pv, sv_2iv, sv_2uv, sv_2nv, is now non-NULL. Passing NULL now will crash.
When the non-NULL marker was introduced en masse in 5.9.3 the functions
were marked non-NULL, but since the creation of the SV API in 5.0 alpha 2, if
NULL was passed, the functions returned 0 or false-type values. The code that
supports <code class="inline"><span class="w">sv</span></code>
 argument being non-NULL dates to 5.0 alpha 2 directly, and
indirectly to Perl 1.0 (pre 5.0 api). The lack of documentation that the
functions accepted a NULL <code class="inline"><span class="w">sv</span></code>
 was corrected in 5.11.0 and between 5.11.0
and 5.19.5 the functions were marked NULLOK. As an optimization the NULLOK code
has now been removed, and the functions became non-NULL marked again, because
core getter-type macros never pass NULL to these functions and would crash
before ever passing NULL.</p>
<p>The only way a NULL <code class="inline"><span class="w">sv</span></code>
 can be passed to sv_2*v* functions is if XS code
directly calls sv_2*v*. This is unlikely as XS code uses Sv*V* macros to get
the underlying value out of the SV. One possible situation which leads to
a NULL <code class="inline"><span class="w">sv</span></code>
 being passed to sv_2*v* functions, is if XS code defines its own
getter type Sv*V* macros, which check for NULL <b>before</b> dereferencing and
checking the SV's flags through public API Sv*OK* macros or directly using
private API <code class="inline"><span class="w">SvFLAGS</span></code>
, and if <code class="inline"><span class="w">sv</span></code>
 is NULL, then calling the sv_2*v functions
with a NULL litteral or passing the <code class="inline"><span class="w">sv</span></code>
 containing a NULL value.</p>
</li>
<li>
<p>newATTRSUB is now a macro</p>
<p>The public API newATTRSUB was previously a macro to the private
function Perl_newATTRSUB. Function Perl_newATTRSUB has been removed. newATTRSUB
is now macro to a different internal function.</p>
</li>
<li>
<p>Changes in warnings raised by <code class="inline"><span class="i">utf8n_to_uvchr</span><span class="s">(</span><span class="s">)</span></code>
</p>
<p>This bottom level function decodes the first character of a UTF-8 string
into a code point.  It is accessible to <code class="inline"><span class="w">XS</span></code>
 level code, but it's
discouraged from using it directly.  There are higher level functions
that call this that should be used instead, such as
<a href="perlapi.html#utf8_to_uvchr_buf">utf8_to_uvchr_buf in perlapi</a>.  For completeness though, this documents
some changes to it.  Now, tests for malformations are done before any
tests for other potential issues.  One of those issues involves code
points so large that they have never appeared in any official standard
(the current standard has scaled back the highest acceptable code point
from earlier versions).  It is possible (though not done in CPAN) to
warn and/or forbid these code points, while accepting smaller code
points that are still above the legal Unicode maximum.  The warning
message for this now includes the code point if representable on the
machine.  Previously it always displayed raw bytes, which is what it
still does for non-representable code points.</p>
</li>
<li>
<p>Regexp engine changes that affect the pluggable regex engine interface</p>
<p>Many flags that used to be exposed via regexp.h and used to populate the
extflags member of struct regexp have been removed. These fields were
technically private to Perl's own regexp engine and should not have been
exposed there in the first place.</p>
<p>The affected flags are:</p>
<pre class="verbatim"><ol><li>    <span class="w">RXf_NOSCAN</span></li><li>    <span class="w">RXf_CANY_SEEN</span></li><li>    <span class="w">RXf_GPOS_SEEN</span></li><li>    <span class="w">RXf_GPOS_FLOAT</span></li><li>    <span class="w">RXf_ANCH_BOL</span></li><li>    <span class="w">RXf_ANCH_MBOL</span></li><li>    <span class="w">RXf_ANCH_SBOL</span></li><li>    <span class="w">RXf_ANCH_GPOS</span></li></ol></pre><p>As well as the follow flag masks:</p>
<pre class="verbatim"><ol><li>    <span class="w">RXf_ANCH_SINGLE</span></li><li>    <span class="w">RXf_ANCH</span></li></ol></pre><p>All have been renamed to PREGf_ equivalents and moved to regcomp.h.</p>
<p>The behavior previously achieved by setting one or more of the RXf_ANCH_
flags (via the RXf_ANCH mask) have now been replaced by a *single* flag bit
in extflags:</p>
<pre class="verbatim"><ol><li>    <span class="w">RXf_IS_ANCHORED</span></li></ol></pre><p>pluggable regex engines which previously used to set these flags should
now set this flag ALONE.</p>
</li>
<li>
<p>The Perl core now consistently uses <code class="inline"><span class="i">av_tindex</span><span class="s">(</span><span class="s">)</span></code>
 ("the top index of an
array") as a more clearly-named synonym for <code class="inline"><span class="i">av_len</span><span class="s">(</span><span class="s">)</span></code>
.</p>
</li>
<li>
<p>The obscure interpreter variable <code class="inline"><span class="w">PL_timesbuf</span></code>
 is expected to be removed
early in the 5.21.x development series, so that Perl 5.22.0 will not provide
it to XS authors.  While the variable still exists in 5.20.0, we hope that
this advance warning of the deprecation will help anyone who is using that
variable.</p>
</li>
</ul>
<a name="Selected-Bug-Fixes"></a><h1>Selected Bug Fixes</h1>
<a name="Regular-Expressions"></a><h2>Regular Expressions</h2>
<ul>
<li>
<p>Fixed a small number of regexp constructions that could either fail to
match or crash perl when the string being matched against was
allocated above the 2GB line on 32-bit systems. [RT #118175]</p>
</li>
<li>
<p>Various memory leaks involving the parsing of the <code class="inline"><span class="s">(</span><span class="q">?[...])</span></code>
 regular
expression construct have been fixed.</p>
</li>
<li>
<p><code class="inline"><span class="s">(</span><span class="q">?[...])</span></code>
 now allows interpolation of precompiled patterns consisting of
<code class="inline"><span class="s">(</span><span class="q">?[...])</span></code>
 with bracketed character classes inside (<code class="inline"><span class="i">$pat</span> =
<span class="q">qr/(?[ [a] ])/</span><span class="sc">;</span> <span class="q">/(?[ $pat ])/</span></code>
).  Formerly, the brackets would
confuse the regular expression parser.</p>
</li>
<li>
<p>The "Quantifier unexpected on zero-length expression" warning message could
appear twice starting in Perl v5.10 for a regular expression also
containing alternations (e.g., "a|b") triggering the trie optimisation.</p>
</li>
<li>
<p>Perl v5.18 inadvertently introduced a bug whereby interpolating mixed up-
and down-graded UTF-8 strings in a regex could result in malformed UTF-8
in the pattern: specifically if a downgraded character in the range
<code class="inline">\<span class="w">x80</span>..\<span class="w">xff</span></code>
 followed a UTF-8 string, e.g.</p>
<pre class="verbatim"><ol><li>    <span class="i">utf8::upgrade</span><span class="s">(</span>  <a class="l_k" href="functions/my.html">my</a> <span class="i">$u</span> = <span class="q">&quot;\x{e5}&quot;</span><span class="s">)</span><span class="sc">;</span></li><li>    <span class="i">utf8::downgrade</span><span class="s">(</span><a class="l_k" href="functions/my.html">my</a> <span class="i">$d</span> = <span class="q">&quot;\x{e5}&quot;</span><span class="s">)</span><span class="sc">;</span></li><li>    <span class="q">/$u$d/</span></li></ol></pre><p>[RT #118297]</p>
</li>
<li>
<p>In regular expressions containing multiple code blocks, the values of
<code class="inline"><span class="i">$1</span></code>
, <code class="inline"><span class="i">$2</span></code>
, etc., set by nested regular expression calls would leak from
one block to the next.  Now these variables always refer to the outer
regular expression at the start of an embedded block [perl #117917].</p>
</li>
<li>
<p><code class="inline"><span class="q">/$qr/p</span></code>
 was broken in Perl 5.18.0; the <code class="inline">/p</code> flag was ignored.  This has been
fixed. [perl #118213]</p>
</li>
<li>
<p>Starting in Perl 5.18.0, a construct like <code class="inline"><span class="q">/[#](?{})/x</span></code>
 would have its <code class="inline"><span class="c">#</span></code>

incorrectly interpreted as a comment.  The code block would be skipped,
unparsed.  This has been corrected.</p>
</li>
<li>
<p>Starting in Perl 5.001, a regular expression like <code class="inline"><span class="q">/[#$a]/x</span></code>
 or <code class="inline"><span class="q">/[#]$a/x</span></code>

would have its <code class="inline"><span class="c">#</span></code>
 incorrectly interpreted as a comment, so the variable would
not interpolate.  This has been corrected. [perl #45667]</p>
</li>
<li>
<p>Perl 5.18.0 inadvertently made dereferenced regular expressions
(<code class="inline"><span class="i">$</span>{ <span class="q">qr//</span> }</code>
) false as booleans.  This has been fixed.</p>
</li>
<li>
<p>The use of <code class="inline">\<span class="w">G</span></code>
 in regular expressions, where it's not at the start of the
pattern, is now slightly less buggy (although it is still somewhat
problematic).</p>
</li>
<li>
<p>Where a regular expression included code blocks (<code class="inline"><span class="q">/(?{...})/</span></code>
), and where the
use of constant overloading triggered a re-compilation of the code block, the
second compilation didn't see its outer lexical scope.  This was a regression
in Perl 5.18.0.</p>
</li>
<li>
<p>The string position set by <code class="inline"><a class="l_k" href="functions/pos.html">pos</a></code> could shift if the string changed
representation internally to or from utf8.  This could happen, e.g., with
references to objects with string overloading.</p>
</li>
<li>
<p>Taking references to the return values of two <code class="inline"><a class="l_k" href="functions/pos.html">pos</a></code> calls with the same
argument, and then assigning a reference to one and <code class="inline"><a class="l_k" href="functions/undef.html">undef</a></code> to the other,
could result in assertion failures or memory leaks.</p>
</li>
<li>
<p>Elements of @- and @+ now update correctly when they refer to non-existent
captures.  Previously, a referenced element (<code class="inline"><span class="i">$ref</span> = \<span class="i">$-</span>[<span class="n">1</span>]</code>
) could refer to
the wrong match after subsequent matches.</p>
</li>
<li>
<p>The code that parses regex backrefs (or ambiguous backref/octals) such as \123
did a simple atoi(), which could wrap round to negative values on long digit
strings and cause segmentation faults.  This has now been fixed.  [perl
#119505]</p>
</li>
<li>
<p>Assigning another typeglob to <code class="inline"><span class="i">*^R</span></code>
 no longer makes the regular expression
engine crash.</p>
</li>
<li>
<p>The <code class="inline">\<span class="w">N</span></code>
 regular expression escape, when used without the curly braces (to
mean <code class="inline">[^\n]</code>), was ignoring a following <code class="inline"><span class="i">*</span></code>
 if followed by whitespace
under /x.  It had been this way since <code class="inline">\<span class="w">N</span></code>
 to mean <code class="inline">[^\n]</code> was introduced
in 5.12.0.</p>
</li>
<li>
<p><code class="inline"><a class="l_k" href="functions/s.html">s///</a></code>, <code class="inline"><a class="l_k" href="functions/tr.html">tr///</a></code> and <code class="inline"><a class="l_k" href="functions/y.html">y///</a></code> now work when a wide character is used as the
delimiter.  [perl #120463]</p>
</li>
<li>
<p>Some cases of unterminated (?...) sequences in regular expressions (e.g.,
<code class="inline"><span class="q">/(?&lt;/</span></code>
) have been fixed to produce the proper error message instead of
"panic: memory wrap".  Other cases (e.g., <code class="inline"><span class="q">/(?(/</span></code>
) have yet to be fixed.</p>
</li>
<li>
<p>When a reference to a reference to an overloaded object was returned from
a regular expression <code class="inline"><span class="s">(</span><span class="q">??</span><span class="s">{</span>...<span class="s">}</span><span class="s">)</span></code>
 code block, an incorrect implicit
dereference could take place if the inner reference had been returned by
a code block previously.</p>
</li>
<li>
<p>A tied variable returned from <code class="inline"><span class="s">(</span><span class="q">??</span><span class="s">{</span>...<span class="s">}</span><span class="s">)</span></code>
 sees the inner values of match
variables (i.e., the $1 etc. from any matches inside the block) in its
FETCH method.  This was not the case if a reference to an overloaded object
was the last thing assigned to the tied variable.  Instead, the match
variables referred to the outer pattern during the FETCH call.</p>
</li>
<li>
<p>Fix unexpected tainting via regexp using locale. Previously, under certain
conditions, the use of character classes could cause tainting when it
shouldn't. Some character classes are locale-dependent, but before this
patch, sometimes tainting was happening even for character classes that
don't depend on the locale. [perl #120675]</p>
</li>
<li>
<p>Under certain conditions, Perl would throw an error if in an lookbehind
assertion in a regexp, the assertion referred to a named subpattern,
complaining the lookbehind was variable when it wasn't. This has been
fixed. [perl #120600], [perl #120618]. The current fix may be improved
on in the future.</p>
</li>
<li>
<p><code class="inline"><span class="i">$^R</span></code>
 wasn't available outside of the regular expression that
initialized it.  [perl #121070]</p>
</li>
<li>
<p>A large set of fixes and refactoring for re_intuit_start() was merged,
the highlights are:</p>
<ul>
<li>
<p>Fixed a panic when compiling the regular expression
<code class="inline"><span class="q">/\x{100}[xy]\x{100}{2}/</span></code>
.</p>
</li>
<li>
<p>Fixed a performance regression when performing a global pattern match
against a UTF-8 string.  [perl #120692]</p>
</li>
<li>
<p>Fixed another performance issue where matching a regular expression
like <code class="inline"><span class="q">/ab.{1,2}x/</span></code>
 against a long UTF-8 string would unnecessarily
calculate byte offsets for a large portion of the string. [perl
#120692]</p>
</li>
</ul>
</li>
<li>
<p>Fixed an alignment error when compiling regular expressions when built
with GCC on HP-UX 64-bit.</p>
</li>
<li>
<p>On 64-bit platforms <code class="inline"><a class="l_k" href="functions/pos.html">pos</a></code> can now be set to a value higher than 2**31-1.
[perl #72766]</p>
</li>
</ul>
<a name="Perl-5-Debugger-and--d"></a><h2>Perl 5 Debugger and -d</h2>
<ul>
<li>
<p>The debugger's <code class="inline"><span class="w">man</span></code>
 command been fixed. It was broken in the v5.18.0
release. The <code class="inline"><span class="w">man</span></code>
 command is aliased to the names <code class="inline"><span class="w">doc</span></code>
 and <code class="inline"><span class="w">perldoc</span></code>
 -
all now work again.</p>
</li>
<li>
<p><code class="inline"><span class="i">@_</span></code>
 is now correctly visible in the debugger, fixing a regression
introduced in v5.18.0's debugger. [RT #118169]</p>
</li>
<li>
<p>Under copy-on-write builds (the default as of 5.20.0) <code class="inline"><span class="i">$</span>{<span class="q">&#39;_&lt;-e&#39;</span>}[<span class="n">0</span>]</code>

no longer gets mangled.  This is the first line of input saved for the
debugger's use for one-liners [perl #118627].</p>
</li>
<li>
<p>On non-threaded builds, setting <code class="inline"><span class="i">$</span>{<span class="q">&quot;_&lt;filename&quot;</span>}</code>
 to a reference or
typeglob no longer causes <code class="inline"><span class="w">__FILE__</span></code>
 and some error messages to produce a
corrupt string, and no longer prevents <code class="inline"><span class="c">#line</span></code>
 directives in string evals from
providing the source lines to the debugger.  Threaded builds were unaffected.</p>
</li>
<li>
<p>Starting with Perl 5.12, line numbers were off by one if the <b>-d</b> switch was
used on the #! line.  Now they are correct.</p>
</li>
<li>
<p><code class="inline"><span class="i">*DB::DB</span> = <a class="l_k" href="functions/sub.html">sub</a> <span class="s">{</span><span class="s">}</span> <a class="l_k" href="functions/if.html">if</a> <span class="n">0</span></code>
 no longer stops Perl's debugging mode from finding
<code class="inline"><span class="w">DB::DB</span></code>
 subs declared thereafter.</p>
</li>
<li>
<p><code class="inline"><span class="i">%</span>{<span class="q">&#39;_&lt;...&#39;</span>}</code>
 hashes now set breakpoints on the corresponding <code class="inline"><span class="i">@</span>{<span class="q">&#39;_&lt;...&#39;</span>}</code>

rather than whichever array <code class="inline"><span class="i">@DB::dbline</span></code>
 is aliased to.  [perl #119799]</p>
</li>
<li>
<p>Call set-magic when setting $DB::sub.  [perl #121255]</p>
</li>
<li>
<p>The debugger's "n" command now respects lvalue subroutines and steps over
them [perl #118839].</p>
</li>
</ul>
<a name="Lexical-Subroutines"></a><h2>Lexical Subroutines</h2>
<ul>
<li>
<p>Lexical constants (<code class="inline"><a name="a"></a><a class="l_k" href="functions/my.html">my</a> sub <span class="m">a()</span> <span class="s">{</span> <span class="n">42</span> <span class="s">}</span></code>
) no longer crash when inlined.</p>
</li>
<li>
<p>Parameter prototypes attached to lexical subroutines are now respected when
compiling sub calls without parentheses.  Previously, the prototypes were
honoured only for calls <i>with</i> parentheses. [RT #116735]</p>
</li>
<li>
<p>Syntax errors in lexical subroutines in combination with calls to the same
subroutines no longer cause crashes at compile time.</p>
</li>
<li>
<p>Deep recursion warnings no longer crash lexical subroutines. [RT #118521]</p>
</li>
<li>
<p>The dtrace sub-entry probe now works with lexical subs, instead of
crashing [perl #118305].</p>
</li>
<li>
<p>Undefining an inlinable lexical subroutine (<code class="inline"><a name="foo"></a><a class="l_k" href="functions/my.html">my</a> sub <span class="m">foo()</span> <span class="s">{</span> <span class="n">42</span> <span class="s">}</span> <a class="l_k" href="functions/undef.html">undef</a>
<span class="i">&amp;foo</span></code>
) would result in a crash if warnings were turned on.</p>
</li>
<li>
<p>An undefined lexical sub used as an inherited method no longer crashes.</p>
</li>
<li>
<p>The presence of a lexical sub named "CORE" no longer stops the CORE::
prefix from working.</p>
</li>
</ul>
<a name="Everything-Else"></a><h2>Everything Else</h2>
<ul>
<li>
<p>The OP allocation code now returns correctly aligned memory in all cases
for <code class="inline"><span class="w">struct</span> <span class="w">pmop</span></code>
. Previously it could return memory only aligned to a
4-byte boundary, which is not correct for an ithreads build with 64 bit IVs
on some 32 bit platforms. Notably, this caused the build to fail completely
on sparc GNU/Linux. [RT #118055]</p>
</li>
<li>
<p>Evaluating large hashes in scalar context is now much faster, as the number
of used chains in the hash is now cached for larger hashes. Smaller hashes
continue not to store it and calculate it when needed, as this saves one IV.
That would be 1 IV overhead for every object built from a hash. [RT #114576]</p>
</li>
<li>
<p>Perl v5.16 inadvertently introduced a bug whereby calls to XSUBs that were
not visible at compile time were treated as lvalues and could be assigned
to, even when the subroutine was not an lvalue sub.  This has been fixed.
[RT #117947]</p>
</li>
<li>
<p>In Perl v5.18.0 dualvars that had an empty string for the string part but a
non-zero number for the number part starting being treated as true.  In
previous versions they were treated as false, the string representation
taking precedeence.  The old behaviour has been restored. [RT #118159]</p>
</li>
<li>
<p>Since Perl v5.12, inlining of constants that override built-in keywords of
the same name had countermanded <code class="inline"><a class="l_k" href="functions/use.html">use</a> <span class="w">subs</span></code>
, causing subsequent mentions of
the constant to use the built-in keyword instead.  This has been fixed.</p>
</li>
<li>
<p>The warning produced by <code class="inline">-l <span class="i">$handle</span></code>
 now applies to IO refs and globs, not
just to glob refs.  That warning is also now UTF8-clean. [RT #117595]</p>
</li>
<li>
<p><code class="inline"><a class="l_k" href="functions/delete.html">delete</a> <a class="l_k" href="functions/local.html">local</a> <span class="i">$ENV</span>{<span class="w">nonexistent_env_var</span>}</code>
 no longer leaks memory.</p>
</li>
<li>
<p><code class="inline"><a class="l_k" href="functions/sort.html">sort</a></code> and <code class="inline"><a class="l_k" href="functions/require.html">require</a></code> followed by a keyword prefixed with <code class="inline"><span class="w">CORE::</span></code>
 now
treat it as a keyword, and not as a subroutine or module name. [RT #24482]</p>
</li>
<li>
<p>Through certain conundrums, it is possible to cause the current package to
be freed.  Certain operators (<code class="inline"><a class="l_k" href="functions/bless.html">bless</a></code>, <code class="inline"><a class="l_k" href="functions/reset.html">reset</a></code>, <code class="inline"><a class="l_k" href="functions/open.html">open</a></code>, <code class="inline"><a class="l_k" href="functions/eval.html">eval</a></code>) could
not cope and would crash.  They have been made more resilient. [RT #117941]</p>
</li>
<li>
<p>Aliasing filehandles through glob-to-glob assignment would not update
internal method caches properly if a package of the same name as the
filehandle existed, resulting in filehandle method calls going to the
package instead.  This has been fixed.</p>
</li>
<li>
<p><code class="inline">.<span class="q">/Configure -de -Dusevendorprefix</span></code>
 didn't default. [RT #64126]</p>
</li>
<li>
<p>The <code class="inline"><span class="w">Statement</span> <span class="w">unlikely</span> <span class="w">to</span> <span class="w">be</span> <span class="w">reached</span></code>
 warning was listed in
<a href="perldiag.html">perldiag</a> as an <code class="inline"><a class="l_k" href="functions/exec.html">exec</a></code>-category warning, but was enabled and disabled
by the <code class="inline"><span class="w">syntax</span></code>
 category.  On the other hand, the <code class="inline"><a class="l_k" href="functions/exec.html">exec</a></code> category
controlled its fatal-ness.  It is now entirely handled by the <code class="inline"><a class="l_k" href="functions/exec.html">exec</a></code>
category.</p>
</li>
<li>
<p>The "Replacement list is longer that search list" warning for <code class="inline"><a class="l_k" href="functions/tr.html">tr///</a></code> and
<code class="inline"><a class="l_k" href="functions/y.html">y///</a></code> no longer occurs in the presence of the <code class="inline">/c</code> flag. [RT #118047]</p>
</li>
<li>
<p>Stringification of NVs are not cached so that the lexical locale controls
stringification of the decimal point. [perl #108378] [perl #115800]</p>
</li>
<li>
<p>There have been several fixes related to Perl's handling of locales.  perl
#38193 was described above in <a href="#Internal-Changes">Internal Changes</a>.
Also fixed is 
#118197, where the radix (decimal point) character had to be an ASCII
character (which doesn't work for some non-Western languages);
and #115808, in which <code class="inline"><span class="i">POSIX::setlocale</span><span class="s">(</span><span class="s">)</span></code>
 on failure returned an
<code class="inline"><a class="l_k" href="functions/undef.html">undef</a></code> which didn't warn about not being defined even if those
warnings were enabled.</p>
</li>
<li>
<p>Compiling a <code class="inline"><a class="l_k" href="functions/split.html">split</a></code> operator whose third argument is a named constant
evaluating to 0 no longer causes the constant's value to change.</p>
</li>
<li>
<p>A named constant used as the second argument to <code class="inline"><a class="l_k" href="functions/index.html">index</a></code> no longer gets
coerced to a string if it is a reference, regular expression, dualvar, etc.</p>
</li>
<li>
<p>A named constant evaluating to the undefined value used as the second
argument to <code class="inline"><a class="l_k" href="functions/index.html">index</a></code> no longer produces "uninitialized" warnings at compile
time.  It will still produce them at run time.</p>
</li>
<li>
<p>When a scalar was returned from a subroutine in @INC, the referenced scalar
was magically converted into an IO thingy, possibly resulting in "Bizarre
copy" errors if that scalar continued to be used elsewhere.  Now Perl uses
an internal copy of the scalar instead.</p>
</li>
<li>
<p>Certain uses of the <code class="inline"><a class="l_k" href="functions/sort.html">sort</a></code> operator are optimised to modify an array in
place, such as <code class="inline"><span class="i">@a</span> = <a class="l_k" href="functions/sort.html">sort</a> <span class="i">@a</span></code>
.  During the sorting, the array is made
read-only.  If a sort block should happen to die, then the array remained
read-only even outside the <code class="inline"><a class="l_k" href="functions/sort.html">sort</a></code>.  This has been fixed.</p>
</li>
<li>
<p><code class="inline"><span class="i">$a</span></code>
 and <code class="inline"><span class="i">$b</span></code>
 inside a sort block are aliased to the actual arguments to
<code class="inline"><a class="l_k" href="functions/sort.html">sort</a></code>, so they can be modified through those two variables.  This did not
always work, e.g., for lvalue subs and <code class="inline"><span class="i">$#ary</span></code>
, and probably many other
operators.  It works now.</p>
</li>
<li>
<p>The arguments to <code class="inline"><a class="l_k" href="functions/sort.html">sort</a></code> are now all in list context.  If the <code class="inline"><a class="l_k" href="functions/sort.html">sort</a></code>
itself were called in void or scalar context, then <i>some</i>, but not all, of
the arguments used to be in void or scalar context.</p>
</li>
<li>
<p>Subroutine prototypes with Unicode characters above U+00FF were getting
mangled during closure cloning.  This would happen with subroutines closing
over lexical variables declared outside, and with lexical subs.</p>
</li>
<li>
<p><code class="inline"><span class="w">UNIVERSAL::can</span></code>
 now treats its first argument the same way that method
calls do: Typeglobs and glob references with non-empty IO slots are treated
as handles, and strings are treated as filehandles, rather than packages,
if a handle with that name exists [perl #113932].</p>
</li>
<li>
<p>Method calls on typeglobs (e.g., <code class="inline"><span class="i">*ARGV</span><span class="i">-&gt;getline</span></code>
) used to stringify
the typeglob and then look it up again.  Combined with changes in Perl
5.18.0, this allowed <code class="inline"><span class="i">*foo</span><span class="i">-&gt;bar</span></code>
 to call methods on the "foo" package
(like <code class="inline"><span class="w">foo</span><span class="w">-&gt;bar</span></code>
).  In some cases it could cause the method to be
called on the wrong handle.  Now a typeglob argument is treated as a
handle (just like <code class="inline"><span class="s">(</span>\<span class="i">*foo</span><span class="s">)</span><span class="i">-&gt;bar</span></code>
), or, if its IO slot is empty, an
error is raised.</p>
</li>
<li>
<p>Assigning a vstring to a tied variable or to a subroutine argument aliased
to a nonexistent hash or array element now works, without flattening the
vstring into a regular string.</p>
</li>
<li>
<p><code class="inline"><a class="l_k" href="functions/pos.html">pos</a></code>, <code class="inline"><a class="l_k" href="functions/tie.html">tie</a></code>, <code class="inline"><a class="l_k" href="functions/tied.html">tied</a></code> and <code class="inline"><a class="l_k" href="functions/untie.html">untie</a></code> did not work
properly on subroutine arguments aliased to nonexistent
hash and array elements [perl #77814, #27010].</p>
</li>
<li>
<p>The <code class="inline"><span class="cm">=&gt;</span></code>
 fat arrow operator can now quote built-in keywords even if it
occurs on the next line, making it consistent with how it treats other
barewords.</p>
</li>
<li>
<p>Autovivifying a subroutine stub via <code class="inline">\<span class="i">&amp;$glob</span></code>
 started causing crashes in Perl
5.18.0 if the $glob was merely a copy of a real glob, i.e., a scalar that had
had a glob assigned to it.  This has been fixed. [perl #119051]</p>
</li>
<li>
<p>Perl used to leak an implementation detail when it came to referencing the
return values of certain operators.  <code class="inline"><a class="l_k" href="functions/for.html">for</a> <span class="s">(</span><span class="i">$a</span>+<span class="i">$b</span><span class="s">)</span> <span class="s">{</span> <a class="l_k" href="functions/warn.html">warn</a> \<span class="i">$_</span><span class="sc">;</span> <a class="l_k" href="functions/warn.html">warn</a> \<span class="i">$_</span> <span class="s">}</span></code>
 used
to display two different memory addresses, because the <code class="inline">\</code>
 operator was
copying the variable.  Under threaded builds, it would also happen for
constants (<code class="inline"><a class="l_k" href="functions/for.html">for</a><span class="s">(</span><span class="n">1</span><span class="s">)</span> <span class="s">{</span> ... <span class="s">}</span></code>
).  This has been fixed. [perl #21979, #78194,
#89188, #109746, #114838, #115388]</p>
</li>
<li>
<p>The range operator <code class="inline">..</code>
 was returning the same modifiable scalars with each
call, unless it was the only thing in a <code class="inline">foreach</code>
 loop header.  This meant
that changes to values within the list returned would be visible the next time
the operator was executed. [perl #3105]</p>
</li>
<li>
<p>Constant folding and subroutine inlining no longer cause operations that would
normally return new modifiable scalars to return read-only values instead.</p>
</li>
<li>
<p>Closures of the form <code class="inline"><span class="i">sub ()</span> <span class="s">{</span> <span class="i">$some_variable</span> <span class="s">}</span></code>
 are no longer inlined,
causing changes to the variable to be ignored by callers of the subroutine.
[perl #79908]</p>
</li>
<li>
<p>Return values of certain operators such as <code class="inline"><a class="l_k" href="functions/ref.html">ref</a></code> would sometimes be shared
between recursive calls to the same subroutine, causing the inner call to
modify the value returned by <code class="inline"><a class="l_k" href="functions/ref.html">ref</a></code> in the outer call.  This has been fixed.</p>
</li>
<li>
<p><code class="inline"><span class="w">__PACKAGE__</span></code>
 and constants returning a package name or hash key are now
consistently read-only.  In various previous Perl releases, they have become
mutable under certain circumstances.</p>
</li>
<li>
<p>Enabling "used once" warnings no longer causes crashes on stash circularities
created at compile time (<code class="inline"><span class="i">*Foo::Bar::Foo::</span> = <span class="i">*Foo::</span></code>
).</p>
</li>
<li>
<p>Undef constants used in hash keys (<code class="inline"><a class="l_k" href="functions/use.html">use</a> <span class="w">constant</span> <span class="i">u</span> <span class="cm">=&gt;</span> <a class="l_k" href="functions/undef.html">undef</a><span class="sc">;</span> <span class="i">$h</span>{+<span class="i">u</span>}</code>
) no
longer produce "uninitialized" warnings at compile time.</p>
</li>
<li>
<p>Modifying a substitution target inside the substitution replacement no longer
causes crashes.</p>
</li>
<li>
<p>The first statement inside a string eval used to use the wrong pragma setting
sometimes during constant folding.  <code class="inline"><a class="l_k" href="functions/eval.html">eval</a> <span class="q">&#39;uc chr 0xe0&#39;</span></code>
 would randomly choose
between Unicode, byte, and locale semantics.  This has been fixed.</p>
</li>
<li>
<p>The handling of return values of @INC filters (subroutines returned by
subroutines in @INC) has been fixed in various ways.  Previously tied variables
were mishandled, and setting $_ to a reference or typeglob could result in
crashes.</p>
</li>
<li>
<p>The <code class="inline"><span class="w">SvPVbyte</span></code>
 XS function has been fixed to work with tied scalars returning
something other than a string.  It used to return utf8 in those cases where
<code class="inline"><span class="w">SvPV</span></code>
 would.</p>
</li>
<li>
<p>Perl 5.18.0 inadvertently made <code class="inline">--</code>
 and <code class="inline">++</code>
 crash on dereferenced regular
expressions, and stopped <code class="inline">++</code>
 from flattening vstrings.</p>
</li>
<li>
<p><code class="inline"><a class="l_k" href="functions/bless.html">bless</a></code> no longer dies with "Can't bless non-reference value" if its first
argument is a tied reference.</p>
</li>
<li>
<p><code class="inline"><a class="l_k" href="functions/reset.html">reset</a></code> with an argument no longer skips copy-on-write scalars, regular
expressions, typeglob copies, and vstrings.  Also, when encountering those or
read-only values, it no longer skips any array or hash with the same name.</p>
</li>
<li>
<p><code class="inline"><a class="l_k" href="functions/reset.html">reset</a></code> with an argument now skips scalars aliased to typeglobs
(<code class="inline"><a class="l_k" href="functions/for.html">for</a> <span class="i">$z</span> <span class="s">(</span><span class="i">*foo</span><span class="s">)</span> <span class="s">{</span> <a class="l_k" href="functions/reset.html">reset</a> <span class="q">&quot;z&quot;</span> <span class="s">}</span></code>
).  Previously it would corrupt memory or crash.</p>
</li>
<li>
<p><code class="inline"><a class="l_k" href="functions/ucfirst.html">ucfirst</a></code> and <code class="inline"><a class="l_k" href="functions/lcfirst.html">lcfirst</a></code> were not respecting the bytes pragma.  This was a
regression from Perl 5.12. [perl #117355]</p>
</li>
<li>
<p>Changes to <code class="inline"><span class="w">UNIVERSAL::DESTROY</span></code>
 now update DESTROY caches in all classes,
instead of causing classes that have already had objects destroyed to continue
using the old sub.  This was a regression in Perl 5.18. [perl #114864]</p>
</li>
<li>
<p>All known false-positive occurrences of the deprecation warning "Useless use of
'\'; doesn't escape metacharacter '%c'", added in Perl 5.18.0, have been
removed. [perl #119101]</p>
</li>
<li>
<p>The value of $^E is now saved across signal handlers on Windows.  [perl #85104]</p>
</li>
<li>
<p>A lexical filehandle (as in <code class="inline"><a class="l_k" href="functions/open.html">open</a> <a class="l_k" href="functions/my.html">my</a> <span class="i">$fh</span>...</code>
) is usually given a name based on
the current package and the name of the variable, e.g. "main::$fh".  Under
recursion, the filehandle was losing the "$fh" part of the name.  This has been
fixed.</p>
</li>
<li>
<p>Uninitialized values returned by XSUBs are no longer exempt from uninitialized
warnings.  [perl #118693]</p>
</li>
<li>
<p><code class="inline"><a class="l_k" href="functions/elsif.html">elsif</a> <span class="s">(</span><span class="q">&quot;&quot;</span><span class="s">)</span></code>
 no longer erroneously produces a warning about void context.
[perl #118753]</p>
</li>
<li>
<p>Passing <code class="inline"><a class="l_k" href="functions/undef.html">undef</a></code> to a subroutine now causes @_ to contain the same read-only
undefined scalar that <code class="inline"><a class="l_k" href="functions/undef.html">undef</a></code> returns.  Furthermore, <code class="inline"><a class="l_k" href="functions/exists.html">exists</a> <span class="i">$_</span>[<span class="n">0</span>]</code>
 will now
return true if <code class="inline"><a class="l_k" href="functions/undef.html">undef</a></code> was the first argument.  [perl #7508, #109726]</p>
</li>
<li>
<p>Passing a non-existent array element to a subroutine does not usually
autovivify it unless the subroutine modifies its argument.  This did not work
correctly with negative indices and with non-existent elements within the
array.  The element would be vivified immediately.  The delayed vivification
has been extended to work with those.  [perl #118691]</p>
</li>
<li>
<p>Assigning references or globs to the scalar returned by $#foo after the @foo
array has been freed no longer causes assertion failures on debugging builds
and memory leaks on regular builds.</p>
</li>
<li>
<p>On 64-bit platforms, large ranges like 1..1000000000000 no longer crash, but
eat up all your memory instead.  [perl #119161]</p>
</li>
<li>
<p><code class="inline"><a name="__DATA__"></a>__DATA__</code>
 now puts the <code class="inline"><span class="w">DATA</span></code>
 handle in the right package, even if the
current package has been renamed through glob assignment.</p>
</li>
<li>
<p>When <code class="inline"><a class="l_k" href="functions/die.html">die</a></code>, <code class="inline"><a class="l_k" href="functions/last.html">last</a></code>, <code class="inline"><a class="l_k" href="functions/next.html">next</a></code>, <code class="inline"><a class="l_k" href="functions/redo.html">redo</a></code>, <code class="inline"><a class="l_k" href="functions/goto.html">goto</a></code> and <code class="inline"><a class="l_k" href="functions/exit.html">exit</a></code> unwind the scope,
it is possible for <code class="inline">DESTROY</code>
 recursively to call a subroutine or format that
is currently being exited.  It that case, sometimes the lexical variables
inside the sub would start out having values from the outer call, instead of
being undefined as they should.  This has been fixed.  [perl #119311]</p>
</li>
<li>
<p>${^MPEN} is no longer treated as a synonym for ${^MATCH}.</p>
</li>
<li>
<p>Perl now tries a little harder to return the correct line number in
<code class="inline"><span class="s">(</span><a class="l_k" href="functions/caller.html">caller</a><span class="s">)</span>[<span class="n">2</span>]</code>
.  [perl #115768]</p>
</li>
<li>
<p>Line numbers inside multiline quote-like operators are now reported correctly.
[perl #3643]</p>
</li>
<li>
<p><code class="inline"><span class="c">#line</span></code>
 directives inside code embedded in quote-like operators are now
respected.</p>
</li>
<li>
<p>Line numbers are now correct inside the second here-doc when two here-doc
markers occur on the same line.</p>
</li>
<li>
<p>An optimization in Perl 5.18 made incorrect assumptions causing a bad
interaction with the <a href="http://search.cpan.org/perldoc/Devel::CallParser">Devel::CallParser</a> CPAN module.  If the module was
loaded then lexical variables declared in separate statements following a
<code class="inline"><a class="l_k" href="functions/my.html">my(...)</a></code> list might fail to be cleared on scope exit.</p>
</li>
<li>
<p><code class="inline"><span class="i">&amp;xsub</span></code>
 and <code class="inline"><a class="l_k" href="functions/goto.html">goto</a> <span class="i">&amp;xsub</span></code>
 calls now allow the called subroutine to autovivify
elements of @_.</p>
</li>
<li>
<p><code class="inline"><span class="i">&amp;xsub</span></code>
 and <code class="inline"><a class="l_k" href="functions/goto.html">goto</a> <span class="i">&amp;xsub</span></code>
 no longer crash if *_ has been undefined and has no
ARRAY entry (i.e. @_ does not exist).</p>
</li>
<li>
<p><code class="inline"><span class="i">&amp;xsub</span></code>
 and <code class="inline"><a class="l_k" href="functions/goto.html">goto</a> <span class="i">&amp;xsub</span></code>
 now work with tied @_.</p>
</li>
<li>
<p>Overlong identifiers no longer cause a buffer overflow (and a crash).  They
started doing so in Perl 5.18.</p>
</li>
<li>
<p>The warning "Scalar value @hash{foo} better written as $hash{foo}" now produces
far fewer false positives.  In particular, <code class="inline"><span class="i">@hash</span>{+<span class="w">function_returning_a_list</span>}</code>

and <code class="inline"><span class="i">@hash</span>{ <span class="q">qw &quot;foo bar baz&quot;</span> }</code>
 no longer warn.  The same applies to array
slices.  [perl #28380, #114024]</p>
</li>
<li>
<p><code class="inline"><span class="i">$!</span> = <span class="w">EINVAL</span><span class="sc">;</span> <a class="l_k" href="functions/waitpid.html">waitpid</a><span class="s">(</span><span class="n">0</span><span class="cm">,</span> <span class="w">WNOHANG</span><span class="s">)</span><span class="sc">;</span></code>
 no longer goes into an internal infinite
loop.  [perl #85228]</p>
</li>
<li>
<p>A possible segmentation fault in filehandle duplication has been fixed.</p>
</li>
<li>
<p>A subroutine in @INC can return a reference to a scalar containing the initial
contents of the file.  However, that scalar was freed prematurely if not
referenced elsewhere, giving random results.</p>
</li>
<li>
<p><code class="inline"><a class="l_k" href="functions/last.html">last</a></code> no longer returns values that the same statement has accumulated so
far, fixing amongst other things the long-standing bug that <code class="inline"><a class="l_k" href="functions/push.html">push</a> <span class="i">@a</span><span class="cm">,</span> <a class="l_k" href="functions/last.html">last</a></code>

would try to return the @a, copying it like a scalar in the process and
resulting in the error, "Bizarre copy of ARRAY in last."  [perl #3112]</p>
</li>
<li>
<p>In some cases, closing file handles opened to pipe to or from a process, which
had been duplicated into a standard handle, would call perl's internal waitpid
wrapper with a pid of zero.  With the fix for [perl #85228] this zero pid was
passed to <code class="inline"><a class="l_k" href="functions/waitpid.html">waitpid</a></code>, possibly blocking the process.  This wait for process
zero no longer occurs.  [perl #119893]</p>
</li>
<li>
<p><code class="inline"><a class="l_k" href="functions/select.html">select</a></code> used to ignore magic on the fourth (timeout) argument, leading to
effects such as <code class="inline"><a class="l_k" href="functions/select.html">select</a></code> blocking indefinitely rather than the expected sleep
time.  This has now been fixed.  [perl #120102]</p>
</li>
<li>
<p>The class name in <code class="inline"><a class="l_k" href="functions/for.html">for</a> <a class="l_k" href="functions/my.html">my</a> <span class="w">class</span> <span class="i">$foo</span></code>
 is now parsed correctly.  In the case of
the second character of the class name being followed by a digit (e.g. 'a1b')
this used to give the error "Missing $ on loop variable".  [perl #120112]</p>
</li>
<li>
<p>Perl 5.18.0 accidentally disallowed <code class="inline">-<span class="w">bareword</span></code>
 under <code class="inline"><a class="l_k" href="functions/use.html">use</a> <span class="w">strict</span></code>
 and
<code class="inline"><a class="l_k" href="functions/use.html">use</a> <span class="w">integer</span></code>
.  This has been fixed.  [perl #120288]</p>
</li>
<li>
<p><code class="inline">-<span class="w">a</span></code>
 at the start of a line (or a hyphen with any single letter that is
not a filetest operator) no longer produces an erroneous 'Use of "-a"
without parentheses is ambiguous' warning.  [perl #120288]</p>
</li>
<li>
<p>Lvalue context is now properly propagated into bare blocks and <code class="inline">if</code>
 and
<code class="inline">else</code>
 blocks in lvalue subroutines.  Previously, arrays and hashes would
sometimes incorrectly be flattened when returned in lvalue list context, or
"Bizarre copy" errors could occur.  [perl #119797]</p>
</li>
<li>
<p>Lvalue context is now propagated to the branches of <code class="inline">||</code> and <code class="inline">&amp;&amp;</code> (and
their alphabetic equivalents, <code class="inline">or</code>
 and <code class="inline">and</code>
).  This means
<code class="inline"><a class="l_k" href="functions/foreach.html">foreach</a> <span class="s">(</span><a class="l_k" href="functions/pos.html">pos</a> <span class="i">$x</span> || <a class="l_k" href="functions/pos.html">pos</a> <span class="i">$y</span><span class="s">)</span> <span class="s">{</span>...<span class="s">}</span></code>
 now allows <code class="inline"><a class="l_k" href="functions/pos.html">pos</a></code> to be modified
through $_.</p>
</li>
<li>
<p><code class="inline"><a class="l_k" href="functions/stat.html">stat</a></code> and <code class="inline"><a class="l_k" href="functions/readline.html">readline</a></code> remember the last handle used; the former
for the special <code class="inline"><span class="w">_</span></code>
 filehandle, the latter for <code class="inline"><span class="i">$</span>{<span class="w">^LAST_FH</span>}</code>
.
<code class="inline"><a class="l_k" href="functions/eval.html">eval</a> <span class="q">&quot;*foo if 0&quot;</span></code>
 where *foo was the last handle passed to <code class="inline"><a class="l_k" href="functions/stat.html">stat</a></code>
or <code class="inline"><a class="l_k" href="functions/readline.html">readline</a></code> could cause that handle to be forgotten if the
handle were not opened yet.  This has been fixed.</p>
</li>
<li>
<p>Various cases of <code class="inline"><a class="l_k" href="functions/delete.html">delete</a> <span class="i">$::</span>{<span class="w">a</span>}</code>
, <code class="inline"><a class="l_k" href="functions/delete.html">delete</a> <span class="i">$::</span>{<span class="w">ENV</span>}</code>
 etc. causing a crash
have been fixed.  [perl #54044]</p>
</li>
<li>
<p>Setting <code class="inline"><span class="i">$!</span></code>
 to EACCESS before calling <code class="inline"><a class="l_k" href="functions/require.html">require</a></code> could affect
<code class="inline"><a class="l_k" href="functions/require.html">require</a></code>'s behaviour.  This has been fixed.</p>
</li>
<li>
<p>The "Can't use \1 to mean $1 in expression" warning message now only occurs
on the right-hand (replacement) part of a substitution.  Formerly it could
happen in code embedded in the left-hand side, or in any other quote-like
operator.</p>
</li>
<li>
<p>Blessing into a reference (<code class="inline"><a class="l_k" href="functions/bless.html">bless</a> <span class="i">$thisref</span><span class="cm">,</span> <span class="i">$thatref</span></code>
) has long been
disallowed, but magical scalars for the second like <code class="inline"><span class="i">$/</span></code>
 and those tied
were exempt.  They no longer are.  [perl #119809]</p>
</li>
<li>
<p>Blessing into a reference was accidentally allowed in 5.18 if the class
argument were a blessed reference with stale method caches (i.e., whose
class had had subs defined since the last method call).  They are
disallowed once more, as in 5.16.</p>
</li>
<li>
<p><code class="inline"><span class="i">$x</span>-&gt;{<span class="w">key</span>}</code>
 where $x was declared as <code class="inline"><a class="l_k" href="functions/my.html">my</a> <span class="w">Class</span> <span class="i">$x</span></code>
 no longer crashes
if a Class::FIELDS subroutine stub has been declared.</p>
</li>
<li>
<p><code class="inline"><span class="i">@$obj</span>{<span class="q">&#39;key&#39;</span>}</code>
 and <code class="inline"><span class="i">$</span>{<span class="i">$obj</span>}{<span class="w">key</span>}</code>
 used to be exempt from compile-time
field checking ("No such class field"; see <a href="fields.html">fields</a>) but no longer are.</p>
</li>
<li>
<p>A nonexistent array element with a large index passed to a subroutine that
ties the array and then tries to access the element no longer results in a
crash.</p>
</li>
<li>
<p>Declaring a subroutine stub named NEGATIVE_INDICES no longer makes negative
array indices crash when the current package is a tied array class.</p>
</li>
<li>
<p>Declaring a <code class="inline"><a class="l_k" href="functions/require.html">require</a></code>, <code class="inline"><a class="l_k" href="functions/glob.html">glob</a></code>, or <code class="inline"><a class="l_k" href="functions/do.html">do</a></code> subroutine stub in the
CORE::GLOBAL:: package no longer makes compilation of calls to the
corresponding functions crash.</p>
</li>
<li>
<p>Aliasing CORE::GLOBAL:: functions to constants stopped working in Perl 5.10
but has now been fixed.</p>
</li>
<li>
<p>When <code class="inline"><span class="q">`...`</span></code>
 or <code class="inline"><a class="l_k" href="functions/qx.html">qx/.../</a></code> calls a <code class="inline"><a class="l_k" href="functions/readpipe.html">readpipe</a></code> override, double-quotish
interpolation now happens, as is the case when there is no override.
Previously, the presence of an override would make these quote-like
operators act like <code class="inline"><a class="l_k" href="functions/q.html">q{}</a></code>, suppressing interpolation.  [perl #115330]</p>
</li>
<li>
<p><code class="inline"><span class="h">&lt;&lt;</span>&lt;<span class="q">`...`</span></code>
 here-docs (with backticks as the delimiters) now call
<code class="inline"><a class="l_k" href="functions/readpipe.html">readpipe</a></code> overrides.  [perl #119827]</p>
</li>
<li>
<p><code class="inline"><span class="i">&amp;CORE::exit</span><span class="s">(</span><span class="s">)</span></code>
 and <code class="inline"><span class="i">&amp;CORE::die</span><span class="s">(</span><span class="s">)</span></code>
 now respect <a href="vmsish.html">vmsish</a> hints.</p>
</li>
<li>
<p>Undefining a glob that triggers a DESTROY method that undefines the same
glob is now safe.  It used to produce "Attempt to free unreferenced glob
pointer" warnings and leak memory.</p>
</li>
<li>
<p>If subroutine redefinition (<code class="inline"><a class="l_k" href="functions/eval.html">eval</a> <span class="q">&#39;sub foo{}&#39;</span></code>
 or <code class="inline"><span class="w">newXS</span></code>
 for XS code)
triggers a DESTROY method on the sub that is being redefined, and that
method assigns a subroutine to the same slot (<code class="inline"><span class="i">*foo</span> = <a class="l_k" href="functions/sub.html">sub</a> <span class="s">{</span><span class="s">}</span></code>
), <code class="inline"><span class="i">$_</span>[<span class="n">0</span>]</code>

is no longer left pointing to a freed scalar.  Now DESTROY is delayed until
the new subroutine has been installed.</p>
</li>
<li>
<p>On Windows, perl no longer calls CloseHandle() on a socket handle.  This makes
debugging easier on Windows by removing certain irrelevant bad handle
exceptions.  It also fixes a race condition that made socket functions randomly
fail in a Perl process with multiple OS threads, and possible test failures in
<i>dist/IO/t/cachepropagate-tcp.t</i>.  [perl #120091/118059]</p>
</li>
<li>
<p>Formats involving UTF-8 encoded strings, or strange vars like ties,
overloads, or stringified refs (and in recent
perls, pure NOK vars) would generally do the wrong thing in formats
when the var is treated as a string and repeatedly chopped, as in
<code class="inline">^<span class="h">&lt;&lt;</span>&lt;~~</code>
 and similar. This has now been resolved.
[perl #33832/45325/113868/119847/119849/119851]</p>
</li>
<li>
<p><code class="inline"><a class="l_k" href="functions/semctl.html">semctl</a><span class="s">(</span>...<span class="cm">,</span> <span class="w">SETVAL</span><span class="cm">,</span> ...<span class="s">)</span></code>
 would set the semaphore to the top
32-bits of the supplied integer instead of the bottom 32-bits on
64-bit big-endian systems. [perl #120635]</p>
</li>
<li>
<p><code class="inline"><a class="l_k" href="functions/readdir.html">readdir()</a></code> now only sets <code class="inline"><span class="i">$!</span></code>
 on error.  <code class="inline"><span class="i">$!</span></code>
 is no longer set
to <code class="inline"><span class="w">EBADF</span></code>
 when then terminating <code class="inline"><a class="l_k" href="functions/undef.html">undef</a></code> is read from the directory
unless the system call sets <code class="inline"><span class="i">$!</span></code>
. [perl #118651]</p>
</li>
<li>
<p><code class="inline"><span class="i">&amp;CORE::glob</span></code>
 no longer causes an intermittent crash due to perl's stack
getting corrupted. [perl #119993]</p>
</li>
<li>
<p><code class="inline"><a class="l_k" href="functions/open.html">open</a></code> with layers that load modules (e.g., "&lt;:encoding(utf8)") no longer
runs the risk of crashing due to stack corruption.</p>
</li>
<li>
<p>Perl 5.18 broke autoloading via <code class="inline"><span class="i">-&gt;SUPER::foo</span></code>
 method calls by looking
up AUTOLOAD from the current package rather than the current package's
superclass.  This has been fixed. [perl #120694]</p>
</li>
<li>
<p>A longstanding bug causing <code class="inline"><a class="l_k" href="functions/do.html">do</a> <span class="s">{</span><span class="s">}</span> <a class="l_k" href="functions/until.html">until</a> <span class="w">CONSTANT</span></code>
, where the constant
holds a true value, to read unallocated memory has been resolved.  This
would usually happen after a syntax error.  In past versions of Perl it has
crashed intermittently. [perl #72406]</p>
</li>
<li>
<p>Fix HP-UX <code class="inline"><span class="i">$!</span></code>
 failure. HP-UX strerror() returns an empty string for an
unknown error code.  This caused an assertion to fail under DEBUGGING
builds.  Now instead, the returned string for <code class="inline"><span class="q">&quot;$!&quot;</span></code>
 contains text
indicating the code is for an unknown error.</p>
</li>
<li>
<p>Individually-tied elements of @INC (as in <code class="inline"><a class="l_k" href="functions/tie.html">tie</a> <span class="i">$INC</span>[<span class="n">0</span>]...</code>
) are now
handled correctly.  Formerly, whether a sub returned by such a tied element
would be treated as a sub depended on whether a FETCH had occurred
previously.</p>
</li>
<li>
<p><code class="inline"><a class="l_k" href="functions/getc.html">getc</a></code> on a byte-sized handle after the same <code class="inline"><a class="l_k" href="functions/getc.html">getc</a></code> operator had been
used on a utf8 handle used to treat the bytes as utf8, resulting in erratic
behavior (e.g., malformed UTF-8 warnings).</p>
</li>
<li>
<p>An initial <code class="inline">{</code> at the beginning of a format argument line was always
interpreted as the beginning of a block prior to v5.18.  In Perl v5.18, it
started being treated as an ambiguous token.  The parser would guess
whether it was supposed to be an anonymous hash constructor or a block
based on the contents.  Now the previous behavious has been restored.
[perl #119973]</p>
</li>
<li>
<p>In Perl v5.18 <code class="inline"><a class="l_k" href="functions/undef.html">undef</a> <span class="i">*_</span><span class="sc">;</span> <a class="l_k" href="functions/goto.html">goto</a> <span class="i">&amp;sub</span></code>
 and <code class="inline"><a class="l_k" href="functions/local.html">local</a> <span class="i">*_</span><span class="sc">;</span> <a class="l_k" href="functions/goto.html">goto</a> <span class="i">&amp;sub</span></code>
 started
crashing.  This has been fixed. [perl #119949]</p>
</li>
<li>
<p>Backticks (<code class="inline"> <span class="q">``</span> </code>
 or <code class="inline"> <span class="q">qx//</span> </code>
) combined with multiple threads on
Win32 could result in output sent to stdout on one thread being
captured by backticks of an external command in another thread.</p>
<p>This could occur for pseudo-forked processes too, as Win32's
pseudo-fork is implemented in terms of threads.  [perl #77672]</p>
</li>
<li>
<p><code class="inline"><a class="l_k" href="functions/open.html">open</a> <span class="i">$fh</span><span class="cm">,</span> <span class="q">&quot;&gt;+&quot;</span><span class="cm">,</span> <a class="l_k" href="functions/undef.html">undef</a></code>
 no longer leaks memory when TMPDIR is set
but points to a directory a temporary file cannot be created in.  [perl
#120951]</p>
</li>
<li>
<p><code class="inline"> <a class="l_k" href="functions/for.html">for</a> <span class="s">(</span> <span class="i">$h</span>{<span class="w">k</span>} || <span class="q">&#39;&#39;</span> <span class="s">)</span> </code>
 no longer auto-vivifies <code class="inline"><span class="i">$h</span>{<span class="w">k</span>}</code>
.  [perl
#120374]</p>
</li>
<li>
<p>On Windows machines, Perl now emulates the POSIX use of the environment
for locale initialization.  Previously, the environment was ignored.
See <a href="perllocale.html#ENVIRONMENT">ENVIRONMENT in perllocale</a>.</p>
</li>
<li>
<p>Fixed a crash when destroying a self-referencing GLOB.  [perl #121242]</p>
</li>
</ul>
<a name="Known-Problems"></a><h1>Known Problems</h1>
<ul>
<li>
<p><a href="IO/Socket.html">IO::Socket</a> is known to fail tests on AIX 5.3.  There is
<a href="http://search.cpan.org/perldoc/https:#%2frt.perl.org%2fTicket%2fDisplay.html%3fid%3d120835">a patch</a> in the request
tracker, #120835, which may be applied to future releases.</p>
</li>
<li>
<p>The following modules are known to have test failures with this version of
Perl.  Patches have been submitted, so there will hopefully be new releases
soon:</p>
<ul>
<li>
<p><a href="http://search.cpan.org/perldoc/Data::Structure::Util">Data::Structure::Util</a> version 0.15</p>
</li>
<li>
<p><a href="http://search.cpan.org/perldoc/HTML::StripScripts">HTML::StripScripts</a> version 1.05</p>
</li>
<li>
<p><a href="http://search.cpan.org/perldoc/List::Gather">List::Gather</a> version 0.08.</p>
</li>
</ul>
</li>
</ul>
<a name="Obituary"></a><h1>Obituary</h1>
<p>Diana Rosa, 27, of Rio de Janeiro, went to her long rest on May 10,
2014, along with the plush camel she kept hanging on her computer screen
all the time. She was a passionate Perl hacker who loved the language and its
community, and who never missed a Rio.pm event. She was a true artist, an
enthusiast about writing code, singing arias and graffiting walls. We'll never
forget you.</p>
<p>Greg McCarroll died on August 28, 2013.</p>
<p>Greg was well known for many good reasons. He was one of the organisers of
the first YAPC::Europe, which concluded with an unscheduled auction where he
frantically tried to raise extra money to avoid the conference making a
loss. It was Greg who mistakenly arrived for a london.pm meeting a week
late; some years later he was the one who sold the choice of official
meeting date at a YAPC::Europe auction, and eventually as glorious leader of
london.pm he got to inherit the irreverent confusion that he had created.</p>
<p>Always helpful, friendly and cheerfully optimistic, you will be missed, but
never forgotten.</p>
<a name="Acknowledgements"></a><h1>Acknowledgements</h1>
<p>Perl 5.20.0 represents approximately 12 months of development since Perl 5.18.0
and contains approximately 470,000 lines of changes across 2,900 files from 124
authors.</p>
<p>Excluding auto-generated files, documentation and release tools, there were
approximately 280,000 lines of changes to 1,800 .pm, .t, .c and .h files.</p>
<p>Perl continues to flourish into its third decade thanks to a vibrant community
of users and developers. The following people are known to have contributed the
improvements that became Perl 5.20.0:</p>
<p>Aaron Crane, Abhijit Menon-Sen, Abigail, Abir Viqar, Alan Haggai Alavi, Alan
Hourihane, Alexander Voronov, Alexandr Ciornii, Andy Dougherty, Anno Siegel,
Aristotle Pagaltzis, Arthur Axel 'fREW' Schmidt, Brad Gilbert, Brendan Byrd,
Brian Childs, Brian Fraser, Brian Gottreu, Chris 'BinGOs' Williams, Christian
Millour, Colin Kuskie, Craig A. Berry, Dabrien 'Dabe' Murphy, Dagfinn Ilmari
Manns&#xe5;ker, Daniel Dragan, Darin McBride, David Golden, David Leadbeater, David
Mitchell, David Nicol, David Steinbrunner, Dennis Kaarsemaker, Dominic
Hargreaves, Ed Avis, Eric Brine, Evan Zacks, Father Chrysostomos, Florian
Ragwitz, Fran&#xe7;ois Perrad, Gavin Shelley, Gideon Israel Dsouza, Gisle Aas,
Graham Knop, H.Merijn Brand, Hauke D, Heiko Eissfeldt, Hiroo Hayashi, Hojung
Youn, James E Keenan, Jarkko Hietaniemi, Jerry D. Hedden, Jess Robinson, Jesse
Luehrs, Johan Vromans, John Gardiner Myers, John Goodyear, John P. Linderman,
John Peacock, kafka, Kang-min Liu, Karen Etheridge, Karl Williamson, Keedi Kim,
Kent Fredric, kevin dawson, Kevin Falcone, Kevin Ryde, Leon Timmermans, Lukas
Mai, Marc Simpson, Marcel Gr&#xfc;nauer, Marco Peereboom, Marcus Holland-Moritz,
Mark Jason Dominus, Martin McGrath, Matthew Horsfall, Max Maischein, Mike
Doherty, Moritz Lenz, Nathan Glenn, Nathan Trapuzzano, Neil Bowers, Neil
Williams, Nicholas Clark, Niels Thykier, Niko Tyni, Olivier Mengu&#xe9;, Owain G.
Ainsworth, Paul Green, Paul Johnson, Peter John Acklam, Peter Martini, Peter
Rabbitson, Petr P&#xed;sa&#x159;, Philip Boulain, Philip Guenther, Piotr Roszatycki,
Rafael Garcia-Suarez, Reini Urban, Reuben Thomas, Ricardo Signes, Ruslan
Zakirov, Sergey Alekseev, Shirakata Kentaro, Shlomi Fish, Slaven Rezic,
Smylers, Steffen M&#xfc;ller, Steve Hay, Sullivan Beck, Thomas Sibley, Tobias
Leich, Toby Inkster, Tokuhiro Matsuno, Tom Christiansen, Tom Hukins, Tony Cook,
Victor Efimov, Viktor Turskyi, Vladimir Timofeev, YAMASHINA Hio, Yves Orton,
Zefram, Zsb&#xe1;n Ambrus, &#xc6;var Arnfj&#xf6;r&#xf0; Bjarmason.</p>
<p>The list above is almost certainly incomplete as it is automatically generated
from version control history. In particular, it does not include the names of
the (very much appreciated) contributors who reported issues to the Perl bug
tracker.</p>
<p>Many of the changes included in this version originated in the CPAN modules
included in Perl's core. We're grateful to the entire CPAN community for
helping Perl to flourish.</p>
<p>For a more complete list of all of Perl's historical contributors, please see
the <i>AUTHORS</i> file in the Perl source distribution.</p>
<a name="Reporting-Bugs"></a><h1>Reporting Bugs</h1>
<p>If you find what you think is a bug, you might check the articles recently
posted to the comp.lang.perl.misc newsgroup and the perl bug database at
<a href="http://rt.perl.org/perlbug/">http://rt.perl.org/perlbug/</a> .  There may also be information at
<a href="http://www.perl.org/">http://www.perl.org/</a> , the Perl Home Page.</p>
<p>If you believe you have an unreported bug, please run the <a href="perlbug.html">perlbug</a> program
included with your release.  Be sure to trim your bug down to a tiny but
sufficient test case.  Your bug report, along with the output of <code class="inline"><span class="w">perl</span> -<span class="w">V</span></code>
,
will be sent off to perlbug@perl.org to be analysed by the Perl porting team.</p>
<p>If the bug you are reporting has security implications, which make it
inappropriate to send to a publicly archived mailing list, then please send it
to perl5-security-report@perl.org.  This points to a closed subscription
unarchived mailing list, which includes all the core committers, who will be
able to help assess the impact of issues, figure out a resolution, and help
co-ordinate the release of patches to mitigate or fix the problem across all
platforms on which Perl is supported.  Please only use this address for
security issues in the Perl core, not for modules independently distributed on
CPAN.</p>
<a name="SEE-ALSO"></a><h1>SEE ALSO</h1>
<p>The <i>Changes</i> file for an explanation of how to view exhaustive details on
what changed.</p>
<p>The <i>INSTALL</i> file for how to build Perl.</p>
<p>The <i>README</i> file for general stuff.</p>
<p>The <i>Artistic</i> and <i>Copying</i> files for copyright information.</p>




  <div id="page_index" class="hud_container">
    <div id="page_index_header" class="hud_header">
      <div id="page_index_close" class="hud_close"><a href="#" onClick="pageIndex.hide();return false;"></a></div>
      <div id="page_index_title" class="hud_title"><span class="hud_span_top">Page index</span></div>
      <div id="page_index_topright" class="hud_topright"></div>
    </div>
    <div id="page_index_content" class="hud_content">
      <ul><li><a href="#NAME">NAME</a><li><a href="#DESCRIPTION">DESCRIPTION</a><li><a href="#Core-Enhancements">Core Enhancements</a><ul><li><a href="#Experimental-Subroutine-signatures">Experimental Subroutine signatures</a><li><a href="#subs-now-take-a-prototype-attribute">subs now take a prototype attribute</a><li><a href="#More-consistent-prototype-parsing">More consistent prototype parsing</a><li><a href="#rand-now-uses-a-consistent-random-number-generator">rand now uses a consistent random number generator</a><li><a href="#New-slice-syntax">New slice syntax</a><li><a href="#Experimental-Postfix-Dereferencing">Experimental Postfix Dereferencing</a><li><a href="#Unicode-6.3-now-supported">Unicode 6.3 now supported</a><li><a href="#New-%5cp%7bUnicode%7d-regular-expression-pattern-property">New \p{Unicode} regular expression pattern property</a><li><a href="#Better-64-bit-support">Better 64-bit support</a><li><a href="#use-locale-now-works-on-UTF-8-locales">use locale now works on UTF-8 locales</a><li><a href="#use-locale-now-compiles-on-systems-without-locale-ability">use locale now compiles on systems without locale ability</a><li><a href="#More-locale-initialization-fallback-options">More locale initialization fallback options</a><li><a href="#-DL-runtime-option-now-added-for-tracing-locale-setting">-DL runtime option now added for tracing locale setting</a><li><a href="#*-F*-now-implies-*-a*-and-*-a*-implies-*-n*">*-F* now implies *-a* and *-a* implies *-n*</a><li><a href="#%24a-and-%24b-warnings-exemption">$a and $b warnings exemption</a></ul><li><a href="#Security">Security</a><ul><li><a href="#Avoid-possible-read-of-free()d-memory-during-parsing">Avoid possible read of free()d memory during parsing</a></ul><li><a href="#Incompatible-Changes">Incompatible Changes</a><ul><li><a href="#do-can-no-longer-be-used-to-call-subroutines">do can no longer be used to call subroutines</a><li><a href="#Quote-like-escape-changes">Quote-like escape changes</a><li><a href="#Tainting-happens-under-more-circumstances%3b-now-conforms-to-documentation">Tainting happens under more circumstances; now conforms to documentation</a><li><a href="#%5cp%7b%7d%2c-%5cP%7b%7d-matching-has-changed-for-non-Unicode-code-points.">\p{}, \P{} matching has changed for non-Unicode code
points.</a><li><a href="#%5cp%7bAll%7d-has-been-expanded-to-match-all-possible-code-points">\p{All} has been expanded to match all possible code points</a><li><a href="#Data%3a%3aDumper's-output-may-change">Data::Dumper's output may change</a><li><a href="#Locale-decimal-point-character-no-longer-leaks-outside-of-use-locale-scope">Locale decimal point character no longer leaks outside of use locale scope</a><li><a href="#Assignments-of-Windows-sockets-error-codes-to-%24!-now-prefer-_errno.h_-values-over-WSAGetLastError()-values">Assignments of Windows sockets error codes to $! now prefer _errno.h_ values over WSAGetLastError() values</a><li><a href="#Functions-PerlIO_vsprintf-and-PerlIO_sprintf-have-been-removed">Functions PerlIO_vsprintf and PerlIO_sprintf have been removed</a></ul><li><a href="#Deprecations">Deprecations</a><ul><li><a href="#The-%2f%5cC%2f-character-class">The /\C/ character class</a><li><a href="#Literal-control-characters-in-variable-names">Literal control characters in variable names</a><li><a href="#References-to-non-integers-and-non-positive-integers-in-%24%2f">References to non-integers and non-positive integers in $/</a><li><a href="#Character-matching-routines-in-POSIX">Character matching routines in POSIX</a><li><a href="#Interpreter-based-threads-are-now-_discouraged_">Interpreter-based threads are now _discouraged_</a><li><a href="#Module-removals">Module removals</a><li><a href="#Utility-removals">Utility removals</a></ul><li><a href="#Performance-Enhancements">Performance Enhancements</a><li><a href="#Modules-and-Pragmata">Modules and Pragmata</a><ul><li><a href="#New-Modules-and-Pragmata">New Modules and Pragmata</a><li><a href="#Updated-Modules-and-Pragmata">Updated Modules and Pragmata</a></ul><li><a href="#Documentation">Documentation</a><ul><li><a href="#New-Documentation">New Documentation</a><li><a href="#Changes-to-Existing-Documentation">Changes to Existing Documentation</a></ul><li><a href="#Diagnostics">Diagnostics</a><ul><li><a href="#New-Diagnostics">New Diagnostics</a><li><a href="#Changes-to-Existing-Diagnostics">Changes to Existing Diagnostics</a></ul><li><a href="#Utility-Changes">Utility Changes</a><li><a href="#Configuration-and-Compilation">Configuration and Compilation</a><li><a href="#Testing">Testing</a><li><a href="#Platform-Support">Platform Support</a><ul><li><a href="#New-Platforms">New Platforms</a><li><a href="#Discontinued-Platforms">Discontinued Platforms</a><li><a href="#Platform-Specific-Notes">Platform-Specific Notes</a></ul><li><a href="#Internal-Changes">Internal Changes</a><li><a href="#Selected-Bug-Fixes">Selected Bug Fixes</a><ul><li><a href="#Regular-Expressions">Regular Expressions</a><li><a href="#Perl-5-Debugger-and--d">Perl 5 Debugger and -d</a><li><a href="#Lexical-Subroutines">Lexical Subroutines</a><li><a href="#Everything-Else">Everything Else</a></ul><li><a href="#Known-Problems">Known Problems</a><li><a href="#Obituary">Obituary</a><li><a href="#Acknowledgements">Acknowledgements</a><li><a href="#Reporting-Bugs">Reporting Bugs</a><li><a href="#SEE-ALSO">SEE ALSO</a></ul>
    </div>
    <div id="page_index_footer" class="hud_footer">
      <div id="page_index_bottomleft" class="hud_bottomleft"></div>
      <div id="page_index_bottom" class="hud_bottom"><span class="hud_span_bottom"></span></div>
      <div id="page_index_resize" class="hud_resize"></div>
    </div>
  </div>


	    &nbsp;
          </div>
          <div id="content_footer">
          </div>
        </div>
        <div class="clear"></div>
      </div>
      
    <div id="footer">
      <div id="footer_content">
        <div id="footer_strapline">
          perldoc.perl.org - Official documentation for the Perl programming language
        </div>
        <div id="footer_links">
          <div id="address">
            <p class="name">Contact details</p>
            <p class="address">
	      Site maintained by <a href="mailto:jj@jonallen.info">Jon Allen (JJ)</a><br>
	    </p>
            <p class="contact">
              Documentation maintained by the <a href="http://lists.cpan.org/showlist.cgi?name=perl5-porters">Perl 5 Porters</a>
            </p>
          </div>
          <ul class="f1">
            <li>Manual
              <ul class="f2">
                <li><a href="index-overview.html">Overview</a>
                <li><a href="index-tutorials.html">Tutorials</a>
                <li><a href="index-faq.html">FAQs</a>
                <li><a href="index-history.html">Changes</a>
              </ul>
            <li>Reference
              <ul class="f2">
                <li><a href="index-language.html">Language</a>
                <li><a href="index-functions.html">Functions</a>
                <li><a href="perlop.html">Operators</a>
                <li><a href="perlvar.html">Variables</a>
              </ul>
            <li>Modules
              <ul class="f2">
                <li><a href="index-modules-A.html">Modules</a>
                <li><a href="index-pragmas.html">Pragmas</a>
                <li><a href="index-utilities.html">Utilities</a>
              </ul>
            <li>Misc
              <ul class="f2">
                <li><a href="index-licence.html">License</a>
                <li><a href="index-internals.html">Internals</a>
                <li><a href="index-platforms.html">Platforms</a>
              </ul>          </ul>
          <div class="clear"></div>
        </div>
      </div>
      <div id="footer_end">
      </div>
    </div>
      
    </div>
      <script language="JavaScript" type="text/javascript" src="static/exploreperl.js"></script>
      <script language="JavaScript" src="static/combined-20100403.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
  perldoc.setPath(0);
  perldoc.pageName    = 'perl5200delta';
  perldoc.pageAddress = 'perl5200delta.html';
  perldoc.contentPage = 1;
  explorePerl.render();
  explorePerl.addEvents('explore_anchor');
</script>
    
  </body>
</html>
