<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
  <title>fields</title>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta http-equiv="Content-Language" content="en-gb">
  <link rel="search" type="application/opensearchdescription+xml" title="Search perldoc.perl.org" href="/static/search.xml"/>
  <link href="static/css-20100830.css" rel="stylesheet" rev="stylesheet" type="text/css" media="screen">
  <link href="static/exploreperl.css" rel="stylesheet" rev="stylesheet" type="text/css">
</head>

<body onLoad="perldoc.startup();" onPageShow="if (event.persisted) perldoc.startup();">
    <div id="page">
      
      <div id="header">
	<div id="homepage_link">
	  <a href="index.html"></a>
	</div>
	<div id="strapline">
	  Perl Programming Documentation
	</div>
	<div id="download_link" class="download">
	  <a href="http://www.perl.org/get.html">Download Perl</a>
	</div>
	<div id="explore_link" class="download">
	  <a id="explore_anchor" href="#">Explore</a>
	</div>
      </div>
      
      <div id="body">
        <div id="left_column">
          <div class="side_group">
            
	    <div class="side_panel doc_panel">
              <p>Manual</p>
              <ul>
                <li><a href="index-overview.html">Overview</a>
                <li><a href="index-tutorials.html">Tutorials</a>
                <li><a href="index-faq.html">FAQs</a>
                <li><a href="index-history.html">History / Changes</a>
                <li><a href="index-licence.html">License</a>
              </ul>
            </div>
            <div class="side_panel doc_panel">
              <p>Reference</p>
              <ul>
                <li><a href="index-language.html">Language</a>
                <li><a href="index-functions.html">Functions</a>
                <li><a href="perlop.html">Operators</a>
                <li><a href="perlvar.html">Special Variables</a>
                <li><a href="index-pragmas.html">Pragmas</a>
                <li><a href="index-utilities.html">Utilities</a>
                <li><a href="index-internals.html">Internals</a>
                <li><a href="index-platforms.html">Platform Specific</a>
              </ul>
            </div>
            <div class="side_panel doc_panel">
              <p>Modules</p>
              <ul>
		<li>
		
                
                  
		    
		  
		
                  
		    
		  
		
                  
		    
		  
		
                  
		    
		  
		
                  
		    
		  
		
                  
		    
		  
		
                  
		    
		  
		
                  
		    
		  
		
                  
		    
		  
		
                  
		
                  
		
                  
		    
		  
		
                  
		    
		  
		
                  
		    
		  
		
                  
		    
		  
		
                  
		    
		  
		
                  
		
                  
		
                  
		    
		  
		
                  
		    
		  
		
                  
		    
		  
		
                  
		
                  
		
                  
		    
		  
		
                  
		
                  
		
		
                    <a href="index-modules-A.html">A</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="index-modules-B.html">B</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="index-modules-C.html">C</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="index-modules-D.html">D</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="index-modules-E.html">E</a>
                    
                      
                        <li>
                      
                    
                
                    <a href="index-modules-F.html">F</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="index-modules-G.html">G</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="index-modules-H.html">H</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="index-modules-I.html">I</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="index-modules-L.html">L</a>
                    
                      
                        <li>
                      
                    
                
                    <a href="index-modules-M.html">M</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="index-modules-N.html">N</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="index-modules-O.html">O</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="index-modules-P.html">P</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="index-modules-S.html">S</a>
                    
                      
                        <li>
                      
                    
                
                    <a href="index-modules-T.html">T</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="index-modules-U.html">U</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="index-modules-X.html">X</a>
                    
                
              </ul>
            </div>
            
	      <div class="side_panel doc_panel">
		<p>Tools</p>
		<ul>
		  <li><a href="preferences.html">Preferences</a>
		</ul>
	      </div>
            
          </div>
        </div>
        <div id="centre_column">
          <div id="content_header">
            <div id="title_bar">
              <div id="page_name">
                <h1>fields</h1>
              </div>
              <div id="perl_version">
                Perl 5 version 22.0 documentation
              </div>
              <div class="page_links" id="page_links_top">
                <a href="#" onClick="toolbar.goToTop();return false;">Go to top</a>
		
              </div>
	      <div class="page_links" id="page_links_bottom">
		
                  <a href="#" id="page_index_toggle">Show page index</a> &bull;
		
                <a href="#" id="recent_pages_toggle">Show recent pages</a>		
	      </div>
	      <div id="search_form">
		<form action="search.html" method="GET" id="search">
		  <input type="text" name="q" id="search_box" alt="Search">
		</form>
	      </div>
            </div>
            <div id="breadcrumbs">
                
    <a href="index.html">Home</a> &gt;
    
      
        <a href="index-pragmas.html">Pragmas</a> &gt;
      
    
    fields
  

            </div>
          </div>
          <div id="content_body">
	    <!--[if lt IE 7]>
 <div class="noscript">
   <p>
     <strong>It looks like you're using Internet Explorer 6. This is a very old
     browser which does not offer full support for modern websites.</strong>
   </p>
   <p>
     Unfortunately this means that this website will not work on
     your computer.
   </p>
   <p>
     Don't miss out though! To view the site (and get a better experience from
     many other websites), simply upgrade to
     <a href="http://www.microsoft.com/windows/Internet-explorer/default.aspx">Internet
Explorer 8</a>
     or download an alternative browser such as
     <a href="http://www.mozilla.com/en-US/firefox/firefox.html">Firefox</a>,
     <a href="http://www.apple.com/safari/download/">Safari</a>, or
     <a href="http://www.google.co.uk/chrome">Google Chrome</a>.
   </p>
   <p>
     All of these browsers are free. If you're using a PC at work, you may
     need to contact your IT administrator.
   </p>
 </div>
<![endif]-->
	    <noscript>
	      <div class="noscript">
	      <p>
                <strong>Please note: Many features of this site require JavaScript. You appear to have JavaScript disabled,
	        or are running a non-JavaScript capable web browser.</strong>
	      </p>
	      <p>
		To get the best experience, please enable JavaScript or download a modern web browser such as <a href="http://www.microsoft.com/windows/Internet-explorer/default.aspx">Internet Explorer 8</a>, <a href="http://www.mozilla.com/en-US/firefox/firefox.html">Firefox</a>, <a href="http://www.apple.com/safari/download/">Safari</a>, or <a href="http://www.google.co.uk/chrome">Google Chrome</a>.
              </p>
	      </div>
	    </noscript>

	    <div id="recent_pages" class="hud_container">
	      <div id="recent_pages_header" class="hud_header">
		<div id="recent_pages_close" class="hud_close"><a href="#" onClick="recentPages.hide();return false;"></a></div>
		<div id="recent_pages_title" class="hud_title"><span class="hud_span_top">Recently read</span></div>
		<div id="recent_pages_topright" class="hud_topright"></div>
	      </div>
	      <div id="recent_pages_content" class="hud_content">
	      </div>
	      <div id="recent_pages_footer" class="hud_footer">
		<div id="recent_pages_bottomleft" class="hud_bottomleft"></div>
		<div id="recent_pages_bottom" class="hud_bottom"><span class="hud_span_bottom"></span></div>
		<div id="recent_pages_resize" class="hud_resize"></div>
	      </div>
	    </div>
  
	    <div id="from_search"></div>
            <h1>fields</h1>


  <!--    -->
<ul><li><a href="#NAME">NAME</a><li><a href="#SYNOPSIS">SYNOPSIS</a><li><a href="#DESCRIPTION">DESCRIPTION</a><li><a href="#SEE-ALSO">SEE ALSO</a></ul><a name="NAME"></a><h1>NAME</h1>
<p>fields - compile-time class fields</p>
<a name="SYNOPSIS"></a><h1>SYNOPSIS</h1>
<pre class="verbatim"><ol><li>    <span class="s">{</span></li><li><a name="package-Foo"></a>        package <span class="i">Foo</span><span class="sc">;</span></li><li>        <a class="l_k" href="functions/use.html">use</a> <span class="w">fields</span> <span class="q">qw(foo bar _Foo_private)</span><span class="sc">;</span></li><li><a name="new"></a>        sub <span class="m">new</span> <span class="s">{</span></li><li>            <a class="l_k" href="functions/my.html">my</a> <span class="w">Foo</span> <span class="i">$self</span> = <a class="l_k" href="functions/shift.html">shift</a><span class="sc">;</span></li><li>            <a class="l_k" href="functions/unless.html">unless</a> <span class="s">(</span><a class="l_k" href="functions/ref.html">ref</a> <span class="i">$self</span><span class="s">)</span> <span class="s">{</span></li><li>                <span class="i">$self</span> = <span class="i">fields::new</span><span class="s">(</span><span class="i">$self</span><span class="s">)</span><span class="sc">;</span></li><li>                <span class="i">$self</span>-&gt;{<span class="w">_Foo_private</span>} = <span class="q">&quot;this is Foo&#39;s secret&quot;</span><span class="sc">;</span></li><li>            <span class="s">}</span></li><li>            <span class="i">$self</span>-&gt;{<span class="w">foo</span>} = <span class="n">10</span><span class="sc">;</span></li><li>            <span class="i">$self</span>-&gt;{<span class="w">bar</span>} = <span class="n">20</span><span class="sc">;</span></li><li>            <a class="l_k" href="functions/return.html">return</a> <span class="i">$self</span><span class="sc">;</span></li><li>        <span class="s">}</span></li><li><a name="package-main"></a>    <span class="s">}</span></li><li></li><li>    <a class="l_k" href="functions/my.html">my</a> <span class="i">$var</span> = <span class="w">Foo</span><span class="w">-&gt;new</span><span class="sc">;</span></li><li>    <span class="i">$var</span>-&gt;{<span class="w">foo</span>} = <span class="n">42</span><span class="sc">;</span></li><li></li><li>    <span class="c"># this will generate a run-time error</span></li><li>    <span class="i">$var</span>-&gt;{<span class="w">zap</span>} = <span class="n">42</span><span class="sc">;</span></li><li></li><li>    <span class="c"># this will generate a compile-time error</span></li><li>    <a class="l_k" href="functions/my.html">my</a> <span class="w">Foo</span> <span class="i">$foo</span> = <span class="w">Foo</span><span class="w">-&gt;new</span><span class="sc">;</span></li><li>    <span class="i">$foo</span>-&gt;{<span class="w">zap</span>} = <span class="n">24</span><span class="sc">;</span></li><li></li><li>    <span class="c"># subclassing</span></li><li>    <span class="s">{</span></li><li><a name="package-Bar"></a>        package <span class="i">Bar</span><span class="sc">;</span></li><li>        <a class="l_k" href="functions/use.html">use</a> <span class="w">base</span> <span class="q">&#39;Foo&#39;</span><span class="sc">;</span></li><li>        <a class="l_k" href="functions/use.html">use</a> <span class="w">fields</span> <span class="q">qw(baz _Bar_private)</span><span class="sc">;</span>        <span class="c"># not shared with Foo</span></li><li><a name="new-1"></a>        sub <span class="m">new</span> <span class="s">{</span></li><li>            <a class="l_k" href="functions/my.html">my</a> <span class="i">$class</span> = <a class="l_k" href="functions/shift.html">shift</a><span class="sc">;</span></li><li>            <a class="l_k" href="functions/my.html">my</a> <span class="i">$self</span> = <span class="i">fields::new</span><span class="s">(</span><span class="i">$class</span><span class="s">)</span><span class="sc">;</span></li><li>            <span class="i">$self</span><span class="i">-&gt;SUPER::new</span><span class="s">(</span><span class="s">)</span><span class="sc">;</span>                <span class="c"># init base fields</span></li><li>            <span class="i">$self</span>-&gt;{<span class="w">baz</span>} = <span class="n">10</span><span class="sc">;</span>                  <span class="c"># init own fields</span></li><li>            <span class="i">$self</span>-&gt;{<span class="w">_Bar_private</span>} = <span class="q">&quot;this is Bar&#39;s secret&quot;</span><span class="sc">;</span></li><li>            <a class="l_k" href="functions/return.html">return</a> <span class="i">$self</span><span class="sc">;</span></li><li>        <span class="s">}</span></li><li><a name="package-main-1"></a>    <span class="s">}</span></li></ol></pre><a name="DESCRIPTION"></a><h1>DESCRIPTION</h1>
<p>The <code class="inline"><span class="w">fields</span></code>
 pragma enables compile-time and run-time verified class
fields.</p>
<p>NOTE: The current implementation keeps the declared fields in the %FIELDS
hash of the calling package, but this may change in future versions.
Do <b>not</b> update the %FIELDS hash directly, because it must be created
at compile-time for it to be fully useful, as is done by this pragma.</p>
<p>If a typed lexical variable (<code class="inline"><a class="l_k" href="functions/my.html">my</a> <span class="w">Class</span>
<span class="i">$var</span></code>
) holding a reference is used to access a
hash element and a package with the same name as the type has
declared class fields using this pragma, then the hash key is
verified at compile time.  If the variables are not typed, access is
only checked at run time.</p>
<p>The related <code class="inline"><span class="w">base</span></code>
 pragma will combine fields from base classes and any
fields declared using the <code class="inline"><span class="w">fields</span></code>
 pragma.  This enables field
inheritance to work properly.  Inherited fields can be overridden but
will generate a warning if warnings are enabled.</p>
<p><b>Only valid for Perl 5.8.x and earlier:</b> Field names that start with an
underscore character are made private to the class and are not visible
to subclasses.</p>
<p>Also, <b>in Perl 5.8.x and earlier</b>, this pragma uses pseudo-hashes, the
effect being that you can have objects with named fields which are as
compact and as fast arrays to access, as long as the objects are
accessed through properly typed variables.</p>
<p>The following functions are supported:</p>
<ul>
<li><a name="new"></a><b>new</b>
<p>fields::new() creates and blesses a hash comprised of the fields declared
using the <code class="inline"><span class="w">fields</span></code>
 pragma into the specified class.  It is the
recommended way to construct a fields-based object.</p>
<p>This makes it possible to write a constructor like this:</p>
<pre class="verbatim"><ol><li><a name="package-Critter::Sounds"></a>    package <span class="i">Critter::Sounds</span><span class="sc">;</span></li><li>    <a class="l_k" href="functions/use.html">use</a> <span class="w">fields</span> <span class="q">qw(cat dog bird)</span><span class="sc">;</span></li><li></li><li><a name="new"></a>    sub <span class="m">new</span> <span class="s">{</span></li><li>        <a class="l_k" href="functions/my.html">my</a> <span class="i">$self</span> = <a class="l_k" href="functions/shift.html">shift</a><span class="sc">;</span></li><li>        <span class="i">$self</span> = <span class="i">fields::new</span><span class="s">(</span><span class="i">$self</span><span class="s">)</span> <a class="l_k" href="functions/unless.html">unless</a> <a class="l_k" href="functions/ref.html">ref</a> <span class="i">$self</span><span class="sc">;</span></li><li>        <span class="i">$self</span>-&gt;{<span class="w">cat</span>} = <span class="q">&#39;meow&#39;</span><span class="sc">;</span>                      <span class="c"># scalar element</span></li><li>        <span class="i">@$self</span>{<span class="q">&#39;dog&#39;</span><span class="cm">,</span><span class="q">&#39;bird&#39;</span>} = <span class="s">(</span><span class="q">&#39;bark&#39;</span><span class="cm">,</span><span class="q">&#39;tweet&#39;</span><span class="s">)</span><span class="sc">;</span>    <span class="c"># slice</span></li><li>        <a class="l_k" href="functions/return.html">return</a> <span class="i">$self</span><span class="sc">;</span></li><li>    <span class="s">}</span></li></ol></pre></li>
<li><a name="phash"></a><b>phash</b>
<p><b>This function only works in Perl 5.8.x and earlier.</b>  Pseudo-hashes
were removed from Perl as of 5.10.  Consider using restricted hashes or
fields::new() instead (which itself uses restricted hashes under 5.10+).
See <a href="Hash/Util.html">Hash::Util</a>.  Using fields::phash() under 5.10 or higher will
cause an error.</p>
<p>fields::phash() can be used to create and initialize a plain (unblessed)
pseudo-hash.  This function should always be used instead of creating
pseudo-hashes directly.</p>
<p>If the first argument is a reference to an array, the pseudo-hash will
be created with keys from that array.  If a second argument is supplied,
it must also be a reference to an array whose elements will be used as
the values.  If the second array contains less elements than the first,
the trailing elements of the pseudo-hash will not be initialized.
This makes it particularly useful for creating a pseudo-hash from
subroutine arguments:</p>
<pre class="verbatim"><ol><li><a name="dogtag"></a>    sub <span class="m">dogtag</span> <span class="s">{</span></li><li>       <a class="l_k" href="functions/my.html">my</a> <span class="i">$tag</span> = <span class="i">fields::phash</span><span class="s">(</span><span class="s">[</span><span class="q">qw(name rank ser_num)</span><span class="s">]</span><span class="cm">,</span> <span class="s">[</span><span class="i">@_</span><span class="s">]</span><span class="s">)</span><span class="sc">;</span></li><li>    <span class="s">}</span></li></ol></pre><p>fields::phash() also accepts a list of key-value pairs that will
be used to construct the pseudo hash.  Examples:</p>
<pre class="verbatim"><ol><li>    <a class="l_k" href="functions/my.html">my</a> <span class="i">$tag</span> = <span class="i">fields::phash</span><span class="s">(</span><span class="w">name</span> <span class="cm">=&gt;</span> <span class="q">&quot;Joe&quot;</span><span class="cm">,</span></li><li>                            <span class="w">rank</span> <span class="cm">=&gt;</span> <span class="q">&quot;captain&quot;</span><span class="cm">,</span></li><li>                            <span class="w">ser_num</span> <span class="cm">=&gt;</span> <span class="n">42</span><span class="s">)</span><span class="sc">;</span></li><li></li><li>    <a class="l_k" href="functions/my.html">my</a> <span class="i">$pseudohash</span> = <span class="i">fields::phash</span><span class="s">(</span><span class="i">%args</span><span class="s">)</span><span class="sc">;</span></li></ol></pre></li>
</ul>
<a name="SEE-ALSO"></a><h1>SEE ALSO</h1>
<p><a href="base.html">base</a>, <a href="Hash/Util.html">Hash::Util</a></p>




  <div id="page_index" class="hud_container">
    <div id="page_index_header" class="hud_header">
      <div id="page_index_close" class="hud_close"><a href="#" onClick="pageIndex.hide();return false;"></a></div>
      <div id="page_index_title" class="hud_title"><span class="hud_span_top">Page index</span></div>
      <div id="page_index_topright" class="hud_topright"></div>
    </div>
    <div id="page_index_content" class="hud_content">
      <ul><li><a href="#NAME">NAME</a><li><a href="#SYNOPSIS">SYNOPSIS</a><li><a href="#DESCRIPTION">DESCRIPTION</a><li><a href="#SEE-ALSO">SEE ALSO</a></ul>
    </div>
    <div id="page_index_footer" class="hud_footer">
      <div id="page_index_bottomleft" class="hud_bottomleft"></div>
      <div id="page_index_bottom" class="hud_bottom"><span class="hud_span_bottom"></span></div>
      <div id="page_index_resize" class="hud_resize"></div>
    </div>
  </div>


	    &nbsp;
          </div>
          <div id="content_footer">
          </div>
        </div>
        <div class="clear"></div>
      </div>
      
    <div id="footer">
      <div id="footer_content">
        <div id="footer_strapline">
          perldoc.perl.org - Official documentation for the Perl programming language
        </div>
        <div id="footer_links">
          <div id="address">
            <p class="name">Contact details</p>
            <p class="address">
	      Site maintained by <a href="mailto:jj@jonallen.info">Jon Allen (JJ)</a><br>
	    </p>
            <p class="contact">
              Documentation maintained by the <a href="http://lists.cpan.org/showlist.cgi?name=perl5-porters">Perl 5 Porters</a>
            </p>
          </div>
          <ul class="f1">
            <li>Manual
              <ul class="f2">
                <li><a href="index-overview.html">Overview</a>
                <li><a href="index-tutorials.html">Tutorials</a>
                <li><a href="index-faq.html">FAQs</a>
                <li><a href="index-history.html">Changes</a>
              </ul>
            <li>Reference
              <ul class="f2">
                <li><a href="index-language.html">Language</a>
                <li><a href="index-functions.html">Functions</a>
                <li><a href="perlop.html">Operators</a>
                <li><a href="perlvar.html">Variables</a>
              </ul>
            <li>Modules
              <ul class="f2">
                <li><a href="index-modules-A.html">Modules</a>
                <li><a href="index-pragmas.html">Pragmas</a>
                <li><a href="index-utilities.html">Utilities</a>
              </ul>
            <li>Misc
              <ul class="f2">
                <li><a href="index-licence.html">License</a>
                <li><a href="index-internals.html">Internals</a>
                <li><a href="index-platforms.html">Platforms</a>
              </ul>          </ul>
          <div class="clear"></div>
        </div>
      </div>
      <div id="footer_end">
      </div>
    </div>
      
    </div>
      <script language="JavaScript" type="text/javascript" src="static/exploreperl.js"></script>
      <script language="JavaScript" src="static/combined-20100403.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
  perldoc.setPath(0);
  perldoc.pageName    = 'fields';
  perldoc.pageAddress = 'fields.html';
  perldoc.contentPage = 1;
  explorePerl.render();
  explorePerl.addEvents('explore_anchor');
</script>
    
  </body>
</html>
