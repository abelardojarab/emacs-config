<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
  <title>perl58delta</title>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta http-equiv="Content-Language" content="en-gb">
  <link rel="search" type="application/opensearchdescription+xml" title="Search perldoc.perl.org" href="/static/search.xml"/>
  <link href="static/css-20100830.css" rel="stylesheet" rev="stylesheet" type="text/css" media="screen">
  <link href="static/exploreperl.css" rel="stylesheet" rev="stylesheet" type="text/css">
</head>

<body onLoad="perldoc.startup();" onPageShow="if (event.persisted) perldoc.startup();">
    <div id="page">
      
      <div id="header">
	<div id="homepage_link">
	  <a href="index.html"></a>
	</div>
	<div id="strapline">
	  Perl Programming Documentation
	</div>
	<div id="download_link" class="download">
	  <a href="http://www.perl.org/get.html">Download Perl</a>
	</div>
	<div id="explore_link" class="download">
	  <a id="explore_anchor" href="#">Explore</a>
	</div>
      </div>
      
      <div id="body">
        <div id="left_column">
          <div class="side_group">
            
	    <div class="side_panel doc_panel">
              <p>Manual</p>
              <ul>
                <li><a href="index-overview.html">Overview</a>
                <li><a href="index-tutorials.html">Tutorials</a>
                <li><a href="index-faq.html">FAQs</a>
                <li><a href="index-history.html">History / Changes</a>
                <li><a href="index-licence.html">License</a>
              </ul>
            </div>
            <div class="side_panel doc_panel">
              <p>Reference</p>
              <ul>
                <li><a href="index-language.html">Language</a>
                <li><a href="index-functions.html">Functions</a>
                <li><a href="perlop.html">Operators</a>
                <li><a href="perlvar.html">Special Variables</a>
                <li><a href="index-pragmas.html">Pragmas</a>
                <li><a href="index-utilities.html">Utilities</a>
                <li><a href="index-internals.html">Internals</a>
                <li><a href="index-platforms.html">Platform Specific</a>
              </ul>
            </div>
            <div class="side_panel doc_panel">
              <p>Modules</p>
              <ul>
		<li>
		
                
                  
		    
		  
		
                  
		    
		  
		
                  
		    
		  
		
                  
		    
		  
		
                  
		    
		  
		
                  
		    
		  
		
                  
		    
		  
		
                  
		    
		  
		
                  
		    
		  
		
                  
		
                  
		
                  
		    
		  
		
                  
		    
		  
		
                  
		    
		  
		
                  
		    
		  
		
                  
		    
		  
		
                  
		
                  
		
                  
		    
		  
		
                  
		    
		  
		
                  
		    
		  
		
                  
		
                  
		
                  
		    
		  
		
                  
		
                  
		
		
                    <a href="index-modules-A.html">A</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="index-modules-B.html">B</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="index-modules-C.html">C</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="index-modules-D.html">D</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="index-modules-E.html">E</a>
                    
                      
                        <li>
                      
                    
                
                    <a href="index-modules-F.html">F</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="index-modules-G.html">G</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="index-modules-H.html">H</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="index-modules-I.html">I</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="index-modules-L.html">L</a>
                    
                      
                        <li>
                      
                    
                
                    <a href="index-modules-M.html">M</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="index-modules-N.html">N</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="index-modules-O.html">O</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="index-modules-P.html">P</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="index-modules-S.html">S</a>
                    
                      
                        <li>
                      
                    
                
                    <a href="index-modules-T.html">T</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="index-modules-U.html">U</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="index-modules-X.html">X</a>
                    
                
              </ul>
            </div>
            
	      <div class="side_panel doc_panel">
		<p>Tools</p>
		<ul>
		  <li><a href="preferences.html">Preferences</a>
		</ul>
	      </div>
            
          </div>
        </div>
        <div id="centre_column">
          <div id="content_header">
            <div id="title_bar">
              <div id="page_name">
                <h1>perl58delta</h1>
              </div>
              <div id="perl_version">
                Perl 5 version 22.0 documentation
              </div>
              <div class="page_links" id="page_links_top">
                <a href="#" onClick="toolbar.goToTop();return false;">Go to top</a>
		
              </div>
	      <div class="page_links" id="page_links_bottom">
		
                  <a href="#" id="page_index_toggle">Show page index</a> &bull;
		
                <a href="#" id="recent_pages_toggle">Show recent pages</a>		
	      </div>
	      <div id="search_form">
		<form action="search.html" method="GET" id="search">
		  <input type="text" name="q" id="search_box" alt="Search">
		</form>
	      </div>
            </div>
            <div id="breadcrumbs">
                
    <a href="index.html">Home</a> &gt;
    
      
        <a href="index-history.html">History / Changes</a> &gt;
      
    
    perl58delta
  

            </div>
          </div>
          <div id="content_body">
	    <!--[if lt IE 7]>
 <div class="noscript">
   <p>
     <strong>It looks like you're using Internet Explorer 6. This is a very old
     browser which does not offer full support for modern websites.</strong>
   </p>
   <p>
     Unfortunately this means that this website will not work on
     your computer.
   </p>
   <p>
     Don't miss out though! To view the site (and get a better experience from
     many other websites), simply upgrade to
     <a href="http://www.microsoft.com/windows/Internet-explorer/default.aspx">Internet
Explorer 8</a>
     or download an alternative browser such as
     <a href="http://www.mozilla.com/en-US/firefox/firefox.html">Firefox</a>,
     <a href="http://www.apple.com/safari/download/">Safari</a>, or
     <a href="http://www.google.co.uk/chrome">Google Chrome</a>.
   </p>
   <p>
     All of these browsers are free. If you're using a PC at work, you may
     need to contact your IT administrator.
   </p>
 </div>
<![endif]-->
	    <noscript>
	      <div class="noscript">
	      <p>
                <strong>Please note: Many features of this site require JavaScript. You appear to have JavaScript disabled,
	        or are running a non-JavaScript capable web browser.</strong>
	      </p>
	      <p>
		To get the best experience, please enable JavaScript or download a modern web browser such as <a href="http://www.microsoft.com/windows/Internet-explorer/default.aspx">Internet Explorer 8</a>, <a href="http://www.mozilla.com/en-US/firefox/firefox.html">Firefox</a>, <a href="http://www.apple.com/safari/download/">Safari</a>, or <a href="http://www.google.co.uk/chrome">Google Chrome</a>.
              </p>
	      </div>
	    </noscript>

	    <div id="recent_pages" class="hud_container">
	      <div id="recent_pages_header" class="hud_header">
		<div id="recent_pages_close" class="hud_close"><a href="#" onClick="recentPages.hide();return false;"></a></div>
		<div id="recent_pages_title" class="hud_title"><span class="hud_span_top">Recently read</span></div>
		<div id="recent_pages_topright" class="hud_topright"></div>
	      </div>
	      <div id="recent_pages_content" class="hud_content">
	      </div>
	      <div id="recent_pages_footer" class="hud_footer">
		<div id="recent_pages_bottomleft" class="hud_bottomleft"></div>
		<div id="recent_pages_bottom" class="hud_bottom"><span class="hud_span_bottom"></span></div>
		<div id="recent_pages_resize" class="hud_resize"></div>
	      </div>
	    </div>
  
	    <div id="from_search"></div>
            <h1>perl58delta</h1>


  <!--    -->
<ul><li><a href="#NAME">NAME</a><li><a href="#DESCRIPTION">DESCRIPTION</a><li><a href="#Highlights-In-5.8.0">Highlights In 5.8.0</a><li><a href="#Incompatible-Changes">Incompatible Changes</a><ul><li><a href="#Binary-Incompatibility">Binary Incompatibility</a><li><a href="#64-bit-platforms-and-malloc">64-bit platforms and malloc</a><li><a href="#AIX-Dynaloading">AIX Dynaloading</a><li><a href="#Attributes-for-my-variables-now-handled-at-run-time">Attributes for my variables now handled at run-time</a><li><a href="#Socket-Extension-Dynamic-in-VMS">Socket Extension Dynamic in VMS</a><li><a href="#IEEE-format-Floating-Point-Default-on-OpenVMS-Alpha">IEEE-format Floating Point Default on OpenVMS Alpha</a><li><a href="#New-Unicode-Semantics-(no-more-use-utf8%2c-almost)">New Unicode Semantics (no more use utf8, almost)</a><li><a href="#New-Unicode-Properties">New Unicode Properties</a><li><a href="#REF(...)-Instead-Of-SCALAR(...)">REF(...) Instead Of SCALAR(...)</a><li><a href="#pack%2funpack-D%2fF-recycled">pack/unpack D/F recycled</a><li><a href="#glob()-now-returns-filenames-in-alphabetical-order">glob() now returns filenames in alphabetical order</a><li><a href="#Deprecations">Deprecations</a></ul><li><a href="#Core-Enhancements">Core Enhancements</a><ul><li><a href="#Unicode-Overhaul">Unicode Overhaul</a><li><a href="#PerlIO-is-Now-The-Default">PerlIO is Now The Default</a><li><a href="#ithreads">ithreads</a><li><a href="#Restricted-Hashes">Restricted Hashes</a><li><a href="#Safe-Signals">Safe Signals</a><li><a href="#Understanding-of-Numbers">Understanding of Numbers</a><li><a href="#Arrays-now-always-interpolate-into-double-quoted-strings-%5b561%5d">Arrays now always interpolate into double-quoted strings [561]</a><li><a href="#Miscellaneous-Changes">Miscellaneous Changes</a></ul><li><a href="#Modules-and-Pragmata">Modules and Pragmata</a><ul><li><a href="#New-Modules-and-Pragmata">New Modules and Pragmata</a><li><a href="#Updated-And-Improved-Modules-and-Pragmata">Updated And Improved Modules and Pragmata</a></ul><li><a href="#Utility-Changes">Utility Changes</a><li><a href="#New-Documentation">New Documentation</a><li><a href="#Performance-Enhancements">Performance Enhancements</a><li><a href="#Installation-and-Configuration-Improvements">Installation and Configuration Improvements</a><ul><li><a href="#Generic-Improvements">Generic Improvements</a><li><a href="#New-Or-Improved-Platforms">New Or Improved Platforms</a></ul><li><a href="#Selected-Bug-Fixes">Selected Bug Fixes</a><ul><li><a href="#Platform-Specific-Changes-and-Fixes">Platform Specific Changes and Fixes</a></ul><li><a href="#New-or-Changed-Diagnostics">New or Changed Diagnostics</a><li><a href="#Changed-Internals">Changed Internals</a><li><a href="#Security-Vulnerability-Closed-%5b561%5d">Security Vulnerability Closed [561]</a><li><a href="#New-Tests">New Tests</a><li><a href="#Known-Problems">Known Problems</a><ul><li><a href="#The-Compiler-Suite-Is-Still-Very-Experimental">The Compiler Suite Is Still Very Experimental</a><li><a href="#Localising-Tied-Arrays-and-Hashes-Is-Broken">Localising Tied Arrays and Hashes Is Broken</a><li><a href="#Building-Extensions-Can-Fail-Because-Of-Largefiles">Building Extensions Can Fail Because Of Largefiles</a><li><a href="#Modifying-%24_-Inside-for(..)">Modifying $_ Inside for(..)</a><li><a href="#mod_perl-1.26-Doesn't-Build-With-Threaded-Perl">mod_perl 1.26 Doesn't Build With Threaded Perl</a><li><a href="#lib%2fftmp-security-tests-warn-'system-possibly-insecure'">lib/ftmp-security tests warn 'system possibly insecure'</a><li><a href="#libwww-perl-(LWP)-fails-base%2fdate-%2351">libwww-perl (LWP) fails base/date #51</a><li><a href="#PDL-failing-some-tests">PDL failing some tests</a><li><a href="#Perl_get_sv">Perl_get_sv</a><li><a href="#Self-tying-Problems">Self-tying Problems</a><li><a href="#ext%2fthreads%2ft%2flibc">ext/threads/t/libc</a><li><a href="#Failure-of-Thread-(5.005-style)-tests">Failure of Thread (5.005-style) tests</a><li><a href="#Timing-problems">Timing problems</a><li><a href="#Tied%2fMagical-Array%2fHash-Elements-Do-Not-Autovivify">Tied/Magical Array/Hash Elements Do Not Autovivify</a><li><a href="#Unicode-in-package%2fclass-and-subroutine-names-does-not-work">Unicode in package/class and subroutine names does not work</a></ul><li><a href="#Platform-Specific-Problems">Platform Specific Problems</a><ul><li><a href="#AIX">AIX</a><li><a href="#Alpha-systems-with-old-gccs-fail-several-tests">Alpha systems with old gccs fail several tests</a><li><a href="#AmigaOS">AmigaOS</a><li><a href="#BeOS">BeOS</a><li><a href="#Cygwin-%22unable-to-remap%22">Cygwin "unable to remap"</a><li><a href="#Cygwin-ndbm-tests-fail-on-FAT">Cygwin ndbm tests fail on FAT</a><li><a href="#DJGPP-Failures">DJGPP Failures</a><li><a href="#FreeBSD-built-with-ithreads-coredumps-reading-large-directories">FreeBSD built with ithreads coredumps reading large directories</a><li><a href="#FreeBSD-Failing-locale-Test-117-For-ISO-8859-15-Locales">FreeBSD Failing locale Test 117 For ISO 8859-15 Locales</a><li><a href="#IRIX-fails-ext%2fList%2fUtil%2ft%2fshuffle.t-or-Digest%3a%3aMD5">IRIX fails ext/List/Util/t/shuffle.t or Digest::MD5</a><li><a href="#HP-UX-lib%2fposix-Subtest-9-Fails-When-LP64-Configured">HP-UX lib/posix Subtest 9 Fails When LP64-Configured</a><li><a href="#Linux-with-glibc-2.2.5-fails-t%2fop%2fint-subtest-%236-with--Duse64bitint">Linux with glibc 2.2.5 fails t/op/int subtest #6 with -Duse64bitint</a><li><a href="#Linux-With-Sfio-Fails-op%2fmisc-Test-48">Linux With Sfio Fails op/misc Test 48</a><li><a href="#Mac-OS-X">Mac OS X</a><li><a href="#Mac-OS-X-dyld-undefined-symbols">Mac OS X dyld undefined symbols</a><li><a href="#OS%2f2-Test-Failures">OS/2 Test Failures</a><li><a href="#op%2fsprintf-tests-91%2c-129%2c-and-130">op/sprintf tests 91, 129, and 130</a><li><a href="#SCO">SCO</a><li><a href="#Solaris-2.5">Solaris 2.5</a><li><a href="#Solaris-x86-Fails-Tests-With--Duse64bitint">Solaris x86 Fails Tests With -Duse64bitint</a><li><a href="#SUPER-UX-(NEC-SX)">SUPER-UX (NEC SX)</a><li><a href="#Term%3a%3aReadKey-not-working-on-Win32">Term::ReadKey not working on Win32</a><li><a href="#UNICOS%2fmk">UNICOS/mk</a><li><a href="#UTS">UTS</a><li><a href="#VOS-(Stratus)">VOS (Stratus)</a><li><a href="#VMS">VMS</a><li><a href="#Win32">Win32</a><li><a href="#XML%3a%3aParser-not-working">XML::Parser not working</a><li><a href="#z%2fOS-(OS%2f390)">z/OS (OS/390)</a><li><a href="#Unicode-Support-on-EBCDIC-Still-Spotty">Unicode Support on EBCDIC Still Spotty</a><li><a href="#Seen-In-Perl-5.7-But-Gone-Now">Seen In Perl 5.7 But Gone Now</a></ul><li><a href="#Reporting-Bugs">Reporting Bugs</a><li><a href="#SEE-ALSO">SEE ALSO</a><li><a href="#HISTORY">HISTORY</a></ul><a name="NAME"></a><h1>NAME</h1>
<p>perl58delta - what is new for perl v5.8.0</p>
<a name="DESCRIPTION"></a><h1>DESCRIPTION</h1>
<p>This document describes differences between the 5.6.0 release and
the 5.8.0 release.</p>
<p>Many of the bug fixes in 5.8.0 were already seen in the 5.6.1
maintenance release since the two releases were kept closely
coordinated (while 5.8.0 was still called 5.7.something).</p>
<p>Changes that were integrated into the 5.6.1 release are marked <code class="inline"><span class="s">[</span><span class="n">561</span><span class="s">]</span></code>
.
Many of these changes have been further developed since 5.6.1 was released,
those are marked <code class="inline"><span class="s">[</span><span class="n">561</span>+<span class="s">]</span></code>
.</p>
<p>You can see the list of changes in the 5.6.1 release (both from the
5.005_03 release and the 5.6.0 release) by reading <a href="perl561delta.html">perl561delta</a>.</p>
<a name="Highlights-In-5.8.0"></a><h1>Highlights In 5.8.0</h1>
<ul>
<li>
<p>Better Unicode support</p>
</li>
<li>
<p>New IO Implementation</p>
</li>
<li>
<p>New Thread Implementation</p>
</li>
<li>
<p>Better Numeric Accuracy</p>
</li>
<li>
<p>Safe Signals</p>
</li>
<li>
<p>Many New Modules</p>
</li>
<li>
<p>More Extensive Regression Testing</p>
</li>
</ul>
<a name="Incompatible-Changes"></a><h1>Incompatible Changes</h1>
<a name="Binary-Incompatibility"></a><h2>Binary Incompatibility</h2>
<p><b>Perl 5.8 is not binary compatible with earlier releases of Perl.</b></p>
<p><b>You have to recompile your XS modules.</b></p>
<p>(Pure Perl modules should continue to work.)</p>
<p>The major reason for the discontinuity is the new IO architecture
called PerlIO.  PerlIO is the default configuration because without
it many new features of Perl 5.8 cannot be used.  In other words:
you just have to recompile your modules containing XS code, sorry
about that.</p>
<p>In future releases of Perl, non-PerlIO aware XS modules may become
completely unsupported.  This shouldn't be too difficult for module
authors, however: PerlIO has been designed as a drop-in replacement
(at the source code level) for the stdio interface.</p>
<p>Depending on your platform, there are also other reasons why
we decided to break binary compatibility, please read on.</p>
<a name="64-bit-platforms-and-malloc"></a><h2>64-bit platforms and malloc</h2>
<p>If your pointers are 64 bits wide, the Perl malloc is no longer being
used because it does not work well with 8-byte pointers.  Also,
usually the system mallocs on such platforms are much better optimized
for such large memory models than the Perl malloc.  Some memory-hungry
Perl applications like the PDL don't work well with Perl's malloc.
Finally, other applications than Perl (such as mod_perl) tend to prefer
the system malloc.  Such platforms include Alpha and 64-bit HPPA,
MIPS, PPC, and Sparc.</p>
<a name="AIX-Dynaloading"></a><h2>AIX Dynaloading</h2>
<p>The AIX dynaloading now uses in AIX releases 4.3 and newer the native
dlopen interface of AIX instead of the old emulated interface.  This
change will probably break backward compatibility with compiled
modules.  The change was made to make Perl more compliant with other
applications like mod_perl which are using the AIX native interface.</p>
<a name="Attributes-for-my-variables-now-handled-at-run-time"></a><h2>Attributes for <code class="inline"><a class="l_k" href="functions/my.html">my</a></code> variables now handled at run-time</h2>
<p>The <code class="inline"><a class="l_k" href="functions/my.html">my</a> <span class="w">EXPR</span> <span class="co">:</span> <span class="w">ATTRS</span></code>
 syntax now applies variable attributes at
run-time.  (Subroutine and <code class="inline"><a class="l_k" href="functions/our.html">our</a></code> variables still get attributes applied
at compile-time.)  See <a href="attributes.html">attributes</a> for additional details.  In particular,
however, this allows variable attributes to be useful for <code class="inline"><a class="l_k" href="functions/tie.html">tie</a></code> interfaces,
which was a deficiency of earlier releases.  Note that the new semantics
doesn't work with the Attribute::Handlers module (as of version 0.76).</p>
<a name="Socket-Extension-Dynamic-in-VMS"></a><h2>Socket Extension Dynamic in VMS</h2>
<p>The Socket extension is now dynamically loaded instead of being
statically built in.  This may or may not be a problem with ancient
TCP/IP stacks of VMS: we do not know since we weren't able to test
Perl in such configurations.</p>
<a name="IEEE-format-Floating-Point-Default-on-OpenVMS-Alpha"></a><h2>IEEE-format Floating Point Default on OpenVMS Alpha</h2>
<p>Perl now uses IEEE format (T_FLOAT) as the default internal floating
point format on OpenVMS Alpha, potentially breaking binary compatibility
with external libraries or existing data.  G_FLOAT is still available as
a configuration option.  The default on VAX (D_FLOAT) has not changed.</p>
<a name="New-Unicode-Semantics-(no-more-use-utf8%2c-almost)"></a><h2>New Unicode Semantics (no more <code class="inline"><a class="l_k" href="functions/use.html">use</a> <span class="w">utf8</span></code>
, almost)</h2>
<p>Previously in Perl 5.6 to use Unicode one would say "use utf8" and
then the operations (like string concatenation) were Unicode-aware
in that lexical scope.</p>
<p>This was found to be an inconvenient interface, and in Perl 5.8 the
Unicode model has completely changed: now the "Unicodeness" is bound
to the data itself, and for most of the time "use utf8" is not needed
at all.  The only remaining use of "use utf8" is when the Perl script
itself has been written in the UTF-8 encoding of Unicode.  (UTF-8 has
not been made the default since there are many Perl scripts out there
that are using various national eight-bit character sets, which would
be illegal in UTF-8.)</p>
<p>See <a href="perluniintro.html">perluniintro</a> for the explanation of the current model,
and <a href="utf8.html">utf8</a> for the current use of the utf8 pragma.</p>
<a name="New-Unicode-Properties"></a><h2>New Unicode Properties</h2>
<p>Unicode <i>scripts</i> are now supported. Scripts are similar to (and superior
to) Unicode <i>blocks</i>. The difference between scripts and blocks is that
scripts are the glyphs used by a language or a group of languages, while
the blocks are more artificial groupings of (mostly) 256 characters based
on the Unicode numbering.</p>
<p>In general, scripts are more inclusive, but not universally so. For
example, while the script <code class="inline"><span class="w">Latin</span></code>
 includes all the Latin characters and
their various diacritic-adorned versions, it does not include the various
punctuation or digits (since they are not solely <code class="inline"><span class="w">Latin</span></code>
).</p>
<p>A number of other properties are now supported, including <code class="inline">\p{L&amp;}</code>,
<code class="inline">\<span class="i">p</span><span class="s">{</span><span class="w">Any</span><span class="s">}</span></code>
 <code class="inline">\<span class="i">p</span><span class="s">{</span><span class="w">Assigned</span><span class="s">}</span></code>
, <code class="inline">\<span class="i">p</span><span class="s">{</span><span class="w">Unassigned</span><span class="s">}</span></code>
, <code class="inline">\<span class="i">p</span><span class="s">{</span><span class="w">Blank</span><span class="s">}</span></code>
 [561] and
<code class="inline">\<span class="i">p</span><span class="s">{</span><span class="w">SpacePerl</span><span class="s">}</span></code>
 [561] (along with their <code class="inline">\<span class="i">P</span><span class="s">{</span>...<span class="s">}</span></code>
 versions, of course).
See <a href="perlunicode.html">perlunicode</a> for details, and more additions.</p>
<p>The <code class="inline"><span class="w">In</span></code>
 or <code class="inline"><span class="w">Is</span></code>
 prefix to names used with the <code class="inline">\<span class="i">p</span><span class="s">{</span>...<span class="s">}</span></code>
 and <code class="inline">\<span class="i">P</span><span class="s">{</span>...<span class="s">}</span></code>

are now almost always optional. The only exception is that a <code class="inline"><span class="w">In</span></code>
 prefix
is required to signify a Unicode block when a block name conflicts with a
script name. For example, <code class="inline">\<span class="i">p</span><span class="s">{</span><span class="w">Tibetan</span><span class="s">}</span></code>
 refers to the script, while
<code class="inline">\<span class="i">p</span><span class="s">{</span><span class="w">InTibetan</span><span class="s">}</span></code>
 refers to the block. When there is no name conflict, you
can omit the <code class="inline"><span class="w">In</span></code>
 from the block name (e.g. <code class="inline">\<span class="i">p</span><span class="s">{</span><span class="w">BraillePatterns</span><span class="s">}</span></code>
), but
to be safe, it's probably best to always use the <code class="inline"><span class="w">In</span></code>
).</p>
<a name="REF(...)-Instead-Of-SCALAR(...)"></a><h2>REF(...) Instead Of SCALAR(...)</h2>
<p>A reference to a reference now stringifies as "REF(0x81485ec)" instead
of "SCALAR(0x81485ec)" in order to be more consistent with the return
value of ref().</p>
<a name="pack%2funpack-D%2fF-recycled"></a><h2>pack/unpack D/F recycled</h2>
<p>The undocumented pack/unpack template letters D/F have been recycled
for better use: now they stand for long double (if supported by the
platform) and NV (Perl internal floating point type).  (They used
to be aliases for d/f, but you never knew that.)</p>
<a name="glob()-now-returns-filenames-in-alphabetical-order"></a><h2>glob() now returns filenames in alphabetical order</h2>
<p>The list of filenames from glob() (or &lt;...&gt;) is now by default sorted
alphabetically to be csh-compliant (which is what happened before
in most Unix platforms).  (bsd_glob() does still sort platform
natively, ASCII or EBCDIC, unless GLOB_ALPHASORT is specified.) [561]</p>
<a name="Deprecations"></a><h2>Deprecations</h2>
<ul>
<li>
<p>The semantics of bless(REF, REF) were unclear and until someone proves
it to make some sense, it is forbidden.</p>
</li>
<li>
<p>The obsolete chat2 library that should never have been allowed
to escape the laboratory has been decommissioned.</p>
</li>
<li>
<p>Using chdir("") or chdir(undef) instead of explicit chdir() is
doubtful.  A failure (think chdir(some_function()) can lead into
unintended chdir() to the home directory, therefore this behaviour
is deprecated.</p>
</li>
<li>
<p>The builtin dump() function has probably outlived most of its
usefulness.  The core-dumping functionality will remain in future
available as an explicit call to <code class="inline"><span class="i">CORE::dump</span><span class="s">(</span><span class="s">)</span></code>
, but in future
releases the behaviour of an unqualified <code class="inline"><a class="l_k" href="functions/dump.html">dump()</a></code> call may change.</p>
</li>
<li>
<p>The very dusty examples in the eg/ directory have been removed.
Suggestions for new shiny examples welcome but the main issue is that
the examples need to be documented, tested and (most importantly)
maintained.</p>
</li>
<li>
<p>The (bogus) escape sequences \8 and \9 now give an optional warning
("Unrecognized escape passed through").  There is no need to \-escape
any <code class="inline">\<span class="w">w</span></code>
 character.</p>
</li>
<li>
<p>The *glob{FILEHANDLE} is deprecated, use *glob{IO} instead.</p>
</li>
<li>
<p>The <code class="inline"><a class="l_k" href="functions/package.html">package;</a></code> syntax (<code class="inline"><a class="l_k" href="functions/package.html">package</a></code> without an argument) has been
deprecated.  Its semantics were never that clear and its
implementation even less so.  If you have used that feature to
disallow all but fully qualified variables, <code class="inline"><a class="l_k" href="functions/use.html">use</a> <span class="w">strict</span><span class="sc">;</span></code>
 instead.</p>
</li>
<li>
<p>The unimplemented POSIX regex features [[.cc.]] and [[=c=]] are still
recognised but now cause fatal errors.  The previous behaviour of
ignoring them by default and warning if requested was unacceptable
since it, in a way, falsely promised that the features could be used.</p>
</li>
<li>
<p>In future releases, non-PerlIO aware XS modules may become completely
unsupported.  Since PerlIO is a drop-in replacement for stdio at the
source code level, this shouldn't be that drastic a change.</p>
</li>
<li>
<p>Previous versions of perl and some readings of some sections of Camel
III implied that the <code class="inline"><span class="j">:</span><span class="w">raw</span></code>
 "discipline" was the inverse of <code class="inline"><span class="j">:</span><span class="w">crlf</span></code>
.
Turning off "clrfness" is no longer enough to make a stream truly
binary. So the PerlIO <code class="inline"><span class="j">:</span><span class="w">raw</span></code>
 layer (or "discipline", to use the Camel
book's older terminology) is now formally defined as being equivalent
to binmode(FH) - which is in turn defined as doing whatever is
necessary to pass each byte as-is without any translation.  In
particular binmode(FH) - and hence <code class="inline"><span class="j">:</span><span class="w">raw</span></code>
 - will now turn off both
CRLF and UTF-8 translation and remove other layers (e.g. :encoding())
which would modify byte stream.</p>
</li>
<li>
<p>The current user-visible implementation of pseudo-hashes (the weird
use of the first array element) is deprecated starting from Perl 5.8.0
and will be removed in Perl 5.10.0, and the feature will be
implemented differently.  Not only is the current interface rather
ugly, but the current implementation slows down normal array and hash
use quite noticeably. The <code class="inline"><span class="w">fields</span></code>
 pragma interface will remain
available.  The <i>restricted hashes</i> interface is expected to
be the replacement interface (see <a href="Hash/Util.html">Hash::Util</a>).  If your existing
programs depends on the underlying implementation, consider using
<a href="http://search.cpan.org/perldoc/Class::PseudoHash">Class::PseudoHash</a> from CPAN.</p>
</li>
<li>
<p>The syntaxes <code class="inline"><span class="i">@a</span>-&gt;[...]</code>
 and  <code class="inline"><span class="i">%h</span>-&gt;{...}</code>
 have now been deprecated.</p>
</li>
<li>
<p>After years of trying, suidperl is considered to be too complex to
ever be considered truly secure.  The suidperl functionality is likely
to be removed in a future release.</p>
</li>
<li>
<p>The 5.005 threads model (module <code class="inline"><span class="w">Thread</span></code>
) is deprecated and expected
to be removed in Perl 5.10.  Multithreaded code should be migrated to
the new ithreads model (see <a href="threads.html">threads</a>, <a href="threads/shared.html">threads::shared</a> and
<a href="perlthrtut.html">perlthrtut</a>).</p>
</li>
<li>
<p>The long deprecated uppercase aliases for the string comparison
operators (EQ, NE, LT, LE, GE, GT) have now been removed.</p>
</li>
<li>
<p>The tr///C and tr///U features have been removed and will not return;
the interface was a mistake.  Sorry about that.  For similar
functionality, see pack('U0', ...) and pack('C0', ...). [561]</p>
</li>
<li>
<p>Earlier Perls treated "sub foo (@bar)" as equivalent to "sub foo (@)".
The prototypes are now checked better at compile-time for invalid
syntax.  An optional warning is generated ("Illegal character in
prototype...")  but this may be upgraded to a fatal error in a future
release.</p>
</li>
<li>
<p>The <code class="inline"><a class="l_k" href="functions/exec.html">exec</a> <span class="i">LIST</span></code>
 and <code class="inline"><a class="l_k" href="functions/system.html">system</a> <span class="i">LIST</span></code>
 operations now produce warnings on
tainted data and in some future release they will produce fatal errors.</p>
</li>
<li>
<p>The existing behaviour when localising tied arrays and hashes is wrong,
and will be changed in a future release, so do not rely on the existing
behaviour. See <a href="#Localising-Tied-Arrays-and-Hashes-Is-Broken">Localising Tied Arrays and Hashes Is Broken</a>.</p>
</li>
</ul>
<a name="Core-Enhancements"></a><h1>Core Enhancements</h1>
<a name="Unicode-Overhaul"></a><h2>Unicode Overhaul</h2>
<p>Unicode in general should be now much more usable than in Perl 5.6.0
(or even in 5.6.1).  Unicode can be used in hash keys, Unicode in
regular expressions should work now, Unicode in tr/// should work now,
Unicode in I/O should work now.  See <a href="perluniintro.html">perluniintro</a> for introduction
and <a href="perlunicode.html">perlunicode</a> for details.</p>
<ul>
<li>
<p>The Unicode Character Database coming with Perl has been upgraded
to Unicode 3.2.0.  For more information, see <a href="http://www.unicode.org/">http://www.unicode.org/</a> .
[561+] (5.6.1 has UCD 3.0.1.)</p>
</li>
<li>
<p>For developers interested in enhancing Perl's Unicode capabilities:
almost all the UCD files are included with the Perl distribution in
the <i>lib/unicore</i> subdirectory.  The most notable omission, for space
considerations, is the Unihan database.</p>
</li>
<li>
<p>The properties \p{Blank} and \p{SpacePerl} have been added. "Blank" is like
C isblank(), that is, it contains only "horizontal whitespace" (the space
character is, the newline isn't), and the "SpacePerl" is the Unicode
equivalent of <code class="inline">\s</code> (\p{Space} isn't, since that includes the vertical
tabulator character, whereas <code class="inline">\s</code> doesn't.)</p>
<p>See "New Unicode Properties" earlier in this document for additional
information on changes with Unicode properties.</p>
</li>
</ul>
<a name="PerlIO-is-Now-The-Default"></a><h2>PerlIO is Now The Default</h2>
<ul>
<li>
<p>IO is now by default done via PerlIO rather than system's "stdio".
PerlIO allows "layers" to be "pushed" onto a file handle to alter the
handle's behaviour.  Layers can be specified at open time via 3-arg
form of open:</p>
<pre class="verbatim"><ol><li>   <a class="l_k" href="functions/open.html">open</a><span class="s">(</span><span class="i">$fh</span><span class="cm">,</span><span class="q">&#39;&gt;:crlf :utf8&#39;</span><span class="cm">,</span> <span class="i">$path</span><span class="s">)</span> || ...</li></ol></pre><p>or on already opened handles via extended <code class="inline"><a class="l_k" href="functions/binmode.html">binmode</a></code>:</p>
<pre class="verbatim"><ol><li>   <a class="l_k" href="functions/binmode.html">binmode</a><span class="s">(</span><span class="i">$fh</span><span class="cm">,</span><span class="q">&#39;:encoding(iso-8859-7)&#39;</span><span class="s">)</span><span class="sc">;</span></li></ol></pre><p>The built-in layers are: unix (low level read/write), stdio (as in
previous Perls), perlio (re-implementation of stdio buffering in a
portable manner), crlf (does CRLF &lt;=&gt; "\n" translation as on Win32,
but available on any platform).  A mmap layer may be available if
platform supports it (mostly Unixes).</p>
<p>Layers to be applied by default may be specified via the 'open' pragma.</p>
<p>See <a href="#Installation-and-Configuration-Improvements">Installation and Configuration Improvements</a> for the effects
of PerlIO on your architecture name.</p>
</li>
<li>
<p>If your platform supports fork(), you can use the list form of <code class="inline"><a class="l_k" href="functions/open.html">open</a></code>
for pipes.  For example:</p>
<pre class="verbatim"><ol><li>    <a class="l_k" href="functions/open.html">open</a> <span class="w">KID_PS</span><span class="cm">,</span> <span class="q">&quot;-|&quot;</span><span class="cm">,</span> <span class="q">&quot;ps&quot;</span><span class="cm">,</span> <span class="q">&quot;aux&quot;</span> or <a class="l_k" href="functions/die.html">die</a> <span class="i">$!</span><span class="sc">;</span></li></ol></pre><p>forks the ps(1) command (without spawning a shell, as there are more
than three arguments to open()), and reads its standard output via the
<code class="inline"><span class="w">KID_PS</span></code>
 filehandle.  See <a href="perlipc.html">perlipc</a>.</p>
</li>
<li>
<p>File handles can be marked as accepting Perl's internal encoding of Unicode
(UTF-8 or UTF-EBCDIC depending on platform) by a pseudo layer ":utf8" :</p>
<pre class="verbatim"><ol><li>   <a class="l_k" href="functions/open.html">open</a><span class="s">(</span><span class="i">$fh</span><span class="cm">,</span><span class="q">&quot;&gt;:utf8&quot;</span><span class="cm">,</span><span class="q">&quot;Uni.txt&quot;</span><span class="s">)</span><span class="sc">;</span></li></ol></pre><p>Note for EBCDIC users: the pseudo layer ":utf8" is erroneously named
for you since it's not UTF-8 what you will be getting but instead
UTF-EBCDIC.  See <a href="perlunicode.html">perlunicode</a>, <a href="utf8.html">utf8</a>, and
<a href="http://www.unicode.org/unicode/reports/tr16/">http://www.unicode.org/unicode/reports/tr16/</a> for more information.
In future releases this naming may change.  See <a href="perluniintro.html">perluniintro</a>
for more information about UTF-8.</p>
</li>
<li>
<p>If your environment variables (LC_ALL, LC_CTYPE, LANG) look like you
want to use UTF-8 (any of the variables match <code class="inline"><span class="q">/utf-?8/i</span></code>
), your
STDIN, STDOUT, STDERR handles and the default open layer (see <a href="open.html">open</a>)
are marked as UTF-8.  (This feature, like other new features that
combine Unicode and I/O, work only if you are using PerlIO, but that's
the default.)</p>
<p>Note that after this Perl really does assume that everything is UTF-8:
for example if some input handle is not, Perl will probably very soon
complain about the input data like this "Malformed UTF-8 ..." since
any old eight-bit data is not legal UTF-8.</p>
<p>Note for code authors: if you want to enable your users to use UTF-8
as their default encoding  but in your code still have eight-bit I/O streams
(such as images or zip files), you need to explicitly open() or binmode()
with <code class="inline"><span class="j">:</span><span class="w">bytes</span></code>
 (see <a href="functions/open.html">open</a> and <a href="functions/binmode.html">binmode</a>), or you
can just use <code class="inline"><a class="l_k" href="functions/binmode.html">binmode(FH)</a></code> (nice for pre-5.8.0 backward compatibility).</p>
</li>
<li>
<p>File handles can translate character encodings from/to Perl's internal
Unicode form on read/write via the ":encoding()" layer.</p>
</li>
<li>
<p>File handles can be opened to "in memory" files held in Perl scalars via:</p>
<pre class="verbatim"><ol><li>   <a class="l_k" href="functions/open.html">open</a><span class="s">(</span><span class="i">$fh</span><span class="cm">,</span><span class="q">&#39;&gt;&#39;</span><span class="cm">,</span> \<span class="i">$variable</span><span class="s">)</span> || ...</li></ol></pre></li>
<li>
<p>Anonymous temporary files are available without need to
'use FileHandle' or other module via</p>
<pre class="verbatim"><ol><li>   <a class="l_k" href="functions/open.html">open</a><span class="s">(</span><span class="i">$fh</span><span class="cm">,</span><span class="q">&quot;+&gt;&quot;</span><span class="cm">,</span> <a class="l_k" href="functions/undef.html">undef</a><span class="s">)</span> || ...</li></ol></pre><p>That is a literal undef, not an undefined value.</p>
</li>
</ul>
<a name="ithreads"></a><h2>ithreads</h2>
<p>The new interpreter threads ("ithreads" for short) implementation of
multithreading, by Arthur Bergman, replaces the old "5.005 threads"
implementation.  In the ithreads model any data sharing between
threads must be explicit, as opposed to the model where data sharing
was implicit.  See <a href="threads.html">threads</a> and <a href="threads/shared.html">threads::shared</a>, and
<a href="perlthrtut.html">perlthrtut</a>.</p>
<p>As a part of the ithreads implementation Perl will also use
any necessary and detectable reentrant libc interfaces.</p>
<a name="Restricted-Hashes"></a><h2>Restricted Hashes</h2>
<p>A restricted hash is restricted to a certain set of keys, no keys
outside the set can be added.  Also individual keys can be restricted
so that the key cannot be deleted and the value cannot be changed.
No new syntax is involved: the Hash::Util module is the interface.</p>
<a name="Safe-Signals"></a><h2>Safe Signals</h2>
<p>Perl used to be fragile in that signals arriving at inopportune moments
could corrupt Perl's internal state.  Now Perl postpones handling of
signals until it's safe (between opcodes).</p>
<p>This change may have surprising side effects because signals no longer
interrupt Perl instantly.  Perl will now first finish whatever it was
doing, like finishing an internal operation (like sort()) or an
external operation (like an I/O operation), and only then look at any
arrived signals (and before starting the next operation).  No more corrupt
internal state since the current operation is always finished first,
but the signal may take more time to get heard.  Note that breaking
out from potentially blocking operations should still work, though.</p>
<a name="Understanding-of-Numbers"></a><h2>Understanding of Numbers</h2>
<p>In general a lot of fixing has happened in the area of Perl's
understanding of numbers, both integer and floating point.  Since in
many systems the standard number parsing functions like <code class="inline"><span class="i">strtoul</span><span class="s">(</span><span class="s">)</span></code>

and <code class="inline"><span class="i">atof</span><span class="s">(</span><span class="s">)</span></code>
 seem to have bugs, Perl tries to work around their
deficiencies.  This results hopefully in more accurate numbers.</p>
<p>Perl now tries internally to use integer values in numeric conversions
and basic arithmetics (+ - * /) if the arguments are integers, and
tries also to keep the results stored internally as integers.
This change leads to often slightly faster and always less lossy
arithmetics. (Previously Perl always preferred floating point numbers
in its math.)</p>
<a name="Arrays-now-always-interpolate-into-double-quoted-strings-%5b561%5d"></a><h2>Arrays now always interpolate into double-quoted strings [561]</h2>
<p>In double-quoted strings, arrays now interpolate, no matter what.  The
behavior in earlier versions of perl 5 was that arrays would interpolate
into strings if the array had been mentioned before the string was
compiled, and otherwise Perl would raise a fatal compile-time error.
In versions 5.000 through 5.003, the error was</p>
<pre class="verbatim"><ol><li>        Literal @example now requires backslash</li></ol></pre><p>In versions 5.004_01 through 5.6.0, the error was</p>
<pre class="verbatim"><ol><li>        In string, @example now must be written as \@example</li></ol></pre><p>The idea here was to get people into the habit of writing
<code class="inline"><span class="q">&quot;fred\@example.com&quot;</span></code>
 when they wanted a literal <code class="inline"><span class="i">@</span></code>
 sign, just as
they have always written <code class="inline"><span class="q">&quot;Give me back my \$5&quot;</span></code>
 when they wanted a
literal <code class="inline"><span class="i">$</span></code>
 sign.</p>
<p>Starting with 5.6.1, when Perl now sees an <code class="inline"><span class="i">@</span></code>
 sign in a
double-quoted string, it <i>always</i> attempts to interpolate an array,
regardless of whether or not the array has been used or declared
already.  The fatal error has been downgraded to an optional warning:</p>
<pre class="verbatim"><ol><li>        Possible unintended interpolation of @example in string</li></ol></pre><p>This warns you that <code class="inline"><span class="q">&quot;fred@example.com&quot;</span></code>
 is going to turn into
<code class="inline"><span class="w">fred</span>.<span class="w">com</span></code>
 if you don't backslash the <code class="inline"><span class="i">@</span></code>
.
See <a href="http://perl.plover.com/at-error.html">http://perl.plover.com/at-error.html</a> for more details
about the history here.</p>
<a name="Miscellaneous-Changes"></a><h2>Miscellaneous Changes</h2>
<ul>
<li>
<p>AUTOLOAD is now lvaluable, meaning that you can add the :lvalue attribute
to AUTOLOAD subroutines and you can assign to the AUTOLOAD return value.</p>
</li>
<li>
<p>The $Config{byteorder} (and corresponding BYTEORDER in config.h) was
previously wrong in platforms if sizeof(long) was 4, but sizeof(IV)
was 8.  The byteorder was only sizeof(long) bytes long (1234 or 4321),
but now it is correctly sizeof(IV) bytes long, (12345678 or 87654321).
(This problem didn't affect Windows platforms.)</p>
<p>Also, $Config{byteorder} is now computed dynamically--this is more
robust with "fat binaries" where an executable image contains binaries
for more than one binary platform, and when cross-compiling.</p>
</li>
<li>
<p><code class="inline">perl -d:Module=arg,arg,arg</code> now works (previously one couldn't pass
in multiple arguments.)</p>
</li>
<li>
<p><code class="inline"><a class="l_k" href="functions/do.html">do</a></code> followed by a bareword now ensures that this bareword isn't
a keyword (to avoid a bug where <code class="inline"><a class="l_k" href="functions/do.html">do</a> <span class="q">q(foo.pl)</span></code>
 tried to call a
subroutine called <code class="inline"><a class="l_k" href="functions/q.html">q</a></code>).  This means that for example instead of
<code class="inline">do format()</code> you must write <code class="inline"><a class="l_k" href="functions/do.html">do</a> <span class="i">&amp;format</span><span class="s">(</span><span class="s">)</span></code>
.</p>
</li>
<li>
<p>The builtin dump() now gives an optional warning
<code class="inline">dump() better written as CORE::dump()</code>,
meaning that by default <code class="inline"><a class="l_k" href="functions/dump.html">dump(...)</a></code> is resolved as the builtin
dump() which dumps core and aborts, not as (possibly) user-defined
<code class="inline"><a name="dump"></a>sub <span class="m">dump</span></code>
.  To call the latter, qualify the call as <code class="inline"><span class="i">&amp;dump</span><span class="s">(</span>...<span class="s">)</span></code>
.
(The whole dump() feature is to considered deprecated, and possibly
removed/changed in future releases.)</p>
</li>
<li>
<p>chomp() and chop() are now overridable.  Note, however, that their
prototype (as given by <code class="inline"><a class="l_k" href="functions/prototype.html">prototype("CORE::chomp")</a></code> is undefined,
because it cannot be expressed and therefore one cannot really write
replacements to override these builtins.</p>
</li>
<li>
<p>END blocks are now run even if you exit/die in a BEGIN block.
Internally, the execution of END blocks is now controlled by
PL_exit_flags &amp; PERL_EXIT_DESTRUCT_END. This enables the new
behaviour for Perl embedders. This will default in 5.10. See
<a href="perlembed.html">perlembed</a>.</p>
</li>
<li>
<p>Formats now support zero-padded decimal fields.</p>
</li>
<li>
<p>Although "you shouldn't do that", it was possible to write code that
depends on Perl's hashed key order (Data::Dumper does this).  The new
algorithm "One-at-a-Time" produces a different hashed key order.
More details are in <a href="#Performance-Enhancements">Performance Enhancements</a>.</p>
</li>
<li>
<p>lstat(FILEHANDLE) now gives a warning because the operation makes no sense.
In future releases this may become a fatal error.</p>
</li>
<li>
<p>Spurious syntax errors generated in certain situations, when glob()
caused File::Glob to be loaded for the first time, have been fixed. [561]</p>
</li>
<li>
<p>Lvalue subroutines can now return <code class="inline"><a class="l_k" href="functions/undef.html">undef</a></code> in list context.  However,
the lvalue subroutine feature still remains experimental.  [561+]</p>
</li>
<li>
<p>A lost warning "Can't declare ... dereference in my" has been
restored (Perl had it earlier but it became lost in later releases.)</p>
</li>
<li>
<p>A new special regular expression variable has been introduced:
<code class="inline"><span class="i">$^N</span></code>
, which contains the most-recently closed group (submatch).</p>
</li>
<li>
<p><code class="inline"><a class="l_k" href="functions/no.html">no</a> <span class="w">Module</span><span class="sc">;</span></code>
 does not produce an error even if Module does not have an
unimport() method.  This parallels the behavior of <code class="inline"><a class="l_k" href="functions/use.html">use</a></code> vis-a-vis
<code class="inline"><a class="l_k" href="functions/import.html">import</a></code>. [561]</p>
</li>
<li>
<p>The numerical comparison operators return <code class="inline"><a class="l_k" href="functions/undef.html">undef</a></code> if either operand
is a NaN.  Previously the behaviour was unspecified.</p>
</li>
<li>
<p><code class="inline"><a class="l_k" href="functions/our.html">our</a></code> can now have an experimental optional attribute <code class="inline"><span class="w">unique</span></code>
 that
affects how global variables are shared among multiple interpreters,
see <a href="functions/our.html">our</a>.</p>
</li>
<li>
<p>The following builtin functions are now overridable: each(), keys(),
pop(), push(), shift(), splice(), unshift(). [561]</p>
</li>
<li>
<p><code class="inline"><a class="l_k" href="functions/pack.html">pack</a><span class="s">(</span><span class="s">)</span> / <a class="l_k" href="functions/unpack.html">unpack</a><span class="s">(</span><span class="s">)</span></code>
 can now group template letters with <code class="inline"><span class="s">(</span><span class="s">)</span></code>
 and then
apply repetition/count modifiers on the groups.</p>
</li>
<li>
<p><code class="inline"><a class="l_k" href="functions/pack.html">pack</a><span class="s">(</span><span class="s">)</span> / <a class="l_k" href="functions/unpack.html">unpack</a><span class="s">(</span><span class="s">)</span></code>
 can now process the Perl internal numeric types:
IVs, UVs, NVs-- and also long doubles, if supported by the platform.
The template letters are <code class="inline"><span class="w">j</span></code>
, <code class="inline"><span class="w">J</span></code>
, <code class="inline"><span class="w">F</span></code>
, and <code class="inline"><span class="w">D</span></code>
.</p>
</li>
<li>
<p><code class="inline"><a class="l_k" href="functions/pack.html">pack</a><span class="s">(</span><span class="q">&#39;U0a*&#39;</span><span class="cm">,</span> ...<span class="s">)</span></code>
 can now be used to force a string to UTF-8.</p>
</li>
<li>
<p>my __PACKAGE__ $obj now works. [561]</p>
</li>
<li>
<p>POSIX::sleep() now returns the number of <i>unslept</i> seconds
(as the POSIX standard says), as opposed to CORE::sleep() which
returns the number of slept seconds.</p>
</li>
<li>
<p>printf() and sprintf() now support parameter reordering using the
<code class="inline">%\d+\$</code> and <code class="inline">*\d+\$</code> syntaxes.  For example</p>
<pre class="verbatim"><ol><li>    <a class="l_k" href="functions/printf.html">printf</a> <span class="q">&quot;%2\$s %1\$s\n&quot;</span><span class="cm">,</span> <span class="q">&quot;foo&quot;</span><span class="cm">,</span> <span class="q">&quot;bar&quot;</span><span class="sc">;</span></li></ol></pre><p>will print "bar foo\n".  This feature helps in writing
internationalised software, and in general when the order
of the parameters can vary.</p>
</li>
<li>
<p>The (\&amp;) prototype now works properly. [561]</p>
</li>
<li>
<p>prototype(\[$@%&amp;]) is now available to implicitly create references
(useful for example if you want to emulate the tie() interface).</p>
</li>
<li>
<p>A new command-line option, <code class="inline">-t</code>
 is available.  It is the
little brother of <code class="inline">-T</code>
: instead of dying on taint violations,
lexical warnings are given.  <b>This is only meant as a temporary
debugging aid while securing the code of old legacy applications.
This is not a substitute for -T.</b></p>
</li>
<li>
<p>In other taint news, the <code class="inline"><a class="l_k" href="functions/exec.html">exec</a> <span class="i">LIST</span></code>
 and <code class="inline"><a class="l_k" href="functions/system.html">system</a> <span class="i">LIST</span></code>
 have now been
considered too risky (think <code class="inline"><a class="l_k" href="functions/exec.html">exec</a> <span class="i">@ARGV</span></code>
: it can start any program
with any arguments), and now the said forms cause a warning under
lexical warnings.  You should carefully launder the arguments to
guarantee their validity.  In future releases of Perl the forms will
become fatal errors so consider starting laundering now.</p>
</li>
<li>
<p>Tied hash interfaces are now required to have the EXISTS and DELETE
methods (either own or inherited).</p>
</li>
<li>
<p>If tr/// is just counting characters, it doesn't attempt to
modify its target.</p>
</li>
<li>
<p>untie() will now call an UNTIE() hook if it exists.  See <a href="perltie.html">perltie</a>
for details. [561]</p>
</li>
<li>
<p><a href="functions/utime.html">utime</a> now supports <code class="inline"><a class="l_k" href="functions/utime.html">utime</a> <a class="l_k" href="functions/undef.html">undef</a><span class="cm">,</span> <a class="l_k" href="functions/undef.html">undef</a><span class="cm">,</span> <span class="i">@files</span></code>
 to change the
file timestamps to the current time.</p>
</li>
<li>
<p>The rules for allowing underscores (underbars) in numeric constants
have been relaxed and simplified: now you can have an underscore
simply <b>between digits</b>.</p>
</li>
<li>
<p>Rather than relying on C's argv[0] (which may not contain a full pathname)
where possible $^X is now set by asking the operating system.
(eg by reading <i>/proc/self/exe</i> on Linux, <i>/proc/curproc/file</i> on FreeBSD)</p>
</li>
<li>
<p>A new variable, <code class="inline"><span class="i">$</span>{<span class="w">^TAINT</span>}</code>
, indicates whether taint mode is enabled.</p>
</li>
<li>
<p>You can now override the readline() builtin, and this overrides also
the &lt;FILEHANDLE&gt; angle bracket operator.</p>
</li>
<li>
<p>The command-line options -s and -F are now recognized on the shebang
(#!) line.</p>
</li>
<li>
<p>Use of the <code class="inline">/c</code> match modifier without an accompanying <code class="inline">/g</code> modifier
elicits a new warning: <code class="inline"><span class="w">Use</span> <span class="w">of</span> <span class="q">/c modifier is meaningless without /g</span></code>
.</p>
<p>Use of <code class="inline">/c</code> in substitutions, even with <code class="inline">/g</code>, elicits
<code class="inline"><span class="w">Use</span> <span class="w">of</span> /<span class="w">c</span> <span class="w">modifier</span> <span class="w">is</span> <span class="w">meaningless</span> <span class="w">in</span> <span class="q">s///</span></code>
.</p>
<p>Use of <code class="inline">/g</code> with <code class="inline"><a class="l_k" href="functions/split.html">split</a></code> elicits <code class="inline"><span class="w">Use</span> <span class="w">of</span> /<span class="w">g</span> <span class="w">modifier</span> <span class="w">is</span> <span class="w">meaningless</span>
<span class="w">in</span> <a class="l_k" href="functions/split.html">split</a></code>
.</p>
</li>
<li>
<p>Support for the <code class="inline"><span class="w">CLONE</span></code>
 special subroutine had been added.
With ithreads, when a new thread is created, all Perl data is cloned,
however non-Perl data cannot be cloned automatically.  In <code class="inline"><span class="w">CLONE</span></code>
 you
can do whatever you need to do, like for example handle the cloning of
non-Perl data, if necessary.  <code class="inline"><span class="w">CLONE</span></code>
 will be executed once for every
package that has it defined or inherited.  It will be called in the
context of the new thread, so all modifications are made in the new area.</p>
<p>See <a href="perlmod.html">perlmod</a></p>
</li>
</ul>
<a name="Modules-and-Pragmata"></a><h1>Modules and Pragmata</h1>
<a name="New-Modules-and-Pragmata"></a><h2>New Modules and Pragmata</h2>
<ul>
<li>
<p><code class="inline"><span class="w">Attribute::Handlers</span></code>
, originally by Damian Conway and now maintained
by Arthur Bergman, allows a class to define attribute handlers.</p>
<pre class="verbatim"><ol><li><a name="package-MyPack"></a>    package <span class="i">MyPack</span><span class="sc">;</span></li><li>    <a class="l_k" href="functions/use.html">use</a> <span class="w">Attribute::Handlers</span><span class="sc">;</span></li><li><a name="Wolf"></a>    sub <span class="m">Wolf</span> <span class="co">:</span><span class="q">ATTR(SCALAR)</span> <span class="s">{</span> <a class="l_k" href="functions/print.html">print</a> <span class="q">&quot;howl!\n&quot;</span> <span class="s">}</span></li><li></li><li>    <span class="c"># later, in some package using or inheriting from MyPack...</span></li><li></li><li>    <a class="l_k" href="functions/my.html">my</a> <span class="w">MyPack</span> <span class="i">$Fluffy</span> <span class="co">:</span> <span class="w">Wolf</span><span class="sc">;</span> <span class="c"># the attribute handler Wolf will be called</span></li></ol></pre><p>Both variables and routines can have attribute handlers.  Handlers can
be specific to type (SCALAR, ARRAY, HASH, or CODE), or specific to the
exact compilation phase (BEGIN, CHECK, INIT, or END).
See <a href="Attribute/Handlers.html">Attribute::Handlers</a>.</p>
</li>
<li>
<p><code class="inline"><span class="w">B::Concise</span></code>
, by Stephen McCamant, is a new compiler backend for
walking the Perl syntax tree, printing concise info about ops.
The output is highly customisable.  See <a href="B/Concise.html">B::Concise</a>. [561+]</p>
</li>
<li>
<p>The new bignum, bigint, and bigrat pragmas, by Tels, implement
transparent bignum support (using the Math::BigInt, Math::BigFloat,
and Math::BigRat backends).</p>
</li>
<li>
<p><code class="inline"><span class="w">Class::ISA</span></code>
, by Sean Burke, is a module for reporting the search
path for a class's ISA tree.  See <a href="http://search.cpan.org/perldoc/Class::ISA">Class::ISA</a>.</p>
</li>
<li>
<p><code class="inline"><span class="w">Cwd</span></code>
 now has a split personality: if possible, an XS extension is
used, (this will hopefully be faster, more secure, and more robust)
but if not possible, the familiar Perl implementation is used.</p>
</li>
<li>
<p><code class="inline"><span class="w">Devel::PPPort</span></code>
, originally by Kenneth Albanowski and now
maintained by Paul Marquess, has been added.  It is primarily used
by <code class="inline"><span class="w">h2xs</span></code>
 to enhance portability of XS modules between different
versions of Perl.  See <a href="Devel/PPPort.html">Devel::PPPort</a>.</p>
</li>
<li>
<p><code class="inline"><span class="w">Digest</span></code>
, frontend module for calculating digests (checksums), from
Gisle Aas, has been added.  See <a href="Digest.html">Digest</a>.</p>
</li>
<li>
<p><code class="inline"><span class="w">Digest::MD5</span></code>
 for calculating MD5 digests (checksums) as defined in
RFC 1321, from Gisle Aas, has been added.  See <a href="Digest/MD5.html">Digest::MD5</a>.</p>
<pre class="verbatim"><ol><li>    <a class="l_k" href="functions/use.html">use</a> <span class="w">Digest::MD5</span> <span class="q">&#39;md5_hex&#39;</span><span class="sc">;</span></li><li></li><li>    <span class="i">$digest</span> = <span class="i">md5_hex</span><span class="s">(</span><span class="q">&quot;Thirsty Camel&quot;</span><span class="s">)</span><span class="sc">;</span></li><li></li><li>    <a class="l_k" href="functions/print.html">print</a> <span class="i">$digest</span><span class="cm">,</span> <span class="q">&quot;\n&quot;</span><span class="sc">;</span> <span class="c"># 01d19d9d2045e005c3f1b80e8b164de1</span></li></ol></pre><p>NOTE: the <code class="inline"><span class="w">MD5</span></code>
 backward compatibility module is deliberately not
included since its further use is discouraged.</p>
<p>See also <a href="PerlIO/via/QuotedPrint.html">PerlIO::via::QuotedPrint</a>.</p>
</li>
<li>
<p><code class="inline"><span class="w">Encode</span></code>
, originally by Nick Ing-Simmons and now maintained by Dan
Kogai, provides a mechanism to translate between different character
encodings.  Support for Unicode, ISO-8859-1, and ASCII are compiled in
to the module.  Several other encodings (like the rest of the
ISO-8859, CP*/Win*, Mac, KOI8-R, three variants EBCDIC, Chinese,
Japanese, and Korean encodings) are included and can be loaded at
runtime.  (For space considerations, the largest Chinese encodings
have been separated into their own CPAN module, Encode::HanExtra,
which Encode will use if available).  See <a href="Encode.html">Encode</a>.</p>
<p>Any encoding supported by Encode module is also available to the
":encoding()" layer if PerlIO is used.</p>
</li>
<li>
<p><code class="inline"><span class="w">Hash::Util</span></code>
 is the interface to the new <i>restricted hashes</i>
feature.  (Implemented by Jeffrey Friedl, Nick Ing-Simmons, and
Michael Schwern.)  See <a href="Hash/Util.html">Hash::Util</a>.</p>
</li>
<li>
<p><code class="inline"><span class="w">I18N::Langinfo</span></code>
 can be used to query locale information.
See <a href="I18N/Langinfo.html">I18N::Langinfo</a>.</p>
</li>
<li>
<p><code class="inline"><span class="w">I18N::LangTags</span></code>
, by Sean Burke, has functions for dealing with
RFC3066-style language tags.  See <a href="I18N/LangTags.html">I18N::LangTags</a>.</p>
</li>
<li>
<p><code class="inline"><span class="w">ExtUtils::Constant</span></code>
, by Nicholas Clark, is a new tool for extension
writers for generating XS code to import C header constants.
See <a href="ExtUtils/Constant.html">ExtUtils::Constant</a>.</p>
</li>
<li>
<p><code class="inline"><span class="w">Filter::Simple</span></code>
, by Damian Conway, is an easy-to-use frontend to
Filter::Util::Call.  See <a href="Filter/Simple.html">Filter::Simple</a>.</p>
<pre class="verbatim"><ol><li>    <span class="c"># in MyFilter.pm:</span></li><li></li><li><a name="package-MyFilter"></a>    package <span class="i">MyFilter</span><span class="sc">;</span></li><li></li><li>    <a class="l_k" href="functions/use.html">use</a> <span class="w">Filter::Simple</span> <a class="l_k" href="functions/sub.html">sub</a> <span class="s">{</span></li><li>        while <span class="s">(</span><a class="l_k" href="functions/my.html">my</a> <span class="s">(</span><span class="i">$from</span><span class="cm">,</span> <span class="i">$to</span><span class="s">)</span> = <a class="l_k" href="functions/splice.html">splice</a> <span class="i">@_</span><span class="cm">,</span> <span class="n">0</span><span class="cm">,</span> <span class="n">2</span><span class="s">)</span> <span class="s">{</span></li><li>                <span class="q">s/$from/$to/g</span><span class="sc">;</span></li><li>        <span class="s">}</span></li><li>    <span class="s">}</span><span class="sc">;</span></li><li></li><li>    <span class="n">1</span><span class="sc">;</span></li><li></li><li>    <span class="c"># in user&#39;s code:</span></li><li></li><li>    <a class="l_k" href="functions/use.html">use</a> <span class="w">MyFilter</span> <span class="q">qr/red/</span> <span class="cm">=&gt;</span> <span class="q">&#39;green&#39;</span><span class="sc">;</span></li><li></li><li>    <a class="l_k" href="functions/print.html">print</a> <span class="q">&quot;red\n&quot;</span><span class="sc">;</span>   <span class="c"># this code is filtered, will print &quot;green\n&quot;</span></li><li>    <a class="l_k" href="functions/print.html">print</a> <span class="q">&quot;bored\n&quot;</span><span class="sc">;</span> <span class="c"># this code is filtered, will print &quot;bogreen\n&quot;</span></li><li></li><li>    <a class="l_k" href="functions/no.html">no</a> <span class="w">MyFilter</span><span class="sc">;</span></li><li></li><li>    <a class="l_k" href="functions/print.html">print</a> <span class="q">&quot;red\n&quot;</span><span class="sc">;</span>   <span class="c"># this code is not filtered, will print &quot;red\n&quot;</span></li></ol></pre></li>
<li>
<p><code class="inline"><span class="w">File::Temp</span></code>
, by Tim Jenness, allows one to create temporary files
and directories in an easy, portable, and secure way.  See <a href="File/Temp.html">File::Temp</a>.
[561+]</p>
</li>
<li>
<p><code class="inline"><span class="w">Filter::Util::Call</span></code>
, by Paul Marquess, provides you with the
framework to write <i>source filters</i> in Perl.  For most uses, the
frontend Filter::Simple is to be preferred.  See <a href="Filter/Util/Call.html">Filter::Util::Call</a>.</p>
</li>
<li>
<p><code class="inline">if</code>
, by Ilya Zakharevich, is a new pragma for conditional inclusion
of modules.</p>
</li>
<li>
<p><a href="http://search.cpan.org/perldoc/libnet">libnet</a>, by Graham Barr, is a collection of perl5 modules related
to network programming.  See <a href="Net/FTP.html">Net::FTP</a>, <a href="Net/NNTP.html">Net::NNTP</a>, <a href="Net/Ping.html">Net::Ping</a>
(not part of libnet, but related), <a href="Net/POP3.html">Net::POP3</a>, <a href="Net/SMTP.html">Net::SMTP</a>,
and <a href="Net/Time.html">Net::Time</a>.</p>
<p>Perl installation leaves libnet unconfigured; use <i>libnetcfg</i>
to configure it.</p>
</li>
<li>
<p><code class="inline"><span class="w">List::Util</span></code>
, by Graham Barr, is a selection of general-utility
list subroutines, such as sum(), min(), first(), and shuffle().
See <a href="List/Util.html">List::Util</a>.</p>
</li>
<li>
<p><code class="inline"><span class="w">Locale::Constants</span></code>
, <code class="inline"><span class="w">Locale::Country</span></code>
, <code class="inline"><span class="w">Locale::Currency</span></code>

<code class="inline"><span class="w">Locale::Language</span></code>
, and <a href="Locale/Script.html">Locale::Script</a>, by Neil Bowers, have
been added.  They provide the codes for various locale standards, such
as "fr" for France, "usd" for US Dollar, and "ja" for Japanese.</p>
<pre class="verbatim"><ol><li>    <a class="l_k" href="functions/use.html">use</a> <span class="w">Locale::Country</span><span class="sc">;</span></li><li></li><li>    <span class="i">$country</span> = <span class="i">code2country</span><span class="s">(</span><span class="q">&#39;jp&#39;</span><span class="s">)</span><span class="sc">;</span>               <span class="c"># $country gets &#39;Japan&#39;</span></li><li>    <span class="i">$code</span>    = <span class="i">country2code</span><span class="s">(</span><span class="q">&#39;Norway&#39;</span><span class="s">)</span><span class="sc">;</span>           <span class="c"># $code gets &#39;no&#39;</span></li></ol></pre><p>See <a href="http://search.cpan.org/perldoc/Locale::Constants">Locale::Constants</a>, <a href="Locale/Country.html">Locale::Country</a>, <a href="Locale/Currency.html">Locale::Currency</a>,
and <a href="Locale/Language.html">Locale::Language</a>.</p>
</li>
<li>
<p><code class="inline"><span class="w">Locale::Maketext</span></code>
, by Sean Burke, is a localization framework.  See
<a href="Locale/Maketext.html">Locale::Maketext</a>, and <a href="Locale/Maketext/TPJ13.html">Locale::Maketext::TPJ13</a>.  The latter is an
article about software localization, originally published in The Perl
Journal #13, and republished here with kind permission.</p>
</li>
<li>
<p><code class="inline"><span class="w">Math::BigRat</span></code>
 for big rational numbers, to accompany Math::BigInt and
Math::BigFloat, from Tels.  See <a href="Math/BigRat.html">Math::BigRat</a>.</p>
</li>
<li>
<p><code class="inline"><span class="w">Memoize</span></code>
 can make your functions faster by trading space for time,
from Mark-Jason Dominus.  See <a href="Memoize.html">Memoize</a>.</p>
</li>
<li>
<p><code class="inline"><span class="w">MIME::Base64</span></code>
, by Gisle Aas, allows you to encode data in base64,
as defined in RFC 2045 - <i>MIME (Multipurpose Internet Mail
Extensions)</i>.</p>
<pre class="verbatim"><ol><li>    <a class="l_k" href="functions/use.html">use</a> <span class="w">MIME::Base64</span><span class="sc">;</span></li><li></li><li>    <span class="i">$encoded</span> = <span class="i">encode_base64</span><span class="s">(</span><span class="q">&#39;Aladdin:open sesame&#39;</span><span class="s">)</span><span class="sc">;</span></li><li>    <span class="i">$decoded</span> = <span class="i">decode_base64</span><span class="s">(</span><span class="i">$encoded</span><span class="s">)</span><span class="sc">;</span></li><li></li><li>    <a class="l_k" href="functions/print.html">print</a> <span class="i">$encoded</span><span class="cm">,</span> <span class="q">&quot;\n&quot;</span><span class="sc">;</span> <span class="c"># &quot;QWxhZGRpbjpvcGVuIHNlc2FtZQ==&quot;</span></li></ol></pre><p>See <a href="MIME/Base64.html">MIME::Base64</a>.</p>
</li>
<li>
<p><code class="inline"><span class="w">MIME::QuotedPrint</span></code>
, by Gisle Aas, allows you to encode data
in quoted-printable encoding, as defined in RFC 2045 - <i>MIME
(Multipurpose Internet Mail Extensions)</i>.</p>
<pre class="verbatim"><ol><li>    <a class="l_k" href="functions/use.html">use</a> <span class="w">MIME::QuotedPrint</span><span class="sc">;</span></li><li></li><li>    <span class="i">$encoded</span> = <span class="i">encode_qp</span><span class="s">(</span><span class="q">&quot;\xDE\xAD\xBE\xEF&quot;</span><span class="s">)</span><span class="sc">;</span></li><li>    <span class="i">$decoded</span> = <span class="i">decode_qp</span><span class="s">(</span><span class="i">$encoded</span><span class="s">)</span><span class="sc">;</span></li><li></li><li>    <a class="l_k" href="functions/print.html">print</a> <span class="i">$encoded</span><span class="cm">,</span> <span class="q">&quot;\n&quot;</span><span class="sc">;</span> <span class="c"># &quot;=DE=AD=BE=EF\n&quot;</span></li><li>    <a class="l_k" href="functions/print.html">print</a> <span class="i">$decoded</span><span class="cm">,</span> <span class="q">&quot;\n&quot;</span><span class="sc">;</span> <span class="c"># &quot;\xDE\xAD\xBE\xEF\n&quot;</span></li></ol></pre><p>See also <a href="PerlIO/via/QuotedPrint.html">PerlIO::via::QuotedPrint</a>.</p>
</li>
<li>
<p><code class="inline"><span class="w">NEXT</span></code>
, by Damian Conway, is a pseudo-class for method redispatch.
See <a href="NEXT.html">NEXT</a>.</p>
</li>
<li>
<p><code class="inline"><a class="l_k" href="functions/open.html">open</a></code> is a new pragma for setting the default I/O layers
for open().</p>
</li>
<li>
<p><code class="inline"><span class="w">PerlIO::scalar</span></code>
, by Nick Ing-Simmons, provides the implementation
of IO to "in memory" Perl scalars as discussed above.  It also serves
as an example of a loadable PerlIO layer.  Other future possibilities
include PerlIO::Array and PerlIO::Code.  See <a href="PerlIO/scalar.html">PerlIO::scalar</a>.</p>
</li>
<li>
<p><code class="inline"><span class="w">PerlIO::via</span></code>
, by Nick Ing-Simmons, acts as a PerlIO layer and wraps
PerlIO layer functionality provided by a class (typically implemented
in Perl code).</p>
</li>
<li>
<p><code class="inline"><span class="w">PerlIO::via::QuotedPrint</span></code>
, by Elizabeth Mattijsen, is an example
of a <code class="inline"><span class="w">PerlIO::via</span></code>
 class:</p>
<pre class="verbatim"><ol><li>    <a class="l_k" href="functions/use.html">use</a> <span class="w">PerlIO::via::QuotedPrint</span><span class="sc">;</span></li><li>    <a class="l_k" href="functions/open.html">open</a><span class="s">(</span><span class="i">$fh</span><span class="cm">,</span><span class="q">&quot;&gt;:via(QuotedPrint)&quot;</span><span class="cm">,</span><span class="i">$path</span><span class="s">)</span><span class="sc">;</span></li></ol></pre><p>This will automatically convert everything output to <code class="inline"><span class="i">$fh</span></code>
 to
Quoted-Printable.  See <a href="PerlIO/via.html">PerlIO::via</a> and <a href="PerlIO/via/QuotedPrint.html">PerlIO::via::QuotedPrint</a>.</p>
</li>
<li>
<p><code class="inline"><span class="w">Pod::ParseLink</span></code>
, by Russ Allbery, has been added,
to parse L&lt;&gt; links in pods as described in the new
perlpodspec.</p>
</li>
<li>
<p><code class="inline"><span class="w">Pod::Text::Overstrike</span></code>
, by Joe Smith, has been added.
It converts POD data to formatted overstrike text.
See <a href="Pod/Text/Overstrike.html">Pod::Text::Overstrike</a>. [561+]</p>
</li>
<li>
<p><code class="inline"><span class="w">Scalar::Util</span></code>
 is a selection of general-utility scalar subroutines,
such as blessed(), reftype(), and tainted().  See <a href="Scalar/Util.html">Scalar::Util</a>.</p>
</li>
<li>
<p><code class="inline"><a class="l_k" href="functions/sort.html">sort</a></code> is a new pragma for controlling the behaviour of sort().</p>
</li>
<li>
<p><code class="inline"><span class="w">Storable</span></code>
 gives persistence to Perl data structures by allowing the
storage and retrieval of Perl data to and from files in a fast and
compact binary format.  Because in effect Storable does serialisation
of Perl data structures, with it you can also clone deep, hierarchical
datastructures.  Storable was originally created by Raphael Manfredi,
but it is now maintained by Abhijit Menon-Sen.  Storable has been
enhanced to understand the two new hash features, Unicode keys and
restricted hashes.  See <a href="Storable.html">Storable</a>.</p>
</li>
<li>
<p><code class="inline"><span class="w">Switch</span></code>
, by Damian Conway, has been added.  Just by saying</p>
<pre class="verbatim"><ol><li>    <a class="l_k" href="functions/use.html">use</a> <span class="w">Switch</span><span class="sc">;</span></li></ol></pre><p>you have <code class="inline">switch</code>
 and <code class="inline">case</code>
 available in Perl.</p>
<pre class="verbatim"><ol><li>    <a class="l_k" href="functions/use.html">use</a> <span class="w">Switch</span><span class="sc">;</span></li><li></li><li>    switch <span class="s">(</span><span class="i">$val</span><span class="s">)</span> <span class="s">{</span></li><li></li><li>		case <span class="n">1</span>		<span class="s">{</span> <a class="l_k" href="functions/print.html">print</a> <span class="q">&quot;number 1&quot;</span> <span class="s">}</span></li><li>		case <span class="q">&quot;a&quot;</span>	<span class="s">{</span> <a class="l_k" href="functions/print.html">print</a> <span class="q">&quot;string a&quot;</span> <span class="s">}</span></li><li>		case <span class="s">[</span><span class="n">1</span>..<span class="n">10</span><span class="cm">,</span><span class="n">42</span><span class="s">]</span>	<span class="s">{</span> <a class="l_k" href="functions/print.html">print</a> <span class="q">&quot;number in list&quot;</span> <span class="s">}</span></li><li>		case <span class="s">(</span><span class="i">@array</span><span class="s">)</span>	<span class="s">{</span> <a class="l_k" href="functions/print.html">print</a> <span class="q">&quot;number in list&quot;</span> <span class="s">}</span></li><li>		case <span class="q">/\w+/</span>	<span class="s">{</span> <a class="l_k" href="functions/print.html">print</a> <span class="q">&quot;pattern&quot;</span> <span class="s">}</span></li><li>		case <span class="q">qr/\w+/</span>	<span class="s">{</span> <a class="l_k" href="functions/print.html">print</a> <span class="q">&quot;pattern&quot;</span> <span class="s">}</span></li><li>		case <span class="s">(</span><span class="i">%hash</span><span class="s">)</span>	<span class="s">{</span> <a class="l_k" href="functions/print.html">print</a> <span class="q">&quot;entry in hash&quot;</span> <span class="s">}</span></li><li>		case <span class="s">(</span>\<span class="i">%hash</span><span class="s">)</span>	<span class="s">{</span> <a class="l_k" href="functions/print.html">print</a> <span class="q">&quot;entry in hash&quot;</span> <span class="s">}</span></li><li>		case <span class="s">(</span>\<span class="i">&amp;sub</span><span class="s">)</span>	<span class="s">{</span> <a class="l_k" href="functions/print.html">print</a> <span class="q">&quot;arg to subroutine&quot;</span> <span class="s">}</span></li><li>		else		<span class="s">{</span> <a class="l_k" href="functions/print.html">print</a> <span class="q">&quot;previous case not true&quot;</span> <span class="s">}</span></li><li>    <span class="s">}</span></li></ol></pre><p>See <a href="http://search.cpan.org/perldoc/Switch">Switch</a>.</p>
</li>
<li>
<p><code class="inline"><span class="w">Test::More</span></code>
, by Michael Schwern, is yet another framework for writing
test scripts, more extensive than Test::Simple.  See <a href="Test/More.html">Test::More</a>.</p>
</li>
<li>
<p><code class="inline"><span class="w">Test::Simple</span></code>
, by Michael Schwern, has basic utilities for writing
tests.   See <a href="Test/Simple.html">Test::Simple</a>.</p>
</li>
<li>
<p><code class="inline"><span class="w">Text::Balanced</span></code>
, by Damian Conway, has been added, for extracting
delimited text sequences from strings.</p>
<pre class="verbatim"><ol><li>    <a class="l_k" href="functions/use.html">use</a> <span class="w">Text::Balanced</span> <span class="q">&#39;extract_delimited&#39;</span><span class="sc">;</span></li><li></li><li>    <span class="s">(</span><span class="i">$a</span><span class="cm">,</span> <span class="i">$b</span><span class="s">)</span> = <span class="i">extract_delimited</span><span class="s">(</span><span class="q">&quot;&#39;never say never&#39;, he never said&quot;</span><span class="cm">,</span> <span class="q">&quot;&#39;&quot;</span><span class="cm">,</span> <span class="q">&#39;&#39;</span><span class="s">)</span><span class="sc">;</span></li></ol></pre><p>$a will be "'never say never'", $b will be ', he never said'.</p>
<p>In addition to extract_delimited(), there are also extract_bracketed(),
extract_quotelike(), extract_codeblock(), extract_variable(),
extract_tagged(), extract_multiple(), gen_delimited_pat(), and
gen_extract_tagged().  With these, you can implement rather advanced
parsing algorithms.  See <a href="Text/Balanced.html">Text::Balanced</a>.</p>
</li>
<li>
<p><code class="inline"><span class="w">threads</span></code>
, by Arthur Bergman, is an interface to interpreter threads.
Interpreter threads (ithreads) is the new thread model introduced in
Perl 5.6 but only available as an internal interface for extension
writers (and for Win32 Perl for <code class="inline"><a class="l_k" href="functions/fork.html">fork()</a></code> emulation).  See <a href="threads.html">threads</a>,
<a href="threads/shared.html">threads::shared</a>, and <a href="perlthrtut.html">perlthrtut</a>.</p>
</li>
<li>
<p><code class="inline"><span class="w">threads::shared</span></code>
, by Arthur Bergman, allows data sharing for
interpreter threads.  See <a href="threads/shared.html">threads::shared</a>.</p>
</li>
<li>
<p><code class="inline"><span class="w">Tie::File</span></code>
, by Mark-Jason Dominus, associates a Perl array with the
lines of a file.  See <a href="Tie/File.html">Tie::File</a>.</p>
</li>
<li>
<p><code class="inline"><span class="w">Tie::Memoize</span></code>
, by Ilya Zakharevich, provides on-demand loaded hashes.
See <a href="Tie/Memoize.html">Tie::Memoize</a>.</p>
</li>
<li>
<p><code class="inline"><span class="w">Tie::RefHash::Nestable</span></code>
, by Edward Avis, allows storing hash
references (unlike the standard Tie::RefHash)  The module is contained
within Tie::RefHash.  See <a href="Tie/RefHash.html">Tie::RefHash</a>.</p>
</li>
<li>
<p><code class="inline"><span class="w">Time::HiRes</span></code>
, by Douglas E. Wegscheid, provides high resolution
timing (ualarm, usleep, and gettimeofday).  See <a href="Time/HiRes.html">Time::HiRes</a>.</p>
</li>
<li>
<p><code class="inline"><span class="w">Unicode::UCD</span></code>
 offers a querying interface to the Unicode Character
Database.  See <a href="Unicode/UCD.html">Unicode::UCD</a>.</p>
</li>
<li>
<p><code class="inline"><span class="w">Unicode::Collate</span></code>
, by SADAHIRO Tomoyuki, implements the UCA
(Unicode Collation Algorithm) for sorting Unicode strings.
See <a href="Unicode/Collate.html">Unicode::Collate</a>.</p>
</li>
<li>
<p><code class="inline"><span class="w">Unicode::Normalize</span></code>
, by SADAHIRO Tomoyuki, implements the various
Unicode normalization forms.  See <a href="Unicode/Normalize.html">Unicode::Normalize</a>.</p>
</li>
<li>
<p><code class="inline"><span class="w">XS::APItest</span></code>
, by Tim Jenness, is a test extension that exercises XS
APIs.  Currently only <code class="inline"><a class="l_k" href="functions/printf.html">printf()</a></code> is tested: how to output various
basic data types from XS.</p>
</li>
<li>
<p><code class="inline"><span class="w">XS::Typemap</span></code>
, by Tim Jenness, is a test extension that exercises
XS typemaps.  Nothing gets installed, but the code is worth studying
for extension writers.</p>
</li>
</ul>
<a name="Updated-And-Improved-Modules-and-Pragmata"></a><h2>Updated And Improved Modules and Pragmata</h2>
<ul>
<li>
<p>The following independently supported modules have been updated to the
newest versions from CPAN: CGI, CPAN, DB_File, File::Spec, File::Temp,
Getopt::Long, Math::BigFloat, Math::BigInt, the podlators bundle
(Pod::Man, Pod::Text), Pod::LaTeX [561+], Pod::Parser, Storable,
Term::ANSIColor, Test, Text-Tabs+Wrap.</p>
</li>
<li>
<p>attributes::reftype() now works on tied arguments.</p>
</li>
<li>
<p>AutoLoader can now be disabled with <code class="inline"><a class="l_k" href="functions/no.html">no</a> <span class="w">AutoLoader</span><span class="sc">;</span></code>
.</p>
</li>
<li>
<p>B::Deparse has been significantly enhanced by Robin Houston.  It can
now deparse almost all of the standard test suite (so that the tests
still succeed).  There is a make target "test.deparse" for trying this
out.</p>
</li>
<li>
<p>Carp now has better interface documentation, and the @CARP_NOT
interface has been added to get optional control over where errors
are reported independently of @ISA, by Ben Tilly.</p>
</li>
<li>
<p>Class::Struct can now define the classes in compile time.</p>
</li>
<li>
<p>Class::Struct now assigns the array/hash element if the accessor
is called with an array/hash element as the <b>sole</b> argument.</p>
</li>
<li>
<p>The return value of Cwd::fastcwd() is now tainted.</p>
</li>
<li>
<p>Data::Dumper now has an option to sort hashes.</p>
</li>
<li>
<p>Data::Dumper now has an option to dump code references
using B::Deparse.</p>
</li>
<li>
<p>DB_File now supports newer Berkeley DB versions, among
other improvements.</p>
</li>
<li>
<p>Devel::Peek now has an interface for the Perl memory statistics
(this works only if you are using perl's malloc, and if you have
compiled with debugging).</p>
</li>
<li>
<p>The English module can now be used without the infamous performance
hit by saying</p>
<pre class="verbatim"><ol><li>	<a class="l_k" href="functions/use.html">use</a> <span class="w">English</span> <span class="q">&#39;-no_match_vars&#39;</span><span class="sc">;</span></li></ol></pre><p>(Assuming, of course, that you don't need the troublesome variables
<code class="inline"><span class="i">$`</span></code>
, <code class="inline"><span class="i">$&amp;</span></code>
, or <code class="inline"><span class="i">$&#39;</span></code>
.)  Also, introduced <code class="inline"><span class="i">@LAST_MATCH_START</span></code>
 and
<code class="inline"><span class="i">@LAST_MATCH_END</span></code>
 English aliases for <code class="inline"><span class="i">@-</span></code>
 and <code class="inline"><span class="i">@+</span></code>
.</p>
</li>
<li>
<p>ExtUtils::MakeMaker has been significantly cleaned up and fixed.
The enhanced version has also been backported to earlier releases
of Perl and submitted to CPAN so that the earlier releases can
enjoy the fixes.</p>
</li>
<li>
<p>The arguments of WriteMakefile() in Makefile.PL are now checked
for sanity much more carefully than before.  This may cause new
warnings when modules are being installed.  See <a href="ExtUtils/MakeMaker.html">ExtUtils::MakeMaker</a>
for more details.</p>
</li>
<li>
<p>ExtUtils::MakeMaker now uses File::Spec internally, which hopefully
leads to better portability.</p>
</li>
<li>
<p>Fcntl, Socket, and Sys::Syslog have been rewritten by Nicholas Clark
to use the new-style constant dispatch section (see <a href="ExtUtils/Constant.html">ExtUtils::Constant</a>).
This means that they will be more robust and hopefully faster.</p>
</li>
<li>
<p>File::Find now chdir()s correctly when chasing symbolic links. [561]</p>
</li>
<li>
<p>File::Find now has pre- and post-processing callbacks.  It also
correctly changes directories when chasing symbolic links.  Callbacks
(naughtily) exiting with "next;" instead of "return;" now work.</p>
</li>
<li>
<p>File::Find is now (again) reentrant.  It also has been made
more portable.</p>
</li>
<li>
<p>The warnings issued by File::Find now belong to their own category.
You can enable/disable them with <code class="inline">use/no warnings 'File::Find';</code>.</p>
</li>
<li>
<p>File::Glob::glob() has been renamed to File::Glob::bsd_glob()
because the name clashes with the builtin glob().  The older
name is still available for compatibility, but is deprecated. [561]</p>
</li>
<li>
<p>File::Glob now supports <code class="inline"><span class="w">GLOB_LIMIT</span></code>
 constant to limit the size of
the returned list of filenames.</p>
</li>
<li>
<p>IPC::Open3 now allows the use of numeric file descriptors.</p>
</li>
<li>
<p>IO::Socket now has an atmark() method, which returns true if the socket
is positioned at the out-of-band mark.  The method is also exportable
as a sockatmark() function.</p>
</li>
<li>
<p>IO::Socket::INET failed to open the specified port if the service name
was not known.  It now correctly uses the supplied port number as is. [561]</p>
</li>
<li>
<p>IO::Socket::INET has support for the ReusePort option (if your
platform supports it).  The Reuse option now has an alias, ReuseAddr.
For clarity, you may want to prefer ReuseAddr.</p>
</li>
<li>
<p>IO::Socket::INET now supports a value of zero for <code class="inline"><span class="w">LocalPort</span></code>

(usually meaning that the operating system will make one up.)</p>
</li>
<li>
<p>'use lib' now works identically to @INC.  Removing directories
with 'no lib' now works.</p>
</li>
<li>
<p>Math::BigFloat and Math::BigInt have undergone a full rewrite by Tels.
They are now magnitudes faster, and they support various bignum
libraries such as GMP and PARI as their backends.</p>
</li>
<li>
<p>Math::Complex handles inf, NaN etc., better.</p>
</li>
<li>
<p>Net::Ping has been considerably enhanced by Rob Brown: multihoming is
now supported, Win32 functionality is better, there is now time
measuring functionality (optionally high-resolution using
Time::HiRes), and there is now "external" protocol which uses
Net::Ping::External module which runs your external ping utility and
parses the output.  A version of Net::Ping::External is available in
CPAN.</p>
<p>Note that some of the Net::Ping tests are disabled when running
under the Perl distribution since one cannot assume one or more
of the following: enabled echo port at localhost, full Internet
connectivity, or sympathetic firewalls.  You can set the environment
variable PERL_TEST_Net_Ping to "1" (one) before running the Perl test
suite to enable all the Net::Ping tests.</p>
</li>
<li>
<p>POSIX::sigaction() is now much more flexible and robust.
You can now install coderef handlers, 'DEFAULT', and 'IGNORE'
handlers, installing new handlers was not atomic.</p>
</li>
<li>
<p>In Safe, <code class="inline"><span class="i">%INC</span></code>
 is now localised in a Safe compartment so that
use/require work.</p>
</li>
<li>
<p>In SDBM_File on DOSish platforms, some keys went missing because of
lack of support for files with "holes".  A workaround for the problem
has been added.</p>
</li>
<li>
<p>In Search::Dict one can now have a pre-processing hook for the
lines being searched.</p>
</li>
<li>
<p>The Shell module now has an OO interface.</p>
</li>
<li>
<p>In Sys::Syslog there is now a failover mechanism that will go
through alternative connection mechanisms until the message
is successfully logged.</p>
</li>
<li>
<p>The Test module has been significantly enhanced.</p>
</li>
<li>
<p>Time::Local::timelocal() does not handle fractional seconds anymore.
The rationale is that neither does localtime(), and timelocal() and
localtime() are supposed to be inverses of each other.</p>
</li>
<li>
<p>The vars pragma now supports declaring fully qualified variables.
(Something that <code class="inline"><a class="l_k" href="functions/our.html">our()</a></code> does not and will not support.)</p>
</li>
<li>
<p>The <code class="inline"><span class="w">utf8::</span></code>
 name space (as in the pragma) provides various
Perl-callable functions to provide low level access to Perl's
internal Unicode representation.  At the moment only length()
has been implemented.</p>
</li>
</ul>
<a name="Utility-Changes"></a><h1>Utility Changes</h1>
<ul>
<li>
<p>Emacs perl mode (emacs/cperl-mode.el) has been updated to version
4.31.</p>
</li>
<li>
<p><i>emacs/e2ctags.pl</i> is now much faster.</p>
</li>
<li>
<p><code class="inline"><span class="w">enc2xs</span></code>
 is a tool for people adding their own encodings to the
Encode module.</p>
</li>
<li>
<p><code class="inline"><span class="w">h2ph</span></code>
 now supports C trigraphs.</p>
</li>
<li>
<p><code class="inline"><span class="w">h2xs</span></code>
 now produces a template README.</p>
</li>
<li>
<p><code class="inline"><span class="w">h2xs</span></code>
 now uses <code class="inline"><span class="w">Devel::PPPort</span></code>
 for better portability between
different versions of Perl.</p>
</li>
<li>
<p><code class="inline"><span class="w">h2xs</span></code>
 uses the new <a href="ExtUtils/Constant.html">ExtUtils::Constant</a> module
which will affect newly created extensions that define constants.
Since the new code is more correct (if you have two constants where the
first one is a prefix of the second one, the first constant <b>never</b>
got defined), less lossy (it uses integers for integer constant,
as opposed to the old code that used floating point numbers even for
integer constants), and slightly faster, you might want to consider
regenerating your extension code (the new scheme makes regenerating
easy).  <a href="h2xs.html">h2xs</a> now also supports C trigraphs.</p>
</li>
<li>
<p><code class="inline"><span class="w">libnetcfg</span></code>
 has been added to configure libnet.</p>
</li>
<li>
<p><code class="inline"><span class="w">perlbug</span></code>
 is now much more robust.  It also sends the bug report to
perl.org, not perl.com.</p>
</li>
<li>
<p><code class="inline"><span class="w">perlcc</span></code>
 has been rewritten and its user interface (that is,
command line) is much more like that of the Unix C compiler, cc.
(The perlbc tools has been removed.  Use <code class="inline"><span class="w">perlcc</span> -B</code>
 instead.)
<b>Note that perlcc is still considered very experimental and
unsupported.</b> [561]</p>
</li>
<li>
<p><code class="inline"><span class="w">perlivp</span></code>
 is a new Installation Verification Procedure utility
for running any time after installing Perl.</p>
</li>
<li>
<p><code class="inline"><span class="w">piconv</span></code>
 is an implementation of the character conversion utility
<code class="inline"><span class="w">iconv</span></code>
, demonstrating the new Encode module.</p>
</li>
<li>
<p><code class="inline"><span class="w">pod2html</span></code>
 now allows specifying a cache directory.</p>
</li>
<li>
<p><code class="inline"><span class="w">pod2html</span></code>
 now produces XHTML 1.0.</p>
</li>
<li>
<p><code class="inline"><span class="w">pod2html</span></code>
 now understands POD written using different line endings
(PC-like CRLF versus Unix-like LF versus MacClassic-like CR).</p>
</li>
<li>
<p><code class="inline"><span class="w">s2p</span></code>
 has been completely rewritten in Perl.  (It is in fact a full
implementation of sed in Perl: you can use the sed functionality by
using the <code class="inline"><span class="w">psed</span></code>
 utility.)</p>
</li>
<li>
<p><code class="inline"><span class="w">xsubpp</span></code>
 now understands POD documentation embedded in the *.xs
files. [561]</p>
</li>
<li>
<p><code class="inline"><span class="w">xsubpp</span></code>
 now supports the OUT keyword.</p>
</li>
</ul>
<a name="New-Documentation"></a><h1>New Documentation</h1>
<ul>
<li>
<p>perl56delta details the changes between the 5.005 release and the
5.6.0 release.</p>
</li>
<li>
<p>perlclib documents the internal replacements for standard C library
functions.  (Interesting only for extension writers and Perl core
hackers.) [561+]</p>
</li>
<li>
<p>perldebtut is a Perl debugging tutorial. [561+]</p>
</li>
<li>
<p>perlebcdic contains considerations for running Perl on EBCDIC
platforms. [561+]</p>
</li>
<li>
<p>perlintro is a gentle introduction to Perl.</p>
</li>
<li>
<p>perliol documents the internals of PerlIO with layers.</p>
</li>
<li>
<p>perlmodstyle is a style guide for writing modules.</p>
</li>
<li>
<p>perlnewmod tells about writing and submitting a new module. [561+]</p>
</li>
<li>
<p>perlpacktut is a pack() tutorial.</p>
</li>
<li>
<p>perlpod has been rewritten to be clearer and to record the best
practices gathered over the years.</p>
</li>
<li>
<p>perlpodspec is a more formal specification of the pod format,
mainly of interest for writers of pod applications, not to
people writing in pod.</p>
</li>
<li>
<p>perlretut is a regular expression tutorial. [561+]</p>
</li>
<li>
<p>perlrequick is a regular expressions quick-start guide.
Yes, much quicker than perlretut. [561]</p>
</li>
<li>
<p>perltodo has been updated.</p>
</li>
<li>
<p>perltootc has been renamed as perltooc (to not to conflict
with perltoot in filesystems restricted to "8.3" names).</p>
</li>
<li>
<p>perluniintro is an introduction to using Unicode in Perl.
(perlunicode is more of a detailed reference and background
information)</p>
</li>
<li>
<p>perlutil explains the command line utilities packaged with the Perl
distribution. [561+]</p>
</li>
</ul>
<p>The following platform-specific documents are available before
the installation as README.<i>platform</i>, and after the installation
as perl<i>platform</i>:</p>
<pre class="verbatim"><ol><li>    <span class="w">perlaix</span> <span class="w">perlamiga</span> <span class="w">perlapollo</span> <span class="w">perlbeos</span> <span class="w">perlbs2000</span></li><li>    <span class="w">perlce</span> <span class="w">perlcygwin</span> <span class="w">perldgux</span> <span class="w">perldos</span> <span class="w">perlepoc</span> <span class="w">perlfreebsd</span> <span class="w">perlhpux</span></li><li>    <span class="w">perlhurd</span> <span class="w">perlirix</span> <span class="w">perlmachten</span> <span class="w">perlmacos</span> <span class="w">perlmint</span> <span class="w">perlmpeix</span></li><li>    <span class="w">perlnetware</span> <span class="w">perlos2</span> <span class="w">perlos390</span> <span class="w">perlplan9</span> <span class="w">perlqnx</span> <span class="w">perlsolaris</span></li><li>    <span class="w">perltru64</span> <span class="w">perluts</span> <span class="w">perlvmesa</span> <span class="w">perlvms</span> <span class="w">perlvos</span> <span class="w">perlwin32</span></li></ol></pre><p>These documents usually detail one or more of the following subjects:
configuring, building, testing, installing, and sometimes also using
Perl on the said platform.</p>
<p>Eastern Asian Perl users are now welcomed in their own languages:
README.jp (Japanese), README.ko (Korean), README.cn (simplified
Chinese) and README.tw (traditional Chinese), which are written in
normal pod but encoded in EUC-JP, EUC-KR, EUC-CN and Big5.  These
will get installed as</p>
<pre class="verbatim"><ol><li>   <span class="w">perljp</span> <span class="w">perlko</span> <span class="w">perlcn</span> <span class="w">perltw</span></li></ol></pre><ul>
<li>
<p>The documentation for the POSIX-BC platform is called "BS2000", to avoid
confusion with the Perl POSIX module.</p>
</li>
<li>
<p>The documentation for the WinCE platform is called perlce (README.ce
in the source code kit), to avoid confusion with the perlwin32
documentation on 8.3-restricted filesystems.</p>
</li>
</ul>
<a name="Performance-Enhancements"></a><h1>Performance Enhancements</h1>
<ul>
<li>
<p>map() could get pathologically slow when the result list it generates
is larger than the source list.  The performance has been improved for
common scenarios. [561]</p>
</li>
<li>
<p>sort() is also fully reentrant, in the sense that the sort function
can itself call sort().  This did not work reliably in previous
releases. [561]</p>
</li>
<li>
<p>sort() has been changed to use primarily mergesort internally as
opposed to the earlier quicksort.  For very small lists this may
result in slightly slower sorting times, but in general the speedup
should be at least 20%.  Additional bonuses are that the worst case
behaviour of sort() is now better (in computer science terms it now
runs in time O(N log N), as opposed to quicksort's Theta(N**2)
worst-case run time behaviour), and that sort() is now stable
(meaning that elements with identical keys will stay ordered as they
were before the sort).  See the <code class="inline"><a class="l_k" href="functions/sort.html">sort</a></code> pragma for information.</p>
<p>The story in more detail: suppose you want to serve yourself a little
slice of Pi.</p>
<pre class="verbatim"><ol><li>    <span class="i">@digits</span> = <span class="s">(</span> <span class="n">3</span><span class="cm">,</span><span class="n">1</span><span class="cm">,</span><span class="n">4</span><span class="cm">,</span><span class="n">1</span><span class="cm">,</span><span class="n">5</span><span class="cm">,</span><span class="n">9</span> <span class="s">)</span><span class="sc">;</span></li></ol></pre><p>A numerical sort of the digits will yield (1,1,3,4,5,9), as expected.
Which <code class="inline"><span class="n">1</span></code>
 comes first is hard to know, since one <code class="inline"><span class="n">1</span></code>
 looks pretty
much like any other.  You can regard this as totally trivial,
or somewhat profound.  However, if you just want to sort the even
digits ahead of the odd ones, then what will</p>
<pre class="verbatim"><ol><li>    <a class="l_k" href="functions/sort.html">sort</a> <span class="s">{</span> <span class="s">(</span><span class="i">$a</span> % <span class="n">2</span><span class="s">)</span> &lt;=&gt; <span class="s">(</span><span class="i">$b</span> % <span class="n">2</span><span class="s">)</span> <span class="s">}</span> <span class="i">@digits</span><span class="sc">;</span></li></ol></pre><p>yield?  The only even digit, <code class="inline"><span class="n">4</span></code>
, will come first.  But how about
the odd numbers, which all compare equal?  With the quicksort algorithm
used to implement Perl 5.6 and earlier, the order of ties is left up
to the sort.  So, as you add more and more digits of Pi, the order
in which the sorted even and odd digits appear will change.
and, for sufficiently large slices of Pi, the quicksort algorithm
in Perl 5.8 won't return the same results even if reinvoked with the
same input.  The justification for this rests with quicksort's
worst case behavior.  If you run</p>
<pre class="verbatim"><ol><li>   <a class="l_k" href="functions/sort.html">sort</a> <span class="s">{</span> <span class="i">$a</span> &lt;=&gt; <span class="i">$b</span> <span class="s">}</span> <span class="s">(</span> <span class="n">1</span> .. <span class="i">$N</span> <span class="cm">,</span> <span class="n">1</span> .. <span class="i">$N</span> <span class="s">)</span><span class="sc">;</span></li></ol></pre><p>(something you might approximate if you wanted to merge two sorted
arrays using sort), doubling $N doesn't just double the quicksort time,
it <i>quadruples</i> it.  Quicksort has a worst case run time that can
grow like N**2, so-called <i>quadratic</i> behaviour, and it can happen
on patterns that may well arise in normal use.  You won't notice this
for small arrays, but you <i>will</i> notice it with larger arrays,
and you may not live long enough for the sort to complete on arrays
of a million elements.  So the 5.8 quicksort scrambles large arrays
before sorting them, as a statistical defence against quadratic behaviour.
But that means if you sort the same large array twice, ties may be
broken in different ways.</p>
<p>Because of the unpredictability of tie-breaking order, and the quadratic
worst-case behaviour, quicksort was <i>almost</i> replaced completely with
a stable mergesort.  <i>Stable</i> means that ties are broken to preserve
the original order of appearance in the input array.  So</p>
<pre class="verbatim"><ol><li>    <a class="l_k" href="functions/sort.html">sort</a> <span class="s">{</span> <span class="s">(</span><span class="i">$a</span> % <span class="n">2</span><span class="s">)</span> &lt;=&gt; <span class="s">(</span><span class="i">$b</span> % <span class="n">2</span><span class="s">)</span> <span class="s">}</span> <span class="s">(</span><span class="n">3</span><span class="cm">,</span><span class="n">1</span><span class="cm">,</span><span class="n">4</span><span class="cm">,</span><span class="n">1</span><span class="cm">,</span><span class="n">5</span><span class="cm">,</span><span class="n">9</span><span class="s">)</span><span class="sc">;</span></li></ol></pre><p>will yield (4,3,1,1,5,9), guaranteed.  The even and odd numbers
appear in the output in the same order they appeared in the input.
Mergesort has worst case O(N log N) behaviour, the best value
attainable.  And, ironically, this mergesort does particularly
well where quicksort goes quadratic:  mergesort sorts (1..$N, 1..$N)
in O(N) time.  But quicksort was rescued at the last moment because
it is faster than mergesort on certain inputs and platforms.
For example, if you really <i>don't</i> care about the order of even
and odd digits, quicksort will run in O(N) time; it's very good
at sorting many repetitions of a small number of distinct elements.
The quicksort divide and conquer strategy works well on platforms
with relatively small, very fast, caches.  Eventually, the problem gets
whittled down to one that fits in the cache, from which point it
benefits from the increased memory speed.</p>
<p>Quicksort was rescued by implementing a sort pragma to control aspects
of the sort.  The <b>stable</b> subpragma forces stable behaviour,
regardless of algorithm.  The <b>_quicksort</b> and <b>_mergesort</b>
subpragmas are heavy-handed ways to select the underlying implementation.
The leading <code class="inline"><span class="w">_</span></code>
 is a reminder that these subpragmas may not survive
beyond 5.8.  More appropriate mechanisms for selecting the implementation
exist, but they wouldn't have arrived in time to save quicksort.</p>
</li>
<li>
<p>Hashes now use Bob Jenkins "One-at-a-Time" hashing key algorithm
( <a href="http://burtleburtle.net/bob/hash/doobs.html">http://burtleburtle.net/bob/hash/doobs.html</a> ).  This algorithm is
reasonably fast while producing a much better spread of values than
the old hashing algorithm (originally by Chris Torek, later tweaked by
Ilya Zakharevich).  Hash values output from the algorithm on a hash of
all 3-char printable ASCII keys comes much closer to passing the
DIEHARD random number generation tests.  According to perlbench, this
change has not affected the overall speed of Perl.</p>
</li>
<li>
<p>unshift() should now be noticeably faster.</p>
</li>
</ul>
<a name="Installation-and-Configuration-Improvements"></a><h1>Installation and Configuration Improvements</h1>
<a name="Generic-Improvements"></a><h2>Generic Improvements</h2>
<ul>
<li>
<p>INSTALL now explains how you can configure Perl to use 64-bit
integers even on non-64-bit platforms.</p>
</li>
<li>
<p>Policy.sh policy change: if you are reusing a Policy.sh file
(see INSTALL) and you use Configure -Dprefix=/foo/bar and in the old
Policy $prefix eq $siteprefix and $prefix eq $vendorprefix, all of
them will now be changed to the new prefix, /foo/bar.  (Previously
only $prefix changed.)  If you do not like this new behaviour,
specify prefix, siteprefix, and vendorprefix explicitly.</p>
</li>
<li>
<p>A new optional location for Perl libraries, otherlibdirs, is available.
It can be used for example for vendor add-ons without disturbing Perl's
own library directories.</p>
</li>
<li>
<p>In many platforms, the vendor-supplied 'cc' is too stripped-down to
build Perl (basically, 'cc' doesn't do ANSI C).  If this seems
to be the case and 'cc' does not seem to be the GNU C compiler
'gcc', an automatic attempt is made to find and use 'gcc' instead.</p>
</li>
<li>
<p>gcc needs to closely track the operating system release to avoid
build problems. If Configure finds that gcc was built for a different
operating system release than is running, it now gives a clearly visible
warning that there may be trouble ahead.</p>
</li>
<li>
<p>Since Perl 5.8 is not binary-compatible with previous releases
of Perl, Configure no longer suggests including the 5.005
modules in @INC.</p>
</li>
<li>
<p>Configure <code class="inline">-S</code>
 can now run non-interactively. [561]</p>
</li>
<li>
<p>Configure support for pdp11-style memory models has been removed due
to obsolescence. [561]</p>
</li>
<li>
<p>configure.gnu now works with options with whitespace in them.</p>
</li>
<li>
<p>installperl now outputs everything to STDERR.</p>
</li>
<li>
<p>Because PerlIO is now the default on most platforms, "-perlio" doesn't
get appended to the $Config{archname} (also known as $^O) anymore.
Instead, if you explicitly choose not to use perlio (Configure command
line option -Uuseperlio), you will get "-stdio" appended.</p>
</li>
<li>
<p>Another change related to the architecture name is that "-64all"
(-Duse64bitall, or "maximally 64-bit") is appended only if your
pointers are 64 bits wide.  (To be exact, the use64bitall is ignored.)</p>
</li>
<li>
<p>In AFS installations, one can configure the root of the AFS to be
somewhere else than the default <i>/afs</i> by using the Configure
parameter <code class="inline">-Dafsroot=/some/where/else</code>.</p>
</li>
<li>
<p>APPLLIB_EXP, a lesser-known configuration-time definition, has been
documented.  It can be used to prepend site-specific directories
to Perl's default search path (@INC); see INSTALL for information.</p>
</li>
<li>
<p>The version of Berkeley DB used when the Perl (and, presumably, the
DB_File extension) was built is now available as
<code class="inline"><span class="i">@Config</span>{<span class="q">qw(db_version_major db_version_minor db_version_patch)</span>}</code>

from Perl and as <code class="inline"><span class="w">DB_VERSION_MAJOR_CFG</span> <span class="w">DB_VERSION_MINOR_CFG</span>
<span class="w">DB_VERSION_PATCH_CFG</span></code>
 from C.</p>
</li>
<li>
<p>Building Berkeley DB3 for compatibility modes for DB, NDBM, and ODBM
has been documented in INSTALL.</p>
</li>
<li>
<p>If you have CPAN access (either network or a local copy such as a
CD-ROM) you can during specify extra modules to Configure to build and
install with Perl using the -Dextras=...  option.  See INSTALL for
more details.</p>
</li>
<li>
<p>In addition to config.over, a new override file, config.arch, is
available.  This file is supposed to be used by hints file writers
for architecture-wide changes (as opposed to config.over which is
for site-wide changes).</p>
</li>
<li>
<p>If your file system supports symbolic links, you can build Perl outside
of the source directory by</p>
<pre class="verbatim"><ol><li>	mkdir perl/build/directory</li><li>	cd perl/build/directory</li><li>	sh /path/to/perl/source/Configure -Dmksymlinks ...</li></ol></pre><p>This will create in perl/build/directory a tree of symbolic links
pointing to files in /path/to/perl/source.  The original files are left
unaffected.  After Configure has finished, you can just say</p>
<pre class="verbatim"><ol><li>	<span class="w">make</span> <span class="w">all</span> <span class="w">test</span></li></ol></pre><p>and Perl will be built and tested, all in perl/build/directory.
[561]</p>
</li>
<li>
<p>For Perl developers, several new make targets for profiling
and debugging have been added; see <a href="perlhack.html">perlhack</a>.</p>
<ul>
<li>
<p>Use of the <i>gprof</i> tool to profile Perl has been documented in
<a href="perlhack.html">perlhack</a>.  There is a make target called "perl.gprof" for
generating a gprofiled Perl executable.</p>
</li>
<li>
<p>If you have GCC 3, there is a make target called "perl.gcov" for
creating a gcoved Perl executable for coverage analysis.  See
<a href="perlhack.html">perlhack</a>.</p>
</li>
<li>
<p>If you are on IRIX or Tru64 platforms, new profiling/debugging options
have been added; see <a href="perlhack.html">perlhack</a> for more information about pixie and
Third Degree.</p>
</li>
</ul>
</li>
<li>
<p>Guidelines of how to construct minimal Perl installations have
been added to INSTALL.</p>
</li>
<li>
<p>The Thread extension is now not built at all under ithreads
(<code class="inline"><span class="w">Configure</span> -<span class="w">Duseithreads</span></code>
) because it wouldn't work anyway (the
Thread extension requires being Configured with <code class="inline">-<span class="w">Duse5005threads</span></code>
).</p>
<p><b>Note that the 5.005 threads are unsupported and deprecated: if you
have code written for the old threads you should migrate it to the
new ithreads model.</b></p>
</li>
<li>
<p>The Gconvert macro ($Config{d_Gconvert}) used by perl for stringifying
floating-point numbers is now more picky about using sprintf %.*g
rules for the conversion.  Some platforms that used to use gcvt may
now resort to the slower sprintf.</p>
</li>
<li>
<p>The obsolete method of making a special (e.g., debugging) flavor
of perl by saying</p>
<pre class="verbatim"><ol><li>	<span class="w">make</span> <span class="w">LIBPERL</span>=<span class="w">libperld</span>.<span class="w">a</span></li></ol></pre><p>has been removed. Use -DDEBUGGING instead.</p>
</li>
</ul>
<a name="New-Or-Improved-Platforms"></a><h2>New Or Improved Platforms</h2>
<p>For the list of platforms known to support Perl,
see <a href="perlport.html#Supported-Platforms">Supported Platforms in perlport</a>.</p>
<ul>
<li>
<p>AIX dynamic loading should be now better supported.</p>
</li>
<li>
<p>AIX should now work better with gcc, threads, and 64-bitness.  Also the
long doubles support in AIX should be better now.  See <a href="perlaix.html">perlaix</a>.</p>
</li>
<li>
<p>AtheOS ( <a href="http://www.atheos.cx/">http://www.atheos.cx/</a> ) is a new platform.</p>
</li>
<li>
<p>BeOS has been reclaimed.</p>
</li>
<li>
<p>The DG/UX platform now supports 5.005-style threads.
See <a href="http://search.cpan.org/perldoc/perldgux">perldgux</a>.</p>
</li>
<li>
<p>The DYNIX/ptx platform (also known as dynixptx) is supported at or
near osvers 4.5.2.</p>
</li>
<li>
<p>EBCDIC platforms (z/OS (also known as OS/390), POSIX-BC, and VM/ESA)
have been regained.  Many test suite tests still fail and the
co-existence of Unicode and EBCDIC isn't quite settled, but the
situation is much better than with Perl 5.6.  See <a href="perlos390.html">perlos390</a>,
<a href="perlbs2000.html">perlbs2000</a> (for POSIX-BC), and perlvmesa for more information.
(<b>Note:</b> support for VM/ESA was removed in Perl v5.18.0. The relevant
information was in <i>README.vmesa</i>)</p>
</li>
<li>
<p>Building perl with -Duseithreads or -Duse5005threads now works under
HP-UX 10.20 (previously it only worked under 10.30 or later). You will
need a thread library package installed. See README.hpux. [561]</p>
</li>
<li>
<p>Mac OS Classic is now supported in the mainstream source package
(MacPerl has of course been available since perl 5.004 but now the
source code bases of standard Perl and MacPerl have been synchronised)
[561]</p>
</li>
<li>
<p>Mac OS X (or Darwin) should now be able to build Perl even on HFS+
filesystems.  (The case-insensitivity used to confuse the Perl build
process.)</p>
</li>
<li>
<p>NCR MP-RAS is now supported. [561]</p>
</li>
<li>
<p>All the NetBSD specific patches (except for the installation
specific ones) have been merged back to the main distribution.</p>
</li>
<li>
<p>NetWare from Novell is now supported.  See <a href="perlnetware.html">perlnetware</a>.</p>
</li>
<li>
<p>NonStop-UX is now supported. [561]</p>
</li>
<li>
<p>NEC SUPER-UX is now supported.</p>
</li>
<li>
<p>All the OpenBSD specific patches (except for the installation
specific ones) have been merged back to the main distribution.</p>
</li>
<li>
<p>Perl has been tested with the GNU pth userlevel thread package
( <a href="http://www.gnu.org/software/pth/pth.html">http://www.gnu.org/software/pth/pth.html</a> ).  All thread tests
of Perl now work, but not without adding some yield()s to the tests,
so while pth (and other userlevel thread implementations) can be
considered to be "working" with Perl ithreads, keep in mind the
possible non-preemptability of the underlying thread implementation.</p>
</li>
<li>
<p>Stratus VOS is now supported using Perl's native build method
(Configure).  This is the recommended method to build Perl on
VOS.  The older methods, which build miniperl, are still
available.  See <a href="perlvos.html">perlvos</a>. [561+]</p>
</li>
<li>
<p>The Amdahl UTS Unix mainframe platform is now supported. [561]</p>
</li>
<li>
<p>WinCE is now supported.  See <a href="perlce.html">perlce</a>.</p>
</li>
<li>
<p>z/OS (formerly known as OS/390, formerly known as MVS OE) now has
support for dynamic loading.  This is not selected by default,
however, you must specify -Dusedl in the arguments of Configure. [561]</p>
</li>
</ul>
<a name="Selected-Bug-Fixes"></a><h1>Selected Bug Fixes</h1>
<p>Numerous memory leaks and uninitialized memory accesses have been
hunted down.  Most importantly, anonymous subs used to leak quite
a bit. [561]</p>
<ul>
<li>
<p>The autouse pragma didn't work for Multi::Part::Function::Names.</p>
</li>
<li>
<p>caller() could cause core dumps in certain situations.  Carp was
sometimes affected by this problem.  In particular, caller() now
returns a subroutine name of <code class="inline"><span class="s">(</span><span class="w">unknown</span><span class="s">)</span></code>
 for subroutines that have
been removed from the symbol table.</p>
</li>
<li>
<p>chop(@list) in list context returned the characters chopped in
reverse order.  This has been reversed to be in the right order. [561]</p>
</li>
<li>
<p>Configure no longer includes the DBM libraries (dbm, gdbm, db, ndbm)
when building the Perl binary.  The only exception to this is SunOS 4.x,
which needs them. [561]</p>
</li>
<li>
<p>The behaviour of non-decimal but numeric string constants such as
"0x23" was platform-dependent: in some platforms that was seen as 35,
in some as 0, in some as a floating point number (don't ask).  This
was caused by Perl's using the operating system libraries in a situation
where the result of the string to number conversion is undefined: now
Perl consistently handles such strings as zero in numeric contexts.</p>
</li>
<li>
<p>Several debugger fixes: exit code now reflects the script exit code,
condition <code class="inline"><span class="q">&quot;0&quot;</span></code>
 now treated correctly, the <code class="inline"><span class="w">d</span></code>
 command now checks
line number, <code class="inline"><span class="i">$.</span></code>
 no longer gets corrupted, and all debugger output
now goes correctly to the socket if RemotePort is set. [561]</p>
</li>
<li>
<p>The debugger (perl5db.pl) has been modified to present a more
consistent commands interface, via (CommandSet=580).  perl5db.t was
also added to test the changes, and as a placeholder for further tests.</p>
<p>See <a href="perldebug.html">perldebug</a>.</p>
</li>
<li>
<p>The debugger has a new <code class="inline"><span class="w">dumpDepth</span></code>
 option to control the maximum
depth to which nested structures are dumped.  The <code class="inline"><span class="w">x</span></code>
 command has
been extended so that <code class="inline"><span class="w">x</span> <span class="w">N</span> <span class="w">EXPR</span></code>
 dumps out the value of <i>EXPR</i> to a
depth of at most <i>N</i> levels.</p>
</li>
<li>
<p>The debugger can now show lexical variables if you have the CPAN
module PadWalker installed.</p>
</li>
<li>
<p>The order of DESTROYs has been made more predictable.</p>
</li>
<li>
<p>Perl 5.6.0 could emit spurious warnings about redefinition of
dl_error() when statically building extensions into perl.
This has been corrected. [561]</p>
</li>
<li>
<p><a href="http://search.cpan.org/perldoc/dprofpp">dprofpp</a> -R didn't work.</p>
</li>
<li>
<p><code class="inline"><span class="i">*foo</span>{<span class="w">FORMAT</span>}</code>
 now works.</p>
</li>
<li>
<p>Infinity is now recognized as a number.</p>
</li>
<li>
<p>UNIVERSAL::isa no longer caches methods incorrectly.  (This broke
the Tk extension with 5.6.0.) [561]</p>
</li>
<li>
<p>Lexicals I: lexicals outside an eval "" weren't resolved
correctly inside a subroutine definition inside the eval "" if they
were not already referenced in the top level of the eval""ed code.</p>
</li>
<li>
<p>Lexicals II: lexicals leaked at file scope into subroutines that
were declared before the lexicals.</p>
</li>
<li>
<p>Lexical warnings now propagating correctly between scopes
and into <code class="inline"><a class="l_k" href="functions/eval.html">eval</a> <span class="q">&quot;...&quot;</span></code>
.</p>
</li>
<li>
<p><code class="inline"><a class="l_k" href="functions/use.html">use</a> <span class="w">warnings</span> <span class="q">qw(FATAL all)</span></code>
 did not work as intended.  This has been
corrected. [561]</p>
</li>
<li>
<p>warnings::enabled() now reports the state of $^W correctly if the caller
isn't using lexical warnings. [561]</p>
</li>
<li>
<p>Line renumbering with eval and <code class="inline"><span class="c">#line</span></code>
 now works. [561]</p>
</li>
<li>
<p>Fixed numerous memory leaks, especially in eval "".</p>
</li>
<li>
<p>Localised tied variables no longer leak memory</p>
<pre class="verbatim"><ol><li>    <a class="l_k" href="functions/use.html">use</a> <span class="w">Tie::Hash</span><span class="sc">;</span></li><li>    <a class="l_k" href="functions/tie.html">tie</a> <a class="l_k" href="functions/my.html">my</a> <span class="i">%tied_hash</span> <span class="cm">=&gt;</span> <span class="q">&#39;Tie::StdHash&#39;</span><span class="sc">;</span></li><li></li><li>    ...</li><li></li><li>    <span class="c"># Used to leak memory every time local() was called;</span></li><li>    <span class="c"># in a loop, this added up.</span></li><li>    <a class="l_k" href="functions/local.html">local</a><span class="s">(</span><span class="i">$tied_hash</span>{<span class="w">Foo</span>}<span class="s">)</span> = <span class="n">1</span><span class="sc">;</span></li></ol></pre></li>
<li>
<p>Localised hash elements (and %ENV) are correctly unlocalised to not
exist, if they didn't before they were localised.</p>
<pre class="verbatim"><ol><li>    <a class="l_k" href="functions/use.html">use</a> <span class="w">Tie::Hash</span><span class="sc">;</span></li><li>    <a class="l_k" href="functions/tie.html">tie</a> <a class="l_k" href="functions/my.html">my</a> <span class="i">%tied_hash</span> <span class="cm">=&gt;</span> <span class="q">&#39;Tie::StdHash&#39;</span><span class="sc">;</span></li><li></li><li>    ...</li><li></li><li>    <span class="c"># Nothing has set the FOO element so far</span></li><li></li><li>    <span class="s">{</span> <a class="l_k" href="functions/local.html">local</a> <span class="i">$tied_hash</span>{<span class="w">FOO</span>} = <span class="q">&#39;Bar&#39;</span> <span class="s">}</span></li><li></li><li>    <span class="c"># This used to print, but not now.</span></li><li>    <a class="l_k" href="functions/print.html">print</a> <span class="q">&quot;exists!\n&quot;</span> if <a class="l_k" href="functions/exists.html">exists</a> <span class="i">$tied_hash</span>{<span class="w">FOO</span>}<span class="sc">;</span></li></ol></pre><p>As a side effect of this fix, tied hash interfaces <b>must</b> define
the EXISTS and DELETE methods.</p>
</li>
<li>
<p>mkdir() now ignores trailing slashes in the directory name,
as mandated by POSIX.</p>
</li>
<li>
<p>Some versions of glibc have a broken modfl().  This affects builds
with <code class="inline">-<span class="w">Duselongdouble</span></code>
.  This version of Perl detects this brokenness
and has a workaround for it.  The glibc release 2.2.2 is known to have
fixed the modfl() bug.</p>
</li>
<li>
<p>Modulus of unsigned numbers now works (4063328477 % 65535 used to
return 27406, instead of 27047). [561]</p>
</li>
<li>
<p>Some "not a number" warnings introduced in 5.6.0 eliminated to be
more compatible with 5.005.  Infinity is now recognised as a number. [561]</p>
</li>
<li>
<p>Numeric conversions did not recognize changes in the string value
properly in certain circumstances. [561]</p>
</li>
<li>
<p>Attributes (such as :shared) didn't work with our().</p>
</li>
<li>
<p>our() variables will not cause bogus "Variable will not stay shared"
warnings. [561]</p>
</li>
<li>
<p>"our" variables of the same name declared in two sibling blocks
resulted in bogus warnings about "redeclaration" of the variables.
The problem has been corrected. [561]</p>
</li>
<li>
<p>pack "Z" now correctly terminates the string with "\0".</p>
</li>
<li>
<p>Fix password routines which in some shadow password platforms
(e.g. HP-UX) caused getpwent() to return every other entry.</p>
</li>
<li>
<p>The PERL5OPT environment variable (for passing command line arguments
to Perl) didn't work for more than a single group of options. [561]</p>
</li>
<li>
<p>PERL5OPT with embedded spaces didn't work.</p>
</li>
<li>
<p>printf() no longer resets the numeric locale to "C".</p>
</li>
<li>
<p><code class="inline"><a class="l_k" href="functions/qw.html">qw(a\\b)</a></code> now parses correctly as <code class="inline"><span class="q">&#39;a\\b&#39;</span></code>
: that is, as three
characters, not four. [561]</p>
</li>
<li>
<p>pos() did not return the correct value within s///ge in earlier
versions.  This is now handled correctly. [561]</p>
</li>
<li>
<p>Printing quads (64-bit integers) with printf/sprintf now works
without the q L ll prefixes (assuming you are on a quad-capable platform).</p>
</li>
<li>
<p>Regular expressions on references and overloaded scalars now work. [561+]</p>
</li>
<li>
<p>Right-hand side magic (GMAGIC) could in many cases such as string
concatenation be invoked too many times.</p>
</li>
<li>
<p>scalar() now forces scalar context even when used in void context.</p>
</li>
<li>
<p>SOCKS support is now much more robust.</p>
</li>
<li>
<p>sort() arguments are now compiled in the right wantarray context
(they were accidentally using the context of the sort() itself).
The comparison block is now run in scalar context, and the arguments
to be sorted are always provided list context. [561]</p>
</li>
<li>
<p>Changed the POSIX character class <code class="inline">[[:space:]]</code> to include the (very
rarely used) vertical tab character.  Added a new POSIX-ish character
class <code class="inline">[[:blank:]]</code> which stands for horizontal whitespace
(currently, the space and the tab).</p>
</li>
<li>
<p>The tainting behaviour of sprintf() has been rationalized.  It does
not taint the result of floating point formats anymore, making the
behaviour consistent with that of string interpolation. [561]</p>
</li>
<li>
<p>Some cases of inconsistent taint propagation (such as within hash
values) have been fixed.</p>
</li>
<li>
<p>The RE engine found in Perl 5.6.0 accidentally pessimised certain kinds
of simple pattern matches.  These are now handled better. [561]</p>
</li>
<li>
<p>Regular expression debug output (whether through <code class="inline"><a class="l_k" href="functions/use.html">use</a> <span class="w">re</span> <span class="q">&#39;debug&#39;</span></code>

or via <code class="inline">-<span class="w">Dr</span></code>
) now looks better. [561]</p>
</li>
<li>
<p>Multi-line matches like <code class="inline"><span class="q">&quot;a\nxb\n&quot;</span> =~ <span class="q">/(?!\A)x/m</span></code>
 were flawed.  The
bug has been fixed. [561]</p>
</li>
<li>
<p>Use of $&amp; could trigger a core dump under some situations.  This
is now avoided. [561]</p>
</li>
<li>
<p>The regular expression captured submatches ($1, $2, ...) are now
more consistently unset if the match fails, instead of leaving false
data lying around in them. [561]</p>
</li>
<li>
<p>readline() on files opened in "slurp" mode could return an extra
"" (blank line) at the end in certain situations.  This has been
corrected. [561]</p>
</li>
<li>
<p>Autovivification of symbolic references of special variables described
in <a href="perlvar.html">perlvar</a> (as in <code class="inline"><span class="i">$</span>{<span class="i">$num</span>}</code>
) was accidentally disabled.  This works
again now. [561]</p>
</li>
<li>
<p>Sys::Syslog ignored the <code class="inline"><span class="w">LOG_AUTH</span></code>
 constant.</p>
</li>
<li>
<p>$AUTOLOAD, sort(), lock(), and spawning subprocesses
in multiple threads simultaneously are now thread-safe.</p>
</li>
<li>
<p>Tie::Array's SPLICE method was broken.</p>
</li>
<li>
<p>Allow a read-only string on the left-hand side of a non-modifying tr///.</p>
</li>
<li>
<p>If <code class="inline"><span class="w">STDERR</span></code>
 is tied, warnings caused by <code class="inline"><a class="l_k" href="functions/warn.html">warn</a></code> and <code class="inline"><a class="l_k" href="functions/die.html">die</a></code> now
correctly pass to it.</p>
</li>
<li>
<p>Several Unicode fixes.</p>
<ul>
<li>
<p>BOMs (byte order marks) at the beginning of Perl files
(scripts, modules) should now be transparently skipped.
UTF-16 and UCS-2 encoded Perl files should now be read correctly.</p>
</li>
<li>
<p>The character tables have been updated to Unicode 3.2.0.</p>
</li>
<li>
<p>Comparing with utf8 data does not magically upgrade non-utf8 data
into utf8.  (This was a problem for example if you were mixing data
from I/O and Unicode data: your output might have got magically encoded
as UTF-8.)</p>
</li>
<li>
<p>Generating illegal Unicode code points such as U+FFFE, or the UTF-16
surrogates, now also generates an optional warning.</p>
</li>
<li>
<p><code class="inline"><span class="w">IsAlnum</span></code>
, <code class="inline"><span class="w">IsAlpha</span></code>
, and <code class="inline"><span class="w">IsWord</span></code>
 now match titlecase.</p>
</li>
<li>
<p>Concatenation with the <code class="inline">.</code> operator or via variable interpolation,
<code class="inline">eq</code>
, <code class="inline"><a class="l_k" href="functions/substr.html">substr</a></code>, <code class="inline"><a class="l_k" href="functions/reverse.html">reverse</a></code>, <code class="inline"><a class="l_k" href="functions/quotemeta.html">quotemeta</a></code>, the <code class="inline"><span class="w">x</span></code>
 operator,
substitution with <code class="inline"><a class="l_k" href="functions/s.html">s///</a></code>, single-quoted UTF-8, should now work.</p>
</li>
<li>
<p>The <code class="inline"><a class="l_k" href="functions/tr.html">tr///</a></code> operator now works.  Note that the <code class="inline"><a class="l_k" href="functions/tr.html">tr///CU</a></code>
functionality has been removed (but see pack('U0', ...)).</p>
</li>
<li>
<p><code class="inline"><a class="l_k" href="functions/eval.html">eval</a> <span class="q">&quot;v200&quot;</span></code>
 now works.</p>
</li>
<li>
<p>Perl 5.6.0 parsed m/\x{ab}/ incorrectly, leading to spurious warnings.
This has been corrected. [561]</p>
</li>
<li>
<p>Zero entries were missing from the Unicode classes such as <code class="inline"><span class="w">IsDigit</span></code>
.</p>
</li>
</ul>
</li>
<li>
<p>Large unsigned numbers (those above 2**31) could sometimes lose their
unsignedness, causing bogus results in arithmetic operations. [561]</p>
</li>
<li>
<p>The Perl parser has been stress tested using both random input and
Markov chain input and the few found crashes and lockups have been
fixed.</p>
</li>
</ul>
<a name="Platform-Specific-Changes-and-Fixes"></a><h2>Platform Specific Changes and Fixes</h2>
<ul>
<li>
<p>BSDI 4.*</p>
<p>Perl now works on post-4.0 BSD/OSes.</p>
</li>
<li>
<p>All BSDs</p>
<p>Setting <code class="inline"><span class="i">$0</span></code>
 now works (as much as possible; see <a href="perlvar.html">perlvar</a> for details).</p>
</li>
<li>
<p>Cygwin</p>
<p>Numerous updates; currently synchronised with Cygwin 1.3.10.</p>
</li>
<li>
<p>Previously DYNIX/ptx had problems in its Configure probe for non-blocking I/O.</p>
</li>
<li>
<p>EPOC</p>
<p>EPOC now better supported.  See README.epoc. [561]</p>
</li>
<li>
<p>FreeBSD 3.*</p>
<p>Perl now works on post-3.0 FreeBSDs.</p>
</li>
<li>
<p>HP-UX</p>
<p>README.hpux updated; <code class="inline"><span class="w">Configure</span> -<span class="w">Duse64bitall</span></code>
 now works;
now uses HP-UX malloc instead of Perl malloc.</p>
</li>
<li>
<p>IRIX</p>
<p>Numerous compilation flag and hint enhancements; accidental mixing
of 32-bit and 64-bit libraries (a doomed attempt) made much harder.</p>
</li>
<li>
<p>Linux</p>
<ul>
<li>
<p>Long doubles should now work (see INSTALL). [561]</p>
</li>
<li>
<p>Linux previously had problems related to sockaddrlen when using
accept(), recvfrom() (in Perl: recv()), getpeername(), and
getsockname().</p>
</li>
</ul>
</li>
<li>
<p>Mac OS Classic</p>
<p>Compilation of the standard Perl distribution in Mac OS Classic should
now work if you have the Metrowerks development environment and the
missing Mac-specific toolkit bits.  Contact the macperl mailing list
for details.</p>
</li>
<li>
<p>MPE/iX</p>
<p>MPE/iX update after Perl 5.6.0.  See README.mpeix. [561]</p>
</li>
<li>
<p>NetBSD/threads: try installing the GNU pth (should be in the
packages collection, or <a href="http://www.gnu.org/software/pth/">http://www.gnu.org/software/pth/</a>),
and Configure with -Duseithreads.</p>
</li>
<li>
<p>NetBSD/sparc</p>
<p>Perl now works on NetBSD/sparc.</p>
</li>
<li>
<p>OS/2</p>
<p>Now works with usethreads (see INSTALL). [561]</p>
</li>
<li>
<p>Solaris</p>
<p>64-bitness using the Sun Workshop compiler now works.</p>
</li>
<li>
<p>Stratus VOS</p>
<p>The native build method requires at least VOS Release 14.5.0
and GNU C++/GNU Tools 2.0.1 or later.  The Perl pack function
now maps overflowed values to +infinity and underflowed values
to -infinity.</p>
</li>
<li>
<p>Tru64 (aka Digital UNIX, aka DEC OSF/1)</p>
<p>The operating system version letter now recorded in $Config{osvers}.
Allow compiling with gcc (previously explicitly forbidden).  Compiling
with gcc still not recommended because buggy code results, even with
gcc 2.95.2.</p>
</li>
<li>
<p>Unicos</p>
<p>Fixed various alignment problems that lead into core dumps either
during build or later; no longer dies on math errors at runtime;
now using full quad integers (64 bits), previously was using
only 46 bit integers for speed.</p>
</li>
<li>
<p>VMS</p>
<p>See <a href="#Socket-Extension-Dynamic-in-VMS">Socket Extension Dynamic in VMS</a> and <a href="#IEEE-format-Floating-Point-Default-on-OpenVMS-Alpha">IEEE-format Floating Point Default on OpenVMS Alpha</a> for important changes not otherwise listed here.</p>
<p>chdir() now works better despite a CRT bug; now works with MULTIPLICITY
(see INSTALL); now works with Perl's malloc.</p>
<p>The tainting of <code class="inline"><span class="i">%ENV</span></code>
 elements via <code class="inline"><a class="l_k" href="functions/keys.html">keys</a></code> or <code class="inline"><a class="l_k" href="functions/values.html">values</a></code> was previously
unimplemented.  It now works as documented.</p>
<p>The <code class="inline"><a class="l_k" href="functions/waitpid.html">waitpid</a></code> emulation has been improved.  The worst bug (now fixed)
was that a pid of -1 would cause a wildcard search of all processes on
the system.</p>
<p>POSIX-style signals are now emulated much better on VMS versions prior
to 7.0.</p>
<p>The <code class="inline"><a class="l_k" href="functions/system.html">system</a></code> function and backticks operator have improved
functionality and better error handling. [561]</p>
<p>File access tests now use current process privileges rather than the
user's default privileges, which could sometimes result in a mismatch
between reported access and actual access.  This improvement is only
available on VMS v6.0 and later.</p>
<p>There is a new <code class="inline"><a class="l_k" href="functions/kill.html">kill</a></code> implementation based on <code class="inline"><span class="w">sys</span><span class="i">$sigprc</span></code>
 that allows
older VMS systems (pre-7.0) to use <code class="inline"><a class="l_k" href="functions/kill.html">kill</a></code> to send signals rather than
simply force exit.  This implementation also allows later systems to
call <code class="inline"><a class="l_k" href="functions/kill.html">kill</a></code> from within a signal handler.</p>
<p>Iterative logical name translations are now limited to 10 iterations in
imitation of SHOW LOGICAL and other OpenVMS facilities.</p>
</li>
<li>
<p>Windows</p>
<ul>
<li>
<p>Signal handling now works better than it used to.  It is now implemented
using a Windows message loop, and is therefore less prone to random
crashes.</p>
</li>
<li>
<p>fork() emulation is now more robust, but still continues to have a few
esoteric bugs and caveats.  See <a href="perlfork.html">perlfork</a> for details. [561+]</p>
</li>
<li>
<p>A failed (pseudo)fork now returns undef and sets errno to EAGAIN. [561]</p>
</li>
<li>
<p>The following modules now work on Windows:</p>
<pre class="verbatim"><ol><li>    <span class="w">ExtUtils::Embed</span>         <span class="s">[</span><span class="n">561</span><span class="s">]</span></li><li>    <span class="w">IO::Pipe</span></li><li>    <span class="w">IO::Poll</span></li><li>    <span class="w">Net::Ping</span></li></ol></pre></li>
<li>
<p>IO::File::new_tmpfile() is no longer limited to 32767 invocations
per-process.</p>
</li>
<li>
<p>Better chdir() return value for a non-existent directory.</p>
</li>
<li>
<p>Compiling perl using the 64-bit Platform SDK tools is now supported.</p>
</li>
<li>
<p>The Win32::SetChildShowWindow() builtin can be used to control the
visibility of windows created by child processes.  See <a href="http://search.cpan.org/perldoc/Win32">Win32</a> for
details.</p>
</li>
<li>
<p>Non-blocking waits for child processes (or pseudo-processes) are
supported via <code class="inline"><a class="l_k" href="functions/waitpid.html">waitpid</a><span class="s">(</span><span class="i">$pid</span><span class="cm">,</span> <span class="i">&amp;POSIX::WNOHANG</span><span class="s">)</span></code>
.</p>
</li>
<li>
<p>The behavior of system() with multiple arguments has been rationalized.
Each unquoted argument will be automatically quoted to protect whitespace,
and any existing whitespace in the arguments will be preserved.  This
improves the portability of system(@args) by avoiding the need for
Windows <code class="inline"><span class="w">cmd</span></code>
 shell specific quoting in perl programs.</p>
<p>Note that this means that some scripts that may have relied on earlier
buggy behavior may no longer work correctly.  For example,
<code class="inline"><a class="l_k" href="functions/system.html">system</a><span class="s">(</span><span class="q">&quot;nmake /nologo&quot;</span><span class="cm">,</span> <span class="i">@args</span><span class="s">)</span></code>
 will now attempt to run the file
<code class="inline"><span class="w">nmake</span> /<span class="w">nologo</span></code>
 and will fail when such a file isn't found.
On the other hand, perl will now execute code such as
<code class="inline"><a class="l_k" href="functions/system.html">system</a><span class="s">(</span><span class="q">&quot;c:/Program Files/MyApp/foo.exe&quot;</span><span class="cm">,</span> <span class="i">@args</span><span class="s">)</span></code>
 correctly.</p>
</li>
<li>
<p>The perl header files no longer suppress common warnings from the
Microsoft Visual C++ compiler.  This means that additional warnings may
now show up when compiling XS code.</p>
</li>
<li>
<p>Borland C++ v5.5 is now a supported compiler that can build Perl.
However, the generated binaries continue to be incompatible with those
generated by the other supported compilers (GCC and Visual C++). [561]</p>
</li>
<li>
<p>Duping socket handles with open(F, "&gt;&amp;MYSOCK") now works under Windows 9x.
[561]</p>
</li>
<li>
<p>Current directory entries in %ENV are now correctly propagated to child
processes. [561]</p>
</li>
<li>
<p>New %ENV entries now propagate to subprocesses. [561]</p>
</li>
<li>
<p>Win32::GetCwd() correctly returns C:\ instead of C: when at the drive root.
Other bugs in chdir() and Cwd::cwd() have also been fixed. [561]</p>
</li>
<li>
<p>The makefiles now default to the features enabled in ActiveState ActivePerl
(a popular Win32 binary distribution). [561]</p>
</li>
<li>
<p>HTML files will now be installed in c:\perl\html instead of
c:\perl\lib\pod\html</p>
</li>
<li>
<p>REG_EXPAND_SZ keys are now allowed in registry settings used by perl. [561]</p>
</li>
<li>
<p>Can now send() from all threads, not just the first one. [561]</p>
</li>
<li>
<p>ExtUtils::MakeMaker now uses $ENV{LIB} to search for libraries. [561]</p>
</li>
<li>
<p>Less stack reserved per thread so that more threads can run
concurrently. (Still 16M per thread.) [561]</p>
</li>
<li>
<p><code class="inline"><span class="w">File::Spec</span><span class="w">-&gt;tmpdir</span><span class="s">(</span><span class="s">)</span></code>
 now prefers C:/temp over /tmp
(works better when perl is running as service).</p>
</li>
<li>
<p>Better UNC path handling under ithreads. [561]</p>
</li>
<li>
<p>wait(), waitpid(), and backticks now return the correct exit status
under Windows 9x. [561]</p>
</li>
<li>
<p>A socket handle leak in accept() has been fixed. [561]</p>
</li>
</ul>
</li>
</ul>
<a name="New-or-Changed-Diagnostics"></a><h1>New or Changed Diagnostics</h1>
<p>Please see <a href="perldiag.html">perldiag</a> for more details.</p>
<ul>
<li>
<p>Ambiguous range in the transliteration operator (like a-z-9) now
gives a warning.</p>
</li>
<li>
<p>chdir("") and chdir(undef) now give a deprecation warning because they
cause a possible unintentional chdir to the home directory.
Say chdir() if you really mean that.</p>
</li>
<li>
<p>Two new debugging options have been added: if you have compiled your
Perl with debugging, you can use the -DT [561] and -DR options to trace
tokenising and to add reference counts to displaying variables,
respectively.</p>
</li>
<li>
<p>The lexical warnings category "deprecated" is no longer a sub-category
of the "syntax" category. It is now a top-level category in its own
right.</p>
</li>
<li>
<p>Unadorned dump() will now give a warning suggesting to
use explicit CORE::dump() if that's what really is meant.</p>
</li>
<li>
<p>The "Unrecognized escape" warning has been extended to include <code class="inline">\<span class="n">8</span></code>
,
<code class="inline">\<span class="n">9</span></code>
, and <code class="inline">\<span class="w">_</span></code>
.  There is no need to escape any of the <code class="inline">\<span class="w">w</span></code>
 characters.</p>
</li>
<li>
<p>All regular expression compilation error messages are now hopefully
easier to understand both because the error message now comes before
the failed regex and because the point of failure is now clearly
marked by a <code class="inline">&lt;-- <span class="w">HERE</span></code>
 marker.</p>
</li>
<li>
<p>Various I/O (and socket) functions like binmode(), close(), and so
forth now more consistently warn if they are used illogically either
on a yet unopened or on an already closed filehandle (or socket).</p>
</li>
<li>
<p>Using lstat() on a filehandle now gives a warning.  (It's a non-sensical
thing to do.)</p>
</li>
<li>
<p>The <code class="inline">-M</code>
 and <code class="inline">-m</code> options now warn if you didn't supply the module name.</p>
</li>
<li>
<p>If you in <code class="inline"><a class="l_k" href="functions/use.html">use</a></code> specify a required minimum version, modules matching
the name and but not defining a $VERSION will cause a fatal failure.</p>
</li>
<li>
<p>Using negative offset for vec() in lvalue context is now a warnable offense.</p>
</li>
<li>
<p>Odd number of arguments to overload::constant now elicits a warning.</p>
</li>
<li>
<p>Odd number of elements in anonymous hash now elicits a warning.</p>
</li>
<li>
<p>The various "opened only for", "on closed", "never opened" warnings
drop the <code class="inline"><span class="w">main::</span></code>
 prefix for filehandles in the <code class="inline"><span class="w">main</span></code>
 package,
for example <code class="inline"><span class="w">STDIN</span></code>
 instead of <code class="inline"><span class="w">main::STDIN</span></code>
.</p>
</li>
<li>
<p>Subroutine prototypes are now checked more carefully, you may
get warnings for example if you have used non-prototype characters.</p>
</li>
<li>
<p>If an attempt to use a (non-blessed) reference as an array index
is made, a warning is given.</p>
</li>
<li>
<p><code class="inline"><a class="l_k" href="functions/push.html">push</a> <span class="i">@a</span><span class="sc">;</span></code>
 and <code class="inline"><a class="l_k" href="functions/unshift.html">unshift</a> <span class="i">@a</span><span class="sc">;</span></code>
 (with no values to push or unshift)
now give a warning.  This may be a problem for generated and eval'ed
code.</p>
</li>
<li>
<p>If you try to <a href="functions/pack.html">pack</a> a number less than 0 or larger than 255
using the <code class="inline"><span class="q">&quot;C&quot;</span></code>
 format you will get an optional warning.  Similarly
for the <code class="inline"><span class="q">&quot;c&quot;</span></code>
 format and a number less than -128 or more than 127.</p>
</li>
<li>
<p>pack <code class="inline"><span class="w">P</span></code>
 format now demands an explicit size.</p>
</li>
<li>
<p>unpack <code class="inline"><span class="w">w</span></code>
 now warns of unterminated compressed integers.</p>
</li>
<li>
<p>Warnings relating to the use of PerlIO have been added.</p>
</li>
<li>
<p>Certain regex modifiers such as <code class="inline">(?o)</code> make sense only if applied to
the entire regex.  You will get an optional warning if you try to do
otherwise.</p>
</li>
<li>
<p>Variable length lookbehind has not yet been implemented, trying to
use it will tell that.</p>
</li>
<li>
<p>Using arrays or hashes as references (e.g. <code class="inline"><span class="i">%foo</span>-&gt;{<span class="w">bar</span>}</code>

has been deprecated for a while.  Now you will get an optional warning.</p>
</li>
<li>
<p>Warnings relating to the use of the new restricted hashes feature
have been added.</p>
</li>
<li>
<p>Self-ties of arrays and hashes are not supported and fatal errors
will happen even at an attempt to do so.</p>
</li>
<li>
<p>Using <code class="inline"><a class="l_k" href="functions/sort.html">sort</a></code> in scalar context now issues an optional warning.
This didn't do anything useful, as the sort was not performed.</p>
</li>
<li>
<p>Using the /g modifier in split() is meaningless and will cause a warning.</p>
</li>
<li>
<p>Using splice() past the end of an array now causes a warning.</p>
</li>
<li>
<p>Malformed Unicode encodings (UTF-8 and UTF-16) cause a lot of warnings,
as does trying to use UTF-16 surrogates (which are unimplemented).</p>
</li>
<li>
<p>Trying to use Unicode characters on an I/O stream without marking the
stream's encoding (using open() or binmode()) will cause "Wide character"
warnings.</p>
</li>
<li>
<p>Use of v-strings in use/require causes a (backward) portability warning.</p>
</li>
<li>
<p>Warnings relating to the use interpreter threads and their shared data
have been added.</p>
</li>
</ul>
<a name="Changed-Internals"></a><h1>Changed Internals</h1>
<ul>
<li>
<p>PerlIO is now the default.</p>
</li>
<li>
<p>perlapi.pod (a companion to perlguts) now attempts to document the
internal API.</p>
</li>
<li>
<p>You can now build a really minimal perl called microperl.
Building microperl does not require even running Configure;
<code class="inline"><span class="w">make</span> -f <span class="w">Makefile</span>.<span class="w">micro</span></code>
 should be enough.  Beware: microperl makes
many assumptions, some of which may be too bold; the resulting
executable may crash or otherwise misbehave in wondrous ways.
For careful hackers only.</p>
</li>
<li>
<p>Added rsignal(), whichsig(), do_join(), op_clear, op_null,
ptr_table_clear(), ptr_table_free(), sv_setref_uv(), and several UTF-8
interfaces to the publicised API.  For the full list of the available
APIs see <a href="perlapi.html">perlapi</a>.</p>
</li>
<li>
<p>Made possible to propagate customised exceptions via croak()ing.</p>
</li>
<li>
<p>Now xsubs can have attributes just like subs.  (Well, at least the
built-in attributes.)</p>
</li>
<li>
<p>dTHR and djSP have been obsoleted; the former removed (because it's
a no-op) and the latter replaced with dSP.</p>
</li>
<li>
<p>PERL_OBJECT has been completely removed.</p>
</li>
<li>
<p>The MAGIC constants (e.g. <code class="inline"><span class="q">&#39;P&#39;</span></code>
) have been macrofied
(e.g. <code class="inline"><span class="w">PERL_MAGIC_TIED</span></code>
) for better source code readability
and maintainability.</p>
</li>
<li>
<p>The regex compiler now maintains a structure that identifies nodes in
the compiled bytecode with the corresponding syntactic features of the
original regex expression.  The information is attached to the new
<code class="inline"><span class="w">offsets</span></code>
 member of the <code class="inline"><span class="w">struct</span> <span class="w">regexp</span></code>
. See <a href="perldebguts.html">perldebguts</a> for more
complete information.</p>
</li>
<li>
<p>The C code has been made much more <code class="inline"><span class="w">gcc</span> -<span class="w">Wall</span></code>
 clean.  Some warning
messages still remain in some platforms, so if you are compiling with
gcc you may see some warnings about dubious practices.  The warnings
are being worked on.</p>
</li>
<li>
<p><i>perly.c</i>, <i>sv.c</i>, and <i>sv.h</i> have now been extensively commented.</p>
</li>
<li>
<p>Documentation on how to use the Perl source repository has been added
to <i>Porting/repository.pod</i>.</p>
</li>
<li>
<p>There are now several profiling make targets.</p>
</li>
</ul>
<a name="Security-Vulnerability-Closed-%5b561%5d"></a><h1>Security Vulnerability Closed [561]</h1>
<p>(This change was already made in 5.7.0 but bears repeating here.)
(5.7.0 came out before 5.6.1: the development branch 5.7 released
earlier than the maintenance branch 5.6)</p>
<p>A potential security vulnerability in the optional suidperl component
of Perl was identified in August 2000.  suidperl is neither built nor
installed by default.  As of November 2001 the only known vulnerable
platform is Linux, most likely all Linux distributions.  CERT and
various vendors and distributors have been alerted about the vulnerability.
See <a href="http://www.cpan.org/src/5.0/sperl-2000-08-05/sperl-2000-08-05.txt">http://www.cpan.org/src/5.0/sperl-2000-08-05/sperl-2000-08-05.txt</a>
for more information.</p>
<p>The problem was caused by Perl trying to report a suspected security
exploit attempt using an external program, /bin/mail.  On Linux
platforms the /bin/mail program had an undocumented feature which
when combined with suidperl gave access to a root shell, resulting in
a serious compromise instead of reporting the exploit attempt.  If you
don't have /bin/mail, or if you have 'safe setuid scripts', or if
suidperl is not installed, you are safe.</p>
<p>The exploit attempt reporting feature has been completely removed from
Perl 5.8.0 (and the maintenance release 5.6.1, and it was removed also
from all the Perl 5.7 releases), so that particular vulnerability
isn't there anymore.  However, further security vulnerabilities are,
unfortunately, always possible.  The suidperl functionality is most
probably going to be removed in Perl 5.10.  In any case, suidperl
should only be used by security experts who know exactly what they are
doing and why they are using suidperl instead of some other solution
such as sudo ( see <a href="http://www.courtesan.com/sudo/">http://www.courtesan.com/sudo/</a> ).</p>
<a name="New-Tests"></a><h1>New Tests</h1>
<p>Several new tests have been added, especially for the <i>lib</i> and
<i>ext</i> subsections.  There are now about 69 000 individual tests
(spread over about 700 test scripts), in the regression suite (5.6.1
has about 11 700 tests, in 258 test scripts)  The exact numbers depend
on the platform and Perl configuration used.  Many of the new tests
are of course introduced by the new modules, but still in general Perl
is now more thoroughly tested.</p>
<p>Because of the large number of tests, running the regression suite
will take considerably longer time than it used to: expect the suite
to take up to 4-5 times longer to run than in perl 5.6.  On a really
fast machine you can hope to finish the suite in about 6-8 minutes
(wallclock time).</p>
<p>The tests are now reported in a different order than in earlier Perls.
(This happens because the test scripts from under t/lib have been moved
to be closer to the library/extension they are testing.)</p>
<a name="Known-Problems"></a><h1>Known Problems</h1>
<a name="The-Compiler-Suite-Is-Still-Very-Experimental"></a><h2>The Compiler Suite Is Still Very Experimental</h2>
<p>The compiler suite is slowly getting better but it continues to be
highly experimental.  Use in production environments is discouraged.</p>
<a name="Localising-Tied-Arrays-and-Hashes-Is-Broken"></a><h2>Localising Tied Arrays and Hashes Is Broken</h2>
<pre class="verbatim"><ol><li>    <a class="l_k" href="functions/local.html">local</a> <span class="i">%tied_array</span><span class="sc">;</span></li></ol></pre><p>doesn't work as one would expect: the old value is restored
incorrectly.  This will be changed in a future release, but we don't
know yet what the new semantics will exactly be.  In any case, the
change will break existing code that relies on the current
(ill-defined) semantics, so just avoid doing this in general.</p>
<a name="Building-Extensions-Can-Fail-Because-Of-Largefiles"></a><h2>Building Extensions Can Fail Because Of Largefiles</h2>
<p>Some extensions like mod_perl are known to have issues with
`largefiles', a change brought by Perl 5.6.0 in which file offsets
default to 64 bits wide, where supported.  Modules may fail to compile
at all, or they may compile and work incorrectly.  Currently, there
is no good solution for the problem, but Configure now provides
appropriate non-largefile ccflags, ldflags, libswanted, and libs
in the %Config hash (e.g., $Config{ccflags_nolargefiles}) so the
extensions that are having problems can try configuring themselves
without the largefileness.  This is admittedly not a clean solution,
and the solution may not even work at all.  One potential failure is
whether one can (or, if one can, whether it's a good idea to) link
together at all binaries with different ideas about file offsets;
all this is platform-dependent.</p>
<a name="Modifying-%24_-Inside-for(..)"></a><h2>Modifying $_ Inside for(..)</h2>
<pre class="verbatim"><ol><li>   for <span class="s">(</span><span class="n">1</span>..<span class="n">5</span><span class="s">)</span> <span class="s">{</span> <span class="i">$_</span>++ <span class="s">}</span></li></ol></pre><p>works without complaint.  It shouldn't.  (You should be able to
modify only lvalue elements inside the loops.)  You can see the
correct behaviour by replacing the 1..5 with 1, 2, 3, 4, 5.</p>
<a name="mod_perl-1.26-Doesn't-Build-With-Threaded-Perl"></a><h2>mod_perl 1.26 Doesn't Build With Threaded Perl</h2>
<p>Use mod_perl 1.27 or higher.</p>
<a name="lib%2fftmp-security-tests-warn-'system-possibly-insecure'"></a><h2>lib/ftmp-security tests warn 'system possibly insecure'</h2>
<p>Don't panic.  Read the 'make test' section of INSTALL instead.</p>
<a name="libwww-perl-(LWP)-fails-base%2fdate-%2351"></a><h2>libwww-perl (LWP) fails base/date #51</h2>
<p>Use libwww-perl 5.65 or later.</p>
<a name="PDL-failing-some-tests"></a><h2>PDL failing some tests</h2>
<p>Use PDL 2.3.4 or later.</p>
<a name="Perl_get_sv"></a><h2>Perl_get_sv</h2>
<p>You may get errors like 'Undefined symbol "Perl_get_sv"' or "can't
resolve symbol 'Perl_get_sv'", or the symbol may be "Perl_sv_2pv".
This probably means that you are trying to use an older shared Perl
library (or extensions linked with such) with Perl 5.8.0 executable.
Perl used to have such a subroutine, but that is no more the case.
Check your shared library path, and any shared Perl libraries in those
directories.</p>
<p>Sometimes this problem may also indicate a partial Perl 5.8.0
installation, see <a href="#Mac-OS-X-dyld-undefined-symbols">Mac OS X dyld undefined symbols</a> for an
example and how to deal with it.</p>
<a name="Self-tying-Problems"></a><h2>Self-tying Problems</h2>
<p>Self-tying of arrays and hashes is broken in rather deep and
hard-to-fix ways.  As a stop-gap measure to avoid people from getting
frustrated at the mysterious results (core dumps, most often), it is
forbidden for now (you will get a fatal error even from an attempt).</p>
<p>A change to self-tying of globs has caused them to be recursively
referenced (see: <a href="perlobj.html#Two-Phased-Garbage-Collection">Two-Phased Garbage Collection in perlobj</a>).  You
will now need an explicit untie to destroy a self-tied glob.  This
behaviour may be fixed at a later date.</p>
<p>Self-tying of scalars and IO thingies works.</p>
<a name="ext%2fthreads%2ft%2flibc"></a><h2>ext/threads/t/libc</h2>
<p>If this test fails, it indicates that your libc (C library) is not
threadsafe.  This particular test stress tests the localtime() call to
find out whether it is threadsafe.  See <a href="perlthrtut.html">perlthrtut</a> for more information.</p>
<a name="Failure-of-Thread-(5.005-style)-tests"></a><h2>Failure of Thread (5.005-style) tests</h2>
<p><b>Note that support for 5.005-style threading is deprecated,
experimental and practically unsupported.  In 5.10, it is expected
to be removed.  You should migrate your code to ithreads.</b></p>
<p>The following tests are known to fail due to fundamental problems in
the 5.005 threading implementation. These are not new failures--Perl
5.005_0x has the same bugs, but didn't have these tests.</p>
<pre class="verbatim"><ol><li> ../ext/B/t/xref.t                    255 65280    14   12  85.71%  3-14</li><li> ../ext/List/Util/t/first.t           255 65280     7    4  57.14%  2 5-7</li><li> ../lib/English.t                       2   512    54    2   3.70%  2-3</li><li> ../lib/FileCache.t                                 5    1  20.00%  5</li><li> ../lib/Filter/Simple/t/data.t                      6    3  50.00%  1-3</li><li> ../lib/Filter/Simple/t/filter_only.                9    3  33.33%  1-2 5</li><li> ../lib/Math/BigInt/t/bare_mbf.t                 1627    4   0.25%  8 11 1626-1627</li><li> ../lib/Math/BigInt/t/bigfltpm.t                 1629    4   0.25%  10 13 1628-</li><li>                                                                    1629</li><li> ../lib/Math/BigInt/t/sub_mbf.t                  1633    4   0.24%  8 11 1632-1633</li><li> ../lib/Math/BigInt/t/with_sub.t                 1628    4   0.25%  9 12 1627-1628</li><li> ../lib/Tie/File/t/31_autodefer.t     255 65280    65   32  49.23%  34-65</li><li> ../lib/autouse.t                                  10    1  10.00%  4</li><li> op/flip.t                                         15    1   6.67%  15</li></ol></pre><p>These failures are unlikely to get fixed as 5.005-style threads
are considered fundamentally broken.  (Basically what happens is that
competing threads can corrupt shared global state, one good example
being regular expression engine's state.)</p>
<a name="Timing-problems"></a><h2>Timing problems</h2>
<p>The following tests may fail intermittently because of timing
problems, for example if the system is heavily loaded.</p>
<pre class="verbatim"><ol><li>    <span class="w">t</span>/<span class="w">op</span>/<a class="l_k" href="functions/alarm.html">alarm</a>.<span class="w">t</span></li><li>    <span class="w">ext</span>/<span class="w">Time</span>/<span class="w">HiRes</span>/<span class="w">HiRes</span>.<span class="w">t</span></li><li>    <span class="w">lib</span>/<span class="w">Benchmark</span>.<span class="w">t</span></li><li>    <span class="w">lib</span>/<span class="w">Memoize</span>/<span class="w">t</span>/<span class="w">expmod_t</span>.<span class="w">t</span></li><li>    <span class="w">lib</span>/<span class="w">Memoize</span>/<span class="w">t</span>/<span class="w">speed</span>.<span class="w">t</span></li></ol></pre><p>In case of failure please try running them manually, for example</p>
<pre class="verbatim"><ol><li>    ./perl -Ilib ext/Time/HiRes/HiRes.t</li></ol></pre><a name="Tied%2fMagical-Array%2fHash-Elements-Do-Not-Autovivify"></a><h2>Tied/Magical Array/Hash Elements Do Not Autovivify</h2>
<p>For normal arrays <code class="inline"><span class="i">$foo</span> = \<span class="i">$bar</span>[<span class="n">1</span>]</code>
 will assign <code class="inline"><a class="l_k" href="functions/undef.html">undef</a></code> to
<code class="inline"><span class="i">$bar</span>[<span class="n">1</span>]</code>
 (assuming that it didn't exist before), but for
tied/magical arrays and hashes such autovivification does not happen
because there is currently no way to catch the reference creation.
The same problem affects slicing over non-existent indices/keys of
a tied/magical array/hash.</p>
<a name="Unicode-in-package%2fclass-and-subroutine-names-does-not-work"></a><h2>Unicode in package/class and subroutine names does not work</h2>
<p>One can have Unicode in identifier names, but not in package/class or
subroutine names.  While some limited functionality towards this does
exist as of Perl 5.8.0, that is more accidental than designed; use of
Unicode for the said purposes is unsupported.</p>
<p>One reason of this unfinishedness is its (currently) inherent
unportability: since both package names and subroutine names may
need to be mapped to file and directory names, the Unicode capability
of the filesystem becomes important-- and there unfortunately aren't
portable answers.</p>
<a name="Platform-Specific-Problems"></a><h1>Platform Specific Problems</h1>
<a name="AIX"></a><h2>AIX</h2>
<ul>
<li>
<p>If using the AIX native make command, instead of just "make" issue
"make all".  In some setups the former has been known to spuriously
also try to run "make install".  Alternatively, you may want to use
GNU make.</p>
</li>
<li>
<p>In AIX 4.2, Perl extensions that use C++ functions that use statics
may have problems in that the statics are not getting initialized.
In newer AIX releases, this has been solved by linking Perl with
the libC_r library, but unfortunately in AIX 4.2 the said library
has an obscure bug where the various functions related to time
(such as time() and gettimeofday()) return broken values, and
therefore in AIX 4.2 Perl is not linked against libC_r.</p>
</li>
<li>
<p>vac 5.0.0.0 May Produce Buggy Code For Perl</p>
<p>The AIX C compiler vac version 5.0.0.0 may produce buggy code,
resulting in a few random tests failing when run as part of "make
test", but when the failing tests are run by hand, they succeed.
We suggest upgrading to at least vac version 5.0.1.0, that has been
known to compile Perl correctly.  "lslpp -L|grep vac.C" will tell
you the vac version.  See README.aix.</p>
</li>
<li>
<p>If building threaded Perl, you may get compilation warning from pp_sys.c:</p>
<pre class="verbatim"><ol><li>  "pp_sys.c", line 4651.39: 1506-280 (W) Function argument assignment between types "unsigned char*" and "const void*" is not allowed.</li></ol></pre><p>This is harmless; it is caused by the getnetbyaddr() and getnetbyaddr_r()
having slightly different types for their first argument.</p>
</li>
</ul>
<a name="Alpha-systems-with-old-gccs-fail-several-tests"></a><h2>Alpha systems with old gccs fail several tests</h2>
<p>If you see op/pack, op/pat, op/regexp, or ext/Storable tests failing
in a Linux/alpha or *BSD/Alpha, it's probably time to upgrade your gcc.
gccs prior to 2.95.3 are definitely not good enough, and gcc 3.1 may
be even better.  (RedHat Linux/alpha with gcc 3.1 reported no problems,
as did Linux 2.4.18 with gcc 2.95.4.)  (In Tru64, it is preferable to
use the bundled C compiler.)</p>
<a name="AmigaOS"></a><h2>AmigaOS</h2>
<p>Perl 5.8.0 doesn't build in AmigaOS.  It broke at some point during
the ithreads work and we could not find Amiga experts to unbreak the
problems.  Perl 5.6.1 still works for AmigaOS (as does the 5.7.2
development release).</p>
<a name="BeOS"></a><h2>BeOS</h2>
<p>The following tests fail on 5.8.0 Perl in BeOS Personal 5.03:</p>
<pre class="verbatim"><ol><li> t/op/lfs............................FAILED at test 17</li><li> t/op/magic..........................FAILED at test 24</li><li> ext/Fcntl/t/syslfs..................FAILED at test 17</li><li> ext/File/Glob/t/basic...............FAILED at test 3</li><li> ext/POSIX/t/sigaction...............FAILED at test 13</li><li> ext/POSIX/t/waitpid.................FAILED at test 1</li></ol></pre><p>(<b>Note:</b> more information was available in <i>README.beos</i> until support for
BeOS was removed in Perl v5.18.0)</p>
<a name="Cygwin-%22unable-to-remap%22"></a><h2>Cygwin "unable to remap"</h2>
<p>For example when building the Tk extension for Cygwin,
you may get an error message saying "unable to remap".
This is known problem with Cygwin, and a workaround is
detailed in here: <a href="http://sources.redhat.com/ml/cygwin/2001-12/msg00894.html">http://sources.redhat.com/ml/cygwin/2001-12/msg00894.html</a></p>
<a name="Cygwin-ndbm-tests-fail-on-FAT"></a><h2>Cygwin ndbm tests fail on FAT</h2>
<p>One can build but not install (or test the build of) the NDBM_File
on FAT filesystems.  Installation (or build) on NTFS works fine.
If one attempts the test on a FAT install (or build) the following
failures are expected:</p>
<pre class="verbatim"><ol><li> ../ext/NDBM_File/ndbm.t       13  3328    71   59  83.10%  1-2 4 16-71</li><li> ../ext/ODBM_File/odbm.t      255 65280    ??   ??       %  ??</li><li> ../lib/AnyDBM_File.t           2   512    12    2  16.67%  1 4</li><li> ../lib/Memoize/t/errors.t      0   139    11    5  45.45%  7-11</li><li> ../lib/Memoize/t/tie_ndbm.t   13  3328     4    4 100.00%  1-4</li><li> run/fresh_perl.t                          97    1   1.03%  91</li></ol></pre><p>NDBM_File fails and ODBM_File just coredumps.</p>
<p>If you intend to run only on FAT (or if using AnyDBM_File on FAT),
run Configure with the -Ui_ndbm and -Ui_dbm options to prevent
NDBM_File and ODBM_File being built.</p>
<a name="DJGPP-Failures"></a><h2>DJGPP Failures</h2>
<pre class="verbatim"><ol><li> t/op/stat............................FAILED at test 29</li><li> lib/File/Find/t/find.................FAILED at test 1</li><li> lib/File/Find/t/taint................FAILED at test 1</li><li> lib/h2xs.............................FAILED at test 15</li><li> lib/Pod/t/eol........................FAILED at test 1</li><li> lib/Test/Harness/t/strap-analyze.....FAILED at test 8</li><li> lib/Test/Harness/t/test-harness......FAILED at test 23</li><li> lib/Test/Simple/t/exit...............FAILED at test 1</li></ol></pre><p>The above failures are known as of 5.8.0 with native builds with long
filenames, but there are a few more if running under dosemu because of
limitations (and maybe bugs) of dosemu:</p>
<pre class="verbatim"><ol><li> t/comp/cpp...........................FAILED at test 3</li><li> t/op/inccode.........................(crash)</li></ol></pre><p>and a few lib/ExtUtils tests, and several hundred Encode/t/Aliases.t
failures that work fine with long filenames.  So you really might
prefer native builds and long filenames.</p>
<a name="FreeBSD-built-with-ithreads-coredumps-reading-large-directories"></a><h2>FreeBSD built with ithreads coredumps reading large directories</h2>
<p>This is a known bug in FreeBSD 4.5's readdir_r(), it has been fixed in
FreeBSD 4.6 (see <a href="perlfreebsd.html">perlfreebsd</a> (README.freebsd)).</p>
<a name="FreeBSD-Failing-locale-Test-117-For-ISO-8859-15-Locales"></a><h2>FreeBSD Failing locale Test 117 For ISO 8859-15 Locales</h2>
<p>The ISO 8859-15 locales may fail the locale test 117 in FreeBSD.
This is caused by the characters \xFF (y with diaeresis) and \xBE
(Y with diaeresis) not behaving correctly when being matched
case-insensitively.  Apparently this problem has been fixed in
the latest FreeBSD releases.
( <a href="http://www.freebsd.org/cgi/query-pr.cgi?pr=34308">http://www.freebsd.org/cgi/query-pr.cgi?pr=34308</a> )</p>
<a name="IRIX-fails-ext%2fList%2fUtil%2ft%2fshuffle.t-or-Digest%3a%3aMD5"></a><h2>IRIX fails ext/List/Util/t/shuffle.t or Digest::MD5</h2>
<p>IRIX with MIPSpro 7.3.1.2m or 7.3.1.3m compiler may fail the List::Util
test ext/List/Util/t/shuffle.t by dumping core.  This seems to be
a compiler error since if compiled with gcc no core dump ensues, and
no failures have been seen on the said test on any other platform.</p>
<p>Similarly, building the Digest::MD5 extension has been
known to fail with "*** Termination code 139 (bu21)".</p>
<p>The cure is to drop optimization level (Configure -Doptimize=-O2).</p>
<a name="HP-UX-lib%2fposix-Subtest-9-Fails-When-LP64-Configured"></a><h2>HP-UX lib/posix Subtest 9 Fails When LP64-Configured</h2>
<p>If perl is configured with -Duse64bitall, the successful result of the
subtest 10 of lib/posix may arrive before the successful result of the
subtest 9, which confuses the test harness so much that it thinks the
subtest 9 failed.</p>
<a name="Linux-with-glibc-2.2.5-fails-t%2fop%2fint-subtest-%236-with--Duse64bitint"></a><h2>Linux with glibc 2.2.5 fails t/op/int subtest #6 with -Duse64bitint</h2>
<p>This is a known bug in the glibc 2.2.5 with long long integers.
( <a href="http://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=65612">http://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=65612</a> )</p>
<a name="Linux-With-Sfio-Fails-op%2fmisc-Test-48"></a><h2>Linux With Sfio Fails op/misc Test 48</h2>
<p>No known fix.</p>
<a name="Mac-OS-X"></a><h2>Mac OS X</h2>
<p>Please remember to set your environment variable LC_ALL to "C"
(setenv LC_ALL C) before running "make test" to avoid a lot of
warnings about the broken locales of Mac OS X.</p>
<p>The following tests are known to fail in Mac OS X 10.1.5 because of
buggy (old) implementations of Berkeley DB included in Mac OS X:</p>
<pre class="verbatim"><ol><li> Failed Test                 Stat Wstat Total Fail  Failed  List of Failed</li><li> -------------------------------------------------------------------------</li><li> ../ext/DB_File/t/db-btree.t    0    11    ??   ??       %  ??</li><li> ../ext/DB_File/t/db-recno.t              149    3   2.01%  61 63 65</li></ol></pre><p>If you are building on a UFS partition, you will also probably see
t/op/stat.t subtest #9 fail.  This is caused by Darwin's UFS not
supporting inode change time.</p>
<p>Also the ext/POSIX/t/posix.t subtest #10 fails but it is skipped for
now because the failure is Apple's fault, not Perl's (blocked signals
are lost).</p>
<p>If you Configure with ithreads, ext/threads/t/libc.t will fail. Again,
this is not Perl's fault-- the libc of Mac OS X is not threadsafe
(in this particular test, the localtime() call is found to be
threadunsafe.)</p>
<a name="Mac-OS-X-dyld-undefined-symbols"></a><h2>Mac OS X dyld undefined symbols</h2>
<p>If after installing Perl 5.8.0 you are getting warnings about missing
symbols, for example</p>
<pre class="verbatim"><ol><li>    <span class="j">dyld:</span> <span class="w">perl</span> <span class="w">Undefined</span> <span class="w">symbols</span></li><li>    <span class="w">_perl_sv_2pv</span></li><li>    <span class="w">_perl_get_sv</span></li></ol></pre><p>you probably have an old pre-Perl-5.8.0 installation (or parts of one)
in /Library/Perl (the undefined symbols used to exist in pre-5.8.0 Perls).
It seems that for some reason "make install" doesn't always completely
overwrite the files in /Library/Perl.  You can move the old Perl
shared library out of the way like this:</p>
<pre class="verbatim"><ol><li>    <span class="w">cd</span> /<span class="w">Library</span>/<span class="w">Perl</span>/<span class="w">darwin</span>/<span class="w">CORE</span></li><li>    <span class="w">mv</span> <span class="w">libperl</span>.<span class="w">dylib</span> <span class="w">libperlold</span>.<span class="w">dylib</span></li></ol></pre><p>and then reissue "make install".  Note that the above of course is
extremely disruptive for anything using the /usr/local/bin/perl.
If that doesn't help, you may have to try removing all the .bundle
files from beneath /Library/Perl, and again "make install"-ing.</p>
<a name="OS%2f2-Test-Failures"></a><h2>OS/2 Test Failures</h2>
<p>The following tests are known to fail on OS/2 (for clarity
only the failures are shown, not the full error messages):</p>
<pre class="verbatim"><ol><li> ../lib/ExtUtils/t/Mkbootstrap.t    1   256    18    1   5.56%  8</li><li> ../lib/ExtUtils/t/Packlist.t       1   256    34    1   2.94%  17</li><li> ../lib/ExtUtils/t/basic.t          1   256    17    1   5.88%  14</li><li> lib/os2_process.t                  2   512   227    2   0.88%  174 209</li><li> lib/os2_process_kid.t                        227    2   0.88%  174 209</li><li> lib/rx_cmprt.t                   255 65280    18    3  16.67%  16-18</li></ol></pre><a name="op%2fsprintf-tests-91%2c-129%2c-and-130"></a><h2>op/sprintf tests 91, 129, and 130</h2>
<p>The op/sprintf tests 91, 129, and 130 are known to fail on some platforms.
Examples include any platform using sfio, and Compaq/Tandem's NonStop-UX.</p>
<p>Test 91 is known to fail on QNX6 (nto), because <code class="inline"><a class="l_k" href="functions/sprintf.html">sprintf</a> <span class="q">&#39;%e&#39;</span><span class="cm">,</span><span class="n">0</span></code>

incorrectly produces <code class="inline"><span class="n">0.000000e+0</span></code>
 instead of <code class="inline"><span class="n">0.000000e+00</span></code>
.</p>
<p>For tests 129 and 130, the failing platforms do not comply with
the ANSI C Standard: lines 19ff on page 134 of ANSI X3.159 1989, to
be exact.  (They produce something other than "1" and "-1" when
formatting 0.6 and -0.6 using the printf format "%.0f"; most often,
they produce "0" and "-0".)</p>
<a name="SCO"></a><h2>SCO</h2>
<p>The socketpair tests are known to be unhappy in SCO 3.2v5.0.4:</p>
<pre class="verbatim"><ol><li> <span class="w">ext</span>/<span class="w">Socket</span>/<a class="l_k" href="functions/socketpair.html">socketpair</a>.<span class="w">t</span>...............<span class="w">FAILED</span> <span class="w">tests</span> <span class="n">15</span>-<span class="n">45</span></li></ol></pre><a name="Solaris-2.5"></a><h2>Solaris 2.5</h2>
<p>In case you are still using Solaris 2.5 (aka SunOS 5.5), you may
experience failures (the test core dumping) in lib/locale.t.
The suggested cure is to upgrade your Solaris.</p>
<a name="Solaris-x86-Fails-Tests-With--Duse64bitint"></a><h2>Solaris x86 Fails Tests With -Duse64bitint</h2>
<p>The following tests are known to fail in Solaris x86 with Perl
configured to use 64 bit integers:</p>
<pre class="verbatim"><ol><li> ext/Data/Dumper/t/dumper.............FAILED at test 268</li><li> ext/Devel/Peek/Peek..................FAILED at test 7</li></ol></pre><a name="SUPER-UX-(NEC-SX)"></a><h2>SUPER-UX (NEC SX)</h2>
<p>The following tests are known to fail on SUPER-UX:</p>
<pre class="verbatim"><ol><li> op/64bitint...........................FAILED tests 29-30, 32-33, 35-36</li><li> op/arith..............................FAILED tests 128-130</li><li> op/pack...............................FAILED tests 25-5625</li><li> op/pow................................</li><li> op/taint..............................# msgsnd failed</li><li> ../ext/IO/lib/IO/t/io_poll............FAILED tests 3-4</li><li> ../ext/IPC/SysV/ipcsysv...............FAILED tests 2, 5-6</li><li> ../ext/IPC/SysV/t/msg.................FAILED tests 2, 4-6</li><li> ../ext/Socket/socketpair..............FAILED tests 12</li><li> ../lib/IPC/SysV.......................FAILED tests 2, 5-6</li><li> ../lib/warnings.......................FAILED tests 115-116, 118-119</li></ol></pre><p>The op/pack failure ("Cannot compress negative numbers at op/pack.t line 126")
is serious but as of yet unsolved.  It points at some problems with the
signedness handling of the C compiler, as do the 64bitint, arith, and pow
failures.  Most of the rest point at problems with SysV IPC.</p>
<a name="Term%3a%3aReadKey-not-working-on-Win32"></a><h2>Term::ReadKey not working on Win32</h2>
<p>Use Term::ReadKey 2.20 or later.</p>
<a name="UNICOS%2fmk"></a><h2>UNICOS/mk</h2>
<ul>
<li>
<p>During Configure, the test</p>
<pre class="verbatim"><ol><li>    <span class="w">Guessing</span> <span class="w">which</span> <span class="w">symbols</span> <span class="w">your</span> <span class="w">C</span> <span class="w">compiler</span> and <span class="w">preprocessor</span> <span class="w">define</span>...</li></ol></pre><p>will probably fail with error messages like</p>
<pre class="verbatim"><ol><li>    CC-20 cc: ERROR File = try.c, Line = 3</li><li>      The identifier "bad" is undefined.</li><li></li><li>      bad switch yylook 79bad switch yylook 79bad switch yylook 79bad switch yylook 79#ifdef A29K</li><li>      ^</li><li></li><li>    CC-65 cc: ERROR File = try.c, Line = 3</li><li>      A semicolon is expected at this point.</li></ol></pre><p>This is caused by a bug in the awk utility of UNICOS/mk.  You can ignore
the error, but it does cause a slight problem: you cannot fully
benefit from the h2ph utility (see <a href="h2ph.html">h2ph</a>) that can be used to
convert C headers to Perl libraries, mainly used to be able to access
from Perl the constants defined using C preprocessor, cpp.  Because of
the above error, parts of the converted headers will be invisible.
Luckily, these days the need for h2ph is rare.</p>
</li>
<li>
<p>If building Perl with interpreter threads (ithreads), the
getgrent(), getgrnam(), and getgrgid() functions cannot return the
list of the group members due to a bug in the multithreaded support of
UNICOS/mk.  What this means is that in list context the functions will
return only three values, not four.</p>
</li>
</ul>
<a name="UTS"></a><h2>UTS</h2>
<p>There are a few known test failures.  (<b>Note:</b> the relevant information was
available in <i>README.uts</i> until support for UTS was removed in Perl
v5.18.0)</p>
<a name="VOS-(Stratus)"></a><h2>VOS (Stratus)</h2>
<p>When Perl is built using the native build process on VOS Release
14.5.0 and GNU C++/GNU Tools 2.0.1, all attempted tests either
pass or result in TODO (ignored) failures.</p>
<a name="VMS"></a><h2>VMS</h2>
<p>There should be no reported test failures with a default configuration,
though there are a number of tests marked TODO that point to areas
needing further debugging and/or porting work.</p>
<a name="Win32"></a><h2>Win32</h2>
<p>In multi-CPU boxes, there are some problems with the I/O buffering:
some output may appear twice.</p>
<a name="XML%3a%3aParser-not-working"></a><h2>XML::Parser not working</h2>
<p>Use XML::Parser 2.31 or later.</p>
<a name="z%2fOS-(OS%2f390)"></a><h2>z/OS (OS/390)</h2>
<p>z/OS has rather many test failures but the situation is actually much
better than it was in 5.6.0; it's just that so many new modules and
tests have been added.</p>
<pre class="verbatim"><ol><li> Failed Test                   Stat Wstat Total Fail  Failed  List of Failed</li><li> ---------------------------------------------------------------------------</li><li> ../ext/Data/Dumper/t/dumper.t              357    8   2.24%  311 314 325 327</li><li>                                                              331 333 337 339</li><li> ../ext/IO/lib/IO/t/io_unix.t                 5    4  80.00%  2-5</li><li> ../ext/Storable/t/downgrade.t   12  3072   169   12   7.10%  14-15 46-47 78-79</li><li>                                                              110-111 150 161</li><li> ../lib/ExtUtils/t/Constant.t   121 30976    48   48 100.00%  1-48</li><li> ../lib/ExtUtils/t/Embed.t                    9    9 100.00%  1-9</li><li> op/pat.t                                   922    7   0.76%  665 776 785 832-</li><li>                                                              834 845</li><li> op/sprintf.t                               224    3   1.34%  98 100 136</li><li> op/tr.t                                     97    5   5.15%  63 71-74</li><li> uni/fold.t                                 780    6   0.77%  61 169 196 661</li><li>                                                              710-711</li></ol></pre><p>The failures in dumper.t and downgrade.t are problems in the tests,
those in io_unix and sprintf are problems in the USS (UDP sockets and
printf formats).  The pat, tr, and fold failures are genuine Perl
problems caused by EBCDIC (and in the pat and fold cases, combining
that with Unicode).  The Constant and Embed are probably problems in
the tests (since they test Perl's ability to build extensions, and
that seems to be working reasonably well.)</p>
<a name="Unicode-Support-on-EBCDIC-Still-Spotty"></a><h2>Unicode Support on EBCDIC Still Spotty</h2>
<p>Though mostly working, Unicode support still has problem spots on
EBCDIC platforms.  One such known spot are the <code class="inline">\<span class="w">p</span><span class="s">{</span><span class="s">}</span></code>
 and <code class="inline">\<span class="w">P</span><span class="s">{</span><span class="s">}</span></code>

regular expression constructs for code points less than 256: the
<code class="inline"><span class="w">pP</span></code>
 are testing for Unicode code points, not knowing about EBCDIC.</p>
<a name="Seen-In-Perl-5.7-But-Gone-Now"></a><h2>Seen In Perl 5.7 But Gone Now</h2>
<p><code class="inline"><span class="w">Time::Piece</span></code>
 (previously known as <code class="inline"><span class="w">Time::Object</span></code>
) was removed
because it was felt that it didn't have enough value in it to be a
core module.  It is still a useful module, though, and is available
from the CPAN.</p>
<p>Perl 5.8 unfortunately does not build anymore on AmigaOS; this broke
accidentally at some point.  Since there are not that many Amiga
developers available, we could not get this fixed and tested in time
for 5.8.0.  Perl 5.6.1 still works for AmigaOS (as does the 5.7.2
development release).</p>
<p>The <code class="inline"><span class="w">PerlIO::Scalar</span></code>
 and <code class="inline"><span class="w">PerlIO::Via</span></code>
 (capitalised) were renamed as
<code class="inline"><span class="w">PerlIO::scalar</span></code>
 and <code class="inline"><span class="w">PerlIO::via</span></code>
 (all lowercase) just before 5.8.0.
The main rationale was to have all core PerlIO layers to have all
lowercase names.  The "plugins" are named as usual, for example
<code class="inline"><span class="w">PerlIO::via::QuotedPrint</span></code>
.</p>
<p>The <code class="inline"><span class="w">threads::shared::queue</span></code>
 and <code class="inline"><span class="w">threads::shared::semaphore</span></code>
 were
renamed as <code class="inline"><span class="w">Thread::Queue</span></code>
 and <code class="inline"><span class="w">Thread::Semaphore</span></code>
 just before 5.8.0.
The main rationale was to have thread modules to obey normal naming,
<code class="inline"><span class="w">Thread::</span></code>
 (the <code class="inline"><span class="w">threads</span></code>
 and <code class="inline"><span class="w">threads::shared</span></code>
 themselves are
more pragma-like, they affect compile-time, so they stay lowercase).</p>
<a name="Reporting-Bugs"></a><h1>Reporting Bugs</h1>
<p>If you find what you think is a bug, you might check the articles
recently posted to the comp.lang.perl.misc newsgroup and the perl
bug database at <a href="http://bugs.perl.org/">http://bugs.perl.org/</a> .  There may also be
information at <a href="http://www.perl.com/">http://www.perl.com/</a> , the Perl Home Page.</p>
<p>If you believe you have an unreported bug, please run the <b>perlbug</b>
program included with your release.  Be sure to trim your bug down
to a tiny but sufficient test case.  Your bug report, along with the
output of <code class="inline"><span class="w">perl</span> -<span class="w">V</span></code>
, will be sent off to perlbug@perl.org to be
analysed by the Perl porting team.</p>
<a name="SEE-ALSO"></a><h1>SEE ALSO</h1>
<p>The <i>Changes</i> file for exhaustive details on what changed.</p>
<p>The <i>INSTALL</i> file for how to build Perl.</p>
<p>The <i>README</i> file for general stuff.</p>
<p>The <i>Artistic</i> and <i>Copying</i> files for copyright information.</p>
<a name="HISTORY"></a><h1>HISTORY</h1>
<p>Written by Jarkko Hietaniemi &lt;<i>jhi@iki.fi</i>&gt;.</p>




  <div id="page_index" class="hud_container">
    <div id="page_index_header" class="hud_header">
      <div id="page_index_close" class="hud_close"><a href="#" onClick="pageIndex.hide();return false;"></a></div>
      <div id="page_index_title" class="hud_title"><span class="hud_span_top">Page index</span></div>
      <div id="page_index_topright" class="hud_topright"></div>
    </div>
    <div id="page_index_content" class="hud_content">
      <ul><li><a href="#NAME">NAME</a><li><a href="#DESCRIPTION">DESCRIPTION</a><li><a href="#Highlights-In-5.8.0">Highlights In 5.8.0</a><li><a href="#Incompatible-Changes">Incompatible Changes</a><ul><li><a href="#Binary-Incompatibility">Binary Incompatibility</a><li><a href="#64-bit-platforms-and-malloc">64-bit platforms and malloc</a><li><a href="#AIX-Dynaloading">AIX Dynaloading</a><li><a href="#Attributes-for-my-variables-now-handled-at-run-time">Attributes for my variables now handled at run-time</a><li><a href="#Socket-Extension-Dynamic-in-VMS">Socket Extension Dynamic in VMS</a><li><a href="#IEEE-format-Floating-Point-Default-on-OpenVMS-Alpha">IEEE-format Floating Point Default on OpenVMS Alpha</a><li><a href="#New-Unicode-Semantics-(no-more-use-utf8%2c-almost)">New Unicode Semantics (no more use utf8, almost)</a><li><a href="#New-Unicode-Properties">New Unicode Properties</a><li><a href="#REF(...)-Instead-Of-SCALAR(...)">REF(...) Instead Of SCALAR(...)</a><li><a href="#pack%2funpack-D%2fF-recycled">pack/unpack D/F recycled</a><li><a href="#glob()-now-returns-filenames-in-alphabetical-order">glob() now returns filenames in alphabetical order</a><li><a href="#Deprecations">Deprecations</a></ul><li><a href="#Core-Enhancements">Core Enhancements</a><ul><li><a href="#Unicode-Overhaul">Unicode Overhaul</a><li><a href="#PerlIO-is-Now-The-Default">PerlIO is Now The Default</a><li><a href="#ithreads">ithreads</a><li><a href="#Restricted-Hashes">Restricted Hashes</a><li><a href="#Safe-Signals">Safe Signals</a><li><a href="#Understanding-of-Numbers">Understanding of Numbers</a><li><a href="#Arrays-now-always-interpolate-into-double-quoted-strings-%5b561%5d">Arrays now always interpolate into double-quoted strings [561]</a><li><a href="#Miscellaneous-Changes">Miscellaneous Changes</a></ul><li><a href="#Modules-and-Pragmata">Modules and Pragmata</a><ul><li><a href="#New-Modules-and-Pragmata">New Modules and Pragmata</a><li><a href="#Updated-And-Improved-Modules-and-Pragmata">Updated And Improved Modules and Pragmata</a></ul><li><a href="#Utility-Changes">Utility Changes</a><li><a href="#New-Documentation">New Documentation</a><li><a href="#Performance-Enhancements">Performance Enhancements</a><li><a href="#Installation-and-Configuration-Improvements">Installation and Configuration Improvements</a><ul><li><a href="#Generic-Improvements">Generic Improvements</a><li><a href="#New-Or-Improved-Platforms">New Or Improved Platforms</a></ul><li><a href="#Selected-Bug-Fixes">Selected Bug Fixes</a><ul><li><a href="#Platform-Specific-Changes-and-Fixes">Platform Specific Changes and Fixes</a></ul><li><a href="#New-or-Changed-Diagnostics">New or Changed Diagnostics</a><li><a href="#Changed-Internals">Changed Internals</a><li><a href="#Security-Vulnerability-Closed-%5b561%5d">Security Vulnerability Closed [561]</a><li><a href="#New-Tests">New Tests</a><li><a href="#Known-Problems">Known Problems</a><ul><li><a href="#The-Compiler-Suite-Is-Still-Very-Experimental">The Compiler Suite Is Still Very Experimental</a><li><a href="#Localising-Tied-Arrays-and-Hashes-Is-Broken">Localising Tied Arrays and Hashes Is Broken</a><li><a href="#Building-Extensions-Can-Fail-Because-Of-Largefiles">Building Extensions Can Fail Because Of Largefiles</a><li><a href="#Modifying-%24_-Inside-for(..)">Modifying $_ Inside for(..)</a><li><a href="#mod_perl-1.26-Doesn't-Build-With-Threaded-Perl">mod_perl 1.26 Doesn't Build With Threaded Perl</a><li><a href="#lib%2fftmp-security-tests-warn-'system-possibly-insecure'">lib/ftmp-security tests warn 'system possibly insecure'</a><li><a href="#libwww-perl-(LWP)-fails-base%2fdate-%2351">libwww-perl (LWP) fails base/date #51</a><li><a href="#PDL-failing-some-tests">PDL failing some tests</a><li><a href="#Perl_get_sv">Perl_get_sv</a><li><a href="#Self-tying-Problems">Self-tying Problems</a><li><a href="#ext%2fthreads%2ft%2flibc">ext/threads/t/libc</a><li><a href="#Failure-of-Thread-(5.005-style)-tests">Failure of Thread (5.005-style) tests</a><li><a href="#Timing-problems">Timing problems</a><li><a href="#Tied%2fMagical-Array%2fHash-Elements-Do-Not-Autovivify">Tied/Magical Array/Hash Elements Do Not Autovivify</a><li><a href="#Unicode-in-package%2fclass-and-subroutine-names-does-not-work">Unicode in package/class and subroutine names does not work</a></ul><li><a href="#Platform-Specific-Problems">Platform Specific Problems</a><ul><li><a href="#AIX">AIX</a><li><a href="#Alpha-systems-with-old-gccs-fail-several-tests">Alpha systems with old gccs fail several tests</a><li><a href="#AmigaOS">AmigaOS</a><li><a href="#BeOS">BeOS</a><li><a href="#Cygwin-%22unable-to-remap%22">Cygwin "unable to remap"</a><li><a href="#Cygwin-ndbm-tests-fail-on-FAT">Cygwin ndbm tests fail on FAT</a><li><a href="#DJGPP-Failures">DJGPP Failures</a><li><a href="#FreeBSD-built-with-ithreads-coredumps-reading-large-directories">FreeBSD built with ithreads coredumps reading large directories</a><li><a href="#FreeBSD-Failing-locale-Test-117-For-ISO-8859-15-Locales">FreeBSD Failing locale Test 117 For ISO 8859-15 Locales</a><li><a href="#IRIX-fails-ext%2fList%2fUtil%2ft%2fshuffle.t-or-Digest%3a%3aMD5">IRIX fails ext/List/Util/t/shuffle.t or Digest::MD5</a><li><a href="#HP-UX-lib%2fposix-Subtest-9-Fails-When-LP64-Configured">HP-UX lib/posix Subtest 9 Fails When LP64-Configured</a><li><a href="#Linux-with-glibc-2.2.5-fails-t%2fop%2fint-subtest-%236-with--Duse64bitint">Linux with glibc 2.2.5 fails t/op/int subtest #6 with -Duse64bitint</a><li><a href="#Linux-With-Sfio-Fails-op%2fmisc-Test-48">Linux With Sfio Fails op/misc Test 48</a><li><a href="#Mac-OS-X">Mac OS X</a><li><a href="#Mac-OS-X-dyld-undefined-symbols">Mac OS X dyld undefined symbols</a><li><a href="#OS%2f2-Test-Failures">OS/2 Test Failures</a><li><a href="#op%2fsprintf-tests-91%2c-129%2c-and-130">op/sprintf tests 91, 129, and 130</a><li><a href="#SCO">SCO</a><li><a href="#Solaris-2.5">Solaris 2.5</a><li><a href="#Solaris-x86-Fails-Tests-With--Duse64bitint">Solaris x86 Fails Tests With -Duse64bitint</a><li><a href="#SUPER-UX-(NEC-SX)">SUPER-UX (NEC SX)</a><li><a href="#Term%3a%3aReadKey-not-working-on-Win32">Term::ReadKey not working on Win32</a><li><a href="#UNICOS%2fmk">UNICOS/mk</a><li><a href="#UTS">UTS</a><li><a href="#VOS-(Stratus)">VOS (Stratus)</a><li><a href="#VMS">VMS</a><li><a href="#Win32">Win32</a><li><a href="#XML%3a%3aParser-not-working">XML::Parser not working</a><li><a href="#z%2fOS-(OS%2f390)">z/OS (OS/390)</a><li><a href="#Unicode-Support-on-EBCDIC-Still-Spotty">Unicode Support on EBCDIC Still Spotty</a><li><a href="#Seen-In-Perl-5.7-But-Gone-Now">Seen In Perl 5.7 But Gone Now</a></ul><li><a href="#Reporting-Bugs">Reporting Bugs</a><li><a href="#SEE-ALSO">SEE ALSO</a><li><a href="#HISTORY">HISTORY</a></ul>
    </div>
    <div id="page_index_footer" class="hud_footer">
      <div id="page_index_bottomleft" class="hud_bottomleft"></div>
      <div id="page_index_bottom" class="hud_bottom"><span class="hud_span_bottom"></span></div>
      <div id="page_index_resize" class="hud_resize"></div>
    </div>
  </div>


	    &nbsp;
          </div>
          <div id="content_footer">
          </div>
        </div>
        <div class="clear"></div>
      </div>
      
    <div id="footer">
      <div id="footer_content">
        <div id="footer_strapline">
          perldoc.perl.org - Official documentation for the Perl programming language
        </div>
        <div id="footer_links">
          <div id="address">
            <p class="name">Contact details</p>
            <p class="address">
	      Site maintained by <a href="mailto:jj@jonallen.info">Jon Allen (JJ)</a><br>
	    </p>
            <p class="contact">
              Documentation maintained by the <a href="http://lists.cpan.org/showlist.cgi?name=perl5-porters">Perl 5 Porters</a>
            </p>
          </div>
          <ul class="f1">
            <li>Manual
              <ul class="f2">
                <li><a href="index-overview.html">Overview</a>
                <li><a href="index-tutorials.html">Tutorials</a>
                <li><a href="index-faq.html">FAQs</a>
                <li><a href="index-history.html">Changes</a>
              </ul>
            <li>Reference
              <ul class="f2">
                <li><a href="index-language.html">Language</a>
                <li><a href="index-functions.html">Functions</a>
                <li><a href="perlop.html">Operators</a>
                <li><a href="perlvar.html">Variables</a>
              </ul>
            <li>Modules
              <ul class="f2">
                <li><a href="index-modules-A.html">Modules</a>
                <li><a href="index-pragmas.html">Pragmas</a>
                <li><a href="index-utilities.html">Utilities</a>
              </ul>
            <li>Misc
              <ul class="f2">
                <li><a href="index-licence.html">License</a>
                <li><a href="index-internals.html">Internals</a>
                <li><a href="index-platforms.html">Platforms</a>
              </ul>          </ul>
          <div class="clear"></div>
        </div>
      </div>
      <div id="footer_end">
      </div>
    </div>
      
    </div>
      <script language="JavaScript" type="text/javascript" src="static/exploreperl.js"></script>
      <script language="JavaScript" src="static/combined-20100403.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
  perldoc.setPath(0);
  perldoc.pageName    = 'perl58delta';
  perldoc.pageAddress = 'perl58delta.html';
  perldoc.contentPage = 1;
  explorePerl.render();
  explorePerl.addEvents('explore_anchor');
</script>
    
  </body>
</html>
