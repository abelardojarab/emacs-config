<html><!-- This is the GNU Emacs Lisp Reference Manual
corresponding to Emacs version 25.1.

Copyright (C) 1990-1996, 1998-2016 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with the
Invariant Sections being "GNU General Public License," with the
Front-Cover Texts being "A GNU Manual," and with the Back-Cover
Texts as in (a) below.  A copy of the license is included in the
section entitled "GNU Free Documentation License."

(a) The FSF's Back-Cover Text is: "You have the freedom to copy and
modify this GNU manual.  Buying copies from the FSF supports it in
developing GNU and promoting software freedom." --><!-- Created by GNU Texinfo 6.1, http://www.gnu.org/software/texinfo/ --><head>
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<link rev="made" href="mailto:bug-gnu-emacs@gnu.org">
<link rel="icon" type="image/png" href="/graphics/gnu-head-mini.png">
<meta name="ICBM" content="42.256233,-71.006581">
<meta name="DC.title" content="gnu.org">

<title>Replacing Match</title>

<style type="text/css">
@import url('/software/emacs/manual.css');
</style>
</head>

<body lang="en">
<a name="Replacing-Match"></a>
<div class="header" style="background-color:#DDDDFF">
<p>
Next: <a href="Simple-Match-Data.html#Simple-Match-Data" accesskey="n" rel="next">Simple Match Data</a>, Up: <a href="Match-Data.html#Match-Data" accesskey="u" rel="up">Match Data</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html#Index" title="Index" rel="index">Index</a>]</p>
</div>

<a name="Replacing-the-Text-that-Matched"></a>
<h4 class="subsection">33.6.1 Replacing the Text that Matched</h4>
<a name="index-replace-matched-text"></a>

<p>This function replaces all or part of the text matched by the last
search.  It works by means of the match data.
</p>
<a name="index-case-in-replacements"></a>
<dl>
<dt><a class="dashAnchor" name="//apple_ref/func/replace%2Dmatch"></a><a name="index-replace_002dmatch"></a>Function: <strong>replace-match</strong> <em>replacement &amp;optional fixedcase literal string subexp</em></dt>
<dd><p>This function performs a replacement operation on a buffer or string.
</p>
<p>If you did the last search in a buffer, you should omit the
<var>string</var> argument or specify <code>nil</code> for it, and make sure that
the current buffer is the one in which you performed the last search.
Then this function edits the buffer, replacing the matched text with
<var>replacement</var>.  It leaves point at the end of the replacement
text.
</p>
<p>If you performed the last search on a string, pass the same string as
<var>string</var>.  Then this function returns a new string, in which the
matched text is replaced by <var>replacement</var>.
</p>
<p>If <var>fixedcase</var> is non-<code>nil</code>, then <code>replace-match</code> uses
the replacement text without case conversion; otherwise, it converts
the replacement text depending upon the capitalization of the text to
be replaced.  If the original text is all upper case, this converts
the replacement text to upper case.  If all words of the original text
are capitalized, this capitalizes all the words of the replacement
text.  If all the words are one-letter and they are all upper case,
they are treated as capitalized words rather than all-upper-case
words.
</p>
<p>If <var>literal</var> is non-<code>nil</code>, then <var>replacement</var> is inserted
exactly as it is, the only alterations being case changes as needed.
If it is <code>nil</code> (the default), then the character ‘<samp>\</samp>’ is treated
specially.  If a ‘<samp>\</samp>’ appears in <var>replacement</var>, then it must be
part of one of the following sequences:
</p>
<dl compact="compact">
<dt>‘<samp>\&amp;</samp>’</dt>
<dd><a name="index-_0026-in-replacement"></a>
<p>This stands for the entire text being replaced.
</p>
</dd>
<dt>‘<samp>\<var>n</var></samp>’, where <var>n</var> is a digit</dt>
<dd><a name="index-_005cn-in-replacement"></a>
<p>This stands for the text that matched the <var>n</var>th subexpression in
the original regexp.  Subexpressions are those expressions grouped
inside ‘<samp>\(…\)</samp>’.  If the <var>n</var>th subexpression never
matched, an empty string is substituted.
</p>
</dd>
<dt>‘<samp>\\</samp>’</dt>
<dd><a name="index-_005c-in-replacement"></a>
<p>This stands for a single ‘<samp>\</samp>’ in the replacement text.
</p>
</dd>
<dt>‘<samp>\?</samp>’</dt>
<dd><p>This stands for itself (for compatibility with <code>replace-regexp</code>
and related commands; see <a href="http://www.gnu.org/software/emacs/manual/html_node/emacs/Regexp-Replace.html#Regexp-Replace">Regexp Replace</a> in <cite>The GNU
Emacs Manual</cite>).
</p></dd>
</dl>

<p>Any other character following ‘<samp>\</samp>’ signals an error.
</p>
<p>The substitutions performed by ‘<samp>\&amp;</samp>’ and ‘<samp>\<var>n</var></samp>’ occur
after case conversion, if any.  Therefore, the strings they substitute
are never case-converted.
</p>
<p>If <var>subexp</var> is non-<code>nil</code>, that says to replace just
subexpression number <var>subexp</var> of the regexp that was matched, not
the entire match.  For example, after matching ‘<samp>foo \(ba*r\)</samp>’,
calling <code>replace-match</code> with 1 as <var>subexp</var> means to replace
just the text that matched ‘<samp>\(ba*r\)</samp>’.
</p></dd></dl>

<dl>
<dt><a class="dashAnchor" name="//apple_ref/func/match%2Dsubstitute%2Dreplacement"></a><a name="index-match_002dsubstitute_002dreplacement"></a>Function: <strong>match-substitute-replacement</strong> <em>replacement &amp;optional fixedcase literal string subexp</em></dt>
<dd><p>This function returns the text that would be inserted into the buffer
by <code>replace-match</code>, but without modifying the buffer.  It is
useful if you want to present the user with actual replacement result,
with constructs like ‘<samp>\<var>n</var></samp>’ or ‘<samp>\&amp;</samp>’ substituted with
matched groups.  Arguments <var>replacement</var> and optional
<var>fixedcase</var>, <var>literal</var>, <var>string</var> and <var>subexp</var> have the
same meaning as for <code>replace-match</code>.
</p></dd></dl>


<div class="header" style="background-color:#DDDDFF">
<p>
Next: <a href="Simple-Match-Data.html#Simple-Match-Data" accesskey="n" rel="next">Simple Match Data</a>, Up: <a href="Match-Data.html#Match-Data" accesskey="u" rel="up">Match Data</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html#Index" title="Index" rel="index">Index</a>]</p>
</div>





</body></html>