<html><!-- This is the GNU Emacs Lisp Reference Manual
corresponding to Emacs version 25.1.

Copyright (C) 1990-1996, 1998-2016 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with the
Invariant Sections being "GNU General Public License," with the
Front-Cover Texts being "A GNU Manual," and with the Back-Cover
Texts as in (a) below.  A copy of the license is included in the
section entitled "GNU Free Documentation License."

(a) The FSF's Back-Cover Text is: "You have the freedom to copy and
modify this GNU manual.  Buying copies from the FSF supports it in
developing GNU and promoting software freedom." --><!-- Created by GNU Texinfo 6.1, http://www.gnu.org/software/texinfo/ --><head>
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<link rev="made" href="mailto:bug-gnu-emacs@gnu.org">
<link rel="icon" type="image/png" href="/graphics/gnu-head-mini.png">
<meta name="ICBM" content="42.256233,-71.006581">
<meta name="DC.title" content="gnu.org">

<title>Regexp Functions</title>

<style type="text/css">
@import url('/software/emacs/manual.css');
</style>
</head>

<body lang="en">
<a name="Regexp-Functions"></a>
<div class="header" style="background-color:#DDDDFF">
<p>
Previous: <a href="Regexp-Example.html#Regexp-Example" accesskey="p" rel="prev">Regexp Example</a>, Up: <a href="Regular-Expressions.html#Regular-Expressions" accesskey="u" rel="up">Regular Expressions</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html#Index" title="Index" rel="index">Index</a>]</p>
</div>

<a name="Regular-Expression-Functions"></a>
<h4 class="subsection">33.3.3 Regular Expression Functions</h4>

<p>These functions operate on regular expressions.
</p>
<a name="index-quote-special-characters-in-regexp"></a>
<dl>
<dt><a class="dashAnchor" name="//apple_ref/func/regexp%2Dquote"></a><a name="index-regexp_002dquote"></a>Function: <strong>regexp-quote</strong> <em>string</em></dt>
<dd><p>This function returns a regular expression whose only exact match is
<var>string</var>.  Using this regular expression in <code>looking-at</code> will
succeed only if the next characters in the buffer are <var>string</var>;
using it in a search function will succeed if the text being searched
contains <var>string</var>.  See <a href="Regexp-Search.html#Regexp-Search">Regexp Search</a>.
</p>
<p>This allows you to request an exact string match or search when calling
a function that wants a regular expression.
</p>
<div class="example">
<pre class="example">(regexp-quote "^The cat$")
     ⇒ "\\^The cat\\$"
</pre></div>

<p>One use of <code>regexp-quote</code> is to combine an exact string match with
context described as a regular expression.  For example, this searches
for the string that is the value of <var>string</var>, surrounded by
whitespace:
</p>
<div class="example">
<pre class="example">(re-search-forward
 (concat "\\s-" (regexp-quote string) "\\s-"))
</pre></div>
</dd></dl>

<a name="index-optimize-regexp"></a>
<dl>
<dt><a class="dashAnchor" name="//apple_ref/func/regexp%2Dopt"></a><a name="index-regexp_002dopt"></a>Function: <strong>regexp-opt</strong> <em>strings &amp;optional paren</em></dt>
<dd><p>This function returns an efficient regular expression that will match
any of the strings in the list <var>strings</var>.  This is useful when you
need to make matching or searching as fast as possible—for example,
for Font Lock mode<a name="DOCF17" href="#FOOT17"><sup>17</sup></a>.
</p>
<p>The optional argument <var>paren</var> can be any of the following:
</p>
<p>a string
    the resulting regexp is preceded by <var>paren</var> and followed by
    ‘<samp>\)</samp>’, e.g. use ‘<samp>"\\(?1:"</samp>’ to produce an explicitly
    numbered group.
</p>
<p><code>words</code>
    the resulting regexp is surrounded by ‘<samp>\&lt;\(</samp>’ and ‘<samp>\)\&gt;</samp>’.
</p>
<p><code>symbols</code>
    the resulting regexp is surrounded by ‘<samp>\_&lt;\(</samp>’ and ‘<samp>\)\_&gt;</samp>’
    (this is often appropriate when maching programming-language
    keywords and the like).
</p>
<p>non-<code>nil</code>
    the resulting regexp is surrounded by ‘<samp>\(</samp>’ and ‘<samp>\)</samp>’.
</p>
<p><code>nil</code>
    the resulting regexp is surrounded by ‘<samp>\(?:</samp>’ and ‘<samp>\)</samp>’,
    if it is necessary to ensure that a postfix operator appended to
    it will apply to the whole expression.
</p>
<p>The resulting regexp of <code>regexp-opt</code> is equivalent to but usually
more efficient than that of a simplified version:
</p>
<div class="example">
<pre class="example">(defun simplified-regexp-opt (strings &amp;optional paren)
 (let ((parens (cond ((stringp paren)       (cons paren "\\)"))
                     ((eq paren 'words)    '("\\&lt;\\(" . "\\)\\&gt;"))
                     ((eq paren 'symbols) '("\\_&lt;\\(" . "\\)\\_&gt;"))
                     ((null paren)          '("\\(?:" . "\\)"))
                     (t                       '("\\(" . "\\)")))))
   (concat (car paren)
           (mapconcat 'regexp-quote strings "\\|")
           (cdr paren))))
</pre></div>
</dd></dl>

<dl>
<dt><a class="dashAnchor" name="//apple_ref/func/regexp%2Dopt%2Ddepth"></a><a name="index-regexp_002dopt_002ddepth"></a>Function: <strong>regexp-opt-depth</strong> <em>regexp</em></dt>
<dd><p>This function returns the total number of grouping constructs
(parenthesized expressions) in <var>regexp</var>.  This does not include
shy groups (see <a href="Regexp-Backslash.html#Regexp-Backslash">Regexp Backslash</a>).
</p></dd></dl>

<dl>
<dt><a class="dashAnchor" name="//apple_ref/func/regexp%2Dopt%2Dcharset"></a><a name="index-regexp_002dopt_002dcharset"></a>Function: <strong>regexp-opt-charset</strong> <em>chars</em></dt>
<dd><p>This function returns a regular expression matching a character in the
list of characters <var>chars</var>.
</p>
<div class="example">
<pre class="example">(regexp-opt-charset '(?a ?b ?c ?d ?e))
     ⇒ "[a-e]"
</pre></div>
</dd></dl>


<div class="footnote">
<hr>
<h4 class="footnotes-heading">Footnotes</h4>

<h3><a name="FOOT17" href="#DOCF17">(17)</a></h3>
<p>Note that <code>regexp-opt</code> does not
guarantee that its result is absolutely the most efficient form
possible.  A hand-tuned regular expression can sometimes be slightly
more efficient, but is almost never worth the effort.</p>
</div>

<div class="header" style="background-color:#DDDDFF">
<p>
Previous: <a href="Regexp-Example.html#Regexp-Example" accesskey="p" rel="prev">Regexp Example</a>, Up: <a href="Regular-Expressions.html#Regular-Expressions" accesskey="u" rel="up">Regular Expressions</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html#Index" title="Index" rel="index">Index</a>]</p>
</div>





</body></html>