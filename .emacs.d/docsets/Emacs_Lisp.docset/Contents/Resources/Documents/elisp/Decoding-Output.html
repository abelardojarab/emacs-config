<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- This is the GNU Emacs Lisp Reference Manual
corresponding to Emacs version 25.1.

Copyright (C) 1990-1996, 1998-2016 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with the
Invariant Sections being "GNU General Public License," with the
Front-Cover Texts being "A GNU Manual," and with the Back-Cover
Texts as in (a) below.  A copy of the license is included in the
section entitled "GNU Free Documentation License."

(a) The FSF's Back-Cover Text is: "You have the freedom to copy and
modify this GNU manual.  Buying copies from the FSF supports it in
developing GNU and promoting software freedom." -->
<!-- Created by GNU Texinfo 6.1, http://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<link rev="made" href="mailto:bug-gnu-emacs@gnu.org">
<link rel="icon" type="image/png" href="/graphics/gnu-head-mini.png">
<meta name="ICBM" content="42.256233,-71.006581">
<meta name="DC.title" content="gnu.org">

<title>Decoding Output</title>

<style type="text/css">
@import url('/software/emacs/manual.css');
</style>
</head>

<body lang="en">
<a name="Decoding-Output"></a>
<div class="header" style="background-color:#DDDDFF">
<p>
Next: <a href="Accepting-Output.html#Accepting-Output" accesskey="n" rel="next">Accepting Output</a>, Previous: <a href="Filter-Functions.html#Filter-Functions" accesskey="p" rel="prev">Filter Functions</a>, Up: <a href="Output-from-Processes.html#Output-from-Processes" accesskey="u" rel="up">Output from Processes</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html#Index" title="Index" rel="index">Index</a>]</p>
</div>

<a name="Decoding-Process-Output"></a>
<h4 class="subsection">36.9.3 Decoding Process Output</h4>
<a name="index-decode-process-output"></a>

<p>When Emacs writes process output directly into a multibyte buffer,
it decodes the output according to the process output coding system.
If the coding system is <code>raw-text</code> or <code>no-conversion</code>, Emacs
converts the unibyte output to multibyte using
<code>string-to-multibyte</code>, and inserts the resulting multibyte text.
</p>
<p>You can use <code>set-process-coding-system</code> to specify which coding
system to use (see <a href="Process-Information.html#Process-Information">Process Information</a>).  Otherwise, the coding
system comes from <code>coding-system-for-read</code>, if that is
non-<code>nil</code>; or else from the defaulting mechanism (see <a href="Default-Coding-Systems.html#Default-Coding-Systems">Default Coding Systems</a>).  If the text output by a process contains null
bytes, Emacs by default uses <code>no-conversion</code> for it; see
<a href="Lisp-and-Coding-Systems.html#Lisp-and-Coding-Systems">inhibit-null-byte-detection</a>, for how to
control this behavior.
</p>
<p><strong>Warning:</strong> Coding systems such as <code>undecided</code>, which
determine the coding system from the data, do not work entirely
reliably with asynchronous subprocess output.  This is because Emacs
has to process asynchronous subprocess output in batches, as it
arrives.  Emacs must try to detect the proper coding system from one
batch at a time, and this does not always work.  Therefore, if at all
possible, specify a coding system that determines both the character
code conversion and the end of line conversion&mdash;that is, one like
<code>latin-1-unix</code>, rather than <code>undecided</code> or <code>latin-1</code>.
</p>
<a name="index-filter-multibyte-flag_002c-of-process"></a>
<a name="index-process-filter-multibyte-flag"></a>
<p>When Emacs calls a process filter function, it provides the process
output as a multibyte string or as a unibyte string according to the
process&rsquo;s filter coding system.  Emacs
decodes the output according to the process output coding system,
which usually produces a multibyte string, except for coding systems
such as <code>binary</code> and <code>raw-text</code>.
</p>

<div class="header" style="background-color:#DDDDFF">
<p>
Next: <a href="Accepting-Output.html#Accepting-Output" accesskey="n" rel="next">Accepting Output</a>, Previous: <a href="Filter-Functions.html#Filter-Functions" accesskey="p" rel="prev">Filter Functions</a>, Up: <a href="Output-from-Processes.html#Output-from-Processes" accesskey="u" rel="up">Output from Processes</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html#Index" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
