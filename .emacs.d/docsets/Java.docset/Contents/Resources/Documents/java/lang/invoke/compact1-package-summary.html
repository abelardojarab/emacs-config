<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_60) on Tue Aug 04 12:27:16 PDT 2015 -->
<title>java.lang.invoke</title>
<meta name="date" content="2015-08-04">
<meta name="keywords" content="java.lang.invoke package">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="java.lang.invoke";
        }
    }
    catch(err) {
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li class="navBarCell1Rev">Package</li>
<li>Class</li>
<li><a href="package-use.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
<div class="aboutLanguage"><strong>Java&trade;&nbsp;Platform<br>Standard&nbsp;Ed.&nbsp;8</strong></div>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../java/lang/annotation/compact1-package-summary.html">Prev&nbsp;Package</a></li>
<li><a href="../../../java/lang/ref/compact1-package-summary.html">Next&nbsp;Package</a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?java/lang/invoke/compact1-package-summary.html" target="_top">Frames</a></li>
<li><a href="compact1-package-summary.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<div class="header">
<div class="subTitle">compact1</div>
<h1 title="Package" class="title">Package&nbsp;java.lang.invoke</h1>
<div class="docSummary">
<div class="block">The <code>java.lang.invoke</code> package contains dynamic language support provided directly by
 the Java core class libraries and virtual machine.</div>
</div>
<p>See:&nbsp;<a href="#package.description">Description</a></p>
</div>
<div class="contentContainer">
<ul class="blockList">
<li class="blockList">
<table class="typeSummary" border="0" cellpadding="3" cellspacing="0" summary="Interface Summary table, listing interfaces, and an explanation">
<caption><span>Interface Summary</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Interface</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tbody>
<tr class="altColor">
<td class="colFirst"><a href="../../../java/lang/invoke/MethodHandleInfo.html" title="interface in java.lang.invoke">MethodHandleInfo</a></td>
<td class="colLast">
<div class="block">A symbolic reference obtained by cracking a direct method handle
 into its consitutent symbolic parts.</div>
</td>
</tr>
</tbody>
</table>
</li>
<li class="blockList">
<table class="typeSummary" border="0" cellpadding="3" cellspacing="0" summary="Class Summary table, listing classes, and an explanation">
<caption><span>Class Summary</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Class</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tbody>
<tr class="altColor">
<td class="colFirst"><a href="../../../java/lang/invoke/CallSite.html" title="class in java.lang.invoke">CallSite</a></td>
<td class="colLast">
<div class="block">A <code>CallSite</code> is a holder for a variable <a href="../../../java/lang/invoke/MethodHandle.html" title="class in java.lang.invoke"><code>MethodHandle</code></a>,
 which is called its <code>target</code>.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../java/lang/invoke/ConstantCallSite.html" title="class in java.lang.invoke">ConstantCallSite</a></td>
<td class="colLast">
<div class="block">A <code>ConstantCallSite</code> is a <a href="../../../java/lang/invoke/CallSite.html" title="class in java.lang.invoke"><code>CallSite</code></a> whose target is permanent, and can never be changed.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../java/lang/invoke/LambdaMetafactory.html" title="class in java.lang.invoke">LambdaMetafactory</a></td>
<td class="colLast">
<div class="block">Methods to facilitate the creation of simple "function objects" that
 implement one or more interfaces by delegation to a provided <a href="../../../java/lang/invoke/MethodHandle.html" title="class in java.lang.invoke"><code>MethodHandle</code></a>,
 possibly after type adaptation and partial evaluation of arguments.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../java/lang/invoke/MethodHandle.html" title="class in java.lang.invoke">MethodHandle</a></td>
<td class="colLast">
<div class="block">A method handle is a typed, directly executable reference to an underlying method,
 constructor, field, or similar low-level operation, with optional
 transformations of arguments or return values.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../java/lang/invoke/MethodHandleProxies.html" title="class in java.lang.invoke">MethodHandleProxies</a></td>
<td class="colLast">
<div class="block">This class consists exclusively of static methods that help adapt
 method handles to other JVM types, such as interfaces.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../java/lang/invoke/MethodHandles.html" title="class in java.lang.invoke">MethodHandles</a></td>
<td class="colLast">
<div class="block">This class consists exclusively of static methods that operate on or return
 method handles.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../java/lang/invoke/MethodHandles.Lookup.html" title="class in java.lang.invoke">MethodHandles.Lookup</a></td>
<td class="colLast">
<div class="block">A <em>lookup object</em> is a factory for creating method handles,
 when the creation requires access checking.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../java/lang/invoke/MethodType.html" title="class in java.lang.invoke">MethodType</a></td>
<td class="colLast">
<div class="block">A method type represents the arguments and return type accepted and
 returned by a method handle, or the arguments and return type passed
 and expected  by a method handle caller.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../java/lang/invoke/MutableCallSite.html" title="class in java.lang.invoke">MutableCallSite</a></td>
<td class="colLast">
<div class="block">A <code>MutableCallSite</code> is a <a href="../../../java/lang/invoke/CallSite.html" title="class in java.lang.invoke"><code>CallSite</code></a> whose target variable
 behaves like an ordinary field.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../java/lang/invoke/SerializedLambda.html" title="class in java.lang.invoke">SerializedLambda</a></td>
<td class="colLast">
<div class="block">Serialized form of a lambda expression.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../java/lang/invoke/SwitchPoint.html" title="class in java.lang.invoke">SwitchPoint</a></td>
<td class="colLast">
<div class="block">
 A <code>SwitchPoint</code> is an object which can publish state transitions to other threads.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../java/lang/invoke/VolatileCallSite.html" title="class in java.lang.invoke">VolatileCallSite</a></td>
<td class="colLast">
<div class="block">A <code>VolatileCallSite</code> is a <a href="../../../java/lang/invoke/CallSite.html" title="class in java.lang.invoke"><code>CallSite</code></a> whose target acts like a volatile variable.</div>
</td>
</tr>
</tbody>
</table>
</li>
<li class="blockList">
<table class="typeSummary" border="0" cellpadding="3" cellspacing="0" summary="Exception Summary table, listing exceptions, and an explanation">
<caption><span>Exception Summary</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Exception</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tbody>
<tr class="altColor">
<td class="colFirst"><a href="../../../java/lang/invoke/LambdaConversionException.html" title="class in java.lang.invoke">LambdaConversionException</a></td>
<td class="colLast">
<div class="block">LambdaConversionException</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../java/lang/invoke/WrongMethodTypeException.html" title="class in java.lang.invoke">WrongMethodTypeException</a></td>
<td class="colLast">
<div class="block">Thrown to indicate that code has attempted to call a method handle
 via the wrong method type.</div>
</td>
</tr>
</tbody>
</table>
</li>
</ul>
<a name="package.description">
<!--   -->
</a>
<h2 title="Package java.lang.invoke Description">Package java.lang.invoke Description</h2>
<div class="block">The <code>java.lang.invoke</code> package contains dynamic language support provided directly by
 the Java core class libraries and virtual machine.

 <p>
 As described in the Java Virtual Machine Specification,
 certain types in this package have special relations to dynamic
 language support in the virtual machine:
 <ul>
 <li>The class <a href="../../../java/lang/invoke/MethodHandle.html" title="class in java.lang.invoke"><code>MethodHandle</code></a> contains
 <a href="../../../java/lang/invoke/MethodHandle.html#sigpoly">signature polymorphic methods</a>
 which can be linked regardless of their type descriptor.
 Normally, method linkage requires exact matching of type descriptors.
 </li>

 <li>The JVM bytecode format supports immediate constants of
 the classes <a href="../../../java/lang/invoke/MethodHandle.html" title="class in java.lang.invoke"><code>MethodHandle</code></a> and <a href="../../../java/lang/invoke/MethodType.html" title="class in java.lang.invoke"><code>MethodType</code></a>.
 </li>
 </ul>

 <h1><a name="../../../java/lang/invoke/jvm_mods"></a>Summary of relevant Java Virtual Machine changes</h1>
 The following low-level information summarizes relevant parts of the
 Java Virtual Machine specification.  For full details, please see the
 current version of that specification.

 Each occurrence of an <code>invokedynamic</code> instruction is called a <em>dynamic call site</em>.
 <h2><a name="../../../java/lang/invoke/indyinsn"></a><code>invokedynamic</code> instructions</h2>
 A dynamic call site is originally in an unlinked state.  In this state, there is
 no target method for the call site to invoke.
 <p>
 Before the JVM can execute a dynamic call site (an <code>invokedynamic</code> instruction),
 the call site must first be <em>linked</em>.
 Linking is accomplished by calling a <em>bootstrap method</em>
 which is given the static information content of the call site,
 and which must produce a <a href="../../../java/lang/invoke/MethodHandle.html" title="class in java.lang.invoke"><code>method handle</code></a>
 that gives the behavior of the call site.
 <p>
 Each <code>invokedynamic</code> instruction statically specifies its own
 bootstrap method as a constant pool reference.
 The constant pool reference also specifies the call site's name and type descriptor,
 just like <code>invokevirtual</code> and the other invoke instructions.
 <p>
 Linking starts with resolving the constant pool entry for the
 bootstrap method, and resolving a <a href="../../../java/lang/invoke/MethodType.html" title="class in java.lang.invoke"><code>MethodType</code></a> object for
 the type descriptor of the dynamic call site.
 This resolution process may trigger class loading.
 It may therefore throw an error if a class fails to load.
 This error becomes the abnormal termination of the dynamic
 call site execution.
 Linkage does not trigger class initialization.
 <p>
 The bootstrap method is invoked on at least three values:
 <ul>
 <li>a <code>MethodHandles.Lookup</code>, a lookup object on the <em>caller class</em> in which dynamic call site occurs </li>
 <li>a <code>String</code>, the method name mentioned in the call site </li>
 <li>a <code>MethodType</code>, the resolved type descriptor of the call </li>
 <li>optionally, between 1 and 251 additional static arguments taken from the constant pool </li>
 </ul>
 Invocation is as if by
 <a href="../../../java/lang/invoke/MethodHandle.html#invoke-java.lang.Object...-"><code>MethodHandle.invoke</code></a>.
 The returned result must be a <a href="../../../java/lang/invoke/CallSite.html" title="class in java.lang.invoke"><code>CallSite</code></a> (or a subclass).
 The type of the call site's target must be exactly equal to the type
 derived from the dynamic call site's type descriptor and passed to
 the bootstrap method.
 The call site then becomes permanently linked to the dynamic call site.
 <p>
 As documented in the JVM specification, all failures arising from
 the linkage of a dynamic call site are reported
 by a <a href="../../../java/lang/BootstrapMethodError.html" title="class in java.lang"><code>BootstrapMethodError</code></a>,
 which is thrown as the abnormal termination of the dynamic call
 site execution.
 If this happens, the same error will the thrown for all subsequent
 attempts to execute the dynamic call site.

 <h2>timing of linkage</h2>
 A dynamic call site is linked just before its first execution.
 The bootstrap method call implementing the linkage occurs within
 a thread that is attempting a first execution.
 <p>
 If there are several such threads, the bootstrap method may be
 invoked in several threads concurrently.
 Therefore, bootstrap methods which access global application
 data must take the usual precautions against race conditions.
 In any case, every <code>invokedynamic</code> instruction is either
 unlinked or linked to a unique <code>CallSite</code> object.
 <p>
 In an application which requires dynamic call sites with individually
 mutable behaviors, their bootstrap methods should produce distinct
 <a href="../../../java/lang/invoke/CallSite.html" title="class in java.lang.invoke"><code>CallSite</code></a> objects, one for each linkage request.
 Alternatively, an application can link a single <code>CallSite</code> object
 to several <code>invokedynamic</code> instructions, in which case
 a change to the target method will become visible at each of
 the instructions.
 <p>
 If several threads simultaneously execute a bootstrap method for a single dynamic
 call site, the JVM must choose one <code>CallSite</code> object and install it visibly to
 all threads.  Any other bootstrap method calls are allowed to complete, but their
 results are ignored, and their dynamic call site invocations proceed with the originally
 chosen target object.

 <p style="font-size:smaller;">
 <em>Discussion:</em>
 These rules do not enable the JVM to duplicate dynamic call sites,
 or to issue &ldquo;causeless&rdquo; bootstrap method calls.
 Every dynamic call site transitions at most once from unlinked to linked,
 just before its first invocation.
 There is no way to undo the effect of a completed bootstrap method call.

 <h2>types of bootstrap methods</h2>
 As long as each bootstrap method can be correctly invoked
 by <code>MethodHandle.invoke</code>, its detailed type is arbitrary.
 For example, the first argument could be <code>Object</code>
 instead of <code>MethodHandles.Lookup</code>, and the return type
 could also be <code>Object</code> instead of <code>CallSite</code>.
 (Note that the types and number of the stacked arguments limit
 the legal kinds of bootstrap methods to appropriately typed
 static methods and constructors of <code>CallSite</code> subclasses.)
 <p>
 If a given <code>invokedynamic</code> instruction specifies no static arguments,
 the instruction's bootstrap method will be invoked on three arguments,
 conveying the instruction's caller class, name, and method type.
 If the <code>invokedynamic</code> instruction specifies one or more static arguments,
 those values will be passed as additional arguments to the method handle.
 (Note that because there is a limit of 255 arguments to any method,
 at most 251 extra arguments can be supplied, since the bootstrap method
 handle itself and its first three arguments must also be stacked.)
 The bootstrap method will be invoked as if by either <code>MethodHandle.invoke</code>
 or <code>invokeWithArguments</code>.  (There is no way to tell the difference.)
 <p>
 The normal argument conversion rules for <code>MethodHandle.invoke</code> apply to all stacked arguments.
 For example, if a pushed value is a primitive type, it may be converted to a reference by boxing conversion.
 If the bootstrap method is a variable arity method (its modifier bit <code>0x0080</code> is set),
 then some or all of the arguments specified here may be collected into a trailing array parameter.
 (This is not a special rule, but rather a useful consequence of the interaction
 between <code>CONSTANT_MethodHandle</code> constants, the modifier bit for variable arity methods,
 and the <a href="../../../java/lang/invoke/MethodHandle.html#asVarargsCollector-java.lang.Class-"><code>asVarargsCollector</code></a> transformation.)
 <p>
 Given these rules, here are examples of legal bootstrap method declarations,
 given various numbers <code>N</code> of extra arguments.
 The first rows (marked <code>*</code>) will work for any number of extra arguments.
 <table border=1 cellpadding=5 summary="Static argument types">
 <tr><th>N</th><th>sample bootstrap method</th></tr>
 <tr><td>*</td><td><code>CallSite bootstrap(Lookup caller, String name, MethodType type, Object... args)</code></td></tr>
 <tr><td>*</td><td><code>CallSite bootstrap(Object... args)</code></td></tr>
 <tr><td>*</td><td><code>CallSite bootstrap(Object caller, Object... nameAndTypeWithArgs)</code></td></tr>
 <tr><td>0</td><td><code>CallSite bootstrap(Lookup caller, String name, MethodType type)</code></td></tr>
 <tr><td>0</td><td><code>CallSite bootstrap(Lookup caller, Object... nameAndType)</code></td></tr>
 <tr><td>1</td><td><code>CallSite bootstrap(Lookup caller, String name, MethodType type, Object arg)</code></td></tr>
 <tr><td>2</td><td><code>CallSite bootstrap(Lookup caller, String name, MethodType type, Object... args)</code></td></tr>
 <tr><td>2</td><td><code>CallSite bootstrap(Lookup caller, String name, MethodType type, String... args)</code></td></tr>
 <tr><td>2</td><td><code>CallSite bootstrap(Lookup caller, String name, MethodType type, String x, int y)</code></td></tr>
 </table>
 The last example assumes that the extra arguments are of type
 <code>CONSTANT_String</code> and <code>CONSTANT_Integer</code>, respectively.
 The second-to-last example assumes that all extra arguments are of type
 <code>CONSTANT_String</code>.
 The other examples work with all types of extra arguments.
 <p>
 As noted above, the actual method type of the bootstrap method can vary.
 For example, the fourth argument could be <code>MethodHandle</code>,
 if that is the type of the corresponding constant in
 the <code>CONSTANT_InvokeDynamic</code> entry.
 In that case, the <code>MethodHandle.invoke</code> call will pass the extra method handle
 constant as an <code>Object</code>, but the type matching machinery of <code>MethodHandle.invoke</code>
 will cast the reference back to <code>MethodHandle</code> before invoking the bootstrap method.
 (If a string constant were passed instead, by badly generated code, that cast would then fail,
 resulting in a <code>BootstrapMethodError</code>.)
 <p>
 Note that, as a consequence of the above rules, the bootstrap method may accept a primitive
 argument, if it can be represented by a constant pool entry.
 However, arguments of type <code>boolean</code>, <code>byte</code>, <code>short</code>, or <code>char</code>
 cannot be created for bootstrap methods, since such constants cannot be directly
 represented in the constant pool, and the invocation of the bootstrap method will
 not perform the necessary narrowing primitive conversions.
 <p>
 Extra bootstrap method arguments are intended to allow language implementors
 to safely and compactly encode metadata.
 In principle, the name and extra arguments are redundant,
 since each call site could be given its own unique bootstrap method.
 Such a practice is likely to produce large class files and constant pools.</div>
<dl>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>1.7</dd>
</dl>
</div>
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li class="navBarCell1Rev">Package</li>
<li>Class</li>
<li><a href="package-use.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
<div class="aboutLanguage"><strong>Java&trade;&nbsp;Platform<br>Standard&nbsp;Ed.&nbsp;8</strong></div>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../java/lang/annotation/compact1-package-summary.html">Prev&nbsp;Package</a></li>
<li><a href="../../../java/lang/ref/compact1-package-summary.html">Next&nbsp;Package</a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?java/lang/invoke/compact1-package-summary.html" target="_top">Frames</a></li>
<li><a href="compact1-package-summary.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small><font size="-1"> <a href="http://bugreport.sun.com/bugreport/">Submit a bug or feature</a> <br>For further API reference and developer documentation, see <a href="https://docs.oracle.com/javase/8/docs/index.html" target="_blank">Java SE Documentation</a>. That documentation contains more detailed, developer-targeted descriptions, with conceptual overviews, definitions of terms, workarounds, and working code examples.<br> <a href="../../../../legal/cpyr.html">Copyright</a> &#x00a9; 1993, 2015, Oracle and/or its affiliates.  All rights reserved. </font></small></p>
</body>
</html>
