<html><!-- Mirrored from developer.mozilla.org/en-US/Add-ons/SDK/Low-Level_APIs/_loader by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 01 May 2016 17:26:09 GMT --><!-- Added by HTTrack --><head><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->

  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=Edge">
  <script async="" src="../../../../../www.google-analytics.com/analytics.js"></script><script>(function(d) { d.className = d.className.replace(/\bno-js/, ''); })(document.documentElement);</script>
  
    
  

  
  <title>/loader</title>

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="robots" content="index, follow">
  <link rel="home" href="https://developer.mozilla.org/en-US/">
  <link rel="copyright" href="#copyright">

  
    
    
    <link href="../../../../../developer.cdn.mozilla.net/static/build/styles/mdn.593f20d8c365.css" rel="stylesheet" type="text/css">

    
  
    <link href="../../../../../developer.cdn.mozilla.net/static/build/styles/wiki.13dd9abdfb62.css" rel="stylesheet" type="text/css">

    

    
      
        <link rel="stylesheet" type="text/css" href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons$styles">
      
    

  <!-- common social tags -->
  
  <meta property="og:type" content="website">
  <meta property="og:image" content="https://developer.cdn.mozilla.net/static/img/opengraph-logo.dc4e08e2f6af.png">
  <meta property="og:site_name" content="Mozilla Developer Network">
  <meta name="twitter:card" content="summary">
  <meta name="twitter:image" content="https://developer.cdn.mozilla.net/static/img/opengraph-logo.dc4e08e2f6af.png">
  <meta name="twitter:site" content="@MozDevNet">
  <meta name="twitter:creator" content="@MozDevNet">

  <link rel="search" type="application/opensearchdescription+xml" href="https://developer.mozilla.org/en-US/search/xml" title="Mozilla Developer Network">

  <!-- third-generation iPad with high-resolution Retina display: -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="../../../../../developer.cdn.mozilla.net/static/img/favicon144.a6e4162070f4.png">
  <!-- iPhone with high-resolution Retina display: -->
  <link rel="apple-touch-icon-precomposed" sizes="114x114" href="../../../../../developer.cdn.mozilla.net/static/img/favicon114.0e9fabd44f85.png">
  <!-- first- and second-generation iPad: -->
  <link rel="apple-touch-icon-precomposed" sizes="72x72" href="../../../../../developer.cdn.mozilla.net/static/img/favicon72.8ff9d87c82a0.png">
  <!-- non-Retina iPhone, iPod Touch, and Android 2.1+ devices: -->
  <link rel="apple-touch-icon-precomposed" href="../../../../../developer.cdn.mozilla.net/static/img/favicon57.a2490b9a2d76.png">
  <!-- basic favicon -->
  
    
  
  <link rel="shortcut icon" href="../../../../../developer.cdn.mozilla.net/static/img/favicon32.e02854fdcf73.png">
  <!--[if IE]>
  <meta http-equiv="imagetoolbar" content="no">
  <script type="text/javascript" src="https://developer.cdn.mozilla.net/static/build/js/html5shiv.3948ccddab6f.js" charset="utf-8"></script>
  <![endif]-->

  
  <link rel="alternate" type="application/json" href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/SDK/Low-Level_APIs/_loader$json">
  <link rel="canonical" href="_loader.html">

  

  <!-- document-specific social tags -->
  <meta property="og:title" content="/loader">
  <meta property="og:url" content="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/SDK/Low-Level_APIs/_loader">
  <meta name="twitter:url" content="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/SDK/Low-Level_APIs/_loader">
  <meta name="twitter:title" content="/loader">
  
  <meta property="og:description" content="Create CommonJS module loaders.">
  <meta name="description" content="Create CommonJS module loaders.">
  <meta name="twitter:description" content="Create CommonJS module loaders.">
  

  
    



  
</head>
<body data-slug="Mozilla/Add-ons/SDK/Low-Level_APIs/_loader" contextmenu="edit-history-menu" data-search-url="" class="document zone ">

  <script type="text/javascript">
    (function(win) {
        'use strict';

        
            (function(){
  var FLAGS = {
    'compat_api': false,'kumaediting': false,'page_move': false,'registration_disabled': false,'search_suggestions': false,'section_edit': true,'spam_admin_override': false,'spam_checks_enabled': true,'spam_spammer_override': false,'spam_submissions_enabled': false,'spam_testing_mode': false,'wiki_samples': true,'wiki_spam_exempted': false,'wiki_spam_training': true
    },
    SWITCHES = {
    'wiki_error_on_delete': false,'wiki_force_immediate_rendering': false,'enable_optimizely': false,'welcome_email': true,'application_ACAO': true,'store_revision_ips': true,'dumb_doc_urls': true
    },
    SAMPLES = {
    
    };
  window.waffle = {
    "flag_is_active": function waffle_flag(flag_name) {
      
      return !!FLAGS[flag_name];
    },
    "switch_is_active": function waffle_switch(switch_name) {
      
      return !!SWITCHES[switch_name];
    },
    "sample_is_active": function waffle_sample(sample_name) {
      
      return !!SAMPLES[sample_name];
    },
    "FLAGS": FLAGS,
    "SWITCHES": SWITCHES,
    "SAMPLES": SAMPLES
  };
})();

        

        // This needs to be set before ckeditor.js loads
        window.CKEDITOR_BASEPATH = 'https://developer.mozilla.org/static/js/libs/ckeditor/build/ckeditor/';

        // This represents the site configuration
        win.mdn = {
            // Properties and settings for CKEditor will go here
            ckeditor: {},
            // Feature test results and methods will be placed here
            features: {},
            // The path to static assets (images, CSS, JS) in MDN
            staticPath: 'https://developer.cdn.mozilla.net/static/',
            // Optimizely API
            optimizely: win['optimizely'] || [],
            // Site notifications
            
            notifications: [],
            
            // Wiki-specific settings will be placed here
            wiki: {
                autosuggestTitleUrl: '/en-US/docs/get-documents'
            },
            // Assets that need to be dynamically injected
            assets_disabled: {
                css: {
                    'editor-content': ['https://developer.cdn.mozilla.net/static/build/styles/editor-content.3d79df72080d.css',],
                    'wiki-compat-tables': ['https://developer.cdn.mozilla.net/static/build/styles/wiki-compat-tables.f3a3bfce97a1.css',]
                },
                js: {
                    'syntax-prism': ['https://developer.cdn.mozilla.net/static/build/js/syntax-prism.7a66ddfa68bf.js',],
                    'wiki-compat-tables': ['https://developer.cdn.mozilla.net/static/build/js/wiki-compat-tables.14ce5dcb2c3d.js',]
                }
            }
        };
    })(this);
</script>

  

  <ul id="nav-access">
    <li><a href="#document-main" id="skip-main">Skip to main content</a></li>
    <li><a id="skip-language" href="#language">Select language</a></li>
    
      <li><a href="#q" id="skip-search">Skip to search</a></li>
    
  </ul>

  <!-- Header -->
  <header id="main-header"><div class="center">

    <div id="tabzilla">
        <a href="http://www.mozilla.org/" class="no-track">mozilla</a>
    </div>

    <div class="clear header-clear"></div>

    <a href="https://developer.mozilla.org/en-US/" class="logo">Mozilla Developer Network</a>

    <div id="nav-sec">
        
                  <ul>
                  <li>

    

    <form>
      <div class="oauth-login-container">
          <div class="oauth-login-options" tabindex="0">
              <span class="oauth-login-options-text">
                Sign in
              </span>
              <span class="oauth-icon oauth-github" data-service="GitHub" data-href="/users/github/login/?next=%2Fen-US%2FAdd-ons%2FSDK%2FLow-Level_APIs%2F_loader" title="GitHub"><i class="icon-github" aria-hidden="true"></i></span>
              <span class="oauth-icon oauth-persona launch-persona-login wait-for-persona disabled" data-service="Persona" data-next="/en-US/Add-ons/SDK/Low-Level_APIs/_loader" title="Persona"><i class="icon-user" aria-hidden="true"></i></span>
          </div>
          <div class="oauth-login-picker" aria-hidden="true">
              <ul>
                  <li class="wait-for-persona disabled"><a href="https://developer.mozilla.org/en-US/users/signin" class="login-link launch-persona-login" data-next="/en-US/Add-ons/SDK/Low-Level_APIs/_loader" data-service="Persona"><i class="icon-user" aria-hidden="true"></i>Persona</a></li>
                  <li><a href="https://developer.mozilla.org/users/github/login/?next=%2Fen-US%2FAdd-ons%2FSDK%2FLow-Level_APIs%2F_loader" class="login-link" data-service="GitHub"><i class="icon-github" aria-hidden="true"></i>GitHub</a></li>
              </ul>
              
          </div>
      </div>
    </form>
</li>
                </ul>
        
    </div>

    <nav id="main-nav" role="navigation"><ul><li><a href="https://developer.mozilla.org/en-US/docs/Web">Web Platform<i aria-hidden="true" class="icon-caret-down"></i></a>

        <div class="submenu submenu-cols-2 js-submenu" id="nav-platform-submenu">
          <div class="submenu-column">
            <div class="title">Technologies</div>
            <ul>
              <li><a href="https://developer.mozilla.org/en-US/docs/Web/HTML">HTML</a></li>
              <li><a href="https://developer.mozilla.org/en-US/docs/Web/CSS">CSS</a></li>
              <li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript">JavaScript</a></li>
              <li><a href="https://developer.mozilla.org/en-US/docs/Web/Guide/Graphics">Graphics</a></li>
              <li><a href="../../../docs/Web/API.html">APIs / DOM</a></li>
              <li><a href="https://developer.mozilla.org/en-US/docs/Web/Apps">Apps</a></li>
              <li><a href="https://developer.mozilla.org/en-US/docs/Web/MathML">MathML</a></li>
            </ul>
          </div><div class="submenu-column last">
            <div class="title">References &amp; Guides</div>
            <ul>
              <li><a href="https://developer.mozilla.org/en-US/docs/Learn">Learn the Web</a></li>
              <li><a href="https://developer.mozilla.org/en-US/docs/Web/Tutorials">Tutorials</a></li>
              <li><a href="https://developer.mozilla.org/en-US/docs/Web/Reference">References</a></li>
              <li><a href="https://developer.mozilla.org/en-US/docs/Web/Guide">Developer Guides</a></li>
              <li><a href="https://developer.mozilla.org/en-US/docs/Web/Accessibility">Accessibility</a></li>
              <li><a href="https://developer.mozilla.org/en-US/docs/Web">...more docs</a></li>
            </ul>
          </div>
        </div>
      </li><li><a href="https://developer.mozilla.org/en-US/docs/Zones">Mozilla Docs<i aria-hidden="true" class="icon-caret-down"></i></a>

        <div class="submenu js-submenu" id="nav-zones-submenu">
          <div class="submenu-column">
            <ul>
              <li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons">Add-ons</a></li>
              <li><a href="https://developer.mozilla.org/en-US/docs/Firefox">Firefox</a></li>
              <li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Marketplace">Firefox Marketplace</a></li>
              <li><a href="https://developer.mozilla.org/en-US/docs/Firefox_OS">Firefox OS</a></li>
              <li><a href="https://developer.mozilla.org/en-US/docs/Persona">Persona</a></li>
            </ul>
          </div>
        </div>
      </li><li><a href="https://developer.mozilla.org/en-US/docs/Tools">Developer Tools</a></li><li><a href="https://developer.mozilla.org/en-US/docs/MDN/Feedback">Feedback<i aria-hidden="true" class="icon-caret-down"></i></a>

        <div class="submenu js-submenu" id="nav-contact-submenu">
          <div class="submenu-column">
            <ul>
                <li><a href="https://support.mozilla.org/">Get Firefox help<i aria-hidden="true" class="icon-external-link"></i></a></li>
                <li><a href="http://stackoverflow.com/">Get web development help<i aria-hidden="true" class="icon-external-link"></i></a></li>
            </ul>
            <ul>
              <li><a href="https://developer.mozilla.org/en-US/docs/MDN/Community">Join the MDN community</a></li>
              <li><a href="https://bugzilla.mozilla.org/form.doc">Report a content problem<i aria-hidden="true" class="icon-external-link"></i></a></li>
              <li><a href="https://bugzilla.mozilla.org/form.mdn">Report a bug<i aria-hidden="true" class="icon-external-link"></i></a></li>
            </ul>
          </div>
        </div>

      </li><li class="nav-search-link"><a href="https://developer.mozilla.org/en-US/search" title="Search"><i aria-hidden="true" class="icon-search"></i></a></li><li class="main-nav-search"><form action="https://developer.mozilla.org/en-US/search" method="get" role="search">
        <div class="search-wrap">
          <label for="main-q" class="offscreen">Search</label>
          <input type="search" id="main-q" name="q" placeholder="Search" data-value="" value="">
          <span class="search-trigger"><i aria-hidden="true" class="icon-search"></i></span>&nbsp;
          <button type="submit" class="offscreen">Search</button>
        </div>
      </form></li></ul></nav>
  </div></header>

  <!-- Content will go here -->
  <main id="content"><div class="center clear">
  

  
      
        <div class="zone-article-header" id="document-main"><div class="center">
          <!-- zone title -->
          <div class="zone-title"><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons">Add-ons</a></div>
          <!-- zone image -->
          <div class="zone-image"></div>
        </div></div>
      

     <!-- end is_zone -->

    <div class="wiki-main-content"><div class="center">
      
      <div class="article-meta">
        <!-- action buttons -->
        

  
    
  

  
    
  

  

  <ul class="page-buttons" data-sticky="false">
      
      <li><button id="languages-menu" class="transparent" aria-haspopup="true" aria-owns="languages-menu-submenu" aria-expanded="false"><span>Languages</span><i aria-hidden="true" class="icon-globe"></i></button>

        <div class="submenu js-submenu" id="languages-menu-submenu">
          <div class="submenu-column">
            <ul id="translations">
              
                <li class="smaller">No translations exist for this article.</li>
              

              
                <li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/SDK/Low-Level_APIs/_loader$locales" rel="nofollow, noindex" id="translations-add">Add a translation</a></li>
              
            </ul>
          </div>
        </div>
      </li>

      <li class="page-buttons-edit"><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/SDK/Low-Level_APIs/_loader$edit" class="button" data-optimizely-hook="button-edit-doc" id="edit-button">Edit<i aria-hidden="true" class="icon-pencil"></i></a></li>

        

        <li><button id="advanced-menu" class="only-icon" aria-haspopup="true" aria-owns="advanced-menu-submenu" aria-expanded="false"><span>Advanced</span><i aria-hidden="true" class="icon-cog"></i></button>
        <div class="submenu js-submenu" id="advanced-menu-submenu">
          <!-- this page -->
          <div class="submenu-column">
            <div class="title">Advanced</div>
            <ul>
                <li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/SDK/Low-Level_APIs/_loader$history" rel="nofollow, noindex">History</a></li>
                
                
                
                

                

                
                
                
                <li class="page-print"><a href="#" onclick="return window.print();">Print this article</a></li>
            </ul>
          </div>
        </div>
  </li></ul>

        <!-- crumbs -->
        
  <nav class="crumbs" role="navigation"><ol xmlns:v="http://rdf.data-vocabulary.org/#" aria-label="breadcrumbs">
    <li typeof="v:Breadcrumb"><a href="https://developer.mozilla.org/en-US" rel="v:url" property="v:title">MDN</a></li>
    
      <li class="crumb" typeof="v:Breadcrumb"><a href="https://developer.mozilla.org/en-US/docs/Mozilla" rel="v:url" property="v:title">Mozilla</a></li>
    
      <li class="crumb" typeof="v:Breadcrumb"><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons" rel="v:url" property="v:title">Add-ons</a></li>
    
      <li class="crumb" typeof="v:Breadcrumb"><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/SDK" rel="v:url" property="v:title">Add-on SDK</a></li>
    
      <li class="crumb" typeof="v:Breadcrumb"><a href="../../../docs/Mozilla/Add-ons/SDK/Low-Level_APIs.png" rel="v:url" property="v:title">Low-Level APIs</a></li>
    
    <li class="crumb" typeof="v:Breadcrumb" property="v:title">/loader</li>
  </ol></nav>
      </div>

      <!-- heading -->
      <div id="wiki-document-head" class="document-head">
          <span class="from-search-previous-box">
            <a class="button from-search-previous only-icon disabled" title="Previous Search Result" data-empty-title="No Previous Search Result"><i aria-hidden="true" class="icon-chevron-left"></i></a>
          </span>
          <span class="from-search-navigate-wrap">
            <a href="#" class="from-search-navigate"><span class="from-search-navigate-up"><i aria-hidden="true" class="icon-double-angle-up"></i></span><span class="from-search-navigate-down"><i aria-hidden="true" class="icon-double-angle-down"></i></span></a>
          </span>
          <div class="from-search-toc submenu">
            <span class="title">Your Search Results</span>
            <ol></ol>
          </div>
          <span class="from-search-next-box">
            <a class="button from-search-next only-icon disabled" title="Next Search Result" data-empty-title="No Previous Search Result"><i aria-hidden="true" class="icon-chevron-right"></i></a>
          </span>

        
        <div class="contributor-avatars" data-all-text="see all contributors" data-alternate-message="hide contributors">
            <ul>
            
                <li class="shown">
                <a href="https://developer.mozilla.org/en-US/profiles/Alexander_" title="View profile: Alexander_">
                <noscript data-width="34" data-height="34" data-class="avatar" data-alt="Alexander_" data-src="../../../../../i2.wp.com/developer.cdn.mozilla.net/media/img/avatareb45.png?s=34&amp;r=pg&amp;d=https%3A%2F%2Fdeveloper.cdn.mozilla.net%2Fmedia%2Fimg%2Favatar.png">Alexander_</noscript></a>
                </li>
            
                <li class="shown">
                <a href="https://developer.mozilla.org/en-US/profiles/wbamberg" title="View profile: wbamberg">
                <noscript data-width="34" data-height="34" data-class="avatar" data-alt="wbamberg" data-src="../../../../../secure.gravatar.com/avatar/576b94c81f8ad97e58d63f12e5fdb00c6c02.png?s=34&amp;r=pg&amp;d=https%3A%2F%2Fdeveloper.cdn.mozilla.net%2Fmedia%2Fimg%2Favatar.png">wbamberg</noscript></a>
                </li>
            
                <li class="shown">
                <a href="https://developer.mozilla.org/en-US/profiles/gargsms" title="View profile: gargsms">
                <noscript data-width="34" data-height="34" data-class="avatar" data-alt="gargsms" data-src="../../../../../i2.wp.com/developer.cdn.mozilla.net/media/img/avatareb45.png?s=34&amp;r=pg&amp;d=https%3A%2F%2Fdeveloper.cdn.mozilla.net%2Fmedia%2Fimg%2Favatar.png">gargsms</noscript></a>
                </li>
            
                <li class="shown">
                <a href="https://developer.mozilla.org/en-US/profiles/plujon" title="View profile: plujon">
                <noscript data-width="34" data-height="34" data-class="avatar" data-alt="plujon" data-src="../../../../../i2.wp.com/developer.cdn.mozilla.net/media/img/avatareb45.png?s=34&amp;r=pg&amp;d=https%3A%2F%2Fdeveloper.cdn.mozilla.net%2Fmedia%2Fimg%2Favatar.png">plujon</noscript></a>
                </li>
            
                <li class="shown">
                <a href="https://developer.mozilla.org/en-US/profiles/jsantell" title="View profile: jsantell">
                <noscript data-width="34" data-height="34" data-class="avatar" data-alt="jsantell" data-src="../../../../../secure.gravatar.com/avatar/595768eaea3925799b659b979de0f93a6c02.png?s=34&amp;r=pg&amp;d=https%3A%2F%2Fdeveloper.cdn.mozilla.net%2Fmedia%2Fimg%2Favatar.png">jsantell</noscript></a>
                </li>
            
            </ul>
        </div>
        

        <h1>/loader</h1>

      </div>
      

      <!-- start the main content container -->
        <div id="wiki-column-container" class="wiki-right-present wiki-left-present">

          <!-- content row with three strips -->
          <div class="column-container column-container-reverse">

            
              <!-- TOC, approvals, etc -->
              <div class="column-strip wiki-column" id="wiki-right">
              
              <!-- table of contents -->
              <div id="toc" class="toc toggleable" data-closed="true">
                <a href="#toc" class="title toggler" data-open-icon="icon-plus" data-closed-icon="icon-minus">In This Article<i></i></a>
                <ol class="toggle-container">
                  <li><a href="#Usage" rel="internal">Usage</a><ol><li><a href="#What_is_it_good_for" rel="internal">What is it good for ?</a></li><li><a href="#Instantiation" rel="internal">Instantiation</a></li><li><a href="#Configuration" rel="internal">Configuration</a><ol><li><a href="#paths" rel="internal">paths</a></li><li><a href="#modules" rel="internal">modules</a></li><li><a href="#Globals" rel="internal">Globals</a></li><li><a href="#resolve" rel="internal">resolve</a></li><li><a href="#id" rel="internal">id</a></li></ol></li><li><a href="#All_Together" rel="internal">All Together</a><ol><li><a href="#Loader_Instances" rel="internal">Loader Instances</a></li></ol></li><li><a href="#Loading_Modules" rel="internal">Loading Modules</a></li><li><a href="#Built-in_Modules" rel="internal">Built-in Modules</a><ol><li><a href="#chrome" rel="internal">chrome</a></li><li><a href="#loaderoptions" rel="internal">@loader/options</a></li><li><a href="#loaderunload" rel="internal">@loader/unload</a></li></ol></li><li><a href="#Unload" rel="internal">Unload</a></li><li><a href="#Other_Utilities" rel="internal">Other Utilities</a><ol><li><a href="#Module()" rel="internal">Module()</a></li><li><a href="#load()" rel="internal">load()</a></li><li><a href="#Sandbox()" rel="internal">Sandbox()</a></li><li><a href="#evaluate()" rel="internal">evaluate()</a></li><li><a href="#Require()" rel="internal">Require()</a></li><li><a href="#resolveURI()" rel="internal">resolveURI()</a></li><li><a href="#override()" rel="internal">override()</a></li><li><a href="#descriptor()" rel="internal">descriptor()</a></li></ol></li></ol></li>
                </ol>
              </div>
              
              </div>
            

            
            
              
            

            <!-- center: main article content -->
            <div id="wiki-content" class="column-half wiki-column text-content">

              

              

              
                
                
                
              
              

              <!-- just the article content -->
              <article id="wikiArticle">
                
                  
                    <p></p><section id="Quick_Links" class="Quick_links"><!-- --></section><p></p>

<div class="note">
<p>Unstable</p>
</div>

<p><span class="seoSummary">Create <a href="http://wiki.commonjs.org/wiki/Modules/1.1.1" class="external">CommonJS module</a> loaders.</span></p>

<h2 id="Usage">Usage</h2>

<p>The code is intentionally authored so that it can be loaded in several ways.</p>

<ol>
 <li>
  <p>It can be loaded as a regular script tag in documents that have <a href="https://developer.mozilla.org/en/Security_check_basics#Principals">system principals</a> (note: this does not appear to work as of 02.2016 due to "use strict" being added to the file):</p>

  <pre class="brush: html">    &lt;script type='application/javascript' src='resource://gre/modules/commonjs/toolkit/loader.js'&gt;&lt;/script&gt;
</pre>

  <p>This will expose a single <code>loader</code> object containing all of the API functions described in this document.</p>
 </li>
 <li>
  <p>It can be loaded as a <a href="../../../docs/Mozilla/JavaScript_code_modules/Using.html">JavaScript code module</a>:</p>

  <pre class="brush: js"><code>let { Loader, Require, un</code><code>load } = Components.utils.import('resource://gre/modules/commonjs/toolkit/loader.js');</code></pre>
 </li>
 <li>
  <p>It can be required as a CommonJS module from a module loaded in the loader itself:</p>

  <pre class="brush: js"><code>let { Loader, Require</code><code>, unload } = require('toolkit/loader');</code></pre>
 </li>
</ol>

<h3 id="What_is_it_good_for">What is it good for ?</h3>

<ul>
 <li>Create somewhat standardized JS environments that people doing non-browser JS are familiar with.</li>
 <li>Provide an environment for loading <a href="http://wiki.commonjs.org/wiki/Modules/1.1.1" class="external">CommonJS style modules</a>, which makes it possible to consume <a href="http://search.npmjs.org/" class="external">lots of interesting code</a> that has already been developed.</li>
 <li>Secure each module in an isolated JS sandbox and makes any capability imports explicit via calls to the <code>require()</code> function.</li>
 <li>create task specific loaders with restricted module access.</li>
 <li>Provide unload hooks that may be used to undo changes made by anything loaded into it.</li>
</ul>

<h3 id="Instantiation">Instantiation</h3>

<p>The <code>loader</code> module provides a <code>Loader()</code> function that may be used to instantiate new loader instances:</p>

<pre class="brush: js"><code>let loader = Loader(options);</code></pre>

<h3 id="Configuration">Configuration</h3>

<p><code>Loader()</code> may be provided with a set of configuration options:</p>

<ul>
 <li><a href="_loader.html#paths"><code>paths</code></a>: describes where the loader should find the modules it is asked to load. <strong>Mandatory</strong>.</li>
 <li><a href="_loader.html#modules"><code>modules</code></a>: provides a set of module exports. <strong>Optional</strong>.</li>
 <li><a href="_loader.html#Globals"><code>globals</code></a>: provides a set of globals shared across modules loaded via this loader. <strong>Optional</strong>.</li>
 <li><a href="_loader.html#resolve"><code>resolve</code></a>: provide customized module resolution logic. <strong>Optional</strong>.</li>
 <li><a href="_loader.html#id"><code>id</code></a>: provide add-on id to attach to loaded modules. <strong>Optional</strong>.</li>
</ul>

<h4 id="paths">paths</h4>

<p>The loader needs to be provided with a set of locations to indicate where to find modules loaded using <code>require()</code>. This is provided by a mandatory <code>options.paths</code> hash that represents the mapping between module ID prefixes and locations. There are lots of different possibilities, but the most common setup looks like this:</p>

<pre class="brush: js"><code>let { Loader } = require('toolkit/loader');</code><code>
let loader = Loader({
  paths: {
    // Resolve all modules starting with `toolkit/` as follows:
    // toolkit/foo      -&gt;  resource://gre/modules/commonjs/toolkit/foo.js
    // toolkit/foo/bar  -&gt;  resource://gre/modules/commonjs/toolkit/foo/bar.js
    'toolkit/': 'resource://gre/modules/commonjs/toolkit/',
    // Resolve all other non-relative module requirements as follows:
    // devtools/gcli    -&gt;  resource:///modules/devtools/gcli.js
    // panel            -&gt;  resource:///modules/panel.js
    '': 'resource:///modules/',
  }
})</code></pre>

<p>All relative URL <code>require()</code> statements (those that start with ".") are first resolved relative to the requirer module ID and the result of it is then resolved using the <code>paths</code> option. You may still end up with a relative module ID if the entry point module ID is itself relative. In those cases you have to decide what the entry point module is relative to and provide an appropriate mapping for it:</p>

<pre class="brush: js"><code>let { Loader } = require('toolkit/loader');
let loader = Loader({</code><code>
  paths: {
    // Resolve all modules starting with `toolkit/` as follows:
    // toolkit/foo      -&gt;  resource://gre/modules/commonjs/toolkit/foo.js
    // toolkit/foo/bar  -&gt;  resource://gre/modules/commonjs/toolkit/foo/bar.js
    'toolkit/': 'resource://gre/modules/commonjs/toolkit/',
    // Resolev all other non-relative module requirements as follows:
    // devtools/gcli    -&gt;  resource:///modules/devtools/gcli.js
    // panel            -&gt;  resource:///modules/panel.js
    '': 'resource:///modules/',
    // Allow relative URLs and resolve them to add-on root:
    // ./main           -&gt;  resource://my-addon/root/main.js
    './': 'resource://my-addon/root/'
  }
});</code></pre>

<p>The order of keys in <code>paths</code> is irrelevant since they are sorted by keys from longest to shortest to allow overlapping mapping. The example above overlays the base path <code>''</code> with a different mapping for <code>'toolkit/'</code> prefixed modules.</p>

<h4 id="modules">modules</h4>

<p>The loader may <strong>optionally</strong> be provided with a set of module exports. In the SDK we call these "pseudo modules". This feature may be used in a few different ways:</p>

<ol>
 <li>
  <p>To expose an API that doesn't have a JS file with an implementation or is written in an incompatible format such as <a href="../../../docs/Mozilla/JavaScript_code_modules/Using.html">JSM</a>:</p>

  <pre class="brush: js"><code>let { Loader } = require('toolkit/loader');</code><code>
let loader = Loader({
  modules: {
    // require('net/utils') will get NetUtil.jsm
    'net/utils': Cu.import('resource:///modules/NetUtil.jsm', {})
  }
});</code></pre>

  <p>Each loader instance comes with a set of built-in pseudo modules that are described in detail in the <a href="_loader.html#Built-in_Modules">Built-in Modules</a> section.</p>
 </li>
 <li>
  <p>To reuse module instances that are already loaded. For example in the SDK, the loader is loaded at bootstrap as a JSM module but is then exposed as a pseudo-module to avoid the overhead of subsequent loads:</p>

  <pre class="brush: js"><code>let loaderModule = Cu.import('resource://gre/modules/commonjs/toolkit/loader.js');</code><code>
let loader = loaderModule.Loader({
  modules: {
    // Overlay `toolkit/loader` so that `require('toolkit/loader')`
    // will return our `loaderModule`.
    'toolkit/loader': loaderModule
  }
});</code></pre>
 </li>
</ol>

<p>Use this feature with a great care though. While reuse may sound like a compelling idea it comes with the side effect of shared state, which can cause problems. For example, unload of a loader won't trigger unload hooks on pseudo-modules.</p>

<h4 id="Globals">Globals</h4>

<p>Each module loaded via the loader instance is secured in own JS sandbox. These modules don't share scope and get their own set of built-ins (<code>Object</code>, <code>Array</code>, <code>String</code> ...). But sometimes it's convenient to define a set of common globals that will be shared across modules. This can be done using the optional <code>globals</code> option.</p>

<p>For example, the SDK uses this feature to provide a global <code>console</code> object:</p>

<pre class="brush: js"><code>let { Loader } = require('toolkit/loader');</code><code>
let loader = Loader({
  globals: {
    console: {
      log: dump.bind(dump, 'log: '),
      info: dump.bind(dump, 'info: '),
      warn: dump.bind(dump, 'warn: '),
      error: dump.bind(dump, 'error: ')
    }
  }
});</code></pre>

<p>Be careful not to misuse this feature! In general it is not recommended to provide features via globals, it's almost always better to use pseudo-modules or, even better, modules.</p>

<h4 id="resolve">resolve</h4>

<p>The optional <code>resolve</code> option enables you to completely customize module resolution logic.</p>

<p><code>resolve</code> is assigned a function that takes:</p>

<ul>
 <li>the ID of the module passed into <code>require()</code></li>
 <li>the ID of the module that called <code>require()</code></li>
</ul>

<p>On each <code>require()</code> call, the supplied function is then called with the ID of the required module and that of the requiring module.</p>

<p>The function returns a string representing the resolved module ID, which is then resolved to its location URL using the mapping provided in the <code>paths</code> option.</p>

<p>If this option is not provided, the loader will use plain path resolution.</p>

<p>This feature may also be used to implement specific security constraints. For example, the SDK generates a manifest file at build time representing a dependency graph of all modules used by an add-on. Any attempt to load a module not listed in the manifest is unauthorized and is rejected with an exception:</p>

<pre class="brush: js"><code>let { Loader } = require('toolkit/loader');</code><code>
let manifest = {
  './main': {
    'requirements': {
      'panel': 'sdk/panel'
    }
  },
  'sdk/panel': {
    'requirements': {
      'chrome': 'chrome'
    }
  }
  'chrome': {
    'requirements': {}
  }
};
let loader = Loader({
  resolve: function(id, requirer) {
    let requirements = manifest[requirer].requirements;
    if (id in manifest)
      return requirements[id];
    else
      throw Error('Module "' + requirer + '" has no authority to require ' +
                  'module "' + id + "')
  }
});</code></pre>

<p>Thrown exceptions will propagate to the caller of <code>require()</code>. If the function assigned to <code>resolve</code> does not return a string value, an exception will still be thrown as the loader will be unable to resolve the required module's location.</p>

<h4 id="id">id</h4>

<p>Add-on debugging requires knowing which objects belong to which add-on. When created with this option, Loader will transparently mark all new global objects with the provided value.</p>

<h3 id="All_Together">All Together</h3>

<p>All of these options can be combined to configure the loader for a specific use case. Don't get too excited about configuration options, keep in mind that modules are more useful if they can be used across loader instances. Unless you have specific needs it's best to stick to an SDK-compatible configuration, like this:</p>

<pre class="brush: js"><code>let { Loader } = require('toolkit/loader');
let loader = Loader({
  // Please note: Illustrated `paths` is expected to be a default base,
  // but depending on your use case you may have more mappings.
  paths: {
    // Resolve all non-relative module requirements to
    // `resource:///modules/` base URI.
    '': 'resource:///modules/',</code>

    // Reserve `toolkit/` prefix for generic, mozilla toolkit modules
    // and resolve them to `resource://gre/modules/commonjs/toolkit/` URI.
    'toolkit/': 'resource://gre/modules/commonjs/toolkit/'
  },
  // Please note: Both `globals` and `modules` are just for illustration
  // purposes we don't suggest populating them with these values.
  globals: {
    // Provide developers with well known `console` object, hopefully
    // with a more advanced implementation.
    console: {
      log: dump.bind(dump, "log: "),
      info: dump.bind(dump, "info: "),
      warn: dump.bind(dump, "warn: "),
      error: dump.bind(dump, "error: ")
    }
  },
  modules: {
    // Expose legacy API via pseudo modules that eventually may be
    // replaced with a real ones :)
    "devtools/gcli": Cu.import("resource:///modules/gcli.jsm", {}),
    "net/utils": Cu.import("resource:///modules/NetUtil.jsm", {})
  }
});</pre>

<h4 id="Loader_Instances">Loader Instances</h4>

<p>The loader produces instances that are nothing more than representations of the environment into which modules are loaded. It is intentionally made immutable and all its properties are just an implementation detail that no one should depend on, they may change at any point without any further notice.</p>

<h3 id="Loading_Modules">Loading Modules</h3>

<p>The CommonJS specification defines the notion of a <strong>main</strong> module, which represents an entry point to a program.</p>

<p>The <code>loader</code> module exposes a <code>main()</code> function that can be used to load a main module. All other modules will be loaded by this module or its dependencies:</p>

<pre class="brush: js"><code>let { main, Loader } = require('toolkit/loader');
let loader = Loader(options);</code><code>
let program = main(loader, './main');</code></pre>

<p>A module can find out whether it was loaded as main:</p>

<pre class="brush: js"><code>if (require.main === module)
  main();</code></pre>

<p>It is possible to load other modules before a main one, but it's inherently harder to do. That's because every module except main has a requirer, based on which resolution and authority decisions are made. In order to load a module before a main one (for example to bootstrap an environment) the requirer must be created first:</p>

<pre class="brush: js"><code class="brush: js">let { Require, Loader, Module } = require('toolkit/loader');
let loader = Loader(options);</code><code class="brush: js">
let requirer = Module(requirerID, requirerURI);
let require = Require(loader, requirer);
let boostrap = require(bootstrapID);</code></pre>

<h3 id="Built-in_Modules">Built-in Modules</h3>

<p>Each loader instance exposes the following built-in pseudo modules in addition to those passed via <code>modules</code>:</p>

<h4 id="chrome">chrome</h4>

<p>This pseudo module exposes everything that is typically available for JS contexts with <a href="https://developer.mozilla.org/en/Security_check_basics#Principals">system principals</a> under the <a href="https://developer.mozilla.org/en/Components">Components</a> global. This alternative approach of providing capabilities via modules makes it possible to build module capability graphs by analyzing require statements. These graphs can be used to reason about modules without diving into implementation details.</p>

<h4 id="loaderoptions">@loader/options</h4>

<p>This pseudo module exposes all the <code>options</code> that were used to configure this loader. It enables you to create new loader instances identical to the current one:</p>

<pre class="brush: js"><code>    let { Loader } = require('toolkit/loader');
    let options = require('@loader/options');</code><code>
    let loader = Loader(options);</code></pre>

<p>This module is useful in very specific cases. For example the SDK uses this feature during test execution to create an identical environment with a different state to test how specific modules handle unloads.</p>

<h4 id="loaderunload">@loader/unload</h4>

<p>This pseudo module exposes an object that is unique per loader instance. It is used as a subject for <a href="https://developer.mozilla.org/en/Observer_Notifications">observer notification</a> to allow use of the <a href="https://developer.mozilla.org/en/nsiobserverservice">observer service</a> for defining hooks reacting on the unload of a specific loader. The SDK builds a higher level API on top of this for handling unloads and performing cleanup:</p>

<pre class="brush: js">let unloadSubject = require('@loader/unload');
let observerService = Cc['@mozilla.org/observer-service;1'].
                      getService(Ci.nsIObserverService);

let observer = { observe: function onunload(subject, topic, reason) {
  // If this module is unloaded then `subject.wrappedJSObject` will be
  // `unloadSubject`. `topic` will be `'sdk:loader:destroy'`, and
  // `reason` will be a string describing the reason (e.g. `'disable'`).
  if (subject.wrappedJSObject === unloadSubject)
    console.log("I am about to unload, reason is " + reason);
}};

observerService.addObserver(observer, 'sdk:loader:destroy', false);</pre>

<h3 id="Unload">Unload</h3>

<p>The <code>loader</code> module exposes an <code>unload()</code> function that can be used to unload specific loader instance and undo changes made by modules loaded into it. <code>unload</code> takes <code>loader</code> as a first argument and optionally a <code>reason</code> string identifying the reason why this loader was unloaded.</p>

<p>For example in the SDK <code>reason</code> may be one of: <code>shutdown</code>, <code>disable</code>, <code>uninstall</code>.</p>

<pre class="brush: js"><code>    unload(loader, 'disable');</code></pre>

<p>Calls to this function will dispatch the unload <a href="https://developer.mozilla.org/en/Observer_Notifications">observer notification</a> that modules can listen to as described above.</p>

<h3 id="Other_Utilities">Other Utilities</h3>

<p>The loader module exposes several other utility functions that are used internally and can also be handy while bootstrapping the loader itself. They are low level helpers and should be used only during loader bootstrap.</p>

<h4 id="Module()">Module()</h4>

<p>The <code>Module()</code> function takes a module ID and URI and creates a module instance object that is exposed as the <code>module</code> variable in the module scope.</p>

<pre class="brush: js"><code>let module  = Module('foo/bar', 'resource:///modules/foo/bar.js');</code></pre>

<p>Note that this won't actually load any module code, it just creates a placeholder for it. The section below describes how to load the module.</p>

<h4 id="load()">load()</h4>

<p>The <code>load()</code> function takes <code>loader</code> and loads the given <code>module</code> into it:</p>

<pre class="brush: js"><code>let loader = Loader(options);
let module  = Module('foo/bar', 'resource:///modules/foo/bar.js');
load(loader, module);</code></pre>

<h4 id="Sandbox()">Sandbox()</h4>

<p>The <code>Sandbox()</code> function is a utility function for creating <a href="https://developer.mozilla.org/en/Components.utils.Sandbox">JS sandboxes</a>. It is used by the loader to create scopes into which modules are loaded. It takes the following set of configuration options:</p>

<ul>
 <li><code>name</code>: A string value which identifies the sandbox in about:memory. Will throw exception if omitted.</li>
 <li><code>principal</code>: String URI or <code>nsIPrincipal</code> for the sandbox. If omitted defaults to system principal.</li>
 <li><code>prototype</code>: Object that the returned sandbox will inherit from. Defaults to <code>{}</code>.</li>
 <li><code>wantXrays</code>: A Boolean value indicating whether code outside the sandbox wants X-ray vision with respect to objects inside the sandbox. Defaults to <code>true</code>.</li>
</ul>

<pre class="brush: js"><code>   let sandbox = Sandbox({
     name: 'resource:///modules/foo/bar.js',
     wantXrays: false,</code><code>
     prototype: {
       console: {
         log: dump.bind(dump, 'log: '),
         info: dump.bind(dump, 'info: '),
         warn: dump.bind(dump, 'warn: '),
         error: dump.bind(dump, 'error: ')
       }
     }
   });</code></pre>

<h4 id="evaluate()">evaluate()</h4>

<p>Evaluates code in the supplied <code>sandbox</code>. If <code>options.source</code> is provided then its value is evaluated, otherwise source is read from the supplied <code>uri</code>. Either way, any exceptions will be reported as from the <code>uri</code>.</p>

<p>Optionally more options may be specified:</p>

<ul>
 <li><code>options.encoding</code>: source encoding, defaults to 'UTF-8'.</li>
 <li><code>options.line</code>: line number to start count from in stack traces. Defaults to 1.</li>
 <li><code>options.version</code>: version of JS used, defaults to '1.8'.</li>
</ul>

<pre class="brush: js">// Load script from the given location to a given sandbox:

 evaluate(sandbox, 'resource://path/to/script.js')

// Evaluate `code` as if it was from `foo/bar.js`:
evaluate(sandbox, 'foo/bar.js', {
  source: code,
  version: '1.7'
  // You could also use other options described above.
})</pre>

<h4 id="Require()">Require()</h4>

<p>As already mentioned in <a href="_loader.html#Loading_Modules">Loading Modules</a> it's common to start execution by loading a main module. But sometimes you may want to prepare the environment using existing modules before doing that. In such cases you can create a requirer module instance and a version of <code>require</code> exposed to it with this function:</p>

<pre class="brush: js"><code>let requirer = Module(requirerID, requirerURI);
let require = Require(loader, requirer);
let boostrap = require(bootstrapID</code><code>);</code></pre>

<h4 id="resolveURI()">resolveURI()</h4>

<p>This function is used by the loader to resolve module URI from an ID using a mapping array generated from the loader's <code>paths</code> option. It examines each element until it finds the prefix matching the supplied ID and replaces it with the location it maps to:</p>

<pre class="brush: js"><code>let mapping = [
  [ 'sdk/', 'resource://gre/modules/commonjs/sdk/' ],
  [ './',       'resource://my-addon/'    ],
  [ '',         'resource:///modules/'    ]
];
resolveURI('./main', mapping);           // =&gt; resource://my-addon/main.js
resolveURI('devtools/gcli', mapping);    // =&gt; resource:///modules/devtools/gcli.js
resolveURI('sdk/core/promise', mapping);  // =&gt; resource://gre/modules/commonjs/sdk/core/promise.js</code></pre>

<h4 id="override()">override()</h4>

<p>This function is used to create a fresh object that contains own properties of two arguments it takes. If arguments have properties with conflicting names the property from the second argument overrides that from the first. This function is helpful for combining default and passed properties:</p>

<pre class="brush: js"><code>override({ a</code><code>: 1, b: 1 }, { b: 2, c: 2 }) // =&gt; { a: 1, b: 2, c: 2 }</code></pre>

<h4 id="descriptor()">descriptor()</h4>

<p>This utility function takes an object and as an argument and returns property descriptor map for its own properties. It is useful when working with object functions introduced in ES5 (<code>Object.create, Object.defineProperties, ..</code>):</p>

<pre class="brush: js"><code>// define properties of `source` o</code><code>n `target`.
Object.defineProperties(target, descriptor(source))</code></pre>
                  
                
              </article>

              

    
    
    

    
    
    

    <div class="share">
        <strong>Share:</strong>
        <ul>
            <li><a href="http://twitter.com/share?url=https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FMozilla%2FAdd-ons%2FSDK%2FLow-Level_APIs%2F_loader%3Futm_campaign%3Dshare%26utm_medium%3Ddoc%2Bshare%2Blink%26utm_source%3Dtwitter.com&amp;text=I+learned+about+%2Floader+on+MDN." target="_blank" data-url="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/SDK/Low-Level_APIs/_loader?utm_campaign=share&amp;utm_medium=doc+share+link&amp;utm_source=twitter.com" data-title="I learned about /loader on MDN." class="share-link twitter"><i aria-hidden="true" class="icon-twitter"></i>Twitter</a></li>
            <li><a href="http://facebook.com/sharer.php?s=100&amp;p[url]=https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/SDK/Low-Level_APIs/_loader?utm_campaign=share&amp;utm_medium=doc+share+link&amp;utm_source=facebook.com" target="_blank" data-url="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/SDK/Low-Level_APIs/_loader?utm_campaign=share&amp;utm_medium=doc+share+link&amp;utm_source=facebook.com" data-title="I learned about /loader on MDN." class="share-link facebook"><i aria-hidden="true" class="icon-facebook"></i>Facebook</a></li>
            <li><a href="https://plus.google.com/share?url=https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FMozilla%2FAdd-ons%2FSDK%2FLow-Level_APIs%2F_loader%3Futm_campaign%3Dshare%26utm_medium%3Ddoc%2Bshare%2Blink%26utm_source%3Dplus.google.com" target="_blank" data-url="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/SDK/Low-Level_APIs/_loader?utm_campaign=share&amp;utm_medium=doc+share+link&amp;utm_source=plus.google.com" data-title="I learned about /loader on MDN." class="share-link gplus"><i aria-hidden="true" class="icon-google-plus"></i>Google+</a></li>
        </ul>
    </div>

              

                <!-- contributors -->
                <div class="wiki-block contributors">
                  <h2 class="offscreen">Document Tags and Contributors</h2>
                  
                  

                  
                    <div class="contributors-sub">
                      <i aria-hidden="true" class="icon-group icon-fw"></i>&nbsp;<strong>Contributors to this page:</strong> 
        <a href="https://developer.mozilla.org/en-US/profiles/Alexander_">Alexander_</a>, 
    
        <a href="https://developer.mozilla.org/en-US/profiles/wbamberg">wbamberg</a>, 
    
        <a href="https://developer.mozilla.org/en-US/profiles/gargsms">gargsms</a>, 
    
        <a href="https://developer.mozilla.org/en-US/profiles/plujon">plujon</a>, 
    
        <a href="https://developer.mozilla.org/en-US/profiles/jsantell">jsantell</a>
    
                    </div>
                  

                  
                    <div class="contributors-sub">
                      <i aria-hidden="true" class="icon-clock-o icon-fw"></i>&nbsp;<strong>Last updated by:</strong>
                      <a href="https://developer.mozilla.org/en-US/profiles/Alexander_">Alexander_</a>,
                      <time datetime="2016-02-03T21:37:58-08:00">Feb 3, 2016, 9:37:58 PM</time>
                    </div>
                  
                </div>
              
            </div>

            
              <!-- quick links and zone subnav strip -->
              <div id="wiki-left" class="column-strip wiki-column">

              

                

                
                  <!-- quick links -->
                  
  <div class="quick-links" id="quick-links">
    <div class="title see-also">See also</div>
     
  <ol> 
    <li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions"><strong>WebExtensions</strong></a></li> 
 
    <li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions#Getting_started">Getting started</a> 
      <ol> 
        <li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/Prerequisites">Prerequisites</a></li> 
        <li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/Anatomy_of_a_WebExtension">Anatomy of a WebExtension</a></li> 
        <li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/Packaging_and_Installation">Packaging and Installation</a> 
        </li><li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/Walkthrough">Walkthrough</a> 
        </li><li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/Examples">Examples</a> 
      </li></ol> 
    </li> 
     
    <li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions#Guides">Guides</a> 
      <ol> 
        <li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/Content_scripts">Content scripts</a></li> 
        <li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/Porting_from_Google_Chrome">Porting from Google Chrome</a> 
        </li><li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/Match_patterns">Match patterns</a> 
        </li><li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/Debugging">Debugging</a></li> 
        <li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/Chrome_incompatibilities">Chrome incompatibilities</a> 
      </li></ol> 
    </li>   
     
    <li data-default-state="closed"><a href="../../WebExtensions/API.html">JavaScript APIs</a> 
     <ol><li><a href="../../WebExtensions/API/alarms.html">alarms</a></li><li><a href="../../WebExtensions/API/bookmarks.html">bookmarks</a></li><li><a href="../../WebExtensions/API/browserAction.html">browserAction</a></li><li><a href="../../WebExtensions/API/contextMenus.html">contextMenus</a></li><li><a href="../../WebExtensions/API/cookies.html">cookies</a></li><li><a href="../../../docs/Mozilla/Add-ons/WebExtensions/API/events.png">events</a></li><li><a href="../../WebExtensions/API/extension.html">extension</a></li><li><a href="../../WebExtensions/API/extensionTypes.html">extensionTypes</a></li><li><a href="../../WebExtensions/API/i18n.html">i18n</a></li><li><a href="../../WebExtensions/API/idle.html">idle</a></li><li><a href="../../../docs/Mozilla/Add-ons/WebExtensions/API/notifications.png">notifications</a></li><li><a href="../../WebExtensions/API/pageAction.html">pageAction</a></li><li><a href="../../WebExtensions/API/runtime.html">runtime</a></li><li><a href="../../WebExtensions/API/storage.html">storage</a></li><li><a href="../../WebExtensions/API/tabs.html">tabs</a></li><li><a href="../../WebExtensions/API/webNavigation.html">webNavigation</a></li><li><a href="../../WebExtensions/API/webRequest.html">webRequest</a></li><li><a href="../../WebExtensions/API/windows.html">windows</a></li></ol> 
    </li> 
     
    <li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json">Manifest keys</a> 
    <ol><li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/applications">applications</a></li><li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/background">background</a></li><li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/browser_action">browser_action</a></li><li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/content_scripts">content_scripts</a></li><li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/default_locale">default_locale</a></li><li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/description">description</a></li><li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/icons">icons</a></li><li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/manifest_version">manifest_version</a></li><li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/name">name</a></li><li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/page_action">page action</a></li><li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/permissions">permissions</a></li><li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/version">version</a></li><li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/web_accessible_resources">web_accessible_resources</a></li></ol> 
    </li> 
     
    <li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/SDK"><strong>Add-on SDK</strong></a></li> 
    <li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions#Getting_started">Getting started</a> 
      <ol> 
        <li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/SDK/Tutorials/Installation">Installation</a></li> 
        <li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/SDK/Tutorials/Getting_started">Getting started</a></li> 
        <li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/SDK/Tutorials/Troubleshooting">Troubleshooting</a></li> 
      </ol> 
    </li> 
     
    <li data-default-state="closed"><a href="../High-Level_APIs.html">High-Level APIs</a> 
      <ol><li><a href="../High-Level_APIs/addon-page.html">addon-page</a></li><li><a href="../High-Level_APIs/base64.html">base64</a></li><li><a href="../High-Level_APIs/clipboard.html">clipboard</a></li><li><a href="../High-Level_APIs/context-menu.html">context-menu</a></li><li><a href="../High-Level_APIs/hotkeys.html">hotkeys</a></li><li><a href="../High-Level_APIs/indexed-db.html">indexed-db</a></li><li><a href="../High-Level_APIs/l10n.html">l10n</a></li><li><a href="../High-Level_APIs/notifications.html">notifications</a></li><li><a href="../High-Level_APIs/page-mod.html">page-mod</a></li><li><a href="../High-Level_APIs/page-worker.html">page-worker</a></li><li><a href="../High-Level_APIs/panel.html">panel</a></li><li><a href="../High-Level_APIs/passwords.html">passwords</a></li><li><a href="../High-Level_APIs/private-browsing.html">private-browsing</a></li><li><a href="../High-Level_APIs/querystring.html">querystring</a></li><li><a href="../High-Level_APIs/request.html">request</a></li><li><a href="../High-Level_APIs/selection.html">selection</a></li><li><a href="../High-Level_APIs/self.html">self</a></li><li><a href="../High-Level_APIs/simple-prefs.html">simple-prefs</a></li><li><a href="../High-Level_APIs/simple-storage.html">simple-storage</a></li><li><a href="../High-Level_APIs/system.html">system</a></li><li><a href="../High-Level_APIs/tabs.html">tabs</a></li><li><a href="../High-Level_APIs/timers.html">timers</a></li><li><a href="../High-Level_APIs/ui.html">ui</a></li><li><a href="../High-Level_APIs/url.html">url</a></li><li><a href="../High-Level_APIs/widget.html">widget</a></li><li><a href="../High-Level_APIs/windows.html">windows</a></li></ol> 
    </li> 
    <li data-default-state="open"><a href="../../../docs/Mozilla/Add-ons/SDK/Low-Level_APIs.png">Low-Level APIs</a> 
      <ol><li><a href="_loader.html">/loader</a></li><li><a href="chrome.html">chrome</a></li><li><a href="console_plain-text.html">console/plain-text</a></li><li><a href="console_traceback.html">console/traceback</a></li><li><a href="content_content.html">content/content</a></li><li><a href="content_loader.html">content/loader</a></li><li><a href="content_mod.html">content/mod</a></li><li><a href="content_symbiont.html">content/symbiont</a></li><li><a href="content_worker.html">content/worker</a></li><li><a href="core_heritage.html">core/heritage</a></li><li><a href="core_namespace.html">core/namespace</a></li><li><a href="core_promise.html">core/promise</a></li><li><a href="dev_panel.html">dev/panel</a></li><li><a href="event_core.html">event/core</a></li><li><a href="event_target.html">event/target</a></li><li><a href="frame_hidden-frame.html">frame/hidden-frame</a></li><li><a href="frame_utils.html">frame/utils</a></li><li><a href="fs_path.html">fs/path</a></li><li><a href="io_byte-streams.html">io/byte-streams</a></li><li><a href="io_file.html">io/file</a></li><li><a href="io_text-streams.html">io/text-streams</a></li><li><a href="lang_functional.html">lang/functional</a></li><li><a href="lang_type.html">lang/type</a></li><li><a href="loader_cuddlefish.html">loader/cuddlefish</a></li><li><a href="loader_sandbox.html">loader/sandbox</a></li><li><a href="net_url.html">net/url</a></li><li><a href="net_xhr.html">net/xhr</a></li><li><a href="places_bookmarks.html">places/bookmarks</a></li><li><a href="places_favicon.html">places/favicon</a></li><li><a href="places_history.html">places/history</a></li><li><a href="platform_xpcom.html">platform/xpcom</a></li><li><a href="preferences_event-target.html">preferences/event-target</a></li><li><a href="preferences_service.html">preferences/service</a></li><li><a href="remote_child.html">remote/child</a></li><li><a href="remote_parent.html">remote/parent</a></li><li><a href="stylesheet_style.html">stylesheet/style</a></li><li><a href="stylesheet_utils.html">stylesheet/utils</a></li><li><a href="system_child_process.html">system/child_process</a></li><li><a href="system_environment.html">system/environment</a></li><li><a href="system_events.html">system/events</a></li><li><a href="system_runtime.html">system/runtime</a></li><li><a href="system_unload.html">system/unload</a></li><li><a href="system_xul-app.html">system/xul-app</a></li><li><a href="tabs_utils.html">tabs/utils</a></li><li><a href="test_assert.html">test/assert</a></li><li><a href="test_harness.html">test/harness</a></li><li><a href="test_httpd.html">test/httpd</a></li><li><a href="test_runner.html">test/runner</a></li><li><a href="test_utils.html">test/utils</a></li><li><a href="ui_button_action.html">ui/button/action</a></li><li><a href="ui_button_toggle.html">ui/button/toggle</a></li><li><a href="ui_frame.html">ui/frame</a></li><li><a href="ui_id.html">ui/id</a></li><li><a href="ui_sidebar.html">ui/sidebar</a></li><li><a href="ui_toolbar.html">ui/toolbar</a></li><li><a href="util_array.html">util/array</a></li><li><a href="util_collection.html">util/collection</a></li><li><a href="util_deprecate.html">util/deprecate</a></li><li><a href="util_list.html">util/list</a></li><li><a href="util_match-pattern.html">util/match-pattern</a></li><li><a href="util_object.html">util/object</a></li><li><a href="util_uuid.html">util/uuid</a></li><li><a href="window_utils.html">window/utils</a></li></ol> 
    </li>  
 
    <li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/Firefox_for_Android"><strong>Firefox for Android</strong></a></li> 
    <li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/Firefox_for_Android">Getting started</a> 
      <ol> 
        <li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/Firefox_for_Android/Walkthrough">Walkthrough</a></li> 
        <li><a href="en-US/docs/Tools/Remote_Debugging/Debugging_Firefox_for_Android_with_WebIDE.html">Debugging</a></li> 
        <li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/Firefox_for_Android/Code_snippets">Code snippets</a></li> 
      </ol> 
    </li> 
 
    <li><a href="../../../docs/Mozilla/Add-ons/Firefox_for_Android/API.png">APIs</a> 
      <ol><li><a href="../../Firefox_for_Android/API/Accounts.html">Accounts.jsm</a></li><li><a href="../../Firefox_for_Android/API/BrowserApp.html">BrowserApp</a></li><li><a href="../../Firefox_for_Android/API/HelperApps.html">HelperApps.jsm</a></li><li><a href="../../../docs/Mozilla/Add-ons/Firefox_for_Android/API/Home.png">Home.jsm</a></li><li><a href="../../Firefox_for_Android/API/HomeProvider.html">HomeProvider.jsm</a></li><li><a href="../../Firefox_for_Android/API/JavaAddonManager.html">JavaAddonManager.jsm</a></li><li><a href="../../../docs/Mozilla/Add-ons/Firefox_for_Android/API/NativeWindow.png">NativeWindow</a></li><li><a href="../../Firefox_for_Android/API/Notifications.html">Notifications.jsm</a></li><li><a href="../../Firefox_for_Android/API/PageActions.html">PageActions.jsm</a></li><li><a href="../../Firefox_for_Android/API/Prompt.html">Prompt.jsm</a></li><li><a href="../../Firefox_for_Android/API/Snackbars.html">Snackbars.jsm</a></li><li><a href="../../Firefox_for_Android/API/Sound.html">Sound.jsm</a></li><li><a href="../../Firefox_for_Android/API/Tab.html">Tab</a></li></ol> 
    </li>  
 
    <li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/Overlay_Extensions"><strong>Legacy</strong></a></li> 
     
    <li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/Bootstrapped_Extensions">Restartless extensions</a> 
      <ol> 
        <li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/Bootstrapped_extensions">Overview</a></li> 
      </ol> 
    </li> 
    <li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/Overlay_Extensions">Overlay extensions</a> 
      <ol> 
        <li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/Overlay_Extensions">Overview</a></li> 
      </ol> 
    </li> 
 
    <li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/Themes"><strong>Themes</strong></a></li> 
     
    <li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/Themes/Background">Lightweight themes</a> 
      <ol> 
        <li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/Themes/Background">Overview</a></li> 
      </ol> 
    </li> 
    <li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/Themes/Complete_themes">Complete themes</a> 
      <ol> 
        <li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/Themes">Overview</a></li> 
      </ol> 
    </li> 
 
    <li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/Distribution"><strong>Publishing add-ons</strong></a></li> 
    <li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/Distribution">Guides</a> 
      <ol> 
        <li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/Distribution">Signing and distribution overview</a></li> 
        <li><a href="https://addons.mozilla.org/developers/addon/submit/">Submit an add-on</a></li> 
        <li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/AMO/Policy/Reviews">Review policies</a></li> 
        <li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/AMO/Policy/Agreement">Developer agreement</a></li> 
        <li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/AMO/Policy/Featured">Featured add-ons</a></li> 
        <li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/AMO/Policy/Contact">Contact addons.mozilla.org</a></li> 
      </ol> 
    </li> 
 
    <li><a href="https://discourse.mozilla-community.org/c/add-ons"><strong>Community and support</strong></a></li> 
    <li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/Channels">Channels</a> 
      <ol> 
        <li><a href="https://blog.mozilla.org/addons">Add-ons blog</a></li> 
        <li><a href="https://discourse.mozilla-community.org/c/add-ons">Add-on forums</a></li> 
        <li><a href="http://stackoverflow.com/questions/tagged/firefox-addon">Stack Overflow</a></li> 
        <li><a href="https://groups.google.com/forum/#!forum/mozilla.dev.extensions">Development newsgroup</a></li> 
        <li><a href="irc://irc.mozilla.org/extdev">IRC Channel</a></li> 
      </ol> 
    </li> 
  </ol> 

  </div>
                

                <!-- approvals -->
                

              

              </div>
            
          </div>
        </div>
      </div>
    </div> <!-- ends "main-content" -->

  <menu type="context" id="edit-history-menu">
    <menuitem data-action="/en-US/docs/Mozilla/Add-ons/SDK/Low-Level_APIs/_loader$edit" label="Edit page"></menuitem>
    <menuitem data-action="/en-US/docs/Mozilla/Add-ons/SDK/Low-Level_APIs/_loader$history" label="View page history"></menuitem>
  </menu>

  </div></main>

  <!-- Footer -->
  <footer><div class="center">
    <div class="column-container">
      <div class="column-main">
        
        <div class="contentinfo">
          <p>© 2005-2016 Mozilla Developer Network and individual contributors.</p> <p>Content is available under <a href="https://developer.mozilla.org/en-US/docs/MDN/About#Copyrights_and_licenses">these licenses</a>.</p>
          <ul>
            <li><a href="https://developer.mozilla.org/docs/MDN/About">About MDN</a></li>
            <li><a href="http://www.mozilla.org/about/legal/terms/mozilla">Terms</a></li>
            <li><a href="http://www.mozilla.org/privacy/websites/">Privacy</a></li>
            <li><a href="http://www.mozilla.org/privacy/websites/#cookies">Cookies</a></li>
            <li><a href="http://github.com/mozilla/kuma">Contribute to the code</a></li>
          </ul>
        <p></p>
        
        </div>
      </div>
      <div class="column-strip">
        
          
  

        
      </div>
    </div>
  </div></footer>

  <!-- site js -->
  
    
    <!--[if lte IE 8]><script type="text/javascript" src="https://developer.cdn.mozilla.net/static/build/js/selectivizr.091e18cf669b.js" charset="utf-8"></script><![endif]-->

    <form id="_persona_login" method="post" action="https://developer.mozilla.org/users/persona/signin" data-csrf-token-url="/users/persona/csrf" data-request="{&quot;siteName&quot;: &quot;Mozilla Developer Network&quot;, &quot;siteLogo&quot;: &quot;/static/img/opengraph-logo.png&quot;}" data-persona-script="../../../../../login.persona.org/include.js">
  <input type="hidden" name="csrfmiddlewaretoken" value="" id="_persona_csrf_token">
  <input type="hidden" name="next" value="" id="_persona_next_url">
  <input type="hidden" name="process" value="" id="_persona_process">
  <input type="hidden" name="assertion" id="_persona_assertion">
</form>

    <script type="text/javascript" src="../../../../../developer.cdn.mozilla.net/static/build/js/main.a7b27a25fb9c.js" charset="utf-8"></script>

      <script>
        if(window.mdn && mdn.analytics) mdn.analytics.trackOutboundLinks();
      </script>

    
    <script async="" type="text/javascript" src="../../../../../developer.cdn.mozilla.net/static/jsi18n/en-us/javascript.4fef8f9a3076.js"></script>
  
    <script async="" type="text/javascript" src="../../../../../developer.cdn.mozilla.net/static/build/js/syntax-prism-min.js" charset="utf-8"></script><script type="text/javascript" src="../../../../../developer.cdn.mozilla.net/static/jsi18n/en-us/javascript.4fef8f9a3076.js"></script>
  
    <script async="" type="text/javascript" src="../../../../../developer.cdn.mozilla.net/static/build/js/wiki.bd71ca9fd27d.js" charset="utf-8" id="wikiscript"></script>

  

  <script async="" type="text/javascript" src="../../../../../developer.cdn.mozilla.net/static/build/js/helpfulness.7b208a764d28.js" charset="utf-8"></script>

  
    <script type="text/javascript">
        (function($) {
            $('#wikiArticle').children('h2[id]').each(function() {
                var id = $(this).attr('id');
                var href = '/en-US/docs/Mozilla/Add-ons/SDK/Low-Level_APIs/_loader$edit#' + id;

                $('<a>').attr({
                    href: href,
                    'class': 'button section-edit only-icon'
                })
                .append($('<i aria-hidden="true" class="icon-pencil"></i>'))
                .append($('<span>'))
                .find('span')
                .text(gettext('Edit'))
                .end()
                .on('click', function(e) {
                    e.preventDefault();

                    mdn.analytics.trackEvent({
                        category: 'Section Edit',
                        action: id
                    }, function() {
                        window.location = href;
                    });
                })
                .appendTo(this);
            });
        })(jQuery);
    </script>
  



<!-- Mirrored from developer.mozilla.org/en-US/Add-ons/SDK/Low-Level_APIs/_loader by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 01 May 2016 17:26:11 GMT -->
</body></html>