<html><!-- Mirrored from developer.mozilla.org/en-US/docs/Mozilla/JavaScript_code_modules/OSFile.jsm/OS.File.DirectoryIterator_for_the_main_thread by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 01 May 2016 20:17:39 GMT --><!-- Added by HTTrack --><head><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->

  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=Edge">
  <script async="" src="../../../../../../www.google-analytics.com/analytics.js"></script><script>(function(d) { d.className = d.className.replace(/\bno-js/, ''); })(document.documentElement);</script>
  
    
  

  
  <title>OS.File.DirectoryIterator for the main thread</title>

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="robots" content="index, follow">
  <link rel="home" href="https://developer.mozilla.org/en-US/">
  <link rel="copyright" href="#copyright">

  
    
    
    <link href="../../../../../../developer.cdn.mozilla.net/static/build/styles/mdn.593f20d8c365.css" rel="stylesheet" type="text/css">

    
  
    <link href="../../../../../../developer.cdn.mozilla.net/static/build/styles/wiki.13dd9abdfb62.css" rel="stylesheet" type="text/css">

    

    

  <!-- common social tags -->
  
  <meta property="og:type" content="website">
  <meta property="og:image" content="https://developer.cdn.mozilla.net/static/img/opengraph-logo.dc4e08e2f6af.png">
  <meta property="og:site_name" content="Mozilla Developer Network">
  <meta name="twitter:card" content="summary">
  <meta name="twitter:image" content="https://developer.cdn.mozilla.net/static/img/opengraph-logo.dc4e08e2f6af.png">
  <meta name="twitter:site" content="@MozDevNet">
  <meta name="twitter:creator" content="@MozDevNet">

  <link rel="search" type="application/opensearchdescription+xml" href="https://developer.mozilla.org/en-US/search/xml" title="Mozilla Developer Network">

  <!-- third-generation iPad with high-resolution Retina display: -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="../../../../../../developer.cdn.mozilla.net/static/img/favicon144.a6e4162070f4.png">
  <!-- iPhone with high-resolution Retina display: -->
  <link rel="apple-touch-icon-precomposed" sizes="114x114" href="../../../../../../developer.cdn.mozilla.net/static/img/favicon114.0e9fabd44f85.png">
  <!-- first- and second-generation iPad: -->
  <link rel="apple-touch-icon-precomposed" sizes="72x72" href="../../../../../../developer.cdn.mozilla.net/static/img/favicon72.8ff9d87c82a0.png">
  <!-- non-Retina iPhone, iPod Touch, and Android 2.1+ devices: -->
  <link rel="apple-touch-icon-precomposed" href="../../../../../../developer.cdn.mozilla.net/static/img/favicon57.a2490b9a2d76.png">
  <!-- basic favicon -->
  
    
  
  <link rel="shortcut icon" href="../../../../../../developer.cdn.mozilla.net/static/img/favicon32.e02854fdcf73.png">
  <!--[if IE]>
  <meta http-equiv="imagetoolbar" content="no">
  <script type="text/javascript" src="https://developer.cdn.mozilla.net/static/build/js/html5shiv.3948ccddab6f.js" charset="utf-8"></script>
  <![endif]-->

  
  <link rel="alternate" type="application/json" href="https://developer.mozilla.org/en-US/docs/Mozilla/JavaScript_code_modules/OSFile.jsm/OS.File.DirectoryIterator_for_the_main_thread$json">
  <link rel="canonical" href="OS.File-3.html">

  

  <!-- document-specific social tags -->
  <meta property="og:title" content="OS.File.DirectoryIterator for the main thread">
  <meta property="og:url" content="https://developer.mozilla.org/en-US/docs/Mozilla/JavaScript_code_modules/OSFile.jsm/OS.File.DirectoryIterator_for_the_main_thread">
  <meta name="twitter:url" content="https://developer.mozilla.org/en-US/docs/Mozilla/JavaScript_code_modules/OSFile.jsm/OS.File.DirectoryIterator_for_the_main_thread">
  <meta name="twitter:title" content="OS.File.DirectoryIterator for the main thread">
  
  <meta property="og:description" content="This document presents the mechanisms for walking the contents of a directory from the main thread. For other uses of OS.File and OS.File.DirectoryIterator, please see the main document on OS.File.">
  <meta name="description" content="This document presents the mechanisms for walking the contents of a directory from the main thread. For other uses of OS.File and OS.File.DirectoryIterator, please see the main document on OS.File.">
  <meta name="twitter:description" content="This document presents the mechanisms for walking the contents of a directory from the main thread. For other uses of OS.File and OS.File.DirectoryIterator, please see the main document on OS.File.">
  

  
    



  
</head>
<body data-slug="Mozilla/JavaScript_code_modules/OSFile.jsm/OS.File.DirectoryIterator_for_the_main_thread" contextmenu="edit-history-menu" data-search-url="" class="document  ">

  <script type="text/javascript">
    (function(win) {
        'use strict';

        
            (function(){
  var FLAGS = {
    'compat_api': false,'kumaediting': false,'page_move': false,'registration_disabled': false,'search_suggestions': false,'section_edit': true,'spam_admin_override': false,'spam_checks_enabled': true,'spam_spammer_override': false,'spam_submissions_enabled': false,'spam_testing_mode': false,'wiki_samples': true,'wiki_spam_exempted': false,'wiki_spam_training': true
    },
    SWITCHES = {
    'wiki_error_on_delete': false,'wiki_force_immediate_rendering': false,'enable_optimizely': false,'welcome_email': true,'application_ACAO': true,'store_revision_ips': true,'dumb_doc_urls': true
    },
    SAMPLES = {
    
    };
  window.waffle = {
    "flag_is_active": function waffle_flag(flag_name) {
      
      return !!FLAGS[flag_name];
    },
    "switch_is_active": function waffle_switch(switch_name) {
      
      return !!SWITCHES[switch_name];
    },
    "sample_is_active": function waffle_sample(sample_name) {
      
      return !!SAMPLES[sample_name];
    },
    "FLAGS": FLAGS,
    "SWITCHES": SWITCHES,
    "SAMPLES": SAMPLES
  };
})();

        

        // This needs to be set before ckeditor.js loads
        window.CKEDITOR_BASEPATH = 'https://developer.mozilla.org/static/js/libs/ckeditor/build/ckeditor/';

        // This represents the site configuration
        win.mdn = {
            // Properties and settings for CKEditor will go here
            ckeditor: {},
            // Feature test results and methods will be placed here
            features: {},
            // The path to static assets (images, CSS, JS) in MDN
            staticPath: 'https://developer.cdn.mozilla.net/static/',
            // Optimizely API
            optimizely: win['optimizely'] || [],
            // Site notifications
            
            notifications: [],
            
            // Wiki-specific settings will be placed here
            wiki: {
                autosuggestTitleUrl: '/en-US/docs/get-documents'
            },
            // Assets that need to be dynamically injected
            assets_disabled: {
                css: {
                    'editor-content': ['https://developer.cdn.mozilla.net/static/build/styles/editor-content.3d79df72080d.css',],
                    'wiki-compat-tables': ['https://developer.cdn.mozilla.net/static/build/styles/wiki-compat-tables.f3a3bfce97a1.css',]
                },
                js: {
                    'syntax-prism': ['https://developer.cdn.mozilla.net/static/build/js/syntax-prism.7a66ddfa68bf.js',],
                    'wiki-compat-tables': ['https://developer.cdn.mozilla.net/static/build/js/wiki-compat-tables.14ce5dcb2c3d.js',]
                }
            }
        };
    })(this);
</script>

  

  <ul id="nav-access">
    <li><a href="#document-main" id="skip-main">Skip to main content</a></li>
    <li><a id="skip-language" href="#language">Select language</a></li>
    
      <li><a href="#q" id="skip-search">Skip to search</a></li>
    
  </ul>

  <!-- Header -->
  <header id="main-header"><div class="center">

    <div id="tabzilla">
        <a href="http://www.mozilla.org/" class="no-track">mozilla</a>
    </div>

    <div class="clear header-clear"></div>

    <a href="https://developer.mozilla.org/en-US/" class="logo">Mozilla Developer Network</a>

    <div id="nav-sec">
        
                  <ul>
                  <li>

    

    <form>
      <div class="oauth-login-container">
          <div class="oauth-login-options" tabindex="0">
              <span class="oauth-login-options-text">
                Sign in
              </span>
              <span class="oauth-icon oauth-github" data-service="GitHub" data-href="/users/github/login/?next=%2Fen-US%2Fdocs%2FMozilla%2FJavaScript_code_modules%2FOSFile.jsm%2FOS.File.DirectoryIterator_for_the_main_thread" title="GitHub"><i class="icon-github" aria-hidden="true"></i></span>
              <span class="oauth-icon oauth-persona launch-persona-login wait-for-persona disabled" data-service="Persona" data-next="/en-US/docs/Mozilla/JavaScript_code_modules/OSFile.jsm/OS.File.DirectoryIterator_for_the_main_thread" title="Persona"><i class="icon-user" aria-hidden="true"></i></span>
          </div>
          <div class="oauth-login-picker" aria-hidden="true">
              <ul>
                  <li class="wait-for-persona disabled"><a href="https://developer.mozilla.org/en-US/users/signin" class="login-link launch-persona-login" data-next="/en-US/docs/Mozilla/JavaScript_code_modules/OSFile.jsm/OS.File.DirectoryIterator_for_the_main_thread" data-service="Persona"><i class="icon-user" aria-hidden="true"></i>Persona</a></li>
                  <li><a href="https://developer.mozilla.org/users/github/login/?next=%2Fen-US%2Fdocs%2FMozilla%2FJavaScript_code_modules%2FOSFile.jsm%2FOS.File.DirectoryIterator_for_the_main_thread" class="login-link" data-service="GitHub"><i class="icon-github" aria-hidden="true"></i>GitHub</a></li>
              </ul>
              
          </div>
      </div>
    </form>
</li>
                </ul>
        
    </div>

    <nav id="main-nav" role="navigation"><ul><li><a href="https://developer.mozilla.org/en-US/docs/Web">Web Platform<i aria-hidden="true" class="icon-caret-down"></i></a>

        <div class="submenu submenu-cols-2 js-submenu" id="nav-platform-submenu">
          <div class="submenu-column">
            <div class="title">Technologies</div>
            <ul>
              <li><a href="https://developer.mozilla.org/en-US/docs/Web/HTML">HTML</a></li>
              <li><a href="https://developer.mozilla.org/en-US/docs/Web/CSS">CSS</a></li>
              <li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript">JavaScript</a></li>
              <li><a href="https://developer.mozilla.org/en-US/docs/Web/Guide/Graphics">Graphics</a></li>
              <li><a href="../../../Web/API.html">APIs / DOM</a></li>
              <li><a href="https://developer.mozilla.org/en-US/docs/Web/Apps">Apps</a></li>
              <li><a href="https://developer.mozilla.org/en-US/docs/Web/MathML">MathML</a></li>
            </ul>
          </div><div class="submenu-column last">
            <div class="title">References &amp; Guides</div>
            <ul>
              <li><a href="https://developer.mozilla.org/en-US/docs/Learn">Learn the Web</a></li>
              <li><a href="https://developer.mozilla.org/en-US/docs/Web/Tutorials">Tutorials</a></li>
              <li><a href="https://developer.mozilla.org/en-US/docs/Web/Reference">References</a></li>
              <li><a href="https://developer.mozilla.org/en-US/docs/Web/Guide">Developer Guides</a></li>
              <li><a href="https://developer.mozilla.org/en-US/docs/Web/Accessibility">Accessibility</a></li>
              <li><a href="https://developer.mozilla.org/en-US/docs/Web">...more docs</a></li>
            </ul>
          </div>
        </div>
      </li><li><a href="https://developer.mozilla.org/en-US/docs/Zones">Mozilla Docs<i aria-hidden="true" class="icon-caret-down"></i></a>

        <div class="submenu js-submenu" id="nav-zones-submenu">
          <div class="submenu-column">
            <ul>
              <li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons">Add-ons</a></li>
              <li><a href="https://developer.mozilla.org/en-US/docs/Firefox">Firefox</a></li>
              <li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Marketplace">Firefox Marketplace</a></li>
              <li><a href="https://developer.mozilla.org/en-US/docs/Firefox_OS">Firefox OS</a></li>
              <li><a href="https://developer.mozilla.org/en-US/docs/Persona">Persona</a></li>
            </ul>
          </div>
        </div>
      </li><li><a href="https://developer.mozilla.org/en-US/docs/Tools">Developer Tools</a></li><li><a href="https://developer.mozilla.org/en-US/docs/MDN/Feedback">Feedback<i aria-hidden="true" class="icon-caret-down"></i></a>

        <div class="submenu js-submenu" id="nav-contact-submenu">
          <div class="submenu-column">
            <ul>
                <li><a href="https://support.mozilla.org/">Get Firefox help<i aria-hidden="true" class="icon-external-link"></i></a></li>
                <li><a href="http://stackoverflow.com/">Get web development help<i aria-hidden="true" class="icon-external-link"></i></a></li>
            </ul>
            <ul>
              <li><a href="https://developer.mozilla.org/en-US/docs/MDN/Community">Join the MDN community</a></li>
              <li><a href="https://bugzilla.mozilla.org/form.doc">Report a content problem<i aria-hidden="true" class="icon-external-link"></i></a></li>
              <li><a href="https://bugzilla.mozilla.org/form.mdn">Report a bug<i aria-hidden="true" class="icon-external-link"></i></a></li>
            </ul>
          </div>
        </div>

      </li><li class="nav-search-link"><a href="https://developer.mozilla.org/en-US/search" title="Search"><i aria-hidden="true" class="icon-search"></i></a></li><li class="main-nav-search"><form action="https://developer.mozilla.org/en-US/search" method="get" role="search">
        <div class="search-wrap">
          <label for="main-q" class="offscreen">Search</label>
          <input type="search" id="main-q" name="q" placeholder="Search" data-value="" value="">
          <span class="search-trigger"><i aria-hidden="true" class="icon-search"></i></span>&nbsp;
          <button type="submit" class="offscreen">Search</button>
        </div>
      </form></li></ul></nav>
  </div></header>

  <!-- Content will go here -->
  <main id="content"><div class="center clear">
  

   <!-- end is_zone -->

    <div class="wiki-main-content" id="document-main"><div class="center">
      
      <div class="article-meta">
        <!-- action buttons -->
        

  
    
  

  
    
  

  

  <ul class="page-buttons" data-sticky="false">
      
      <li><button id="languages-menu" class="transparent" aria-haspopup="true" aria-owns="languages-menu-submenu" aria-expanded="false"><span>Languages</span><i aria-hidden="true" class="icon-globe"></i></button>

        <div class="submenu js-submenu" id="languages-menu-submenu">
          <div class="submenu-column">
            <ul id="translations">
              
                <li class="smaller">No translations exist for this article.</li>
              

              
                <li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/JavaScript_code_modules/OSFile.jsm/OS.File.DirectoryIterator_for_the_main_thread$locales" rel="nofollow, noindex" id="translations-add">Add a translation</a></li>
              
            </ul>
          </div>
        </div>
      </li>

      <li class="page-buttons-edit"><a href="https://developer.mozilla.org/en-US/docs/Mozilla/JavaScript_code_modules/OSFile.jsm/OS.File.DirectoryIterator_for_the_main_thread$edit" class="button" data-optimizely-hook="button-edit-doc" id="edit-button">Edit<i aria-hidden="true" class="icon-pencil"></i></a></li>

        

        <li><button id="advanced-menu" class="only-icon" aria-haspopup="true" aria-owns="advanced-menu-submenu" aria-expanded="false"><span>Advanced</span><i aria-hidden="true" class="icon-cog"></i></button>
        <div class="submenu js-submenu" id="advanced-menu-submenu">
          <!-- this page -->
          <div class="submenu-column">
            <div class="title">Advanced</div>
            <ul>
                <li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/JavaScript_code_modules/OSFile.jsm/OS.File.DirectoryIterator_for_the_main_thread$history" rel="nofollow, noindex">History</a></li>
                
                
                
                

                

                
                
                
                <li class="page-print"><a href="#" onclick="return window.print();">Print this article</a></li>
            </ul>
          </div>
        </div>
  </li></ul>

        <!-- crumbs -->
        
  <nav class="crumbs" role="navigation"><ol xmlns:v="http://rdf.data-vocabulary.org/#" aria-label="breadcrumbs">
    <li typeof="v:Breadcrumb"><a href="https://developer.mozilla.org/en-US" rel="v:url" property="v:title">MDN</a></li>
    
      <li class="crumb" typeof="v:Breadcrumb"><a href="https://developer.mozilla.org/en-US/docs/Mozilla" rel="v:url" property="v:title">Mozilla</a></li>
    
      <li class="crumb" typeof="v:Breadcrumb"><a href="https://developer.mozilla.org/en-US/docs/Mozilla/JavaScript_code_modules" rel="v:url" property="v:title">JavaScript code modules</a></li>
    
      <li class="crumb" typeof="v:Breadcrumb"><a href="../OSFile.html" rel="v:url" property="v:title">OSFile.jsm</a></li>
    
    <li class="crumb" typeof="v:Breadcrumb" property="v:title">OS.File.DirectoryIterator for the main thread</li>
  </ol></nav>
      </div>

      <!-- heading -->
      <div id="wiki-document-head" class="document-head">
          <span class="from-search-previous-box">
            <a class="button from-search-previous only-icon disabled" title="Previous Search Result" data-empty-title="No Previous Search Result"><i aria-hidden="true" class="icon-chevron-left"></i></a>
          </span>
          <span class="from-search-navigate-wrap">
            <a href="#" class="from-search-navigate"><span class="from-search-navigate-up"><i aria-hidden="true" class="icon-double-angle-up"></i></span><span class="from-search-navigate-down"><i aria-hidden="true" class="icon-double-angle-down"></i></span></a>
          </span>
          <div class="from-search-toc submenu">
            <span class="title">Your Search Results</span>
            <ol></ol>
          </div>
          <span class="from-search-next-box">
            <a class="button from-search-next only-icon disabled" title="Next Search Result" data-empty-title="No Previous Search Result"><i aria-hidden="true" class="icon-chevron-right"></i></a>
          </span>

        
        <div class="contributor-avatars" data-all-text="see all contributors" data-alternate-message="hide contributors">
            <ul>
            
                <li class="shown">
                <a href="https://developer.mozilla.org/en-US/profiles/Noitidart" title="View profile: Noitidart">
                <noscript data-width="34" data-height="34" data-class="avatar" data-alt="Noitidart" data-src="../../../../../../i2.wp.com/developer.cdn.mozilla.net/media/img/avatareb45.png?s=34&amp;r=pg&amp;d=https%3A%2F%2Fdeveloper.cdn.mozilla.net%2Fmedia%2Fimg%2Favatar.png">Noitidart</noscript></a>
                </li>
            
                <li class="shown">
                <a href="https://developer.mozilla.org/en-US/profiles/teoli" title="View profile: teoli">
                <noscript data-width="34" data-height="34" data-class="avatar" data-alt="teoli" data-src="../../../../../../secure.gravatar.com/avatar/d0d90148e08e3b64ccf75c46f31442c56c02.png?s=34&amp;r=pg&amp;d=https%3A%2F%2Fdeveloper.cdn.mozilla.net%2Fmedia%2Fimg%2Favatar.png">teoli</noscript></a>
                </li>
            
                <li class="shown">
                <a href="https://developer.mozilla.org/en-US/profiles/arai" title="View profile: arai">
                <noscript data-width="34" data-height="34" data-class="avatar" data-alt="arai" data-src="../../../../../../secure.gravatar.com/avatar/0432a84805ea7033f4646049963e3bf16c02.png?s=34&amp;r=pg&amp;d=https%3A%2F%2Fdeveloper.cdn.mozilla.net%2Fmedia%2Fimg%2Favatar.png">arai</noscript></a>
                </li>
            
                <li class="shown">
                <a href="https://developer.mozilla.org/en-US/profiles/kscarfone" title="View profile: kscarfone">
                <noscript data-width="34" data-height="34" data-class="avatar" data-alt="kscarfone" data-src="../../../../../../secure.gravatar.com/avatar/89c1e54a9703125168e40d22316d2b496c02.jpeg?s=34&amp;r=pg&amp;d=https%3A%2F%2Fdeveloper.cdn.mozilla.net%2Fmedia%2Fimg%2Favatar.png">kscarfone</noscript></a>
                </li>
            
                <li class="shown">
                <a href="https://developer.mozilla.org/en-US/profiles/Yoric" title="View profile: Yoric">
                <noscript data-width="34" data-height="34" data-class="avatar" data-alt="Yoric" data-src="../../../../../../secure.gravatar.com/avatar/92b1d0d78f138831a9343e0b6aa7b0286c02.jpeg?s=34&amp;r=pg&amp;d=https%3A%2F%2Fdeveloper.cdn.mozilla.net%2Fmedia%2Fimg%2Favatar.png">Yoric</noscript></a>
                </li>
            
            </ul>
        </div>
        

        <h1>OS.File.DirectoryIterator for the main thread</h1>

      </div>
      

      <!-- start the main content container -->
        <div id="wiki-column-container" class="wiki-right-present wiki-left-closed wiki-left-none">

          <!-- content row with three strips -->
          <div class="column-container column-container-reverse">

            
              <!-- TOC, approvals, etc -->
              <div class="column-strip wiki-column" id="wiki-right">
              
              <!-- table of contents -->
              <div id="toc" class="toc toggleable" data-closed="true">
                <a href="#toc" class="title toggler" data-open-icon="icon-plus" data-closed-icon="icon-minus">In This Article<i></i></a>
                <ol class="toggle-container">
                  <li><a href="#Using_OS.File.DirectoryIterator" rel="internal">Using OS.File.DirectoryIterator</a><ol><li><a href="#Example_Finding_the_subdirectories_of_a_directory_using_an_iterator_(TBD)" rel="internal">Example: Finding the subdirectories of a directory using an iterator (TBD)</a></li><li><a href="#Example_Sorting_files_by_last_modification_date" rel="internal">Example: Sorting files by last modification date</a></li><li><a href="#Example_Iterating_through_all_child_entries_of_directory" rel="internal">Example: Iterating through all child entries of directory</a></li><li><a href="#Example_Make_a_copy_of_a_directory_(uses_enumChildEntries_from_above)" rel="internal">Example: Make a copy of a directory (uses <code>enumChildEntries</code> from above)</a></li></ol></li><li><a href="#Instances_of_OS.File.DirectoryIterator" rel="internal">Instances of OS.File.DirectoryIterator</a><ol><li><a href="#General_remark" rel="internal">General remark</a></li><li><a href="#Constructor" rel="internal">Constructor</a></li><li><a href="#Method_overview" rel="internal">Method overview</a></li><li><a href="#Methods" rel="internal">Methods</a><ol><li><a href="#close()" rel="internal">close()</a></li><li><a href="#forEach()" rel="internal">forEach()</a></li><li><a href="#nextBatch()" rel="internal">nextBatch()</a></li><li><a href="#next()" rel="internal">next()</a></li></ol></li></ol></li>
                </ol>
              </div>
              
              </div>
            

            
            
              
            

            <!-- center: main article content -->
            <div id="wiki-content" class="column-main wiki-column text-content">

              

              

              
                
                  <div class="warning warning-review">
                    <p>
                      This article needs a technical review. <a href="https://developer.mozilla.org/docs/MDN/Contribute/HowTo/Do_a_technical_review">How you can help.</a>
                    </p>
                  </div>
                
                
                
              
              

              <!-- just the article content -->
              <article id="wikiArticle">
                
                  
                    <p>This document presents the mechanisms for walking the contents of a directory <em>from the main thread</em>. For other uses of OS.File and OS.File.DirectoryIterator, please see the <a href="https://developer.mozilla.org/en-US/docs/JavaScript_OS.File" title="/en-US/docs/JavaScript_OS.File">main document on OS.File</a>.</p>

<h2 id="Using_OS.File.DirectoryIterator">Using OS.File.DirectoryIterator</h2>

<h3 id="Example_Finding_the_subdirectories_of_a_directory_using_an_iterator_(TBD)">Example: Finding the subdirectories of a directory using an iterator (TBD)</h3>

<p>The following snippet walks through the content of a directory, selecting subdirectories:</p>

<pre>// Open iterator
let iterator = new OS.File.DirectoryIterator(somePath);
let subdirs = [];
// Iterate through the directory
let promise = iterator.forEach(
  function onEntry(entry) {
    if (entry.isDir) {
      subdirs.push(entry);
    }
  }
);

// Finally, close the iterator
promise.then(
  function onSuccess() {
    iterator.close();
    return subdirs;
  },
  function onFailure(reason) {
    iterator.close();
    throw reason;
  }
);
</pre>

<p>Or a variant using <a href="http://taskjs.org/" class="external" title="http://taskjs.org/">Task.js</a> (or at least <a href="http://dxr.mozilla.org/mozilla-central/toolkit/content/Task.jsm.html" class="external" title="http://dxr.mozilla.org/mozilla-central/toolkit/content/Task.jsm.html">the subset already present on mozilla-central</a>):</p>

<pre class="brush: js">Task.spawn(function() {
  let iterator = new OS.File.DirectoryIterator(somePath);
  let subdirs = [];
  // Loop through all entries
  // (the loop ends with an exception).
  while (true) {
    let entry = yield iterator.next();
    subdirs.push(entry);
  }
}).then(
  null,
  // Finally, clean up
  function onFailure(reason) {
    iterator.close();
    if (reason != StopIteration) {
      throw reason;
    }
  }
);
</pre>

<h3 id="Example_Sorting_files_by_last_modification_date">Example: Sorting files by last modification date</h3>

<p>The following takes advantage of feature detection to minimize file I/O:</p>

<pre class="brush: js">let iterator = new OS.File.DirectoryIterator(somePath);
let entries = [];
let promise = iterator.forEach(
  function onEntry(entry) {
    if ("winLastWriteDate" in entry) {
      // Under Windows, additional information allows us to sort files immediately
      // without having to perform additional I/O.
      entries.push({entry: entry, creationDate: entry.winCreationDate});
    } else {
      // Under other OSes, we need to call OS.File.stat
      return OS.File.stat(entry.path).then(
        function onSuccess(info) {
          entries.push({entry:entry, creationDate: info.creationDate});
        }
      );
    }
  }
);
promise.then(
  function onSuccess() {
    // Close the iterator, sort the array, return it
    iterator.close();
    return entries.sort(function compare(a, b) {
      return a.creationDate - b.creationDate;
    });
  },
  function onFailure(reason) {
     // Close the iterator, propagate any error
    iterator.close();
    throw reason;
  }
);

</pre>

<p>Or a variant using <a href="http://taskjs.org/" class="external" title="http://taskjs.org/">Task.js</a> (or at least <a href="http://dxr.mozilla.org/mozilla-central/toolkit/content/Task.jsm.html" class="external" title="http://dxr.mozilla.org/mozilla-central/toolkit/content/Task.jsm.html">the subset already present on mozilla-central</a>):</p>

<pre class="brush: js">let iterator = new OS.File.DirectoryIterator(somePath);
let entries = [];
Task.spawn(function(){
  while (true) {
    let entry = yield iterator.next();
    if ("winLastWriteDate" in entry) {
      // Under Windows, additional information allows us to sort files immediately
      // without having to perform additional I/O.
      entries.push({entry: entry, creationDate: entry.winCreationDate});
    } else {
      // Under other OSes, we need to call OS.File.stat
      let info = yield OS.File.stat(entry.path);
      entries.push({entry:entry, creationDate: info.creationDate});
    }
  }
}).then(
  null,
  // Clean up and return
  function onFailure(reason) {
    iterator.close();
    if (reason != StopIteration) {
      throw reason;
    }
    return entries.sort(function compare(a, b) {
      return a.creationDate - b.creationDate;
    });
  }
);
</pre>

<h3 id="Example_Iterating_through_all_child_entries_of_directory">Example: Iterating through all child entries of directory</h3>

<div class="note">
<p>This example uses the Deferred function from here: <a href="../Promise.jsm/Deferred.html#Backwards_and_forwards_compatible_helper">Deferred</a>. Add-SDK devs should use the core/promise defer. For example <code>var deferred_enumChildEntries = new Deferred();</code> should be replaced with <code>var deferred-enumChildEntries = require('core/promise').defer()</code>, see here: <a href="../../../../Add-ons/SDK/Low-Level_APIs/core_promise.html#defer">core/promise :: defer</a>. Also, the <code>Promise.all</code> for Addon-SDK developers should also be replaced with<a href="../../../../Add-ons/SDK/Low-Level_APIs/core_promise.html#all"> core/promise :: all</a>, for example, the code below of <code>var promiseAll_itrSubdirs = Promise.all(promiseArr_itrSubdirs);</code> should be rewritten as <code>var promiseAll_itrSubdirs = require('sdk/core/promise').all(promiseArr_itrSubdirs);</code>.</p>
</div>

<p>The following function, <code>enumChildEntries</code> takes in a parameter of directory path and a callback known as delegate. It will go throgh all subdirectories and files contained till it reaches max_depth. The depth argument is for use by the function to track recursion. If the delegate returns true, it stops enumerating children.</p>

<pre>function enumChildEntries(pathToDir, delegate, max_depth, runDelegateOnRoot, depth) {
	// IMPORTANT: as dev calling this functiopn `depth` arg must ALWAYS be undefined (dont even set it to 0 or null, must completly omit setting it, or set it to undefined). this arg is meant for internal use for iteration
	// `delegate` is required
	// pathToDir is required, it is string
	// max_depth should be set to null/undefined if you want to enumerate till every last bit is enumerated. paths will be iterated to including max_depth.
	// if runDelegateOnRoot, then delegate runs on the root path with depth arg of -1
	// this function iterates all elements at depth i, then after all done then it iterates all at depth i + 1, and then so on
	// if arg of `runDelegateOnRoot` is true then minimum depth is -1 (and is of the root), otherwise min depth starts at 0, contents of root
	// if delegate returns true, it will stop iteration
	// if set max_depth to 0, it will just iterate immediate children of pathToDir, unlesss you set runDelegateOnRoot to true, then it will just run delegate on the root
	var deferredMain_enumChildEntries = new Deferred();
	
	if (depth === undefined) {
		// at root pathDir
		depth = 0;
		if (runDelegateOnRoot) {
			var entry = {
				isDir: true,
				name: OS.Path.basename(pathToDir),
				path: pathToDir
			};
			var rez_delegate = delegate(entry, -1);
			if (rez_delegate) {
				deferredMain_enumChildEntries.resolve(entry);
				return deferredMain_enumChildEntries.promise; // to break out of this func, as if i dont break here it will go on to iterate through this dir
			}
		}
	} else {
		depth++;
	}
	
	if ((max_depth === null || max_depth === undefined) || (depth &lt;= max_depth)) {
		var iterrator = new OS.File.DirectoryIterator(pathToDir);
		var subdirs = [];
		var promise_batch = iterrator.nextBatch();
		// :TODO: iterrator.close() somewhere!! maybe here as i dont use iterrator anymore after .nextBatch()
		promise_batch.then(
			function(aVal) {
				iterrator.close();
				console.log('Fullfilled - promise_batch - ', aVal);
				// start - do stuff here - promise_batch
				for (var i = 0; i &lt; aVal.length; i++) {
					if (aVal[i].isDir) {
						subdirs.push(aVal[i]);
					}
					var rez_delegate_on_child = delegate(aVal[i], depth);
					if (rez_delegate_on_child) {
						deferredMain_enumChildEntries.resolve(aVal[i]);
						return/* deferredMain_enumChildEntries.promise -- im pretty sure i dont need this, as of 040115*/; //to break out of this if loop i cant use break, because it will get into the subdir digging, so it will not see the `return deferredMain_enumChildEntries.promise` after this if block so i have to return deferredMain_enumChildEntries.promise here
					}
				}
				// finished running delegate on all items at this depth and delegate never returned true

				if (subdirs.length &gt; 0) {
					var promiseArr_itrSubdirs = [];
					for (var i = 0; i &lt; subdirs.length; i++) {
						promiseArr_itrSubdirs.push(enumChildEntries(subdirs[i].path, delegate, max_depth, null, depth)); //the runDelegateOnRoot arg doesnt matter here anymore as depth arg is specified
					}
					var promiseAll_itrSubdirs = Promise.all(promiseArr_itrSubdirs);
					promiseAll_itrSubdirs.then(
						function(aVal) {
							console.log('Fullfilled - promiseAll_itrSubdirs - ', aVal);
							// start - do stuff here - promiseAll_itrSubdirs
							deferredMain_enumChildEntries.resolve('done iterating all - including subdirs iteration is done - in pathToDir of: ' + pathToDir);
							// end - do stuff here - promiseAll_itrSubdirs
						},
						function(aReason) {
							var rejObj = {name:'promiseAll_itrSubdirs', aReason:aReason};
							rejObj.aExtra = 'meaning finished iterating all entries INCLUDING subitering subdirs in dir of pathToDir';
							rejobj.pathToDir = pathToDir;
							console.error('Rejected - promiseAll_itrSubdirs - ', rejObj);
							deferredMain_enumChildEntries.reject(rejObj);
						}
					).catch(
						function(aCaught) {
							var rejObj = {name:'promiseAll_itrSubdirs', aCaught:aCaught};
							console.error('Caught - promiseAll_itrSubdirs - ', rejObj);
							deferredMain_enumChildEntries.reject(rejObj);
						}
					);
				} else {
					deferredMain_enumChildEntries.resolve('done iterating all - no subdirs - in pathToDir of: ' + pathToDir);
				}
				// end - do stuff here - promise_batch
			},
			function(aReason) {
				iterrator.close();
				var rejObj = {name:'promise_batch', aReason:aReason};
				if (aReason.winLastError == 2) {
					rejObj.probableReason = 'directory at pathToDir doesnt exist';
				}
				console.error('Rejected - promise_batch - ', rejObj);
				deferredMain_enumChildEntries.reject(rejObj);
			}
		).catch(
			function(aCaught) {
				iterrator.close();
				var rejObj = {name:'promise_batch', aCaught:aCaught};
				console.error('Caught - promise_batch - ', rejObj);
				deferredMain_enumChildEntries.reject(rejObj);
			}
		);
	} else {
		deferredMain_enumChildEntries.resolve('max depth exceeded, so will not do it, at pathToDir of: ' + pathToDir);
	}

	return deferredMain_enumChildEntries.promise;
}

//start - helper function
function Deferred() {
	if (Promise.defer) {
		//need import of Promise.jsm for example: Cu.import('resource:/gree/modules/Promise.jsm');
		return Promise.defer();
	} else if (PromiseUtils.defer) {
		//need import of PromiseUtils.jsm for example: Cu.import('resource:/gree/modules/PromiseUtils.jsm');
		return PromiseUtils.defer();
	} else {
		/* A method to resolve the associated Promise with the value passed.
		 * If the promise is already settled it does nothing.
		 *
		 * @param {anything} value : This value is used to resolve the promise
		 * If the value is a Promise then the associated promise assumes the state
		 * of Promise passed as value.
		 */
		this.resolve = null;

		/* A method to reject the assocaited Promise with the value passed.
		 * If the promise is already settled it does nothing.
		 *
		 * @param {anything} reason: The reason for the rejection of the Promise.
		 * Generally its an Error object. If however a Promise is passed, then the Promise
		 * itself will be the reason for rejection no matter the state of the Promise.
		 */
		this.reject = null;

		/* A newly created Pomise object.
		 * Initially in pending state.
		 */
		this.promise = new Promise(function(resolve, reject) {
			this.resolve = resolve;
			this.reject = reject;
		}.bind(this));
		Object.freeze(this);
	}
}
// end - helper function
</pre>

<h5 id="Example_of_enumChildEntries">&nbsp;Example of enumChildEntries</h5>

<pre>/************ start usage **************/
var totalEntriesEnummed = 0; //meaning total number of entries ran delegate on, includes root dir
function delegate_handleEntry(entry) {
  // return true to make enumeration stop
  totalEntriesEnummed++;
  console.info('entry:', entry);
}

var pathToTarget = OS.Constants.Path.desktopDir;
var promise_enumEntries = enumChildEntries(pathToTarget, delegate_handleEntry, null /*to get all*/, false);
promise_enumEntries.then(
  function(aVal) {
    // on resolve, aVal is undefined if it went through all possible entries
    console.log('Fullfilled - promise_enumEntries - ', aVal);
    console.info('totalEntriesEnummed:', totalEntriesEnummed)
  },
  function(aReason) {
    console.error('Rejected - promise_enumEntries - ', aReason);
    throw {rejectorOf_promiseName:'promise_enumEntries', aReason:aReason};
  }
).catch(
  function(aCatch) {
    console.error('Caught - promise_enumEntries - ', aCatch);
    throw aCatch;
  }  
);
</pre>

<h5 id="Another_Example">Another Example</h5>

<pre>var delegate = function(aEntry, aDepth) {
  console.info('aDepth:', aDepth, 'aEntry:', aEntry.name);
}

enumChildEntries(OS.Path.join(OS.Constants.Path.desktopDir, 'p'), delegate, null, true).then(
  x =&gt; console.log('x:', x),
  y =&gt; console.error('y:', y)
).catch(
  z =&gt; console.error('z:', z)
);</pre>

<h3 id="Example_Make_a_copy_of_a_directory_(uses_enumChildEntries_from_above)">Example: Make a copy of a directory<em> (uses <code>enumChildEntries</code> from above)</em></h3>

<div class="note">
<p>This example uses the Deferred function from here: <a href="../Promise.jsm/Deferred.html#Backwards_and_forwards_compatible_helper">Deferred</a>. Add-SDK devs should use the core/promise defer. For example <code>var deferred_enumChildEntries = new Deferred();</code> should be replaced with <code>var deferred-enumChildEntries = require('core/promise').defer()</code>, see here: <a href="../../../../Add-ons/SDK/Low-Level_APIs/core_promise.html#defer">core/promise :: defer</a>. Also, the <code>Promise.all</code> for Addon-SDK developers should also be replaced with<a href="../../../../Add-ons/SDK/Low-Level_APIs/core_promise.html#all"> core/promise :: all</a>, for example, the code below of <code>var promiseAll_itrSubdirs = Promise.all(promiseArr_itrSubdirs);</code> should be rewritten as <code>var promiseAll_itrSubdirs = require('sdk/core/promise').all(promiseArr_itrSubdirs);</code>.</p>
</div>

<p>The following function, <code>duplicateDirAndContents</code> uses the above function of <code>enumChildEntries</code> to duplicate a directory, can set how deep the copy should go.</p>

<pre class="brush: js">// start - helper function for duplicateDirAndContents
function escapeRegExp(text) {
    if (!arguments.callee.sRE) {
        var specials = ['/', '.', '*', '+', '?', '|', '(', ')', '[', ']', '{', '}', '\\'];
        arguments.callee.sRE = new RegExp('(\\' + specials.join('|\\') + ')', 'g');
    }
    return text.replace(arguments.callee.sRE, '\\$1');
}
// end - helper function for duplicateDirAndContents

</pre>

<pre>function duplicateDirAndContents(pathToSrcDir, pathToDestDir, max_depth, targetDirExists) {
	// returns promise
	// copies all stuff at depth i, then does depth i + 1, then i + 2 depth, so on // does not start at depth i and if subdir found it doesnt start copying into that right away, it completes depth levels first, i should make this change in future though as enhancement
	// if targetDirExists mark as true, else, set to false. if you set to true when it does not exist, then promise will reject due to failing to copy to non-existant dir. if it does exist, and you set it to false, then you are just wasting a couple extra function calls, function will complete succesfully though, as it tries to make the dir but it will not overwrite if already found

	var deferred_duplicateDirAndContents = new Deferred();
	var promise_duplicateDirAndContents = deferred_duplicateDirAndContents.promise;

	var stuffToMakeAtDepth = [];
	var smallestDepth = 0;
	var largestDepth = 0;

	var delegate_handleEntry = function(entry, depth) {
		// return true to make enumeration stop
		if (depth &lt; smallestDepth) {
			smallestDepth = depth;
		}
		if (depth &gt; largestDepth) {
			largestDepth = depth;
		}
		stuffToMakeAtDepth.push({
			depth: depth,
			isDir: entry.isDir,
			path: entry.path
		});
	};

	var promise_collectAllPathsInSrcDir = enumChildEntries(pathToSrcDir, delegate_handleEntry, max_depth, !targetDirExists);
	
	promise_collectAllPathsInSrcDir.then(
		function(aVal) {
			console.log('Fullfilled - promise_collectAllPathsInSrcDir - ', aVal);
			// start - do stuff here - promise_collectAllPathsInSrcDir
			// start - promise generator func
			var curDepth = smallestDepth;
			var makeStuffsFor_CurDepth = function() {
				var promiseAllArr_madeForCurDepth = [];
				for (var i = 0; i &lt; stuffToMakeAtDepth.length; i++) {
					if (stuffToMakeAtDepth[i].depth == curDepth) {
						var copyToPath = stuffToMakeAtDepth[i].path.replace(new RegExp(escapeRegExp(pathToSrcDir), 'i'), pathToDestDir);
						promiseAllArr_madeForCurDepth.push(
							stuffToMakeAtDepth[i].isDir // if (stuffToMakeAtDepth[i].isDir) {
							?
								OS.File.makeDir(copyToPath)
							: // } else {
								OS.File.unixSymLink(stuffToMakeAtDepth[i].path, stuffToMakeAtDepth[i].path.replace(new RegExp(escapeRegExp(pathToSrcDir), 'i'), pathToDestDir))
								//OS.File.copy(stuffToMakeAtDepth[i].path, copyToPath)
							// }
						);
					}
				}
				var promiseAll_madeForCurDepth = Promise.all(promiseAllArr_madeForCurDepth);
				promiseAll_madeForCurDepth.then(
					function(aVal) {
						//console.log('Fullfilled - promiseAll_madeForCurDepth - ', aVal);
						// start - do stuff here - promiseAll_madeForCurDepth
						if (curDepth &lt; largestDepth) {
							curDepth++;
							makeStuffsFor_CurDepth();
						} else {
							deferred_duplicateDirAndContents.resolve('all depths made up to and including:' + largestDepth);
						}
						// end - do stuff here - promiseAll_madeForCurDepth
					},
					function(aReason) {
						var rejObj = {name:'promiseAll_madeForCurDepth', aReason:aReason};
						console.error('Rejected - promiseAll_madeForCurDepth - ', rejObj);
						deferred_duplicateDirAndContents.reject(rejObj);
					}
				).catch(
					function(aCaught) {
						var rejObj = {name:'promiseAll_madeForCurDepth', aCaught:aCaught};
						console.error('Caught - promiseAll_madeForCurDepth - ', rejObj);
						deferred_duplicateDirAndContents.reject(rejObj);
					}
				);
			};
			// end - promise generator func
			makeStuffsFor_CurDepth();
			// end - do stuff here - promise_collectAllPathsInSrcDir
		},
		function(aReason) {
			var rejObj = {name:'promise_collectAllPathsInSrcDir', aReason:aReason};
			console.error('Rejected - promise_collectAllPathsInSrcDir - ', rejObj);
			deferred_duplicateDirAndContents.reject(rejObj);
		}
	).catch(
		function(aCaught) {
			var rejObj = {name:'promise_collectAllPathsInSrcDir', aCaught:aCaught};
			console.error('Caught - promise_collectAllPathsInSrcDir - ', rejObj);
			deferred_duplicateDirAndContents.reject(rejObj);
		}
	);

	return promise_duplicateDirAndContents;
}</pre>

<h5 id="Example_Usage_of_duplicateDirAndContents">Example Usage of duplicateDirAndContents</h5>

<pre class="brush: js">var pathToTarget = OS.Path.join(OS.Constants.Path.desktopDir, 'trgt folder');
var pathToCreate = OS.Path.join(OS.Constants.Path.desktopDir, 'deep copied dir'); // does not have to exist, but if it doesnt, then make sure to pass last argument of duplicateDirAndContents of `targetDirExists` as false or null or undefined. dont pass true, otherwise you lied to it and it will reject as the destintation dir doesnt exist

var promise_dupeTrgFol = duplicateDirAndContents(pathToTarget, pathToCreate, 0, false);
promise_dupeTrgFol.then(
    function(aVal) {
        console.log('Fullfilled - promise_dupeTrgFol - ', aVal);
        return 'promise for enumChildEntries completed succesfully';
    },
    function(aReason) {
        var rejObj = {
            promiseName: 'promise_dupeTrgFol',
            aReason: aReason
        };
        console.error('Rejected - ' + rejObj.promiseName + ' - ', rejObj);
    }
).catch(
    function(aCaught) {
        console.error('Caught - promise_dupeTrgFol - ', aCaught);
    }
);</pre>

<h2 id="Instances_of_OS.File.DirectoryIterator">Instances of OS.File.DirectoryIterator</h2>

<h3 id="General_remark">General remark</h3>

<div class="warning">
<p>Instances of OS.File.DirectoryIterator use valuable system resources â€“ typically the same resources as files. There is a limit to the total number of files and directory iterators that can be open at any given time. Therefore, you should make sure that these resources are released as early as possible. To do this, you should use method <a href="#OS.File.DirectoryIterator.prototype.close" title="#OS.File.DirectoryIterator.prototype.close">close</a>().</p>
</div>

<h3 id="Constructor">Constructor</h3>

<pre class="brush: js">OS.File.DirectoryIterator(
  in string path,
  [optional] in object options
) throws <a href="OS.File-2.html" title="/en-US/docs/JavaScript_OS.File/OS.File.Error">OS.File.Error</a>
</pre>

<h5 id="Arguments">Arguments</h5>

<dl>
 <dt>path</dt>
 <dd>The complete path to a directory.</dd>
 <dt>options</dt>
 <dd>An object that may contain the following fields:</dd>
 <dt style="margin-left: 40px;">winPattern</dt>
 <dd style="margin-left: 40px;">(ignored on non-Windows platforms) This option accepts a pattern such as <code>"*.exe"</code> or <code>"*.txt"</code>. The iterator will only display items whose name matches this pattern.</dd>
</dl>

<h3 id="Method_overview">Method overview</h3>

<table>
 <tbody>
  <tr>
   <td>void <a href="#OS.File.DirectoryIterator.prototype.close" title="#OS.File.DirectoryIterator.prototype.close">close</a>()</td>
  </tr>
  <tr>
   <td>promise&lt;void&gt; <a href="#OS.File.DirectoryIterator.prototype.forEach" title="#OS.File.DirectoryIterator.prototype.forEach">forEach</a>(in function callback)</td>
  </tr>
  <tr>
   <td>promise&lt;Array&gt; <a href="#OS.File.DirectoryIterator.prototype.nextBatch" title="#OS.File.DirectoryIterator.prototype.nextBatch">nextBatch</a>([optional] in number length)</td>
  </tr>
  <tr>
   <td>promise&lt;Entry&gt; <a href="#OS.File.DirectoryIterator.prototype.next" title="#OS.File.DirectoryIterator.prototype.next">next</a>()</td>
  </tr>
 </tbody>
</table>

<h3 id="Methods">Methods</h3>

<h4 id="close()">close()<a name="OS.File.DirectoryIterator.prototype.close"></a></h4>

<p>Close the iterator, releasing the system resources it uses.</p>

<pre class="brush: js">void close()</pre>

<p>You should always call this method once you are done with an iterator. Calling this method several times is harmless. Calling this method while iterating through the directory is harmless but will stop the iteration.</p>

<h4 id="forEach()">forEach()<a name="OS.File.DirectoryIterator.prototype.forEach"></a></h4>

<p>Walk through the iterator</p>

<pre class="brush: js">promise&lt;void&gt; forEach(
  in function callback
)</pre>

<h5 id="Arguments_2">Arguments</h5>

<h5 id="Promise_resolves_to" class="note">Promise resolves to</h5>

<p class="note">Nothing - once the loop is complete</p>

<h5 id="Promise_rejects_to" class="note">Promise rejects to</h5>

<p class="note">&nbsp;</p>

<div class="note">
<p><strong>Promise-based loop</strong></p>

<p>Iteration takes place sequentially: the callback is called with the first file, then once the callback is complete with the second file, etc.</p>

<p>It is often quite useful to be able to return a promise. If the callback returns a promise, the loop continues only once the callback is resolved.</p>
If any of the callbacks throws an error or rejects a promise, the loop is stopped and rejects with the same error.</div>

<dl>
 <dt>callback</dt>
 <dd>A function. It will be applied to each entry in the directory successively, with the following arguments:</dd>
 <dt style="margin-left: 40px;">entry</dt>
 <dd style="margin-left: 40px;">An instance of <a href="OS.File.DirectoryIterator.html" title="/en-US/docs/JavaScript_OS.File/OS.File.DirectoryIterator.Entry">OS.File.DirectoryIterator.Entry</a>.</dd>
 <dt style="margin-left: 40px;">index</dt>
 <dd style="margin-left: 40px;">The index of the entry in the enumeration.</dd>
 <dt style="margin-left: 40px;">iterator</dt>
 <dd style="margin-left: 40px;">The iterator itself. You may stop the iteration by calling <code>iterator.close()</code>.</dd>
 <dt class="note">OS.File.Error</dt>
 <dd>In case of I/O error.</dd>
 <dt>Anything else</dt>
 <dd>In case one of the callbacks throws an error or rejects.</dd>
</dl>

<h4 id="nextBatch()">nextBatch()<a name="OS.File.DirectoryIterator.prototype.nextBatch"></a></h4>

<p>Return several entries at once.</p>

<pre class="brush: js">promise&lt;array&gt; nextBatch(
  [optional] in number entries
)</pre>

<h5 id="Arguments_3">Arguments</h5>

<dl>
 <dt>entries</dt>
 <dd>The number of entries to return at once. If unspecified, all entries.</dd>
</dl>

<h5 id="Promise_resolves_to_2">Promise resolves to</h5>

<p>An array containing <code>entries</code> entries, or less if there are not enough entries left in the directory. Once iteration is complete, calls to <code>nextBatch</code> return the empty array.</p>

<div class="note">
<p><strong>Performance note</strong></p>

<p>In some circumstances, you may wish to use this method instead of <a href="#OS.File.DirectoryIterator.prototype.forEach" title="#OS.File.DirectoryIterator.prototype.forEach">forEach</a> or <a href="#OS.File.DirectoryIterator.prototype.next" title="#OS.File.DirectoryIterator.prototype.next">next</a> for performance reasons, as it limits the number of synchronizations between threads.</p>
</div>

<h4 id="next()">next()<a name="OS.File.DirectoryIterator.prototype.next"></a></h4>

<p>Return the next entry in the directory.</p>

<pre class="brush: js">promise&lt;<a href="OS.File.DirectoryIterator.html" title="https://developer.mozilla.org/en-US/docs/JavaScript_OS.File/OS.File.DirectoryIterator.Entry">Entry</a>&gt; next()</pre>

<h5 id="Promise_resolves_to_3">Promise resolves to</h5>

<p>The next entry in the directory.</p>

<h5 id="Promise_rejects_to_2">Promise rejects to</h5>

<dl>
 <dt>OS.File.Error</dt>
 <dd>In case of file error.</dd>
 <dt>StopIteration</dt>
 <dd>If the method is called after the last entry has been returned. Note that this is the constant <code>StopIteration</code>, not a constructor.</dd>
</dl>
                  
                
              </article>

              

    
    
    

    
    
    

    <div class="share">
        <strong>Share:</strong>
        <ul>
            <li><a href="http://twitter.com/share?url=https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FMozilla%2FJavaScript_code_modules%2FOSFile.jsm%2FOS.File.DirectoryIterator_for_the_main_thread%3Futm_campaign%3Dshare%26utm_medium%3Ddoc%2Bshare%2Blink%26utm_source%3Dtwitter.com&amp;text=I+learned+about+OS.File.DirectoryIterator+for+the+main+thread+on+MDN." target="_blank" data-url="https://developer.mozilla.org/en-US/docs/Mozilla/JavaScript_code_modules/OSFile.jsm/OS.File.DirectoryIterator_for_the_main_thread?utm_campaign=share&amp;utm_medium=doc+share+link&amp;utm_source=twitter.com" data-title="I learned about OS.File.DirectoryIterator for the main thread on MDN." class="share-link twitter"><i aria-hidden="true" class="icon-twitter"></i>Twitter</a></li>
            <li><a href="http://facebook.com/sharer.php?s=100&amp;p[url]=https://developer.mozilla.org/en-US/docs/Mozilla/JavaScript_code_modules/OSFile.jsm/OS.File.DirectoryIterator_for_the_main_thread?utm_campaign=share&amp;utm_medium=doc+share+link&amp;utm_source=facebook.com" target="_blank" data-url="https://developer.mozilla.org/en-US/docs/Mozilla/JavaScript_code_modules/OSFile.jsm/OS.File.DirectoryIterator_for_the_main_thread?utm_campaign=share&amp;utm_medium=doc+share+link&amp;utm_source=facebook.com" data-title="I learned about OS.File.DirectoryIterator for the main thread on MDN." class="share-link facebook"><i aria-hidden="true" class="icon-facebook"></i>Facebook</a></li>
            <li><a href="https://plus.google.com/share?url=https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FMozilla%2FJavaScript_code_modules%2FOSFile.jsm%2FOS.File.DirectoryIterator_for_the_main_thread%3Futm_campaign%3Dshare%26utm_medium%3Ddoc%2Bshare%2Blink%26utm_source%3Dplus.google.com" target="_blank" data-url="https://developer.mozilla.org/en-US/docs/Mozilla/JavaScript_code_modules/OSFile.jsm/OS.File.DirectoryIterator_for_the_main_thread?utm_campaign=share&amp;utm_medium=doc+share+link&amp;utm_source=plus.google.com" data-title="I learned about OS.File.DirectoryIterator for the main thread on MDN." class="share-link gplus"><i aria-hidden="true" class="icon-google-plus"></i>Google+</a></li>
        </ul>
    </div>

              

                <!-- contributors -->
                <div class="wiki-block contributors">
                  <h2 class="offscreen">Document Tags and Contributors</h2>
                  
                  
  <div class="tag-attach-list contributors-sub">
    <i aria-hidden="true" class="icon-tags icon-fw"></i>
    <strong>Tags:</strong>&nbsp;
    <ul class="tags tags-small">
      
        <li><a href="https://developer.mozilla.org/en-US/docs/tag/JavaScript">JavaScript</a></li>
      
        <li><a href="https://developer.mozilla.org/en-US/docs/tag/Reference">Reference</a></li>
      
        <li><a href="https://developer.mozilla.org/en-US/docs/tag/RÃ©fÃ©rence">RÃ©fÃ©rence</a></li>
      
    </ul>
  </div>

                  
                    <div class="contributors-sub">
                      <i aria-hidden="true" class="icon-group icon-fw"></i>&nbsp;<strong>Contributors to this page:</strong> 
        <a href="https://developer.mozilla.org/en-US/profiles/Noitidart">Noitidart</a>, 
    
        <a href="https://developer.mozilla.org/en-US/profiles/teoli">teoli</a>, 
    
        <a href="https://developer.mozilla.org/en-US/profiles/arai">arai</a>, 
    
        <a href="https://developer.mozilla.org/en-US/profiles/kscarfone">kscarfone</a>, 
    
        <a href="https://developer.mozilla.org/en-US/profiles/Yoric">Yoric</a>
    
                    </div>
                  

                  
                    <div class="contributors-sub">
                      <i aria-hidden="true" class="icon-clock-o icon-fw"></i>&nbsp;<strong>Last updated by:</strong>
                      <a href="https://developer.mozilla.org/en-US/profiles/Noitidart">Noitidart</a>,
                      <time datetime="2015-09-17T10:54:41-07:00">Sep 17, 2015, 10:54:41 AM</time>
                    </div>
                  
                </div>
              
            </div>

            
          </div>
        </div>
      </div>
    </div> <!-- ends "main-content" -->

  <menu type="context" id="edit-history-menu">
    <menuitem data-action="/en-US/docs/Mozilla/JavaScript_code_modules/OSFile.jsm/OS.File.DirectoryIterator_for_the_main_thread$edit" label="Edit page"></menuitem>
    <menuitem data-action="/en-US/docs/Mozilla/JavaScript_code_modules/OSFile.jsm/OS.File.DirectoryIterator_for_the_main_thread$history" label="View page history"></menuitem>
  </menu>

  </div></main>

  <!-- Footer -->
  <footer><div class="center">
    <div class="column-container">
      <div class="column-main">
        
        <div class="contentinfo">
          <p>Â© 2005-2016 Mozilla Developer Network and individual contributors.</p> <p>Content is available under <a href="https://developer.mozilla.org/en-US/docs/MDN/About#Copyrights_and_licenses">these licenses</a>.</p>
          <ul>
            <li><a href="https://developer.mozilla.org/docs/MDN/About">About MDN</a></li>
            <li><a href="http://www.mozilla.org/about/legal/terms/mozilla">Terms</a></li>
            <li><a href="http://www.mozilla.org/privacy/websites/">Privacy</a></li>
            <li><a href="http://www.mozilla.org/privacy/websites/#cookies">Cookies</a></li>
            <li><a href="http://github.com/mozilla/kuma">Contribute to the code</a></li>
          </ul>
        <p></p>
        
        </div>
      </div>
      <div class="column-strip">
        
          
  

        
      </div>
    </div>
  </div></footer>

  <!-- site js -->
  
    
    <!--[if lte IE 8]><script type="text/javascript" src="https://developer.cdn.mozilla.net/static/build/js/selectivizr.091e18cf669b.js" charset="utf-8"></script><![endif]-->

    <form id="_persona_login" method="post" action="https://developer.mozilla.org/users/persona/signin" data-csrf-token-url="/users/persona/csrf" data-request="{&quot;siteName&quot;: &quot;Mozilla Developer Network&quot;, &quot;siteLogo&quot;: &quot;/static/img/opengraph-logo.png&quot;}" data-persona-script="../../../../../../login.persona.org/include.js">
  <input type="hidden" name="csrfmiddlewaretoken" value="" id="_persona_csrf_token">
  <input type="hidden" name="next" value="" id="_persona_next_url">
  <input type="hidden" name="process" value="" id="_persona_process">
  <input type="hidden" name="assertion" id="_persona_assertion">
</form>

    <script type="text/javascript" src="../../../../../../developer.cdn.mozilla.net/static/build/js/main.a7b27a25fb9c.js" charset="utf-8"></script>

      <script>
        if(window.mdn && mdn.analytics) mdn.analytics.trackOutboundLinks();
      </script>

    
    <script async="" type="text/javascript" src="../../../../../../developer.cdn.mozilla.net/static/jsi18n/en-us/javascript.4fef8f9a3076.js"></script>
  
    <script async="" type="text/javascript" src="../../../../../../developer.cdn.mozilla.net/static/build/js/syntax-prism-min.js" charset="utf-8"></script><script type="text/javascript" src="../../../../../../developer.cdn.mozilla.net/static/jsi18n/en-us/javascript.4fef8f9a3076.js"></script>
  
    <script async="" type="text/javascript" src="../../../../../../developer.cdn.mozilla.net/static/build/js/wiki.bd71ca9fd27d.js" charset="utf-8" id="wikiscript"></script>

  

  <script async="" type="text/javascript" src="../../../../../../developer.cdn.mozilla.net/static/build/js/helpfulness.7b208a764d28.js" charset="utf-8"></script>

  
    <script type="text/javascript">
        (function($) {
            $('#wikiArticle').children('h2[id]').each(function() {
                var id = $(this).attr('id');
                var href = '/en-US/docs/Mozilla/JavaScript_code_modules/OSFile.jsm/OS.File.DirectoryIterator_for_the_main_thread$edit#' + id;

                $('<a>').attr({
                    href: href,
                    'class': 'button section-edit only-icon'
                })
                .append($('<i aria-hidden="true" class="icon-pencil"></i>'))
                .append($('<span>'))
                .find('span')
                .text(gettext('Edit'))
                .end()
                .on('click', function(e) {
                    e.preventDefault();

                    mdn.analytics.trackEvent({
                        category: 'Section Edit',
                        action: id
                    }, function() {
                        window.location = href;
                    });
                })
                .appendTo(this);
            });
        })(jQuery);
    </script>
  



<!-- Mirrored from developer.mozilla.org/en-US/docs/Mozilla/JavaScript_code_modules/OSFile.jsm/OS.File.DirectoryIterator_for_the_main_thread by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 01 May 2016 20:17:40 GMT -->
</body></html>