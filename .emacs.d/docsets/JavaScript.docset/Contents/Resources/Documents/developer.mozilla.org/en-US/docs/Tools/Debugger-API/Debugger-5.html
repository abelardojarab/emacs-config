<html><!-- Mirrored from developer.mozilla.org/en-US/docs/Tools/Debugger-API/Debugger.Memory by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 01 Oct 2015 18:55:17 GMT --><!-- Added by HTTrack --><head><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->

  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=Edge"><script async="" src="../../../../../www.google-analytics.com/analytics.js"></script>
  <script>(function(d) { d.className = d.className.replace(/\bno-js/, ''); })(document.documentElement);</script>
        
    <title>Tools/Debugger-API/Debugger.Memory</title>

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="robots" content="index, follow">
  <link rel="home" href="https://developer.mozilla.org/en-US/">
  <link rel="copyright" href="#copyright">

              <link rel="stylesheet" media="all" href="../../../../../developer.cdn.mozilla.net/static/css/mdn-min2bff.css?build=2aab9d6">

      
    <link rel="stylesheet" media="all" href="../../../../../developer.cdn.mozilla.net/static/css/wiki-min2bff.css?build=2aab9d6">

    
                  <link rel="stylesheet" type="text/css" href="https://developer.mozilla.org/en-US/docs/Tools$styles">
          
  <!-- common social tags -->
    <meta property="og:type" content="website">
  <meta property="og:image" content="https://developer.cdn.mozilla.net/static/img/opengraph-logo.png">
  <meta property="og:site_name" content="Mozilla Developer Network">
  <meta name="twitter:card" content="summary">
  <meta name="twitter:image" content="https://developer.cdn.mozilla.net/static/img/opengraph-logo.png">
  <meta name="twitter:site" content="@MozDevNet">
  <meta name="twitter:creator" content="@MozDevNet">

  <link rel="search" type="application/opensearchdescription+xml" href="https://developer.mozilla.org/en-US/search/xml" title="Mozilla Developer Network">

  <!-- third-generation iPad with high-resolution Retina display: -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="../../../../../developer.cdn.mozilla.net/static/img/favicon144.png">
  <!-- iPhone with high-resolution Retina display: -->
  <link rel="apple-touch-icon-precomposed" sizes="114x114" href="../../../../../developer.cdn.mozilla.net/static/img/favicon114.png">
  <!-- first- and second-generation iPad: -->
  <link rel="apple-touch-icon-precomposed" sizes="72x72" href="../../../../../developer.cdn.mozilla.net/static/img/favicon72.png">
  <!-- non-Retina iPhone, iPod Touch, and Android 2.1+ devices: -->
  <link rel="apple-touch-icon-precomposed" href="../../../../../developer.cdn.mozilla.net/static/img/favicon57.png">
  <!-- basic favicon -->
          <link rel="shortcut icon" href="../../../../../developer.cdn.mozilla.net/static/img/favicon32.png">
  <!--[if IE]>
  <meta http-equiv="imagetoolbar" content="no">
  <script src="https://developer.cdn.mozilla.net/static/js/libs/html5.js"></script>
  <![endif]-->

    <link rel="alternate" type="application/json" href="https://developer.mozilla.org/en-US/docs/Tools/Debugger-API/Debugger.Memory$json">
  <link rel="canonical" href="Debugger-5.html">

  
  <!-- document-specific social tags -->
  <meta property="og:title" content="Tools/Debugger-API/Debugger.Memory">
  <meta property="og:url" content="https://developer.mozilla.org/en-US/docs/Tools/Debugger-API/Debugger.Memory">
  <meta name="twitter:url" content="https://developer.mozilla.org/en-US/docs/Tools/Debugger-API/Debugger.Memory">
  <meta name="twitter:title" content="Tools/Debugger-API/Debugger.Memory">
    <meta property="og:description" content="The Debugger API can help tools observe the debuggee’s memory use in various ways:">
  <meta name="description" content="The Debugger API can help tools observe the debuggee’s memory use in various ways:">
  <meta name="twitter:description" content="The Debugger API can help tools observe the debuggee’s memory use in various ways:">
  
      
  </head>
<body data-slug="Tools/Debugger-API/Debugger.Memory" contextmenu="edit-history-menu" data-search-url="" class="document zone ">

  <script type="text/javascript">
    

(function (globals) {

  var django = globals.django || (globals.django = {});

  
  django.pluralidx = function (count) { return (count == 1) ? 0 : 1; };
  

  
  /* gettext identity library */

  django.gettext = function (msgid) { return msgid; };
  django.ngettext = function (singular, plural, count) { return (count == 1) ? singular : plural; };
  django.gettext_noop = function (msgid) { return msgid; };
  django.pgettext = function (context, msgid) { return msgid; };
  django.npgettext = function (context, singular, plural, count) { return (count == 1) ? singular : plural; };
  

  django.interpolate = function (fmt, obj, named) {
    if (named) {
      return fmt.replace(/%\(\w+\)s/g, function(match){return String(obj[match.slice(2,-2)])});
    } else {
      return fmt.replace(/%s/g, function(match){return String(obj.shift())});
    }
  };


  /* formatting library */

  django.formats = {
    "DATETIME_FORMAT": "N j, Y, P", 
    "DATETIME_INPUT_FORMATS": [
      "%Y-%m-%d %H:%M:%S", 
      "%Y-%m-%d %H:%M:%S.%f", 
      "%Y-%m-%d %H:%M", 
      "%Y-%m-%d", 
      "%m/%d/%Y %H:%M:%S", 
      "%m/%d/%Y %H:%M:%S.%f", 
      "%m/%d/%Y %H:%M", 
      "%m/%d/%Y", 
      "%m/%d/%y %H:%M:%S", 
      "%m/%d/%y %H:%M:%S.%f", 
      "%m/%d/%y %H:%M", 
      "%m/%d/%y"
    ], 
    "DATE_FORMAT": "N j, Y", 
    "DATE_INPUT_FORMATS": [
      "%Y-%m-%d", 
      "%m/%d/%Y", 
      "%m/%d/%y"
    ], 
    "DECIMAL_SEPARATOR": ".", 
    "FIRST_DAY_OF_WEEK": "0", 
    "MONTH_DAY_FORMAT": "F j", 
    "NUMBER_GROUPING": "3", 
    "SHORT_DATETIME_FORMAT": "m/d/Y P", 
    "SHORT_DATE_FORMAT": "m/d/Y", 
    "THOUSAND_SEPARATOR": ",", 
    "TIME_FORMAT": "P", 
    "TIME_INPUT_FORMATS": [
      "%H:%M:%S", 
      "%H:%M:%S.%f", 
      "%H:%M"
    ], 
    "YEAR_MONTH_FORMAT": "F Y"
  };

  django.get_format = function (format_type) {
    var value = django.formats[format_type];
    if (typeof(value) == 'undefined') {
      return format_type;
    } else {
      return value;
    }
  };

  /* add to global namespace */
  globals.pluralidx = django.pluralidx;
  globals.gettext = django.gettext;
  globals.ngettext = django.ngettext;
  globals.gettext_noop = django.gettext_noop;
  globals.pgettext = django.pgettext;
  globals.npgettext = django.npgettext;
  globals.interpolate = django.interpolate;
  globals.get_format = django.get_format;

}(this));



    (function(win) {
        'use strict';

                    (function(){
  var FLAGS = {
    'compat_api': false,'header_feedback': true,'helpfulness': false,'kumaediting': false,'mdn10_logo': true,'mdn10_tile': true,'page_move': false,'registration_disabled': false,'search_suggestions': false,'share_links': false,'wiki_samples': false
    },
    SWITCHES = {
    'wiki_error_on_delete': false,'wiki_force_immediate_rendering': false,'enable_optimizely': false,'welcome_email': true,'application_ACAO': false,'store_revision_ips': true,'dumb_doc_urls': true
    },
    SAMPLES = {
    
    };
  window.waffle = {
    "flag_is_active": function waffle_flag(flag_name) {
      
      return !!FLAGS[flag_name];
    },
    "switch_is_active": function waffle_switch(switch_name) {
      
      return !!SWITCHES[switch_name];
    },
    "sample_is_active": function waffle_sample(sample_name) {
      
      return !!SAMPLES[sample_name];
    },
    "FLAGS": FLAGS,
    "SWITCHES": SWITCHES,
    "SAMPLES": SAMPLES
  };
})();

        
        // This represents the site configuration
        win.mdn = {
            build: '2aab9d6',
            // Properties and settings for CKEditor will go here
            ckeditor: {},
            // Feature test results and methods will be placed here
            features: {},
            // The path to static assets (images, CSS, JS) in MDN
            staticPath: 'https://developer.cdn.mozilla.net/static/',
            // Optimizely API
            optimizely: win['optimizely'] || [],
            // Site notifications
                        notifications: [],
                        // Wiki-specific settings will be placed here
            wiki: {
                autosuggestTitleUrl: '/en-US/docs/get-documents'
            }
        };
    })(this);
</script>
    <div class="global-notice">
    <div class="wrap center">
              <p><bdi>Join MDN and developers like you at Mozilla's View Source conference, November 2-4 in Portland, Oregon. Learn more at <a href="https://viewsourceconf.org/">https://viewsourceconf.org/</a>.</bdi></p>
          </div>
  </div>


  <ul id="nav-access">
    <li><a href="#document-main" id="skip-main">Skip to main content</a></li>
    <li><a id="skip-language" href="#language">Select language</a></li>
          <li><a href="#q" id="skip-search">Skip to search</a></li>
      </ul>

  <!-- Header -->
  <header id="main-header"><div class="center">

    <div id="tabzilla">
        <a href="http://www.mozilla.org/" class="no-track">mozilla</a>
    </div>

    <div class="clear header-clear"></div>

            <a href="https://developer.mozilla.org/en-US/" class="logo logo-mdn10">Mozilla Developer Network</a>
    
    <div id="nav-sec">
                          <ul>
                  <li>
    
    <form>
      <div class="oauth-login-container">
          <div class="oauth-login-options" tabindex="0">
              <span class="oauth-login-options-text">
                <span class="oauth-login-options-text-icons">Sign in with</span>
                <span class="oauth-login-options-text-no-icons">Sign in</span>
              </span>
              <span class="oauth-icon oauth-persona launch-persona-login wait-for-persona disabled" data-service="Persona" data-next="/en-US/docs/Tools/Debugger-API/Debugger.Memory" title="Persona"><i class="icon-user" aria-hidden="true"></i></span>
              <span class="oauth-icon oauth-github" data-service="GitHub" data-href="/users/github/login/?next=%2Fen-US%2Fdocs%2FTools%2FDebugger-API%2FDebugger.Memory" title="GitHub"><i class="icon-github" aria-hidden="true"></i></span>
          </div>
          <div class="oauth-login-picker" aria-hidden="true">
              <ul>
                  <li class="wait-for-persona disabled"><a href="https://developer.mozilla.org/en-US/users/signin" class="login-link launch-persona-login" data-next="/en-US/docs/Tools/Debugger-API/Debugger.Memory" data-service="Persona"><i class="icon-user" aria-hidden="true"></i>Persona</a></li>
                  <li><a href="https://developer.mozilla.org/users/github/login/?next=%2Fen-US%2Fdocs%2FTools%2FDebugger-API%2FDebugger.Memory" class="login-link" data-service="GitHub"><i class="icon-github" aria-hidden="true"></i>GitHub</a></li>
              </ul>
          </div>
      </div>
    </form>
</li>
                </ul>
            </div>

    <nav id="main-nav" role="navigation"><ul><li><a href="https://developer.mozilla.org/en-US/docs/Web">Web Platform<i aria-hidden="true" class="icon-caret-down"></i></a>

        <div class="submenu submenu-cols-2 js-submenu" id="nav-platform-submenu">
          <div class="submenu-column">
            <div class="title">Technologies</div>
            <ul>
              <li><a href="https://developer.mozilla.org/en-US/docs/Web/HTML">HTML</a></li>
              <li><a href="https://developer.mozilla.org/en-US/docs/Web/CSS">CSS</a></li>
              <li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript">JavaScript</a></li>
              <li><a href="https://developer.mozilla.org/en-US/docs/Web/Guide/Graphics">Graphics</a></li>
              <li><a href="../../Web/API.html">APIs / DOM</a></li>
              <li><a href="https://developer.mozilla.org/en-US/docs/Web/Apps">Apps</a></li>
              <li><a href="https://developer.mozilla.org/en-US/docs/Web/MathML">MathML</a></li>
            </ul>
          </div><div class="submenu-column last">
            <div class="title">References &amp; Guides</div>
            <ul>
              <li><a href="https://developer.mozilla.org/en-US/docs/Learn">Learn the Web</a></li>
              <li><a href="https://developer.mozilla.org/en-US/docs/Web/Tutorials">Tutorials</a></li>
              <li><a href="https://developer.mozilla.org/en-US/docs/Web/Reference">References</a></li>
              <li><a href="https://developer.mozilla.org/en-US/docs/Web/Guide">Developer Guides</a></li>
              <li><a href="https://developer.mozilla.org/en-US/docs/Web/Accessibility">Accessibility</a></li>
              <li><a href="https://developer.mozilla.org/en-US/demos/">Demos</a></li>
              <li><a href="https://developer.mozilla.org/en-US/docs/Web">...more docs</a></li>
            </ul>
          </div>
        </div>
      </li><li><a href="https://developer.mozilla.org/en-US/docs/Zones">Mozilla Docs<i aria-hidden="true" class="icon-caret-down"></i></a>

        <div class="submenu js-submenu" id="nav-zones-submenu">
          <div class="submenu-column">
            <ul>
              <li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons">Add-ons</a></li>
              <li><a href="https://developer.mozilla.org/en-US/docs/Firefox">Firefox</a></li>
              <li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Marketplace">Firefox Marketplace</a></li>
              <li><a href="https://developer.mozilla.org/en-US/docs/Firefox_OS">Firefox OS</a></li>
              <li><a href="https://developer.mozilla.org/en-US/docs/Persona">Persona</a></li>
            </ul>
          </div>
        </div>
      </li><li><a href="https://developer.mozilla.org/en-US/docs/Tools">Developer Tools</a></li><li><a href="https://developer.mozilla.org/en-US/demos/">Demos</a></li><li><a href="https://developer.mozilla.org/en-US/docs/MDN/Feedback">Feedback<i aria-hidden="true" class="icon-caret-down"></i></a>

        <div class="submenu js-submenu" id="nav-contact-submenu">
          <div class="submenu-column">
            <ul>
                <li><a href="https://support.mozilla.org/">Get Firefox help<i aria-hidden="true" class="icon-external-link"></i></a></li>
                <li><a href="http://stackoverflow.com/">Get web development help<i aria-hidden="true" class="icon-external-link"></i></a></li>
            </ul>
            <ul>
              <li><a href="https://developer.mozilla.org/en-US/docs/MDN/Community">Join the MDN community</a></li>
              <li><a href="https://bugzilla.mozilla.org/form.doc">Report a content problem<i aria-hidden="true" class="icon-external-link"></i></a></li>
              <li><a href="https://bugzilla.mozilla.org/form.mdn">Report a bug<i aria-hidden="true" class="icon-external-link"></i></a></li>
            </ul>
          </div>
        </div>

      </li><li class="nav-search-link"><a href="https://developer.mozilla.org/en-US/search" title="Search"><i aria-hidden="true" class="icon-search"></i></a></li><li class="main-nav-search"><form action="https://developer.mozilla.org/en-US/search" method="get" role="search">
        <div class="search-wrap">
          <label for="main-q" class="offscreen">Search</label>
          <input type="search" id="main-q" name="q" placeholder="Search" data-value="" value="">
          <span class="search-trigger"><i aria-hidden="true" class="icon-search"></i></span>&nbsp;
          <button type="submit" class="offscreen">Search</button>
        </div>
      </form></li></ul></nav>
  </div></header>

  <!-- Content will go here -->
  <main id="content"><div class="center clear">
  
                <div class="zone-article-header" id="document-main"><div class="center">
          <!-- zone title -->
          <div class="zone-title"><a href="https://developer.mozilla.org/en-US/docs/Tools">Firefox Developer Tools</a></div>
          <!-- zone image -->
          <div class="zone-image"></div>
        </div></div>
      
     <!-- end is_zone -->


    <div class="wiki-main-content"><div class="center">
            <div class="article-meta">
        <!-- action buttons -->
        
        
        

  <ul class="page-buttons" data-sticky="false"><li><button id="languages-menu" class="transparent" aria-haspopup="true" aria-owns="languages-menu-submenu" aria-expanded="false"><span>Languages</span><i aria-hidden="true" class="icon-globe"></i></button>

        <div class="submenu js-submenu" id="languages-menu-submenu">
          <div class="submenu-column">
            <ul id="translations">
                              <li class="smaller">No translations exist for this article.</li>
              
                              <li><a href="https://developer.mozilla.org/en-US/docs/Tools/Debugger-API/Debugger.Memory$locales" rel="nofollow, noindex" id="translations-add">Add a translation</a></li>
                          </ul>
          </div>
        </div></li><li class="page-buttons-edit"><a href="https://developer.mozilla.org/en-US/docs/Tools/Debugger-API/Debugger.Memory$edit" class="button" data-optimizely-hook="button-edit-doc" id="edit-button">Edit<i aria-hidden="true" class="icon-pencil"></i></a></li><li><button id="advanced-menu" class="only-icon" aria-haspopup="true" aria-owns="advanced-menu-submenu" aria-expanded="false"><span>Advanced</span><i aria-hidden="true" class="icon-cog"></i></button>

        <div class="submenu js-submenu" id="advanced-menu-submenu">
          <!-- this page -->
          <div class="submenu-column">
            <div class="title">Advanced</div>
            <ul>
                <li><a href="https://developer.mozilla.org/en-US/docs/Tools/Debugger-API/Debugger.Memory$history" rel="nofollow, noindex">History</a></li>
                                                                
                
                                                                <li class="page-print"><a href="#" onclick="return window.print();">Print this page</a></li>
            </ul>
          </div>
        </div>
  </li></ul>

        <!-- crumbs -->
          <nav class="crumbs" role="navigation"><ol xmlns:v="http://rdf.data-vocabulary.org/#" aria-label="breadcrumbs">
    <li typeof="v:Breadcrumb"><a href="https://developer.mozilla.org/en-US" rel="v:url" property="v:title">MDN</a></li>
          <li class="crumb" typeof="v:Breadcrumb"><a href="https://developer.mozilla.org/en-US/docs/Tools" rel="v:url" property="v:title">Firefox Developer Tools</a></li>
          <li class="crumb" typeof="v:Breadcrumb"><a href="../Debugger-API.html" rel="v:url" property="v:title">Debugger-API</a></li>
        <li class="crumb" typeof="v:Breadcrumb" property="v:title">Tools/Debugger-API/Debugger.Memory</li>
  </ol></nav>
      </div>

      <!-- heading -->
      <div id="wiki-document-head" class="document-head">
          <span class="from-search-previous-box">
            <a class="button from-search-previous only-icon disabled" title="Previous Search Result" data-empty-title="No Previous Search Result"><i aria-hidden="true" class="icon-chevron-left"></i></a>
          </span>
          <span class="from-search-navigate-wrap">
            <a href="#" class="from-search-navigate"><span class="from-search-navigate-up"><i aria-hidden="true" class="icon-double-angle-up"></i></span><span class="from-search-navigate-down"><i aria-hidden="true" class="icon-double-angle-down"></i></span></a>
          </span>
          <div class="from-search-toc submenu">
            <span class="title">Your Search Results</span>
            <ol></ol>
          </div>
          <span class="from-search-next-box">
            <a class="button from-search-next only-icon disabled" title="Next Search Result" data-empty-title="No Previous Search Result"><i aria-hidden="true" class="icon-chevron-right"></i></a>
          </span>

        <h1>Tools/Debugger-API/Debugger.Memory</h1>

        
                <div class="contributor-avatars" data-all-text="Show all…&lt;span class='hidden'&gt;contributors&lt;/span&gt;">
            <span class="quickstat">
            by 1 contributor:            </span>
            <ul>
                            <li class="shown">
                <a href="https://developer.mozilla.org/en-US/profiles/jimblandy" title="View profile: jimblandy">
                <noscript data-width="34" data-height="34" data-class="avatar" data-alt="jimblandy" data-src="../../../../../secure.gravatar.com/avatar/26684b295a47bf5a82b22010a9427ade6aac.jpeg?s=34&amp;r=pg&amp;d=https%3A%2F%2Fdeveloper.cdn.mozilla.net%2Fmedia%2F%2Fimg%2Favatar.png">jimblandy</noscript></a>
                </li>
                        </ul>
        </div>
        
      </div>
      
      <!-- start the main content container -->
        <div id="wiki-column-container" class="wiki-right-present wiki-left-present">

                    <!-- additional controls row; hidden unless needed -->
          <div id="wiki-controls" class="column-container column-container-reverse">
            <div class="column-strip">
              <!-- Show TOC "show" link -->
            </div>
            <div class="column-half">
            </div>
            <div class="column-strip quick-links hidden">
              <a href="#show-quick-links" class="title smaller" id="show-quick-links"><i aria-hidden="true" class="icon-caret-down"></i>Show Sidebar</a>
            </div>
          </div>
          
          <!-- content row with three strips -->
          <div class="column-container column-container-reverse">

                          <!-- TOC, approvals, etc -->
              <div class="column-strip wiki-column" id="wiki-right">
                            <!-- table of contents -->
              <div id="toc" class="toc toggleable" data-closed="true">
                <a href="#toc" class="title toggler" data-open-icon="icon-plus" data-closed-icon="icon-minus">In This Article<i></i></a>
                <ol class="toggle-container">
                  <li><ol><li><a href="#Allocation_Site_Tracking" rel="internal">Allocation Site Tracking</a></li><li><a href="#Allocation_Logging" rel="internal">Allocation Logging</a></li><li><a href="#Censuses" rel="internal">Censuses</a></li></ol></li><li><a href="#Accessor_Properties_of_the_Debugger.Memory.prototype_Object" rel="internal">Accessor Properties of the <code>Debugger.Memory.prototype</code> Object</a></li><li><a href="#Debugger.Memory_Handler_Functions" rel="internal">Debugger.Memory Handler Functions</a></li><li><a href="#Function_Properties_of_the_Debugger.Memory.prototype_Object" rel="internal">Function Properties of the <code>Debugger.Memory.prototype</code> Object</a></li><li><a href="#Memory_Use_Analysis_Exposes_Implementation_Details" rel="internal">Memory Use Analysis Exposes Implementation Details</a><ol><li><a href="#Objects" rel="internal">Objects</a></li><li><a href="#Strings" rel="internal">Strings</a></li><li><a href="#Scripts" rel="internal">Scripts</a><ol><li><a href="#Source_Metadata" rel="internal">Source Metadata</a></li></ol></li></ol></li>
                </ol>
                              </div>
                            </div>
            
                                                  
            <!-- center: main article content -->
            <div id="wiki-content" class="column-half wiki-column text-content">

              
              
                                                                                          
              <!-- just the article content -->
              <article id="wikiArticle">
                                                      <h1 id="Debugger.Memory">Debugger.Memory</h1>
<p>The <a href="../Debugger-API.html" title="The Debugger API"><code>Debugger API</code></a> can help tools observe the debuggee’s memory use in various ways:</p>
<ul>
<li><p>It can mark each new object with the JavaScript call stack at which it was allocated.</p></li>
<li><p>It can log all object allocations, yielding a stream of JavaScript call stacks at which allocations have occurred.</p></li>
<li><p>It can compute a <em>census</em> of items belonging to the debuggee, categorizing items in various ways, and yielding item counts.</p></li>
</ul>
<p>If <i>dbg</i> is a <a href="Debugger-2.html" title="The Debugger object"><code>Debugger</code></a> instance, then the methods and accessor properties of <code><i>dbg</i>.memory</code> control how <i>dbg</i> observes its debuggees’ memory use. The <code><i>dbg</i>.memory</code> object is an instance of <code>Debugger.Memory</code>; its inherited accesors and methods are described below.</p>
<h3 id="Allocation_Site_Tracking">Allocation Site Tracking</h3>
<p>The JavaScript engine marks each new object with the call stack at which it was allocated, if:</p>
<ul>
<li><p>the object is allocated in the scope of a global object that is a debuggee of some <a href="Debugger-2.html" title="The Debugger object"><code>Debugger</code></a> instance <i>dbg</i>; and</p></li>
<li><p><code><i>dbg</i>.memory.<a href="Debugger-5.html#trackingallocationsites" title="Debugger.Memory: trackingAllocationSites">trackingAllocationSites</a></code> is set to <code>true</code>.</p></li>
</ul>
<p>Given a <a href="Debugger.html" title="Debugger.Object"><code>Debugger.Object</code></a> instance <i>dobj</i> referring to some object, <code><i>dobj</i>.<a href="Debugger.html#allocationsite" title="Debugger.Object: allocationSite">allocationSite</a></code> returns a <a href="https://developer.mozilla.org/en-US/docs/Mozilla/Projects/SpiderMonkey/SavedFrame" title="SavedFrame">saved call stack</a> indicating where <i>dobj</i>’s referent was allocated.</p>
<h3 id="Allocation_Logging">Allocation Logging</h3>
<p>If <i>dbg</i> is a <a href="Debugger-2.html" title="The Debugger object"><code>Debugger</code></a> instance, and <code><i>dbg</i>.memory.<a href="Debugger-5.html#trackingallocationsites" title="Debugger.Memory: trackingAllocationSites">trackingAllocationSites</a></code> is set to <code>true</code>, then the JavaScript engine logs each object allocated by <i>dbg</i>’s debuggee code. You can retrieve the current log by calling <code><i>dbg</i>.memory.<a href="Debugger-5.html#drain-alloc-log" title="Debugger.Memory: drainAllocationsLog">drainAllocationsLog</a></code>. You can control the limit on the log’s size by setting <code><i>dbg</i>.memory.<a href="Debugger-5.html#max-alloc-log" title="Debugger.Memory: maxAllocationsLogLength">maxAllocationsLogLength</a></code>.</p>
<h3 id="Censuses">Censuses</h3>
<p>A <em>census</em> is a complete traversal of the graph of all reachable memory items belonging to a particular <code>Debugger</code>‘s debuggees. It produces a count of those items, broken down by various criteria. If <i>dbg</i> is a <a href="Debugger-2.html" title="The Debugger object"><code>Debugger</code></a> instance, you can call <code><i>dbg</i>.memory.<a href="Debugger-5.html#take-census" title="Debugger.Memory: takeCensus">takeCensus</a></code> to conduct a census of its debuggees’ possessions.</p>
<h2 id="Accessor_Properties_of_the_Debugger.Memory.prototype_Object">Accessor Properties of the <code>Debugger.Memory.prototype</code> Object</h2>
<p>If <i>dbg</i> is a <a href="Debugger-2.html" title="The Debugger object"><code>Debugger</code></a> instance, then <code>&lt;i&gt;dbg&lt;/i&gt;.memory</code> is a <code>Debugger.Memory</code> instance, which inherits the following accessor properties from its prototype:</p>
<dl>
<dt><code id="trackingallocationsites">trackingAllocationSites</code></dt>
<dd><p>A boolean value indicating whether this <code>Debugger.Memory</code> instance is capturing the JavaScript execution stack when each Object is allocated. This accessor property has both a getter and setter: assigning to it enables or disables the allocation site tracking. Reading the accessor produces <code>true</code> if the Debugger is capturing stacks for Object allocations, and <code>false</code> otherwise. Allocation site tracking is initially disabled in a new Debugger.</p>
<p>Assignment is fallible: if the Debugger cannot track allocation sites, it throws an <code>Error</code> instance.</p>
<p>You can retrieve the allocation site for a given object with the <a href="Debugger.html#allocationsite" title="Debugger.Object: allocationSite"><code>Debugger.Object.prototype.allocationSite</code></a> accessor property.</p>
</dd>
<dt><code id="max-alloc-log">maxAllocationsLogLength</code></dt>
<dd><p>The maximum number of allocation sites to accumulate in the allocations log at a time. This accessor can be both fetched and stored to. Its default value is <code>5000</code>.</p>
</dd>
<dt><code id="allocationsLogOverflowed">allocationsLogOverflowed</code></dt>
<dd><p>Returns <code>true</code> if there have been more than [<code>maxAllocationsLogLength</code>][#max-alloc-log] allocations since the last time [<code>drainAllocationsLog</code>][#drain-alloc-log] was called and some data has been lost. Returns <code>false</code> otherwise.</p>
</dd>
</dl>
<h2 id="Debugger.Memory_Handler_Functions">Debugger.Memory Handler Functions</h2>
<p>Similar to <a href="../Debugger-API.html" title="The Debugger API"><code>Debugger</code>’s handler functions</a>, <code>Debugger.Memory</code> inherits accessor properties that store handler functions for SpiderMonkey to call when given events occur in debuggee code.</p>
<p>Unlike <code>Debugger</code>‘s hooks, <code>Debugger.Memory</code>’s handlers’ return values are not significant, and are ignored. The handler functions receive the <code>Debugger.Memory</code>’s owning <code>Debugger</code> instance as their <code>this</code> value. The owning <code>Debugger</code>’s <code>uncaughtExceptionHandler</code> is still fired for errors thrown in <code>Debugger.Memory</code> hooks.</p>
<p>On a new <code>Debugger.Memory</code> instance, each of these properties is initially <code>undefined</code>. Any value assigned to a debugging handler must be either a function or <code>undefined</code>; otherwise a <code>TypeError</code> is thrown.</p>
<p>Handler functions run in the same thread in which the event occurred. They run in the compartment to which they belong, not in a debuggee compartment.</p>
<dl>
<dt><code>onGarbageCollection(<i>statistics</i>)</code></dt>
<dd><p>A garbage collection cycle spanning one or more debuggees has just been completed.</p>
<p>The <em>statistics</em> parameter is an object containing information about the GC cycle. It has the following properties:</p>
<dl>
<dt><code>collections</code></dt>
<dd><p>The <code>collections</code> property’s value is an array. Because SpiderMonkey’s collector is incremental, a full collection cycle may consist of multiple discrete collection slices with the JS mutator running interleaved. For each collection slice that occurred, there is an entry in the <code>collections</code> array with the following form:</p>
<pre class="language-js"><code>
{
  "startTimestamp": <i>timestamp</i>,
  "endTimestamp": <i>timestamp</i>,
}
</code></pre>

<p>Here the <em>timestamp</em> values are <a href="Conventions.html#timestamps" title="Debugger API: General Conventions: Timestamps">timestamps</a> of the GC slice’s start and end events.</p>
</dd>
<dt><code>reason</code></dt>
<dd><p>A very short string describing th reason why the collection was triggered. Known values include the following:</p>
<ul>
<li>“API”</li>
<li>“EAGER_ALLOC_TRIGGER”</li>
<li>“DESTROY_RUNTIME”</li>
<li>“DESTROY_CONTEXT”</li>
<li>“LAST_DITCH”</li>
<li>“TOO_MUCH_MALLOC”</li>
<li>“ALLOC_TRIGGER”</li>
<li>“DEBUG_GC”</li>
<li>“COMPARTMENT_REVIVED”</li>
<li>“RESET”</li>
<li>“OUT_OF_NURSERY”</li>
<li>“EVICT_NURSERY”</li>
<li>“FULL_STORE_BUFFER”</li>
<li>“SHARED_MEMORY_LIMIT”</li>
<li>“PERIODIC_FULL_GC”</li>
<li>“INCREMENTAL_TOO_SLOW”</li>
<li>“DOM_WINDOW_UTILS”</li>
<li>“COMPONENT_UTILS”</li>
<li>“MEM_PRESSURE”</li>
<li>“CC_WAITING”</li>
<li>“CC_FORCED”</li>
<li>“LOAD_END”</li>
<li>“POST_COMPARTMENT”</li>
<li>“PAGE_HIDE”</li>
<li>“NSJSCONTEXT_DESTROY”</li>
<li>“SET_NEW_DOCUMENT”</li>
<li>“SET_DOC_SHELL”</li>
<li>“DOM_UTILS”</li>
<li>“DOM_IPC”</li>
<li>“DOM_WORKER”</li>
<li>“INTER_SLICE_GC”</li>
<li>“REFRESH_FRAME”</li>
<li>“FULL_GC_TIMER”</li>
<li>“SHUTDOWN_CC”</li>
<li>“FINISH_LARGE_EVALUATE”</li>
<li>“USER_INACTIVE”</li>
</ul>
</dd>
<dt><code>nonincrementalReason</code></dt>
<dd><p>If SpiderMonkey’s collector determined it could not incrementally collect garbage, and had to do a full GC all at once, this is a short string describing the reason it determined the full GC was necessary. Otherwise, <code>null</code> is returned.</p>
</dd>
</dl>
</dd>
</dl>
<h2 id="Function_Properties_of_the_Debugger.Memory.prototype_Object">Function Properties of the <code>Debugger.Memory.prototype</code> Object</h2>
<dl>
<dt><code id="drain-alloc-log">drainAllocationsLog()</code></dt>
<dd><p>When <code>trackingAllocationSites</code> is <code>true</code>, this method returns an array of recent <code>Object</code> allocations within the set of debuggees. <em>Recent</em> is defined as the <code>maxAllocationsLogLength</code> most recent <code>Object</code> allocations since the last call to <code>drainAllocationsLog</code>. Therefore, calling this method effectively clears the log.</p>
<p>Objects in the array are of the form:</p>
<pre class="language-js"><code>
{
  "timestamp": <i>timestamp</i>,
  "frame": <i>allocationSite</i>
}
</code></pre>

<p>Here <i>timestamp</i> is the <a href="Conventions.html#timestamps" title="Debugger API: General Conventions: Timestamps">timestamp</a> of the allocation event and <i>allocationSite</i> is an allocation site (as a <a href="https://developer.mozilla.org/en-US/docs/Mozilla/Projects/SpiderMonkey/SavedFrame" title="SavedFrame">captured stack</a>). <i>allocationSite</i> is <code>null</code> for objects allocated with no JavaScript frames on the stack.</p>
<p>When <code>trackingAllocationSites</code> is <code>false</code>, <code>drainAllocationsLog()</code> throws an <code>Error</code>.</p>
</dd>
<dt><code id="take-census">takeCensus()</code></dt>
<dd><p>Carry out a census of the debuggee compartments’ contents. A <em>census</em> is a complete traversal of the graph of all reachable memory items belonging to a particular <code>Debugger</code>’s debuggees. The census produces a count of those items, broken down by various criteria.</p>
<p>The <code>takeCensus</code> method returns an object of the form:</p>
<pre class="language-js"><code>
{
  "objects": { <i>class</i>: <i>tally</i>, ... },
  "scripts": <i>tally</i>,
  "strings": <i>tally</i>,
  "other": { <i>type name</i>: <i>tally</i>, ... }
}
</code></pre>

<p>Each <i>tally</i> has the form:</p>
<pre class="language-js"><code>
{ "count": <i>count</i> }
</code></pre>

<p>where <i>count</i> is the number of items in the category.</p>
<p>The <code>"objects"</code> property’s value contains the tallies of JavaScript objects, broken down by their ECMAScript <code>[[Class]]</code> internal property values. Each <i>class</i> is a string.</p>
<p>The <code>"scripts"</code> property’s value tallies the in-memory representation of JavaScript code.</p>
<p>The <code>"strings"</code> property’s value tallies the debuggee’s strings.</p>
<p>The <code>"other"</code> property’s value contains the tallies of other items used internally by SpiderMonkey, broken down by their C++ type name.</p>
<p>Because performing a census requires traversing the entire graph of objects in debuggee compartments, it is an expensive operation. On developer hardware in 2014, traversing a memory graph containing roughly 130,000 nodes and 410,000 edges took roughly 100ms. The traversal itself temporarily allocates one hash table entry per node (roughly two address-sized words) in addition to the per-category counts, whose size depends on the number of categories.</p>
</dd>
</dl>
<h2 id="Memory_Use_Analysis_Exposes_Implementation_Details">Memory Use Analysis Exposes Implementation Details</h2>
<p>Memory analysis may yield surprising results, because browser implementation details that are transparent to content JavaScript often have visible effects on memory consumption. Web developers need to know their pages’ actual memory consumption on real browsers, so it is correct for the tool to expose these behaviors, as long as it is done in a way that helps developers make decisions about their own code.</p>
<p>This section covers some areas where Firefox’s actual behavior deviates from what one might expect from the specified behavior of the web platform.</p>
<h3 id="Objects">Objects</h3>
<p>SpiderMonkey objects usually use less memory than the naïve “table of properties with attributes” model would suggest. For example, it is typical for many objects to have identical sets of properties, with only the properties’ values varying from one object to the next. To take advantage of this regularity, SpiderMonkey objects with identical sets of properties may share their property metadata; only property values are stored directly in the object.</p>
<p>Array objects may also be optimized, if the set of live indices is dense.</p>
<h3 id="Strings">Strings</h3>
<p>SpiderMonkey has three representations of strings:</p>
<ul>
<li><p>Normal: the string’s text is counted in its size.</p></li>
<li><p>Substring: the string is a substring of some other string, and points to that string for its storage. This representation may result in a small string retaining a very large string. However, the memory consumed by the string itself is a small constant independent of its size, since it is simply a reference to the larger string, a start position, and a length.</p></li>
<li><p>Concatenations: When asked to concatenate two strings, SpiderMonkey may elect to delay copying the strings’ data, and represent the result simply as a pointer to the two original strings. Again, such a string retains other strings, but the memory consumed by the string itself is a small constant independent of its size, since it is simply a pair of pointers.</p></li>
</ul>
<p>SpiderMonkey converts strings from the more complex representations to the simpler ones when it pleases. Such conversions usually increase memory consumption.</p>
<p>SpiderMonkey shares some strings amongst all web pages and browser JS. These shared strings, called <em>atoms</em>, are not included in censuses’ string tallies.</p>
<h3 id="Scripts">Scripts</h3>
<p>SpiderMonkey has a complex, hybrid representation of JavaScript code. There are four representations kept in memory:</p>
<ul>
<li><p><em>Source code</em>. SpiderMonkey retains a copy of most JavaScript source code.</p></li>
<li><p><em>Compressed source code</em>. SpiderMonkey compresses JavaScript source code, and de-compresses it on demand. Heuristics determine how long to retain the uncompressed code.</p></li>
<li><p><em>Bytecode</em>. This is SpiderMonkey’s parsed representation of JavaScript. Bytecode can be interpreted directly, or used as input to a just-in-time compiler. Source is parsed into bytecode on demand; functions that are never called are never parsed.</p></li>
<li><p><em>Machine code</em>. SpiderMonkey includes several just-in-time compilers, each of which translates JavaScript source or bytecode to machine code. Heuristics determine which code to compile, and which compiler to use. Machine code may be dropped in response to memory pressure, and regenerated as needed.</p></li>
</ul>
<p>Furthermore, SpiderMonkey tracks which types of values have appeared in variables and object properties. This type information can be large.</p>
<p>In a census, all the various forms of JavaScript code are placed in the <code>"script"</code> category. Type information is accounted to the <code>"types"</code> category.</p>
<h4 id="Source_Metadata">Source Metadata</h4>
<dl>
    <dt>Generated from file:</dt><dt>
    </dt><dd>js/src/doc/Debugger/Debugger.Memory.md</dd>
    <dt>Watermark:</dt>
    <dd id="watermark">sha256:914b902368a8cf90d94b1449c829ac3c9f86a569e04ad0e219340b6ac0c7d00e</dd>
    <dt>Changeset:</dt>
    <dd><a class="external" href="https://hg.mozilla.org/mozilla-central/rev/c36186e18a6b">c36186e18a6b+</a></dd>
</dl>
                                                </article>

            

              
                <!-- contributors -->
                <div class="wiki-block contributors">
                  <h2 class="offscreen">Document Tags and Contributors</h2>
                                    
                                      <div class="contributors-sub"> <i aria-hidden="true" class="icon-group"></i><strong>Contributors to this page:</strong>         <a href="https://developer.mozilla.org/en-US/profiles/jimblandy">jimblandy</a>     </div>                  
                                      <div class="contributors-sub">
                      <i aria-hidden="true" class="icon-clock-o"></i><strong>Last updated by:</strong>
                      <a href="https://developer.mozilla.org/en-US/profiles/jimblandy">jimblandy</a>,
                      <time datetime="2015-04-13T15:12:49-07:00">Apr 13, 2015, 3:12:49 PM</time>
                    </div>
                                  </div>
                          </div>

                          <!-- quick links and zone subnav strip -->
              <div id="wiki-left" class="column-strip wiki-column">

              
                <a href="#quick-links" class="title smaller" id="quick-links-toggle"><i aria-hidden="true" class="icon-caret-up"></i>Hide Sidebar</a>

                                  <!-- zone subnav -->
                    <nav class="zone-subnav-container" role="navigation">
    <div class="subnav" id="Subnav">
      

<ol>
 <li><a href="#">Creating</a>

  <ol>
   <li><a href="https://developer.mozilla.org/en-US/docs/Tools/Scratchpad">Scratchpad</a></li>
   <li><a href="https://developer.mozilla.org/en-US/docs/Tools/Style_Editor">Style Editor</a></li>
   <li><a href="https://developer.mozilla.org/en-US/docs/Tools/Shader_Editor">Shader Editor</a></li>
   <li><a href="https://developer.mozilla.org/en-US/docs/Tools/Web_Audio_Editor">Web Audio Editor</a></li>
  </ol>
 </li>
 <li><a href="#">Debugging</a>
  <ol>
   <li><a href="https://developer.mozilla.org/en-US/docs/Tools/Page_Inspector">Page Inspector</a></li>
   <li><a href="https://developer.mozilla.org/en-US/docs/Tools/Web_Console">Web Console</a></li>
   <li><a href="https://developer.mozilla.org/en-US/docs/Tools/Debugger">Debugger</a></li>
   <li><a href="https://developer.mozilla.org/en-US/docs/Tools/Network_Monitor">Network Monitor</a></li>
   <li><a href="https://developer.mozilla.org/en-US/docs/Tools/Storage_Inspector">Storage Inspector</a></li>
   <li><a href="https://developer.mozilla.org/en-US/docs/Tools/GCLI">Developer Toolbar</a></li>
   <li><a href="https://developer.mozilla.org/en-US/docs/Tools/3D_View">3D View</a></li>
   <li><a href="https://developer.mozilla.org/en-US/docs/Tools/Eyedropper">Eyedropper</a></li>
   <li><a href="https://developer.mozilla.org/en-US/docs/tools/Working_with_iframes">Selecting iframes</a></li>
   <li><a href="https://developer.mozilla.org/en-US/docs/Tools/View_source">View Source</a></li>
  </ol>
 </li>
 <li><a href="#">Mobile</a>
  <ol>
   <li><a href="https://developer.mozilla.org/en-US/Firefox_OS/Using_the_App_Manager">App Manager</a></li>
   <li><a href="https://developer.mozilla.org/en-US/docs/Tools/WebIDE">WebIDE</a></li>
   <li><a href="https://developer.mozilla.org/en-US/docs/Tools/Remote_Debugging/Firefox_for_Android">Firefox for Android</a></li>
   <li><a href="https://developer.mozilla.org/en-US/docs/Tools/Firefox_OS_Simulator">Firefox OS Simulator</a></li>
   <li><a href="https://developer.mozilla.org/en-US/docs/Tools/Responsive_Design_View">Responsive Design View</a></li>
  </ol>
 </li>
 <li><a href="https://developer.mozilla.org/en-US/docs/Tools/Performance">Performance</a>
  <ol>
   <li><a href="https://developer.mozilla.org/en-US/docs/Tools/Performance/Frame_rate">Frame rate graph</a></li>
   <li><a href="https://developer.mozilla.org/en-US/docs/Tools/Performance/Waterfall">Waterfall</a></li>
   <li><a href="https://developer.mozilla.org/en-US/docs/Tools/Performance/Call_Tree">Call Tree</a></li>
   <li><a href="https://developer.mozilla.org/en-US/docs/Tools/Performance/Flame_Chart">Flame Chart</a></li>
   <li><a href="https://developer.mozilla.org/en-US/docs/Tools/Paint_Flashing_Tool">Paint Flashing Tool</a></li>
   <li><a href="https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Reflow_events">Reflow Event Logging</a></li>
   <li><a href="https://developer.mozilla.org/en-US/docs/Tools/Network_Monitor#Performance_analysis">Network Performance</a></li>
  </ol>
 </li>
 <li><a href="#">Debugging the browser</a>
  <ol>
   <li><a href="https://developer.mozilla.org/en-US/docs/Tools/Browser_Console">Browser Console</a></li>
   <li><a href="https://developer.mozilla.org/en-US/docs/Tools/Browser_Toolbox">Browser Toolbox</a></li>
  </ol>
 </li>
 <li><a href="#">Extending the devtools</a>
  <ol>
   <li><a href="https://developer.mozilla.org/en-US/docs/Tools/Adding_a_panel_to_the_toolbox">Adding a panel to the toolbox</a></li>
   <li><a href="https://developer.mozilla.org/en-US/docs/Tools/Example_add-ons">Example devtools add-ons</a></li>
   <li><a href="https://wiki.mozilla.org/Remote_Debugging_Protocol">Remote Debugging Protocol</a></li>
   <li><a href="https://wiki.mozilla.org/Remote_Debugging_Protocol_Stream_Transport">Stream Transport</a></li>
   <li><a href="https://developer.mozilla.org/en-US/docs/Tools/Editor">Source Editor</a></li>
   <li><a href="../Debugger-API.html">The <code>Debugger</code> Interface</a></li>
   <li><a href="https://developer.mozilla.org/en-US/docs/Tools/Web_Console/Custom_output">Web Console custom output</a></li>
  </ol>
 </li>
 <li><a href="https://developer.mozilla.org/en-US/docs/Tools_Toolbox#Settings">Settings</a></li>
 <li><a href="https://developer.mozilla.org/en-US/docs/Tools/Release_notes">Release notes</a></li>
</ol>
    </div>
  </nav>&nbsp;
                
                
                <!-- approvals -->
                
              
              </div>
                      </div>
        </div>
      </div>
    </div> <!-- ends "main-content" -->

  <menu type="context" id="edit-history-menu">
    <menuitem data-action="/en-US/docs/Tools/Debugger-API/Debugger.Memory$edit" label="Edit page"></menuitem>
    <menuitem data-action="/en-US/docs/Tools/Debugger-API/Debugger.Memory$history" label="View page history"></menuitem>
  </menu>
  </div></main>

  <!-- Footer -->
  <footer><div class="center">
    <div class="column-container">
      <div class="column-main">
                <div class="contentinfo">
          <p>© 2005-2015 Mozilla Developer Network and individual contributors.</p> <p>Content is available under <a href="https://developer.mozilla.org/en-US/docs/MDN/About#Copyrights_and_licenses">these licenses</a>.</p>          <ul>
            <li><a href="https://developer.mozilla.org/docs/MDN/About">About MDN</a></li>
            <li><a href="http://www.mozilla.org/about/legal/terms/mozilla">Terms</a></li>
            <li><a href="http://www.mozilla.org/privacy/websites/">Privacy</a></li>
            <li><a href="http://www.mozilla.org/privacy/websites/#cookies">Cookies</a></li>
            <li><a href="http://github.com/mozilla/kuma">Contribute to the code</a></li>
          </ul>
        <p></p>
                </div>
      </div>
      <div class="column-strip">
                                  </div>
    </div>
  </div></footer>

  <!-- site js -->
          <!--[if lte IE 8]><script src="https://developer.cdn.mozilla.net/static/js/libs/selectivizr-1.0.2/selectivizr-build.js"></script><![endif]-->

    <form id="_persona_login" method="post" action="https://developer.mozilla.org/users/persona/signin" data-csrf-token-url="/users/persona/csrf" data-request="{&quot;siteName&quot;: &quot;Mozilla Developer Network&quot;, &quot;siteLogo&quot;: &quot;/static/img/opengraph-logo.png&quot;}" data-persona-script="../../../../../login.persona.org/include.js">
  <input type="hidden" name="csrfmiddlewaretoken" value="" id="_persona_csrf_token">
  <input type="hidden" name="next" value="" id="_persona_next_url">
  <input type="hidden" name="process" value="" id="_persona_process">
  <input type="hidden" name="assertion" id="_persona_assertion">
</form>

    <script src="../../../../../developer.cdn.mozilla.net/static/js/main-min2bff.js?build=2aab9d6"></script>

      <script>
        if(window.mdn && mdn.analytics) mdn.analytics.trackOutboundLinks();
      </script>

      
    <script src="../../../../../developer.cdn.mozilla.net/static/js/wiki-min2bff.js?build=2aab9d6" async="" id="wikiscript"></script>

    <script type="text/javascript">
            mdn.optimizely.push(['activate', 2796520257]);
  </script>

  
  


<!-- Mirrored from developer.mozilla.org/en-US/docs/Tools/Debugger-API/Debugger.Memory by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 01 Oct 2015 18:55:17 GMT -->
</body></html>