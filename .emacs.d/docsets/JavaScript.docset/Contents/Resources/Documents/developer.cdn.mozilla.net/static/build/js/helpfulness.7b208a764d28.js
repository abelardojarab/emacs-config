(function(win,doc,$){var waitBeforeAsking=6e4;var articleTracker=doc.location.pathname+"#answered-helpful";if(win.mdn.features.localStorage){var ignore=localStorage.getItem("helpful-ignore")==="true";var articleAskedRecently=parseInt(localStorage.getItem(articleTracker),10)>Date.now();var helpfulnessAskedRecently=parseInt(localStorage.getItem("helpfulnessTracker"),10)>Date.now();if(!ignore&&!articleAskedRecently&&!helpfulnessAskedRecently){setTimeout(inquire,waitBeforeAsking)}}function inquire(){var helpfulnessAskedRecently=parseInt(localStorage.getItem("helpfulnessTracker"),10)>Date.now();if(helpfulnessAskedRecently){return}if(win.ga)ga("set","dimension7","Yes");askAgainLater();var ask=gettext("Did this page help you?")+'<br> <a href="#" class="notification-button" id="helpful-yes">'+gettext("Yes")+'</a><a href="#" class="notification-button" id="helpful-no">'+gettext("No")+'</a><a id="helpful-ignore" href="#">'+gettext("Never ask me again")+"</a>";var notification=mdn.Notifier.growl(ask,{closable:true,duration:0}).question();$("#helpful-yes").on("click",function(e){e.preventDefault();confirm("Thanks for your feedback!","success","Yes")});$("#helpful-no").on("click",function(e){e.preventDefault();confirm("","error","No")});$("#helpful-ignore").on("click",function(e){e.preventDefault();localStorage.setItem("helpful-ignore","true");confirm("We won't bug you again.","info","Ignore")});var unhelpfulOptions=[{val:"Translate",text:gettext("Translate it into my language")},{val:"Make-Simpler",text:gettext("Make explanations clearer")},{val:"Needs-More-Info",text:gettext("Add more details")},{val:"Needs-Correction",text:gettext("Fix incorrect information")},{val:"Needs-Examples",text:gettext("Add or improve examples")},{val:"SEO",text:gettext("My search should have led to a different article")},{val:"Other",text:gettext("Something else")}];var $select=$("<select />").attr({id:"helpful-detail"}).append($("<option>").attr("selected","selected").text(gettext("Choose one...")));$(unhelpfulOptions).each(function(){$select.append($("<option>").attr("value",this.val).text(this.text))});function confirm(msg,type,label){if(type==="error"){mdn.analytics.trackEvent({category:"Helpful",action:"Clicked",label:label});notification.error(gettext("Uh oh. What would make it better?")+"<br>"+$select[0].outerHTML,0);$("#helpful-detail").on("change",function(e){e.preventDefault();confirm(gettext("Thanks! We'll fix it."),"info",$(this).val())})}else{mdn.analytics.trackEvent({category:"Helpful",action:"Clicked",label:label});notification[type](gettext(msg),2e3)}}}function askAgainLater(){localStorage.setItem(articleTracker,Date.now()+1e3*60*60*24*180);localStorage.setItem("helpfulnessTracker",Date.now()+1e3*60*60*24*7)}})(window,document,jQuery);